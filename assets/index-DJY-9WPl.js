(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jsxRuntime={exports:{}},reactJsxRuntime_production={};var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,a,i){var l=null;if(i!==void 0&&(l=""+i),a.key!==void 0&&(l=""+a.key),"key"in a){i={};for(var p in a)p!=="key"&&(i[p]=a[p])}else i=a;return a=i.ref,{$$typeof:t,type:r,key:l,ref:a!==void 0?a:null,props:i}}return reactJsxRuntime_production.Fragment=e,reactJsxRuntime_production.jsx=n,reactJsxRuntime_production.jsxs=n,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),s=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),v=Symbol.iterator;function I(Se){return Se===null||typeof Se!="object"?null:(Se=v&&Se[v]||Se["@@iterator"],typeof Se=="function"?Se:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,X={};function ge(Se,et,vn){this.props=Se,this.context=et,this.refs=X,this.updater=vn||G}ge.prototype.isReactComponent={},ge.prototype.setState=function(Se,et){if(typeof Se!="object"&&typeof Se!="function"&&Se!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Se,et,"setState")},ge.prototype.forceUpdate=function(Se){this.updater.enqueueForceUpdate(this,Se,"forceUpdate")};function ie(){}ie.prototype=ge.prototype;function Pe(Se,et,vn){this.props=Se,this.context=et,this.refs=X,this.updater=vn||G}var je=Pe.prototype=new ie;je.constructor=Pe,W(je,ge.prototype),je.isPureReactComponent=!0;var rt=Array.isArray;function qt(){}var de={H:null,A:null,T:null,S:null},se=Object.prototype.hasOwnProperty;function he(Se,et,vn){var Tn=vn.ref;return{$$typeof:t,type:Se,key:et,ref:Tn!==void 0?Tn:null,props:vn}}function pe(Se,et){return he(Se.type,et,Se.props)}function Ae(Se){return typeof Se=="object"&&Se!==null&&Se.$$typeof===t}function Ce(Se){var et={"=":"=0",":":"=2"};return"$"+Se.replace(/[=:]/g,function(vn){return et[vn]})}var Te=/\/+/g;function Hr(Se,et){return typeof Se=="object"&&Se!==null&&Se.key!=null?Ce(""+Se.key):et.toString(36)}function or(Se){switch(Se.status){case"fulfilled":return Se.value;case"rejected":throw Se.reason;default:switch(typeof Se.status=="string"?Se.then(qt,qt):(Se.status="pending",Se.then(function(et){Se.status==="pending"&&(Se.status="fulfilled",Se.value=et)},function(et){Se.status==="pending"&&(Se.status="rejected",Se.reason=et)})),Se.status){case"fulfilled":return Se.value;case"rejected":throw Se.reason}}throw Se}function ze(Se,et,vn,Tn,xn){var Sn=typeof Se;(Sn==="undefined"||Sn==="boolean")&&(Se=null);var Lr=!1;if(Se===null)Lr=!0;else switch(Sn){case"bigint":case"string":case"number":Lr=!0;break;case"object":switch(Se.$$typeof){case t:case e:Lr=!0;break;case h:return Lr=Se._init,ze(Lr(Se._payload),et,vn,Tn,xn)}}if(Lr)return xn=xn(Se),Lr=Tn===""?"."+Hr(Se,0):Tn,rt(xn)?(vn="",Lr!=null&&(vn=Lr.replace(Te,"$&/")+"/"),ze(xn,et,vn,"",function($o){return $o})):xn!=null&&(Ae(xn)&&(xn=pe(xn,vn+(xn.key==null||Se&&Se.key===xn.key?"":(""+xn.key).replace(Te,"$&/")+"/")+Lr)),et.push(xn)),1;Lr=0;var ti=Tn===""?".":Tn+":";if(rt(Se))for(var ei=0;ei<Se.length;ei++)Tn=Se[ei],Sn=ti+Hr(Tn,ei),Lr+=ze(Tn,et,vn,Sn,xn);else if(ei=I(Se),typeof ei=="function")for(Se=ei.call(Se),ei=0;!(Tn=Se.next()).done;)Tn=Tn.value,Sn=ti+Hr(Tn,ei++),Lr+=ze(Tn,et,vn,Sn,xn);else if(Sn==="object"){if(typeof Se.then=="function")return ze(or(Se),et,vn,Tn,xn);throw et=String(Se),Error("Objects are not valid as a React child (found: "+(et==="[object Object]"?"object with keys {"+Object.keys(Se).join(", ")+"}":et)+"). If you meant to render a collection of children, use an array instead.")}return Lr}function An(Se,et,vn){if(Se==null)return Se;var Tn=[],xn=0;return ze(Se,Tn,"","",function(Sn){return et.call(vn,Sn,xn++)}),Tn}function jt(Se){if(Se._status===-1){var et=Se._result;et=et(),et.then(function(vn){(Se._status===0||Se._status===-1)&&(Se._status=1,Se._result=vn)},function(vn){(Se._status===0||Se._status===-1)&&(Se._status=2,Se._result=vn)}),Se._status===-1&&(Se._status=0,Se._result=et)}if(Se._status===1)return Se._result.default;throw Se._result}var Xr=typeof reportError=="function"?reportError:function(Se){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var et=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Se=="object"&&Se!==null&&typeof Se.message=="string"?String(Se.message):String(Se),error:Se});if(!window.dispatchEvent(et))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Se);return}console.error(Se)},wn={map:An,forEach:function(Se,et,vn){An(Se,function(){et.apply(this,arguments)},vn)},count:function(Se){var et=0;return An(Se,function(){et++}),et},toArray:function(Se){return An(Se,function(et){return et})||[]},only:function(Se){if(!Ae(Se))throw Error("React.Children.only expected to receive a single React element child.");return Se}};return react_production.Activity=f,react_production.Children=wn,react_production.Component=ge,react_production.Fragment=n,react_production.Profiler=a,react_production.PureComponent=Pe,react_production.StrictMode=r,react_production.Suspense=m,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=de,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(Se){return de.H.useMemoCache(Se)}},react_production.cache=function(Se){return function(){return Se.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(Se,et,vn){if(Se==null)throw Error("The argument must be a React element, but you passed "+Se+".");var Tn=W({},Se.props),xn=Se.key;if(et!=null)for(Sn in et.key!==void 0&&(xn=""+et.key),et)!se.call(et,Sn)||Sn==="key"||Sn==="__self"||Sn==="__source"||Sn==="ref"&&et.ref===void 0||(Tn[Sn]=et[Sn]);var Sn=arguments.length-2;if(Sn===1)Tn.children=vn;else if(1<Sn){for(var Lr=Array(Sn),ti=0;ti<Sn;ti++)Lr[ti]=arguments[ti+2];Tn.children=Lr}return he(Se.type,xn,Tn)},react_production.createContext=function(Se){return Se={$$typeof:l,_currentValue:Se,_currentValue2:Se,_threadCount:0,Provider:null,Consumer:null},Se.Provider=Se,Se.Consumer={$$typeof:i,_context:Se},Se},react_production.createElement=function(Se,et,vn){var Tn,xn={},Sn=null;if(et!=null)for(Tn in et.key!==void 0&&(Sn=""+et.key),et)se.call(et,Tn)&&Tn!=="key"&&Tn!=="__self"&&Tn!=="__source"&&(xn[Tn]=et[Tn]);var Lr=arguments.length-2;if(Lr===1)xn.children=vn;else if(1<Lr){for(var ti=Array(Lr),ei=0;ei<Lr;ei++)ti[ei]=arguments[ei+2];xn.children=ti}if(Se&&Se.defaultProps)for(Tn in Lr=Se.defaultProps,Lr)xn[Tn]===void 0&&(xn[Tn]=Lr[Tn]);return he(Se,Sn,xn)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(Se){return{$$typeof:p,render:Se}},react_production.isValidElement=Ae,react_production.lazy=function(Se){return{$$typeof:h,_payload:{_status:-1,_result:Se},_init:jt}},react_production.memo=function(Se,et){return{$$typeof:s,type:Se,compare:et===void 0?null:et}},react_production.startTransition=function(Se){var et=de.T,vn={};de.T=vn;try{var Tn=Se(),xn=de.S;xn!==null&&xn(vn,Tn),typeof Tn=="object"&&Tn!==null&&typeof Tn.then=="function"&&Tn.then(qt,Xr)}catch(Sn){Xr(Sn)}finally{et!==null&&vn.types!==null&&(et.types=vn.types),de.T=et}},react_production.unstable_useCacheRefresh=function(){return de.H.useCacheRefresh()},react_production.use=function(Se){return de.H.use(Se)},react_production.useActionState=function(Se,et,vn){return de.H.useActionState(Se,et,vn)},react_production.useCallback=function(Se,et){return de.H.useCallback(Se,et)},react_production.useContext=function(Se){return de.H.useContext(Se)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(Se,et){return de.H.useDeferredValue(Se,et)},react_production.useEffect=function(Se,et){return de.H.useEffect(Se,et)},react_production.useEffectEvent=function(Se){return de.H.useEffectEvent(Se)},react_production.useId=function(){return de.H.useId()},react_production.useImperativeHandle=function(Se,et,vn){return de.H.useImperativeHandle(Se,et,vn)},react_production.useInsertionEffect=function(Se,et){return de.H.useInsertionEffect(Se,et)},react_production.useLayoutEffect=function(Se,et){return de.H.useLayoutEffect(Se,et)},react_production.useMemo=function(Se,et){return de.H.useMemo(Se,et)},react_production.useOptimistic=function(Se,et){return de.H.useOptimistic(Se,et)},react_production.useReducer=function(Se,et,vn){return de.H.useReducer(Se,et,vn)},react_production.useRef=function(Se){return de.H.useRef(Se)},react_production.useState=function(Se){return de.H.useState(Se)},react_production.useSyncExternalStore=function(Se,et,vn){return de.H.useSyncExternalStore(Se,et,vn)},react_production.useTransition=function(){return de.H.useTransition()},react_production.version="19.2.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(t){function e(ze,An){var jt=ze.length;ze.push(An);e:for(;0<jt;){var Xr=jt-1>>>1,wn=ze[Xr];if(0<a(wn,An))ze[Xr]=An,ze[jt]=wn,jt=Xr;else break e}}function n(ze){return ze.length===0?null:ze[0]}function r(ze){if(ze.length===0)return null;var An=ze[0],jt=ze.pop();if(jt!==An){ze[0]=jt;e:for(var Xr=0,wn=ze.length,Se=wn>>>1;Xr<Se;){var et=2*(Xr+1)-1,vn=ze[et],Tn=et+1,xn=ze[Tn];if(0>a(vn,jt))Tn<wn&&0>a(xn,vn)?(ze[Xr]=xn,ze[Tn]=jt,Xr=Tn):(ze[Xr]=vn,ze[et]=jt,Xr=et);else if(Tn<wn&&0>a(xn,jt))ze[Xr]=xn,ze[Tn]=jt,Xr=Tn;else break e}}return An}function a(ze,An){var jt=ze.sortIndex-An.sortIndex;return jt!==0?jt:ze.id-An.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,p=l.now();t.unstable_now=function(){return l.now()-p}}var m=[],s=[],h=1,f=null,v=3,I=!1,G=!1,W=!1,X=!1,ge=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,Pe=typeof setImmediate<"u"?setImmediate:null;function je(ze){for(var An=n(s);An!==null;){if(An.callback===null)r(s);else if(An.startTime<=ze)r(s),An.sortIndex=An.expirationTime,e(m,An);else break;An=n(s)}}function rt(ze){if(W=!1,je(ze),!G)if(n(m)!==null)G=!0,qt||(qt=!0,Ce());else{var An=n(s);An!==null&&or(rt,An.startTime-ze)}}var qt=!1,de=-1,se=5,he=-1;function pe(){return X?!0:!(t.unstable_now()-he<se)}function Ae(){if(X=!1,qt){var ze=t.unstable_now();he=ze;var An=!0;try{e:{G=!1,W&&(W=!1,ie(de),de=-1),I=!0;var jt=v;try{t:{for(je(ze),f=n(m);f!==null&&!(f.expirationTime>ze&&pe());){var Xr=f.callback;if(typeof Xr=="function"){f.callback=null,v=f.priorityLevel;var wn=Xr(f.expirationTime<=ze);if(ze=t.unstable_now(),typeof wn=="function"){f.callback=wn,je(ze),An=!0;break t}f===n(m)&&r(m),je(ze)}else r(m);f=n(m)}if(f!==null)An=!0;else{var Se=n(s);Se!==null&&or(rt,Se.startTime-ze),An=!1}}break e}finally{f=null,v=jt,I=!1}An=void 0}}finally{An?Ce():qt=!1}}}var Ce;if(typeof Pe=="function")Ce=function(){Pe(Ae)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,Hr=Te.port2;Te.port1.onmessage=Ae,Ce=function(){Hr.postMessage(null)}}else Ce=function(){ge(Ae,0)};function or(ze,An){de=ge(function(){ze(t.unstable_now())},An)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ze){ze.callback=null},t.unstable_forceFrameRate=function(ze){0>ze||125<ze?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<ze?Math.floor(1e3/ze):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(ze){switch(v){case 1:case 2:case 3:var An=3;break;default:An=v}var jt=v;v=An;try{return ze()}finally{v=jt}},t.unstable_requestPaint=function(){X=!0},t.unstable_runWithPriority=function(ze,An){switch(ze){case 1:case 2:case 3:case 4:case 5:break;default:ze=3}var jt=v;v=ze;try{return An()}finally{v=jt}},t.unstable_scheduleCallback=function(ze,An,jt){var Xr=t.unstable_now();switch(typeof jt=="object"&&jt!==null?(jt=jt.delay,jt=typeof jt=="number"&&0<jt?Xr+jt:Xr):jt=Xr,ze){case 1:var wn=-1;break;case 2:wn=250;break;case 5:wn=1073741823;break;case 4:wn=1e4;break;default:wn=5e3}return wn=jt+wn,ze={id:h++,callback:An,priorityLevel:ze,startTime:jt,expirationTime:wn,sortIndex:-1},jt>Xr?(ze.sortIndex=jt,e(s,ze),n(m)===null&&ze===n(s)&&(W?(ie(de),de=-1):W=!0,or(rt,jt-Xr))):(ze.sortIndex=wn,e(m,ze),G||I||(G=!0,qt||(qt=!0,Ce()))),ze},t.unstable_shouldYield=pe,t.unstable_wrapCallback=function(ze){var An=v;return function(){var jt=v;v=An;try{return ze.apply(this,arguments)}finally{v=jt}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var t=requireReact();function e(m){var s="https://react.dev/errors/"+m;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)s+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+m+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(m,s,h){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:f==null?null:""+f,children:m,containerInfo:s,implementation:h}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(m,s){if(m==="font")return"";if(typeof s=="string")return s==="use-credentials"?s:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,reactDom_production.createPortal=function(m,s){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)throw Error(e(299));return i(m,s,null,h)},reactDom_production.flushSync=function(m){var s=l.T,h=r.p;try{if(l.T=null,r.p=2,m)return m()}finally{l.T=s,r.p=h,r.d.f()}},reactDom_production.preconnect=function(m,s){typeof m=="string"&&(s?(s=s.crossOrigin,s=typeof s=="string"?s==="use-credentials"?s:"":void 0):s=null,r.d.C(m,s))},reactDom_production.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},reactDom_production.preinit=function(m,s){if(typeof m=="string"&&s&&typeof s.as=="string"){var h=s.as,f=p(h,s.crossOrigin),v=typeof s.integrity=="string"?s.integrity:void 0,I=typeof s.fetchPriority=="string"?s.fetchPriority:void 0;h==="style"?r.d.S(m,typeof s.precedence=="string"?s.precedence:void 0,{crossOrigin:f,integrity:v,fetchPriority:I}):h==="script"&&r.d.X(m,{crossOrigin:f,integrity:v,fetchPriority:I,nonce:typeof s.nonce=="string"?s.nonce:void 0})}},reactDom_production.preinitModule=function(m,s){if(typeof m=="string")if(typeof s=="object"&&s!==null){if(s.as==null||s.as==="script"){var h=p(s.as,s.crossOrigin);r.d.M(m,{crossOrigin:h,integrity:typeof s.integrity=="string"?s.integrity:void 0,nonce:typeof s.nonce=="string"?s.nonce:void 0})}}else s==null&&r.d.M(m)},reactDom_production.preload=function(m,s){if(typeof m=="string"&&typeof s=="object"&&s!==null&&typeof s.as=="string"){var h=s.as,f=p(h,s.crossOrigin);r.d.L(m,h,{crossOrigin:f,integrity:typeof s.integrity=="string"?s.integrity:void 0,nonce:typeof s.nonce=="string"?s.nonce:void 0,type:typeof s.type=="string"?s.type:void 0,fetchPriority:typeof s.fetchPriority=="string"?s.fetchPriority:void 0,referrerPolicy:typeof s.referrerPolicy=="string"?s.referrerPolicy:void 0,imageSrcSet:typeof s.imageSrcSet=="string"?s.imageSrcSet:void 0,imageSizes:typeof s.imageSizes=="string"?s.imageSizes:void 0,media:typeof s.media=="string"?s.media:void 0})}},reactDom_production.preloadModule=function(m,s){if(typeof m=="string")if(s){var h=p(s.as,s.crossOrigin);r.d.m(m,{as:typeof s.as=="string"&&s.as!=="script"?s.as:void 0,crossOrigin:h,integrity:typeof s.integrity=="string"?s.integrity:void 0})}else r.d.m(m)},reactDom_production.requestFormReset=function(m){r.d.r(m)},reactDom_production.unstable_batchedUpdates=function(m,s){return m(s)},reactDom_production.useFormState=function(m,s,h){return l.H.useFormState(m,s,h)},reactDom_production.useFormStatus=function(){return l.H.useHostTransitionStatus()},reactDom_production.version="19.2.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),reactDom.exports=requireReactDom_production(),reactDom.exports}var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var t=requireScheduler(),e=requireReact(),n=requireReactDom();function r(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function i(o){var u=o,d=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(d=u.return),o=u.return;while(o)}return u.tag===3?d:null}function l(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function p(o){if(o.tag===31){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function m(o){if(i(o)!==o)throw Error(r(188))}function s(o){var u=o.alternate;if(!u){if(u=i(o),u===null)throw Error(r(188));return u!==o?null:o}for(var d=o,y=u;;){var E=d.return;if(E===null)break;var w=E.alternate;if(w===null){if(y=E.return,y!==null){d=y;continue}break}if(E.child===w.child){for(w=E.child;w;){if(w===d)return m(E),o;if(w===y)return m(E),u;w=w.sibling}throw Error(r(188))}if(d.return!==y.return)d=E,y=w;else{for(var C=!1,ee=E.child;ee;){if(ee===d){C=!0,d=E,y=w;break}if(ee===y){C=!0,y=E,d=w;break}ee=ee.sibling}if(!C){for(ee=w.child;ee;){if(ee===d){C=!0,d=w,y=E;break}if(ee===y){C=!0,y=w,d=E;break}ee=ee.sibling}if(!C)throw Error(r(189))}}if(d.alternate!==y)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?o:u}function h(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=h(o),u!==null)return u;o=o.sibling}return null}var f=Object.assign,v=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),G=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),ge=Symbol.for("react.profiler"),ie=Symbol.for("react.consumer"),Pe=Symbol.for("react.context"),je=Symbol.for("react.forward_ref"),rt=Symbol.for("react.suspense"),qt=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),he=Symbol.for("react.activity"),pe=Symbol.for("react.memo_cache_sentinel"),Ae=Symbol.iterator;function Ce(o){return o===null||typeof o!="object"?null:(o=Ae&&o[Ae]||o["@@iterator"],typeof o=="function"?o:null)}var Te=Symbol.for("react.client.reference");function Hr(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===Te?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case W:return"Fragment";case ge:return"Profiler";case X:return"StrictMode";case rt:return"Suspense";case qt:return"SuspenseList";case he:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case G:return"Portal";case Pe:return o.displayName||"Context";case ie:return(o._context.displayName||"Context")+".Consumer";case je:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case de:return u=o.displayName||null,u!==null?u:Hr(o.type)||"Memo";case se:u=o._payload,o=o._init;try{return Hr(o(u))}catch{}}return null}var or=Array.isArray,ze=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,An=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,jt={pending:!1,data:null,method:null,action:null},Xr=[],wn=-1;function Se(o){return{current:o}}function et(o){0>wn||(o.current=Xr[wn],Xr[wn]=null,wn--)}function vn(o,u){wn++,Xr[wn]=o.current,o.current=u}var Tn=Se(null),xn=Se(null),Sn=Se(null),Lr=Se(null);function ti(o,u){switch(vn(Sn,u),vn(xn,o),vn(Tn,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?q1(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=q1(u),o=G1(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}et(Tn),vn(Tn,o)}function ei(){et(Tn),et(xn),et(Sn)}function $o(o){o.memoizedState!==null&&vn(Lr,o);var u=Tn.current,d=G1(u,o.type);u!==d&&(vn(xn,o),vn(Tn,d))}function Ea(o){xn.current===o&&(et(Tn),et(xn)),Lr.current===o&&(et(Lr),OT._currentValue=jt)}var $a,bu;function tu(o){if($a===void 0)try{throw Error()}catch(d){var u=d.stack.trim().match(/\n( *(at )?)/);$a=u&&u[1]||"",bu=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$a+o+bu}var xd=!1;function Ca(o,u){if(!o||xd)return"";xd=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(u){var Ft=function(){throw Error()};if(Object.defineProperty(Ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ft,[])}catch(tt){var Ke=tt}Reflect.construct(o,[],Ft)}else{try{Ft.call()}catch(tt){Ke=tt}o.call(Ft.prototype)}}else{try{throw Error()}catch(tt){Ke=tt}(Ft=o())&&typeof Ft.catch=="function"&&Ft.catch(function(){})}}catch(tt){if(tt&&Ke&&typeof tt.stack=="string")return[tt.stack,Ke.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=y.DetermineComponentFrameRoot(),C=w[0],ee=w[1];if(C&&ee){var xe=C.split(`
`),qe=ee.split(`
`);for(E=y=0;y<xe.length&&!xe[y].includes("DetermineComponentFrameRoot");)y++;for(;E<qe.length&&!qe[E].includes("DetermineComponentFrameRoot");)E++;if(y===xe.length||E===qe.length)for(y=xe.length-1,E=qe.length-1;1<=y&&0<=E&&xe[y]!==qe[E];)E--;for(;1<=y&&0<=E;y--,E--)if(xe[y]!==qe[E]){if(y!==1||E!==1)do if(y--,E--,0>E||xe[y]!==qe[E]){var At=`
`+xe[y].replace(" at new "," at ");return o.displayName&&At.includes("<anonymous>")&&(At=At.replace("<anonymous>",o.displayName)),At}while(1<=y&&0<=E);break}}}finally{xd=!1,Error.prepareStackTrace=d}return(d=o?o.displayName||o.name:"")?tu(d):""}function lu(o,u){switch(o.tag){case 26:case 27:case 5:return tu(o.type);case 16:return tu("Lazy");case 13:return o.child!==u&&u!==null?tu("Suspense Fallback"):tu("Suspense");case 19:return tu("SuspenseList");case 0:case 15:return Ca(o.type,!1);case 11:return Ca(o.type.render,!1);case 1:return Ca(o.type,!0);case 31:return tu("Activity");default:return""}}function Wd(o){try{var u="",d=null;do u+=lu(o,d),d=o,o=o.return;while(o);return u}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}var na=Object.prototype.hasOwnProperty,ra=t.unstable_scheduleCallback,Da=t.unstable_cancelCallback,Jg=t.unstable_shouldYield,Nd=t.unstable_requestPaint,Na=t.unstable_now,Ap=t.unstable_getCurrentPriorityLevel,uu=t.unstable_ImmediatePriority,e_=t.unstable_UserBlockingPriority,ui=t.unstable_NormalPriority,P_=t.unstable_LowPriority,Kr=t.unstable_IdlePriority,t_=t.log,n_=t.unstable_setDisableYieldValue,hu=null,rr=null;function Ma(o){if(typeof t_=="function"&&n_(o),rr&&typeof rr.setStrictMode=="function")try{rr.setStrictMode(hu,o)}catch{}}var Us=Math.clz32?Math.clz32:Ne,Tu=Math.log,re=Math.LN2;function Ne(o){return o>>>=0,o===0?32:31-(Tu(o)/re|0)|0}var Ve=256,wt=262144,In=4194304;function ir(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function qr(o,u,d){var y=o.pendingLanes;if(y===0)return 0;var E=0,w=o.suspendedLanes,C=o.pingedLanes;o=o.warmLanes;var ee=y&134217727;return ee!==0?(y=ee&~w,y!==0?E=ir(y):(C&=ee,C!==0?E=ir(C):d||(d=ee&~o,d!==0&&(E=ir(d))))):(ee=y&~w,ee!==0?E=ir(ee):C!==0?E=ir(C):d||(d=y&~o,d!==0&&(E=ir(d)))),E===0?0:u!==0&&u!==E&&(u&w)===0&&(w=E&-E,d=u&-u,w>=d||w===32&&(d&4194048)!==0)?u:E}function zo(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function fu(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xa(){var o=In;return In<<=1,(In&62914560)===0&&(In=4194304),o}function Hs(o){for(var u=[],d=0;31>d;d++)u.push(o);return u}function ah(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function yg(o,u,d,y,E,w){var C=o.pendingLanes;o.pendingLanes=d,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=d,o.entangledLanes&=d,o.errorRecoveryDisabledLanes&=d,o.shellSuspendCounter=0;var ee=o.entanglements,xe=o.expirationTimes,qe=o.hiddenUpdates;for(d=C&~d;0<d;){var At=31-Us(d),Ft=1<<At;ee[At]=0,xe[At]=-1;var Ke=qe[At];if(Ke!==null)for(qe[At]=null,At=0;At<Ke.length;At++){var tt=Ke[At];tt!==null&&(tt.lane&=-536870913)}d&=~Ft}y!==0&&st(o,y,0),w!==0&&E===0&&o.tag!==0&&(o.suspendedLanes|=w&~(C&~u))}function st(o,u,d){o.pendingLanes|=u,o.suspendedLanes&=~u;var y=31-Us(u);o.entangledLanes|=u,o.entanglements[y]=o.entanglements[y]|1073741824|d&261930}function ci(o,u){var d=o.entangledLanes|=u;for(o=o.entanglements;d;){var y=31-Us(d),E=1<<y;E&u|o[y]&u&&(o[y]|=u),d&=~E}}function Qo(o,u){var d=u&-u;return d=(d&42)!==0?1:Ws(d),(d&(o.suspendedLanes|u))!==0?0:d}function Ws(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Wn(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function O_(){var o=An.p;return o!==0?o:(o=window.event,o===void 0?32:mI(o.type))}function fh(o,u){var d=An.p;try{return An.p=o,u()}finally{An.p=d}}var Ih=Math.random().toString(36).slice(2),wa="__reactFiber$"+Ih,Ia="__reactProps$"+Ih,Vd="__reactContainer$"+Ih,gd="__reactEvents$"+Ih,m_="__reactListeners$"+Ih,C_="__reactHandles$"+Ih,Mg="__reactResources$"+Ih,Sp="__reactMarker$"+Ih;function g_(o){delete o[wa],delete o[Ia],delete o[gd],delete o[m_],delete o[C_]}function Md(o){var u=o[wa];if(u)return u;for(var d=o.parentNode;d;){if(u=d[Vd]||d[wa]){if(d=u.alternate,u.child!==null||d!==null&&d.child!==null)for(o=J1(o);o!==null;){if(d=o[wa])return d;o=J1(o)}return u}o=d,d=o.parentNode}return null}function yd(o){if(o=o[wa]||o[Vd]){var u=o.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return o}return null}function ka(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(r(33))}function Ud(o){var u=o[Mg];return u||(u=o[Mg]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Sa(o){o[Sp]=!0}var __=new Set,D_={};function Fp(o,u){bd(o,u),bd(o+"Capture",u)}function bd(o,u){for(D_[o]=u,o=0;o<u.length;o++)__.add(u[o])}var Eg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),y_={},N_={};function kg(o){return na.call(N_,o)?!0:na.call(y_,o)?!1:Eg.test(o)?N_[o]=!0:(y_[o]=!0,!1)}function ni(o,u,d){if(kg(u))if(d===null)o.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var y=u.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+d)}}function ai(o,u,d){if(d===null)o.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+d)}}function ya(o,u,d,y){if(y===null)o.removeAttribute(d);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(d);return}o.setAttributeNS(u,d,""+y)}}function va(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function wu(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function v_(o,u,d){var y=Object.getOwnPropertyDescriptor(o.constructor.prototype,u);if(!o.hasOwnProperty(u)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var E=y.get,w=y.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return E.call(this)},set:function(C){d=""+C,w.call(this,C)}}),Object.defineProperty(o,u,{enumerable:y.enumerable}),{getValue:function(){return d},setValue:function(C){d=""+C},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function tr(o){if(!o._valueTracker){var u=wu(o)?"checked":"value";o._valueTracker=v_(o,u,""+o[u])}}function Hn(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var d=u.getValue(),y="";return o&&(y=wu(o)?o.checked?"true":"false":o.value),o=y,o!==d?(u.setValue(o),!0):!1}function du(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var $p=/[\n"\\]/g;function qs(o){return o.replace($p,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function r_(o,u,d,y,E,w,C,ee){o.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?o.type=C:o.removeAttribute("type"),u!=null?C==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+va(u)):o.value!==""+va(u)&&(o.value=""+va(u)):C!=="submit"&&C!=="reset"||o.removeAttribute("value"),u!=null?Bd(o,C,va(u)):d!=null?Bd(o,C,va(d)):y!=null&&o.removeAttribute("value"),E==null&&w!=null&&(o.defaultChecked=!!w),E!=null&&(o.checked=E&&typeof E!="function"&&typeof E!="symbol"),ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"?o.name=""+va(ee):o.removeAttribute("name")}function Fg(o,u,d,y,E,w,C,ee){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(o.type=w),u!=null||d!=null){if(!(w!=="submit"&&w!=="reset"||u!=null)){tr(o);return}d=d!=null?""+va(d):"",u=u!=null?""+va(u):d,ee||u===o.value||(o.value=u),o.defaultValue=u}y=y??E,y=typeof y!="function"&&typeof y!="symbol"&&!!y,o.checked=ee?o.checked:!!y,o.defaultChecked=!!y,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(o.name=C),tr(o)}function Bd(o,u,d){u==="number"&&du(o.ownerDocument)===o||o.defaultValue===""+d||(o.defaultValue=""+d)}function Rs(o,u,d,y){if(o=o.options,u){u={};for(var E=0;E<d.length;E++)u["$"+d[E]]=!0;for(d=0;d<o.length;d++)E=u.hasOwnProperty("$"+o[d].value),o[d].selected!==E&&(o[d].selected=E),E&&y&&(o[d].defaultSelected=!0)}else{for(d=""+va(d),u=null,E=0;E<o.length;E++){if(o[E].value===d){o[E].selected=!0,y&&(o[E].defaultSelected=!0);return}u!==null||o[E].disabled||(u=o[E])}u!==null&&(u.selected=!0)}}function rm(o,u,d){if(u!=null&&(u=""+va(u),u!==o.value&&(o.value=u),d==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=d!=null?""+va(d):""}function pu(o,u,d,y){if(u==null){if(y!=null){if(d!=null)throw Error(r(92));if(or(y)){if(1<y.length)throw Error(r(93));y=y[0]}d=y}d==null&&(d=""),u=d}d=va(u),o.defaultValue=d,y=o.textContent,y===d&&y!==""&&y!==null&&(o.value=y),tr(o)}function Pa(o,u){if(u){var d=o.firstChild;if(d&&d===o.lastChild&&d.nodeType===3){d.nodeValue=u;return}}o.textContent=u}var i_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ug(o,u,d){var y=u.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?y?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":y?o.setProperty(u,d):typeof d!="number"||d===0||i_.has(u)?u==="float"?o.cssFloat=d:o[u]=(""+d).trim():o[u]=d+"px"}function Ag(o,u,d){if(u!=null&&typeof u!="object")throw Error(r(62));if(o=o.style,d!=null){for(var y in d)!d.hasOwnProperty(y)||u!=null&&u.hasOwnProperty(y)||(y.indexOf("--")===0?o.setProperty(y,""):y==="float"?o.cssFloat="":o[y]="");for(var E in u)y=u[E],u.hasOwnProperty(E)&&d[E]!==y&&Ug(o,E,y)}else for(var w in u)u.hasOwnProperty(w)&&Ug(o,w,u[w])}function Bg(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var D=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ue=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Re(o){return ue.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function Be(){}var Gt=null;function $t(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var nr=null,qn=null;function Ys(o){var u=yd(o);if(u&&(o=u.stateNode)){var d=o[Ia]||null;e:switch(o=u.stateNode,u.type){case"input":if(r_(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),u=d.name,d.type==="radio"&&u!=null){for(d=o;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+qs(""+u)+'"][type="radio"]'),u=0;u<d.length;u++){var y=d[u];if(y!==o&&y.form===o.form){var E=y[Ia]||null;if(!E)throw Error(r(90));r_(y,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(u=0;u<d.length;u++)y=d[u],y.form===o.form&&Hn(y)}break e;case"textarea":rm(o,d.value,d.defaultValue);break e;case"select":u=d.value,u!=null&&Rs(o,!!d.multiple,u,!1)}}}var Yr=!1;function Aa(o,u,d){if(Yr)return o(u,d);Yr=!0;try{var y=o(u);return y}finally{if(Yr=!1,(nr!==null||qn!==null)&&(T0(),nr&&(u=nr,o=qn,qn=nr=null,Ys(u),o)))for(u=0;u<o.length;u++)Ys(o[u])}}function Au(o,u){var d=o.stateNode;if(d===null)return null;var y=d[Ia]||null;if(y===null)return null;d=y[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break e;default:o=!1}if(o)return null;if(d&&typeof d!="function")throw Error(r(231,u,typeof d));return d}var mu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vt=!1;if(mu)try{var pr={};Object.defineProperty(pr,"passive",{get:function(){vt=!0}}),window.addEventListener("test",pr,pr),window.removeEventListener("test",pr,pr)}catch{vt=!1}var Ro=null,gu=null,ha=null;function $g(){if(ha)return ha;var o,u=gu,d=u.length,y,E="value"in Ro?Ro.value:Ro.textContent,w=E.length;for(o=0;o<d&&u[o]===E[o];o++);var C=d-o;for(y=1;y<=C&&u[d-y]===E[w-y];y++);return ha=E.slice(o,1<y?1-y:void 0)}function V_(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function o_(){return!0}function zg(){return!1}function nu(o){function u(d,y,E,w,C){this._reactName=d,this._targetInst=E,this.type=y,this.nativeEvent=w,this.target=C,this.currentTarget=null;for(var ee in o)o.hasOwnProperty(ee)&&(d=o[ee],this[ee]=d?d(w):w[ee]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?o_:zg,this.isPropagationStopped=zg,this}return f(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=o_)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=o_)},persist:function(){},isPersistent:o_}),u}var jg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},s_=nu(jg),b_=f({},jg,{view:0,detail:0}),li=nu(b_),L_,Iu,$d,W_=f({},b_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:M_,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==$d&&($d&&o.type==="mousemove"?(L_=o.screenX-$d.screenX,Iu=o.screenY-$d.screenY):Iu=L_=0,$d=o),L_)},movementY:function(o){return"movementY"in o?o.movementY:Iu}}),Hy=nu(W_),T_=f({},W_,{dataTransfer:0}),bv=nu(T_),qy=f({},b_,{relatedTarget:0}),K_=nu(qy),Gy=f({},jg,{animationName:0,elapsedTime:0,pseudoElement:0}),fy=nu(Gy),dy=f({},jg,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),eg=nu(dy),Tv=f({},jg,{data:0}),Hg=nu(Tv),qg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ky={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function py(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=Ky[o])?!!u[o]:!1}function M_(){return py}var Pu=f({},b_,{key:function(o){if(o.key){var u=qg[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=V_(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Wy[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:M_,charCode:function(o){return o.type==="keypress"?V_(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?V_(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Zy=nu(Pu),Ev=f({},W_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E_=nu(Ev),b=f({},b_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:M_}),S=nu(b),z=f({},jg,{propertyName:0,elapsedTime:0,pseudoElement:0}),te=nu(z),Fe=f({},W_,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Ye=nu(Fe),On=f({},jg,{newState:0,oldState:0}),Jr=nu(On),Go=[9,13,27,32],Xo=mu&&"CompositionEvent"in window,ba=null;mu&&"documentMode"in document&&(ba=document.documentMode);var Ig=mu&&"TextEvent"in window&&!ba,Sg=mu&&(!Xo||ba&&8<ba&&11>=ba),ag=" ",Gg=!1;function Z_(o,u){switch(o){case"keyup":return Go.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Y_(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var my=!1;function Wg(o,u){switch(o){case"compositionend":return Y_(u);case"keypress":return u.which!==32?null:(Gg=!0,ag);case"textInput":return o=u.data,o===ag&&Gg?null:o;default:return null}}function gy(o,u){if(my)return o==="compositionend"||!Xo&&Z_(o,u)?(o=$g(),ha=gu=Ro=null,my=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Sg&&u.locale!=="ko"?null:u.data;default:return null}}var H0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function a_(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!H0[o.type]:u==="textarea"}function FT(o,u,d,y){nr?qn?qn.push(y):qn=[y]:nr=y,u=x0(u,"onChange"),0<u.length&&(d=new s_("onChange","change",null,d,y),o.push({event:d,listeners:u}))}var l_=null,Yy=null;function Xy(o){U1(o,0)}function Qy(o){var u=ka(o);if(Hn(u))return o}function Jy(o,u){if(o==="change")return u}var UT=!1;if(mu){var u_;if(mu){var _y="oninput"in document;if(!_y){var BT=document.createElement("div");BT.setAttribute("oninput","return;"),_y=typeof BT.oninput=="function"}u_=_y}else u_=!1;UT=u_&&(!document.documentMode||9<document.documentMode)}function wv(){l_&&(l_.detachEvent("onpropertychange",$T),Yy=l_=null)}function $T(o){if(o.propertyName==="value"&&Qy(Yy)){var u=[];FT(u,Yy,o,$t(o)),Aa(Xy,u)}}function w_(o,u,d){o==="focusin"?(wv(),l_=u,Yy=d,l_.attachEvent("onpropertychange",$T)):o==="focusout"&&wv()}function q0(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Qy(Yy)}function yy(o,u){if(o==="click")return Qy(u)}function G0(o,u){if(o==="input"||o==="change")return Qy(u)}function A_(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var Cu=typeof Object.is=="function"?Object.is:A_;function vy(o,u){if(Cu(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var d=Object.keys(o),y=Object.keys(u);if(d.length!==y.length)return!1;for(y=0;y<d.length;y++){var E=d[y];if(!na.call(u,E)||!Cu(o[E],u[E]))return!1}return!0}function Av(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function ev(o,u){var d=Av(o);o=0;for(var y;d;){if(d.nodeType===3){if(y=o+d.textContent.length,o<=u&&y>=u)return{node:d,offset:u-o};o=y}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Av(d)}}function Iv(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?Iv(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function tv(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=du(o.document);u instanceof o.HTMLIFrameElement;){try{var d=typeof u.contentWindow.location.href=="string"}catch{d=!1}if(d)o=u.contentWindow;else break;u=du(o.document)}return u}function k_(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var Sv=mu&&"documentMode"in document&&11>=document.documentMode,F_=null,Rv=null,nv=null,by=!1;function zT(o,u,d){var y=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;by||F_==null||F_!==du(y)||(y=F_,"selectionStart"in y&&k_(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),nv&&vy(nv,y)||(nv=y,y=x0(Rv,"onSelect"),0<y.length&&(u=new s_("onSelect","select",null,u,d),o.push({event:u,listeners:y}),u.target=F_)))}function U_(o,u){var d={};return d[o.toLowerCase()]=u.toLowerCase(),d["Webkit"+o]="webkit"+u,d["Moz"+o]="moz"+u,d}var Ty={animationend:U_("Animation","AnimationEnd"),animationiteration:U_("Animation","AnimationIteration"),animationstart:U_("Animation","AnimationStart"),transitionrun:U_("Transition","TransitionRun"),transitionstart:U_("Transition","TransitionStart"),transitioncancel:U_("Transition","TransitionCancel"),transitionend:U_("Transition","TransitionEnd")},xv={},jT={};mu&&(jT=document.createElement("div").style,"AnimationEvent"in window||(delete Ty.animationend.animation,delete Ty.animationiteration.animation,delete Ty.animationstart.animation),"TransitionEvent"in window||delete Ty.transitionend.transition);function Du(o){if(xv[o])return xv[o];if(!Ty[o])return o;var u=Ty[o],d;for(d in u)if(u.hasOwnProperty(d)&&d in jT)return xv[o]=u[d];return o}var rv=Du("animationend"),HT=Du("animationiteration"),iv=Du("animationstart"),W0=Du("transitionrun"),qT=Du("transitionstart"),K0=Du("transitioncancel"),Ey=Du("transitionend"),GT=new Map,B_="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");B_.push("scrollEnd");function Rg(o,u){GT.set(o,u),Fp(u,[o])}var ov=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Pg=[],zd=0,Pv=0;function sv(){for(var o=zd,u=Pv=zd=0;u<o;){var d=Pg[u];Pg[u++]=null;var y=Pg[u];Pg[u++]=null;var E=Pg[u];Pg[u++]=null;var w=Pg[u];if(Pg[u++]=null,y!==null&&E!==null){var C=y.pending;C===null?E.next=E:(E.next=C.next,C.next=E),y.pending=E}w!==0&&wy(d,E,w)}}function $_(o,u,d,y){Pg[zd++]=o,Pg[zd++]=u,Pg[zd++]=d,Pg[zd++]=y,Pv|=y,o.lanes|=y,o=o.alternate,o!==null&&(o.lanes|=y)}function Hb(o,u,d,y){return $_(o,u,d,y),av(o)}function c_(o,u){return $_(o,null,null,u),av(o)}function wy(o,u,d){o.lanes|=d;var y=o.alternate;y!==null&&(y.lanes|=d);for(var E=!1,w=o.return;w!==null;)w.childLanes|=d,y=w.alternate,y!==null&&(y.childLanes|=d),w.tag===22&&(o=w.stateNode,o===null||o._visibility&1||(E=!0)),o=w,w=w.return;return o.tag===3?(w=o.stateNode,E&&u!==null&&(E=31-Us(d),o=w.hiddenUpdates,y=o[E],y===null?o[E]=[u]:y.push(u),u.lane=d|536870912),w):null}function av(o){if(50<wT)throw wT=0,YE=null,Error(r(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var X_={};function Z0(o,u,d,y){this.tag=o,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gd(o,u,d,y){return new Z0(o,u,d,y)}function Ov(o){return o=o.prototype,!(!o||!o.isReactComponent)}function h_(o,u){var d=o.alternate;return d===null?(d=Gd(o.tag,u,o.key,o.mode),d.elementType=o.elementType,d.type=o.type,d.stateNode=o.stateNode,d.alternate=o,o.alternate=d):(d.pendingProps=u,d.type=o.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=o.flags&65011712,d.childLanes=o.childLanes,d.lanes=o.lanes,d.child=o.child,d.memoizedProps=o.memoizedProps,d.memoizedState=o.memoizedState,d.updateQueue=o.updateQueue,u=o.dependencies,d.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},d.sibling=o.sibling,d.index=o.index,d.ref=o.ref,d.refCleanup=o.refCleanup,d}function Wb(o,u){o.flags&=65011714;var d=o.alternate;return d===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=d.childLanes,o.lanes=d.lanes,o.child=d.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=d.memoizedProps,o.memoizedState=d.memoizedState,o.updateQueue=d.updateQueue,o.type=d.type,u=d.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function lv(o,u,d,y,E,w){var C=0;if(y=o,typeof o=="function")Ov(o)&&(C=1);else if(typeof o=="string")C=PS(o,d,Tn.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case he:return o=Gd(31,d,u,E),o.elementType=he,o.lanes=w,o;case W:return Q_(d.children,E,w,u);case X:C=8,E|=24;break;case ge:return o=Gd(12,d,u,E|2),o.elementType=ge,o.lanes=w,o;case rt:return o=Gd(13,d,u,E),o.elementType=rt,o.lanes=w,o;case qt:return o=Gd(19,d,u,E),o.elementType=qt,o.lanes=w,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case Pe:C=10;break e;case ie:C=9;break e;case je:C=11;break e;case de:C=14;break e;case se:C=16,y=null;break e}C=29,d=Error(r(130,o===null?"null":typeof o,"")),y=null}return u=Gd(C,d,u,E),u.elementType=o,u.type=y,u.lanes=w,u}function Q_(o,u,d,y){return o=Gd(7,o,y,u),o.lanes=d,o}function Cv(o,u,d){return o=Gd(6,o,null,u),o.lanes=d,o}function eT(o){var u=Gd(18,null,null,0);return u.stateNode=o,u}function tT(o,u,d){return u=Gd(4,o.children!==null?o.children:[],o.key,u),u.lanes=d,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var c=new WeakMap;function g(o,u){if(typeof o=="object"&&o!==null){var d=c.get(o);return d!==void 0?d:(u={value:o,source:u,stack:Wd(u)},c.set(o,u),u)}return{value:o,source:u,stack:Wd(u)}}var T=[],A=0,P=null,Y=0,Ie=[],ke=0,Ge=null,kt=1,Vn="";function Or(o,u){T[A++]=Y,T[A++]=P,P=o,Y=u}function ii(o,u,d){Ie[ke++]=kt,Ie[ke++]=Vn,Ie[ke++]=Ge,Ge=o;var y=kt;o=Vn;var E=32-Us(y)-1;y&=~(1<<E),d+=1;var w=32-Us(u)+E;if(30<w){var C=E-E%5;w=(y&(1<<C)-1).toString(32),y>>=C,E-=C,kt=1<<32-Us(u)+E|d<<E|y,Vn=w+o}else kt=1<<w|d<<E|y,Vn=o}function _u(o){o.return!==null&&(Or(o,1),ii(o,1,0))}function Fa(o){for(;o===P;)P=T[--A],T[A]=null,Y=T[--A],T[A]=null;for(;o===Ge;)Ge=Ie[--ke],Ie[ke]=null,Vn=Ie[--ke],Ie[ke]=null,kt=Ie[--ke],Ie[ke]=null}function gg(o,u){Ie[ke++]=kt,Ie[ke++]=Vn,Ie[ke++]=Ge,kt=u.id,Vn=u.overflow,Ge=o}var Ns=null,Vs=null,No=!1,z_=null,Og=!1,Dv=Error(r(519));function j_(o){var u=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw uv(g(u,o)),Dv}function nT(o){var u=o.stateNode,d=o.type,y=o.memoizedProps;switch(u[wa]=o,u[Ia]=y,d){case"dialog":ko("cancel",u),ko("close",u);break;case"iframe":case"object":case"embed":ko("load",u);break;case"video":case"audio":for(d=0;d<IT.length;d++)ko(IT[d],u);break;case"source":ko("error",u);break;case"img":case"image":case"link":ko("error",u),ko("load",u);break;case"details":ko("toggle",u);break;case"input":ko("invalid",u),Fg(u,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0);break;case"select":ko("invalid",u);break;case"textarea":ko("invalid",u),pu(u,y.value,y.defaultValue,y.children)}d=y.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||u.textContent===""+d||y.suppressHydrationWarning===!0||j1(u.textContent,d)?(y.popover!=null&&(ko("beforetoggle",u),ko("toggle",u)),y.onScroll!=null&&ko("scroll",u),y.onScrollEnd!=null&&ko("scrollend",u),y.onClick!=null&&(u.onclick=Be),u=!0):u=!1,u||j_(o,!0)}function La(o){for(Ns=o.return;Ns;)switch(Ns.tag){case 5:case 31:case 13:Og=!1;return;case 27:case 3:Og=!0;return;default:Ns=Ns.return}}function I_(o){if(o!==Ns)return!1;if(!No)return La(o),No=!0,!1;var u=o.tag,d;if((d=u!==3&&u!==27)&&((d=u===5)&&(d=o.type,d=!(d!=="form"&&d!=="button")||hw(o.type,o.memoizedProps)),d=!d),d&&Vs&&j_(o),La(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));Vs=Q1(o)}else if(u===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));Vs=Q1(o)}else u===27?(u=Vs,ky(o.type)?(o=gw,gw=null,Vs=o):Vs=u):Vs=Ns?d_(o.stateNode.nextSibling):null;return!0}function J_(){Vs=Ns=null,No=!1}function rT(){var o=z_;return o!==null&&(Vg===null?Vg=o:Vg.push.apply(Vg,o),z_=null),o}function uv(o){z_===null?z_=[o]:z_.push(o)}var cv=Se(null),H_=null,S_=null;function Ay(o,u,d){vn(cv,u._currentValue),u._currentValue=d}function ey(o){o._currentValue=cv.current,et(cv)}function Y0(o,u,d){for(;o!==null;){var y=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),o===d)break;o=o.return}}function X0(o,u,d,y){var E=o.child;for(E!==null&&(E.return=o);E!==null;){var w=E.dependencies;if(w!==null){var C=E.child;w=w.firstContext;e:for(;w!==null;){var ee=w;w=E;for(var xe=0;xe<u.length;xe++)if(ee.context===u[xe]){w.lanes|=d,ee=w.alternate,ee!==null&&(ee.lanes|=d),Y0(w.return,d,o),y||(C=null);break e}w=ee.next}}else if(E.tag===18){if(C=E.return,C===null)throw Error(r(341));C.lanes|=d,w=C.alternate,w!==null&&(w.lanes|=d),Y0(C,d,o),C=null}else C=E.child;if(C!==null)C.return=E;else for(C=E;C!==null;){if(C===o){C=null;break}if(E=C.sibling,E!==null){E.return=C.return,C=E;break}C=C.return}E=C}}function Nv(o,u,d,y){o=null;for(var E=u,w=!1;E!==null;){if(!w){if((E.flags&524288)!==0)w=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var C=E.alternate;if(C===null)throw Error(r(387));if(C=C.memoizedProps,C!==null){var ee=E.type;Cu(E.pendingProps.value,C.value)||(o!==null?o.push(ee):o=[ee])}}else if(E===Lr.current){if(C=E.alternate,C===null)throw Error(r(387));C.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(o!==null?o.push(OT):o=[OT])}E=E.return}o!==null&&X0(u,o,d,y),u.flags|=262144}function WT(o){for(o=o.firstContext;o!==null;){if(!Cu(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function hv(o){H_=o,S_=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Td(o){return xw(H_,o)}function KT(o,u){return H_===null&&hv(o),xw(o,u)}function xw(o,u){var d=u._currentValue;if(u={context:u,memoizedValue:d,next:null},S_===null){if(o===null)throw Error(r(308));S_=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else S_=S_.next=u;return d}var II=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(d,y){o.push(y)}};this.abort=function(){u.aborted=!0,o.forEach(function(d){return d()})}},SI=t.unstable_scheduleCallback,RI=t.unstable_NormalPriority,iu={$$typeof:Pe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Q0(){return{controller:new II,data:new Map,refCount:0}}function iT(o){o.refCount--,o.refCount===0&&SI(RI,function(){o.controller.abort()})}var oT=null,J0=0,Vv=0,Lv=null;function xI(o,u){if(oT===null){var d=oT=[];J0=0,Vv=nw(),Lv={status:"pending",value:void 0,then:function(y){d.push(y)}}}return J0++,u.then(Pw,Pw),u}function Pw(){if(--J0===0&&oT!==null){Lv!==null&&(Lv.status="fulfilled");var o=oT;oT=null,Vv=0,Lv=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function PI(o,u){var d=[],y={status:"pending",value:null,reason:null,then:function(E){d.push(E)}};return o.then(function(){y.status="fulfilled",y.value=u;for(var E=0;E<d.length;E++)(0,d[E])(u)},function(E){for(y.status="rejected",y.reason=E,E=0;E<d.length;E++)(0,d[E])(void 0)}),y}var Ow=ze.S;ze.S=function(o,u){d1=Na(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&xI(o,u),Ow!==null&&Ow(o,u)};var fv=Se(null);function eE(){var o=fv.current;return o!==null?o:Ta.pooledCache}function ZT(o,u){u===null?vn(fv,fv.current):vn(fv,u.pool)}function Cw(){var o=eE();return o===null?null:{parent:iu._currentValue,pool:o}}var Mv=Error(r(460)),tE=Error(r(474)),YT=Error(r(542)),XT={then:function(){}};function Dw(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Nw(o,u,d){switch(d=o[d],d===void 0?o.push(u):d!==u&&(u.then(Be,Be),u=d),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,Lw(o),o;default:if(typeof u.status=="string")u.then(Be,Be);else{if(o=Ta,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=u,o.status="pending",o.then(function(y){if(u.status==="pending"){var E=u;E.status="fulfilled",E.value=y}},function(y){if(u.status==="pending"){var E=u;E.status="rejected",E.reason=y}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,Lw(o),o}throw pv=u,Mv}}function dv(o){try{var u=o._init;return u(o._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(pv=d,Mv):d}}var pv=null;function Vw(){if(pv===null)throw Error(r(459));var o=pv;return pv=null,o}function Lw(o){if(o===Mv||o===YT)throw Error(r(483))}var kv=null,sT=0;function QT(o){var u=sT;return sT+=1,kv===null&&(kv=[]),Nw(kv,o,u)}function aT(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function JT(o,u){throw u.$$typeof===v?Error(r(525)):(o=Object.prototype.toString.call(u),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function Mw(o){function u(Le,Oe){if(o){var He=Le.deletions;He===null?(Le.deletions=[Oe],Le.flags|=16):He.push(Oe)}}function d(Le,Oe){if(!o)return null;for(;Oe!==null;)u(Le,Oe),Oe=Oe.sibling;return null}function y(Le){for(var Oe=new Map;Le!==null;)Le.key!==null?Oe.set(Le.key,Le):Oe.set(Le.index,Le),Le=Le.sibling;return Oe}function E(Le,Oe){return Le=h_(Le,Oe),Le.index=0,Le.sibling=null,Le}function w(Le,Oe,He){return Le.index=He,o?(He=Le.alternate,He!==null?(He=He.index,He<Oe?(Le.flags|=67108866,Oe):He):(Le.flags|=67108866,Oe)):(Le.flags|=1048576,Oe)}function C(Le){return o&&Le.alternate===null&&(Le.flags|=67108866),Le}function ee(Le,Oe,He,Lt){return Oe===null||Oe.tag!==6?(Oe=Cv(He,Le.mode,Lt),Oe.return=Le,Oe):(Oe=E(Oe,He),Oe.return=Le,Oe)}function xe(Le,Oe,He,Lt){var jr=He.type;return jr===W?At(Le,Oe,He.props.children,Lt,He.key):Oe!==null&&(Oe.elementType===jr||typeof jr=="object"&&jr!==null&&jr.$$typeof===se&&dv(jr)===Oe.type)?(Oe=E(Oe,He.props),aT(Oe,He),Oe.return=Le,Oe):(Oe=lv(He.type,He.key,He.props,null,Le.mode,Lt),aT(Oe,He),Oe.return=Le,Oe)}function qe(Le,Oe,He,Lt){return Oe===null||Oe.tag!==4||Oe.stateNode.containerInfo!==He.containerInfo||Oe.stateNode.implementation!==He.implementation?(Oe=tT(He,Le.mode,Lt),Oe.return=Le,Oe):(Oe=E(Oe,He.children||[]),Oe.return=Le,Oe)}function At(Le,Oe,He,Lt,jr){return Oe===null||Oe.tag!==7?(Oe=Q_(He,Le.mode,Lt,jr),Oe.return=Le,Oe):(Oe=E(Oe,He),Oe.return=Le,Oe)}function Ft(Le,Oe,He){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return Oe=Cv(""+Oe,Le.mode,He),Oe.return=Le,Oe;if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case I:return He=lv(Oe.type,Oe.key,Oe.props,null,Le.mode,He),aT(He,Oe),He.return=Le,He;case G:return Oe=tT(Oe,Le.mode,He),Oe.return=Le,Oe;case se:return Oe=dv(Oe),Ft(Le,Oe,He)}if(or(Oe)||Ce(Oe))return Oe=Q_(Oe,Le.mode,He,null),Oe.return=Le,Oe;if(typeof Oe.then=="function")return Ft(Le,QT(Oe),He);if(Oe.$$typeof===Pe)return Ft(Le,KT(Le,Oe),He);JT(Le,Oe)}return null}function Ke(Le,Oe,He,Lt){var jr=Oe!==null?Oe.key:null;if(typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint")return jr!==null?null:ee(Le,Oe,""+He,Lt);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case I:return He.key===jr?xe(Le,Oe,He,Lt):null;case G:return He.key===jr?qe(Le,Oe,He,Lt):null;case se:return He=dv(He),Ke(Le,Oe,He,Lt)}if(or(He)||Ce(He))return jr!==null?null:At(Le,Oe,He,Lt,null);if(typeof He.then=="function")return Ke(Le,Oe,QT(He),Lt);if(He.$$typeof===Pe)return Ke(Le,Oe,KT(Le,He),Lt);JT(Le,He)}return null}function tt(Le,Oe,He,Lt,jr){if(typeof Lt=="string"&&Lt!==""||typeof Lt=="number"||typeof Lt=="bigint")return Le=Le.get(He)||null,ee(Oe,Le,""+Lt,jr);if(typeof Lt=="object"&&Lt!==null){switch(Lt.$$typeof){case I:return Le=Le.get(Lt.key===null?He:Lt.key)||null,xe(Oe,Le,Lt,jr);case G:return Le=Le.get(Lt.key===null?He:Lt.key)||null,qe(Oe,Le,Lt,jr);case se:return Lt=dv(Lt),tt(Le,Oe,He,Lt,jr)}if(or(Lt)||Ce(Lt))return Le=Le.get(He)||null,At(Oe,Le,Lt,jr,null);if(typeof Lt.then=="function")return tt(Le,Oe,He,QT(Lt),jr);if(Lt.$$typeof===Pe)return tt(Le,Oe,He,KT(Oe,Lt),jr);JT(Oe,Lt)}return null}function dr(Le,Oe,He,Lt){for(var jr=null,Ms=null,Ir=Oe,oi=Oe=0,Bo=null;Ir!==null&&oi<He.length;oi++){Ir.index>oi?(Bo=Ir,Ir=null):Bo=Ir.sibling;var ks=Ke(Le,Ir,He[oi],Lt);if(ks===null){Ir===null&&(Ir=Bo);break}o&&Ir&&ks.alternate===null&&u(Le,Ir),Oe=w(ks,Oe,oi),Ms===null?jr=ks:Ms.sibling=ks,Ms=ks,Ir=Bo}if(oi===He.length)return d(Le,Ir),No&&Or(Le,oi),jr;if(Ir===null){for(;oi<He.length;oi++)Ir=Ft(Le,He[oi],Lt),Ir!==null&&(Oe=w(Ir,Oe,oi),Ms===null?jr=Ir:Ms.sibling=Ir,Ms=Ir);return No&&Or(Le,oi),jr}for(Ir=y(Ir);oi<He.length;oi++)Bo=tt(Ir,Le,oi,He[oi],Lt),Bo!==null&&(o&&Bo.alternate!==null&&Ir.delete(Bo.key===null?oi:Bo.key),Oe=w(Bo,Oe,oi),Ms===null?jr=Bo:Ms.sibling=Bo,Ms=Bo);return o&&Ir.forEach(function(zy){return u(Le,zy)}),No&&Or(Le,oi),jr}function Zr(Le,Oe,He,Lt){if(He==null)throw Error(r(151));for(var jr=null,Ms=null,Ir=Oe,oi=Oe=0,Bo=null,ks=He.next();Ir!==null&&!ks.done;oi++,ks=He.next()){Ir.index>oi?(Bo=Ir,Ir=null):Bo=Ir.sibling;var zy=Ke(Le,Ir,ks.value,Lt);if(zy===null){Ir===null&&(Ir=Bo);break}o&&Ir&&zy.alternate===null&&u(Le,Ir),Oe=w(zy,Oe,oi),Ms===null?jr=zy:Ms.sibling=zy,Ms=zy,Ir=Bo}if(ks.done)return d(Le,Ir),No&&Or(Le,oi),jr;if(Ir===null){for(;!ks.done;oi++,ks=He.next())ks=Ft(Le,ks.value,Lt),ks!==null&&(Oe=w(ks,Oe,oi),Ms===null?jr=ks:Ms.sibling=ks,Ms=ks);return No&&Or(Le,oi),jr}for(Ir=y(Ir);!ks.done;oi++,ks=He.next())ks=tt(Ir,Le,oi,ks.value,Lt),ks!==null&&(o&&ks.alternate!==null&&Ir.delete(ks.key===null?oi:ks.key),Oe=w(ks,Oe,oi),Ms===null?jr=ks:Ms.sibling=ks,Ms=ks);return o&&Ir.forEach(function(BS){return u(Le,BS)}),No&&Or(Le,oi),jr}function _a(Le,Oe,He,Lt){if(typeof He=="object"&&He!==null&&He.type===W&&He.key===null&&(He=He.props.children),typeof He=="object"&&He!==null){switch(He.$$typeof){case I:e:{for(var jr=He.key;Oe!==null;){if(Oe.key===jr){if(jr=He.type,jr===W){if(Oe.tag===7){d(Le,Oe.sibling),Lt=E(Oe,He.props.children),Lt.return=Le,Le=Lt;break e}}else if(Oe.elementType===jr||typeof jr=="object"&&jr!==null&&jr.$$typeof===se&&dv(jr)===Oe.type){d(Le,Oe.sibling),Lt=E(Oe,He.props),aT(Lt,He),Lt.return=Le,Le=Lt;break e}d(Le,Oe);break}else u(Le,Oe);Oe=Oe.sibling}He.type===W?(Lt=Q_(He.props.children,Le.mode,Lt,He.key),Lt.return=Le,Le=Lt):(Lt=lv(He.type,He.key,He.props,null,Le.mode,Lt),aT(Lt,He),Lt.return=Le,Le=Lt)}return C(Le);case G:e:{for(jr=He.key;Oe!==null;){if(Oe.key===jr)if(Oe.tag===4&&Oe.stateNode.containerInfo===He.containerInfo&&Oe.stateNode.implementation===He.implementation){d(Le,Oe.sibling),Lt=E(Oe,He.children||[]),Lt.return=Le,Le=Lt;break e}else{d(Le,Oe);break}else u(Le,Oe);Oe=Oe.sibling}Lt=tT(He,Le.mode,Lt),Lt.return=Le,Le=Lt}return C(Le);case se:return He=dv(He),_a(Le,Oe,He,Lt)}if(or(He))return dr(Le,Oe,He,Lt);if(Ce(He)){if(jr=Ce(He),typeof jr!="function")throw Error(r(150));return He=jr.call(He),Zr(Le,Oe,He,Lt)}if(typeof He.then=="function")return _a(Le,Oe,QT(He),Lt);if(He.$$typeof===Pe)return _a(Le,Oe,KT(Le,He),Lt);JT(Le,He)}return typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint"?(He=""+He,Oe!==null&&Oe.tag===6?(d(Le,Oe.sibling),Lt=E(Oe,He),Lt.return=Le,Le=Lt):(d(Le,Oe),Lt=Cv(He,Le.mode,Lt),Lt.return=Le,Le=Lt),C(Le)):d(Le,Oe)}return function(Le,Oe,He,Lt){try{sT=0;var jr=_a(Le,Oe,He,Lt);return kv=null,jr}catch(Ir){if(Ir===Mv||Ir===YT)throw Ir;var Ms=Gd(29,Ir,null,Le.mode);return Ms.lanes=Lt,Ms.return=Le,Ms}finally{}}}var mv=Mw(!0),kw=Mw(!1),Iy=!1;function nE(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rE(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Sy(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Ry(o,u,d){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(js&2)!==0){var E=y.pending;return E===null?u.next=u:(u.next=E.next,E.next=u),y.pending=u,u=av(o),wy(o,null,d),u}return $_(o,y,u,d),av(o)}function lT(o,u,d){if(u=u.updateQueue,u!==null&&(u=u.shared,(d&4194048)!==0)){var y=u.lanes;y&=o.pendingLanes,d|=y,u.lanes=d,ci(o,d)}}function iE(o,u){var d=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,d===y)){var E=null,w=null;if(d=d.firstBaseUpdate,d!==null){do{var C={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};w===null?E=w=C:w=w.next=C,d=d.next}while(d!==null);w===null?E=w=u:w=w.next=u}else E=w=u;d={baseState:y.baseState,firstBaseUpdate:E,lastBaseUpdate:w,shared:y.shared,callbacks:y.callbacks},o.updateQueue=d;return}o=d.lastBaseUpdate,o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=u}var oE=!1;function uT(){if(oE){var o=Lv;if(o!==null)throw o}}function cT(o,u,d,y){oE=!1;var E=o.updateQueue;Iy=!1;var w=E.firstBaseUpdate,C=E.lastBaseUpdate,ee=E.shared.pending;if(ee!==null){E.shared.pending=null;var xe=ee,qe=xe.next;xe.next=null,C===null?w=qe:C.next=qe,C=xe;var At=o.alternate;At!==null&&(At=At.updateQueue,ee=At.lastBaseUpdate,ee!==C&&(ee===null?At.firstBaseUpdate=qe:ee.next=qe,At.lastBaseUpdate=xe))}if(w!==null){var Ft=E.baseState;C=0,At=qe=xe=null,ee=w;do{var Ke=ee.lane&-536870913,tt=Ke!==ee.lane;if(tt?(Uo&Ke)===Ke:(y&Ke)===Ke){Ke!==0&&Ke===Vv&&(oE=!0),At!==null&&(At=At.next={lane:0,tag:ee.tag,payload:ee.payload,callback:null,next:null});e:{var dr=o,Zr=ee;Ke=u;var _a=d;switch(Zr.tag){case 1:if(dr=Zr.payload,typeof dr=="function"){Ft=dr.call(_a,Ft,Ke);break e}Ft=dr;break e;case 3:dr.flags=dr.flags&-65537|128;case 0:if(dr=Zr.payload,Ke=typeof dr=="function"?dr.call(_a,Ft,Ke):dr,Ke==null)break e;Ft=f({},Ft,Ke);break e;case 2:Iy=!0}}Ke=ee.callback,Ke!==null&&(o.flags|=64,tt&&(o.flags|=8192),tt=E.callbacks,tt===null?E.callbacks=[Ke]:tt.push(Ke))}else tt={lane:Ke,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},At===null?(qe=At=tt,xe=Ft):At=At.next=tt,C|=Ke;if(ee=ee.next,ee===null){if(ee=E.shared.pending,ee===null)break;tt=ee,ee=tt.next,tt.next=null,E.lastBaseUpdate=tt,E.shared.pending=null}}while(!0);At===null&&(xe=Ft),E.baseState=xe,E.firstBaseUpdate=qe,E.lastBaseUpdate=At,w===null&&(E.shared.lanes=0),Dy|=C,o.lanes=C,o.memoizedState=Ft}}function Fw(o,u){if(typeof o!="function")throw Error(r(191,o));o.call(u)}function Uw(o,u){var d=o.callbacks;if(d!==null)for(o.callbacks=null,o=0;o<d.length;o++)Fw(d[o],u)}var Fv=Se(null),e0=Se(0);function Bw(o,u){o=uy,vn(e0,o),vn(Fv,u),uy=o|u.baseLanes}function sE(){vn(e0,uy),vn(Fv,Fv.current)}function aE(){uy=e0.current,et(Fv),et(e0)}var Kg=Se(null),f_=null;function xy(o){var u=o.alternate;vn(za,za.current&1),vn(Kg,o),f_===null&&(u===null||Fv.current!==null||u.memoizedState!==null)&&(f_=o)}function lE(o){vn(za,za.current),vn(Kg,o),f_===null&&(f_=o)}function $w(o){o.tag===22?(vn(za,za.current),vn(Kg,o),f_===null&&(f_=o)):Py()}function Py(){vn(za,za.current),vn(Kg,Kg.current)}function Zg(o){et(Kg),f_===o&&(f_=null),et(za)}var za=Se(0);function t0(o){for(var u=o;u!==null;){if(u.tag===13){var d=u.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||pw(d)||mw(d)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var ty=0,ri=null,ma=null,ou=null,n0=!1,Uv=!1,gv=!1,r0=0,hT=0,Bv=null,OI=0;function Ua(){throw Error(r(321))}function uE(o,u){if(u===null)return!1;for(var d=0;d<u.length&&d<o.length;d++)if(!Cu(o[d],u[d]))return!1;return!0}function cE(o,u,d,y,E,w){return ty=w,ri=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,ze.H=o===null||o.memoizedState===null?AA:IE,gv=!1,w=d(y,E),gv=!1,Uv&&(w=jw(u,d,y,E)),zw(o),w}function zw(o){ze.H=pT;var u=ma!==null&&ma.next!==null;if(ty=0,ou=ma=ri=null,n0=!1,hT=0,Bv=null,u)throw Error(r(300));o===null||su||(o=o.dependencies,o!==null&&WT(o)&&(su=!0))}function jw(o,u,d,y){ri=o;var E=0;do{if(Uv&&(Bv=null),hT=0,Uv=!1,25<=E)throw Error(r(301));if(E+=1,ou=ma=null,o.updateQueue!=null){var w=o.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}ze.H=IA,w=u(d,y)}while(Uv);return w}function CI(){var o=ze.H,u=o.useState()[0];return u=typeof u.then=="function"?fT(u):u,o=o.useState()[0],(ma!==null?ma.memoizedState:null)!==o&&(ri.flags|=1024),u}function hE(){var o=r0!==0;return r0=0,o}function fE(o,u,d){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~d}function dE(o){if(n0){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}n0=!1}ty=0,ou=ma=ri=null,Uv=!1,hT=r0=0,Bv=null}function _g(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ou===null?ri.memoizedState=ou=o:ou=ou.next=o,ou}function Ga(){if(ma===null){var o=ri.alternate;o=o!==null?o.memoizedState:null}else o=ma.next;var u=ou===null?ri.memoizedState:ou.next;if(u!==null)ou=u,ma=o;else{if(o===null)throw ri.alternate===null?Error(r(467)):Error(r(310));ma=o,o={memoizedState:ma.memoizedState,baseState:ma.baseState,baseQueue:ma.baseQueue,queue:ma.queue,next:null},ou===null?ri.memoizedState=ou=o:ou=ou.next=o}return ou}function i0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fT(o){var u=hT;return hT+=1,Bv===null&&(Bv=[]),o=Nw(Bv,o,u),u=ri,(ou===null?u.memoizedState:ou.next)===null&&(u=u.alternate,ze.H=u===null||u.memoizedState===null?AA:IE),o}function o0(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return fT(o);if(o.$$typeof===Pe)return Td(o)}throw Error(r(438,String(o)))}function pE(o){var u=null,d=ri.updateQueue;if(d!==null&&(u=d.memoCache),u==null){var y=ri.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(u={data:y.data.map(function(E){return E.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),d===null&&(d=i0(),ri.updateQueue=d),d.memoCache=u,d=u.data[u.index],d===void 0)for(d=u.data[u.index]=Array(o),y=0;y<o;y++)d[y]=pe;return u.index++,d}function ny(o,u){return typeof u=="function"?u(o):u}function s0(o){var u=Ga();return mE(u,ma,o)}function mE(o,u,d){var y=o.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=d;var E=o.baseQueue,w=y.pending;if(w!==null){if(E!==null){var C=E.next;E.next=w.next,w.next=C}u.baseQueue=E=w,y.pending=null}if(w=o.baseState,E===null)o.memoizedState=w;else{u=E.next;var ee=C=null,xe=null,qe=u,At=!1;do{var Ft=qe.lane&-536870913;if(Ft!==qe.lane?(Uo&Ft)===Ft:(ty&Ft)===Ft){var Ke=qe.revertLane;if(Ke===0)xe!==null&&(xe=xe.next={lane:0,revertLane:0,gesture:null,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null}),Ft===Vv&&(At=!0);else if((ty&Ke)===Ke){qe=qe.next,Ke===Vv&&(At=!0);continue}else Ft={lane:0,revertLane:qe.revertLane,gesture:null,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null},xe===null?(ee=xe=Ft,C=w):xe=xe.next=Ft,ri.lanes|=Ke,Dy|=Ke;Ft=qe.action,gv&&d(w,Ft),w=qe.hasEagerState?qe.eagerState:d(w,Ft)}else Ke={lane:Ft,revertLane:qe.revertLane,gesture:qe.gesture,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null},xe===null?(ee=xe=Ke,C=w):xe=xe.next=Ke,ri.lanes|=Ft,Dy|=Ft;qe=qe.next}while(qe!==null&&qe!==u);if(xe===null?C=w:xe.next=ee,!Cu(w,o.memoizedState)&&(su=!0,At&&(d=Lv,d!==null)))throw d;o.memoizedState=w,o.baseState=C,o.baseQueue=xe,y.lastRenderedState=w}return E===null&&(y.lanes=0),[o.memoizedState,y.dispatch]}function gE(o){var u=Ga(),d=u.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=o;var y=d.dispatch,E=d.pending,w=u.memoizedState;if(E!==null){d.pending=null;var C=E=E.next;do w=o(w,C.action),C=C.next;while(C!==E);Cu(w,u.memoizedState)||(su=!0),u.memoizedState=w,u.baseQueue===null&&(u.baseState=w),d.lastRenderedState=w}return[w,y]}function Hw(o,u,d){var y=ri,E=Ga(),w=No;if(w){if(d===void 0)throw Error(r(407));d=d()}else d=u();var C=!Cu((ma||E).memoizedState,d);if(C&&(E.memoizedState=d,su=!0),E=E.queue,vE(Ww.bind(null,y,E,o),[o]),E.getSnapshot!==u||C||ou!==null&&ou.memoizedState.tag&1){if(y.flags|=2048,$v(9,{destroy:void 0},Gw.bind(null,y,E,d,u),null),Ta===null)throw Error(r(349));w||(ty&127)!==0||qw(y,u,d)}return d}function qw(o,u,d){o.flags|=16384,o={getSnapshot:u,value:d},u=ri.updateQueue,u===null?(u=i0(),ri.updateQueue=u,u.stores=[o]):(d=u.stores,d===null?u.stores=[o]:d.push(o))}function Gw(o,u,d,y){u.value=d,u.getSnapshot=y,Kw(u)&&Zw(o)}function Ww(o,u,d){return d(function(){Kw(u)&&Zw(o)})}function Kw(o){var u=o.getSnapshot;o=o.value;try{var d=u();return!Cu(o,d)}catch{return!0}}function Zw(o){var u=c_(o,2);u!==null&&Lg(u,o,2)}function _E(o){var u=_g();if(typeof o=="function"){var d=o;if(o=d(),gv){Ma(!0);try{d()}finally{Ma(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ny,lastRenderedState:o},u}function Yw(o,u,d,y){return o.baseState=d,mE(o,ma,typeof y=="function"?y:ny)}function DI(o,u,d,y,E){if(u0(o))throw Error(r(485));if(o=u.action,o!==null){var w={payload:E,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){w.listeners.push(C)}};ze.T!==null?d(!0):w.isTransition=!1,y(w),d=u.pending,d===null?(w.next=u.pending=w,Xw(u,w)):(w.next=d.next,u.pending=d.next=w)}}function Xw(o,u){var d=u.action,y=u.payload,E=o.state;if(u.isTransition){var w=ze.T,C={};ze.T=C;try{var ee=d(E,y),xe=ze.S;xe!==null&&xe(C,ee),Qw(o,u,ee)}catch(qe){yE(o,u,qe)}finally{w!==null&&C.types!==null&&(w.types=C.types),ze.T=w}}else try{w=d(E,y),Qw(o,u,w)}catch(qe){yE(o,u,qe)}}function Qw(o,u,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(y){Jw(o,u,y)},function(y){return yE(o,u,y)}):Jw(o,u,d)}function Jw(o,u,d){u.status="fulfilled",u.value=d,eA(u),o.state=d,u=o.pending,u!==null&&(d=u.next,d===u?o.pending=null:(d=d.next,u.next=d,Xw(o,d)))}function yE(o,u,d){var y=o.pending;if(o.pending=null,y!==null){y=y.next;do u.status="rejected",u.reason=d,eA(u),u=u.next;while(u!==y)}o.action=null}function eA(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function tA(o,u){return u}function nA(o,u){if(No){var d=Ta.formState;if(d!==null){e:{var y=ri;if(No){if(Vs){t:{for(var E=Vs,w=Og;E.nodeType!==8;){if(!w){E=null;break t}if(E=d_(E.nextSibling),E===null){E=null;break t}}w=E.data,E=w==="F!"||w==="F"?E:null}if(E){Vs=d_(E.nextSibling),y=E.data==="F!";break e}}j_(y)}y=!1}y&&(u=d[0])}}return d=_g(),d.memoizedState=d.baseState=u,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tA,lastRenderedState:u},d.queue=y,d=TA.bind(null,ri,y),y.dispatch=d,y=_E(!1),w=AE.bind(null,ri,!1,y.queue),y=_g(),E={state:u,dispatch:null,action:o,pending:null},y.queue=E,d=DI.bind(null,ri,E,w,d),E.dispatch=d,y.memoizedState=o,[u,d,!1]}function rA(o){var u=Ga();return iA(u,ma,o)}function iA(o,u,d){if(u=mE(o,u,tA)[0],o=s0(ny)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var y=fT(u)}catch(C){throw C===Mv?YT:C}else y=u;u=Ga();var E=u.queue,w=E.dispatch;return d!==u.memoizedState&&(ri.flags|=2048,$v(9,{destroy:void 0},NI.bind(null,E,d),null)),[y,w,o]}function NI(o,u){o.action=u}function oA(o){var u=Ga(),d=ma;if(d!==null)return iA(u,d,o);Ga(),u=u.memoizedState,d=Ga();var y=d.queue.dispatch;return d.memoizedState=o,[u,y,!1]}function $v(o,u,d,y){return o={tag:o,create:d,deps:y,inst:u,next:null},u=ri.updateQueue,u===null&&(u=i0(),ri.updateQueue=u),d=u.lastEffect,d===null?u.lastEffect=o.next=o:(y=d.next,d.next=o,o.next=y,u.lastEffect=o),o}function sA(){return Ga().memoizedState}function a0(o,u,d,y){var E=_g();ri.flags|=o,E.memoizedState=$v(1|u,{destroy:void 0},d,y===void 0?null:y)}function l0(o,u,d,y){var E=Ga();y=y===void 0?null:y;var w=E.memoizedState.inst;ma!==null&&y!==null&&uE(y,ma.memoizedState.deps)?E.memoizedState=$v(u,w,d,y):(ri.flags|=o,E.memoizedState=$v(1|u,w,d,y))}function aA(o,u){a0(8390656,8,o,u)}function vE(o,u){l0(2048,8,o,u)}function VI(o){ri.flags|=4;var u=ri.updateQueue;if(u===null)u=i0(),ri.updateQueue=u,u.events=[o];else{var d=u.events;d===null?u.events=[o]:d.push(o)}}function lA(o){var u=Ga().memoizedState;return VI({ref:u,nextImpl:o}),function(){if((js&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}function uA(o,u){return l0(4,2,o,u)}function cA(o,u){return l0(4,4,o,u)}function hA(o,u){if(typeof u=="function"){o=o();var d=u(o);return function(){typeof d=="function"?d():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function fA(o,u,d){d=d!=null?d.concat([o]):null,l0(4,4,hA.bind(null,u,o),d)}function bE(){}function dA(o,u){var d=Ga();u=u===void 0?null:u;var y=d.memoizedState;return u!==null&&uE(u,y[1])?y[0]:(d.memoizedState=[o,u],o)}function pA(o,u){var d=Ga();u=u===void 0?null:u;var y=d.memoizedState;if(u!==null&&uE(u,y[1]))return y[0];if(y=o(),gv){Ma(!0);try{o()}finally{Ma(!1)}}return d.memoizedState=[y,u],y}function TE(o,u,d){return d===void 0||(ty&1073741824)!==0&&(Uo&261930)===0?o.memoizedState=u:(o.memoizedState=d,o=m1(),ri.lanes|=o,Dy|=o,d)}function mA(o,u,d,y){return Cu(d,u)?d:Fv.current!==null?(o=TE(o,d,y),Cu(o,u)||(su=!0),o):(ty&42)===0||(ty&1073741824)!==0&&(Uo&261930)===0?(su=!0,o.memoizedState=d):(o=m1(),ri.lanes|=o,Dy|=o,u)}function gA(o,u,d,y,E){var w=An.p;An.p=w!==0&&8>w?w:8;var C=ze.T,ee={};ze.T=ee,AE(o,!1,u,d);try{var xe=E(),qe=ze.S;if(qe!==null&&qe(ee,xe),xe!==null&&typeof xe=="object"&&typeof xe.then=="function"){var At=PI(xe,y);dT(o,u,At,Qg(o))}else dT(o,u,y,Qg(o))}catch(Ft){dT(o,u,{then:function(){},status:"rejected",reason:Ft},Qg())}finally{An.p=w,C!==null&&ee.types!==null&&(C.types=ee.types),ze.T=C}}function LI(){}function EE(o,u,d,y){if(o.tag!==5)throw Error(r(476));var E=_A(o).queue;gA(o,E,u,jt,d===null?LI:function(){return yA(o),d(y)})}function _A(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:jt,baseState:jt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ny,lastRenderedState:jt},next:null};var d={};return u.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ny,lastRenderedState:d},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function yA(o){var u=_A(o);u.next===null&&(u=o.alternate.memoizedState),dT(o,u.next.queue,{},Qg())}function wE(){return Td(OT)}function vA(){return Ga().memoizedState}function bA(){return Ga().memoizedState}function MI(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var d=Qg();o=Sy(d);var y=Ry(u,o,d);y!==null&&(Lg(y,u,d),lT(y,u,d)),u={cache:Q0()},o.payload=u;return}u=u.return}}function kI(o,u,d){var y=Qg();d={lane:y,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},u0(o)?EA(u,d):(d=Hb(o,u,d,y),d!==null&&(Lg(d,o,y),wA(d,u,y)))}function TA(o,u,d){var y=Qg();dT(o,u,d,y)}function dT(o,u,d,y){var E={lane:y,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(u0(o))EA(u,E);else{var w=o.alternate;if(o.lanes===0&&(w===null||w.lanes===0)&&(w=u.lastRenderedReducer,w!==null))try{var C=u.lastRenderedState,ee=w(C,d);if(E.hasEagerState=!0,E.eagerState=ee,Cu(ee,C))return $_(o,u,E,0),Ta===null&&sv(),!1}catch{}finally{}if(d=Hb(o,u,E,y),d!==null)return Lg(d,o,y),wA(d,u,y),!0}return!1}function AE(o,u,d,y){if(y={lane:2,revertLane:nw(),gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},u0(o)){if(u)throw Error(r(479))}else u=Hb(o,d,y,2),u!==null&&Lg(u,o,2)}function u0(o){var u=o.alternate;return o===ri||u!==null&&u===ri}function EA(o,u){Uv=n0=!0;var d=o.pending;d===null?u.next=u:(u.next=d.next,d.next=u),o.pending=u}function wA(o,u,d){if((d&4194048)!==0){var y=u.lanes;y&=o.pendingLanes,d|=y,u.lanes=d,ci(o,d)}}var pT={readContext:Td,use:o0,useCallback:Ua,useContext:Ua,useEffect:Ua,useImperativeHandle:Ua,useLayoutEffect:Ua,useInsertionEffect:Ua,useMemo:Ua,useReducer:Ua,useRef:Ua,useState:Ua,useDebugValue:Ua,useDeferredValue:Ua,useTransition:Ua,useSyncExternalStore:Ua,useId:Ua,useHostTransitionStatus:Ua,useFormState:Ua,useActionState:Ua,useOptimistic:Ua,useMemoCache:Ua,useCacheRefresh:Ua};pT.useEffectEvent=Ua;var AA={readContext:Td,use:o0,useCallback:function(o,u){return _g().memoizedState=[o,u===void 0?null:u],o},useContext:Td,useEffect:aA,useImperativeHandle:function(o,u,d){d=d!=null?d.concat([o]):null,a0(4194308,4,hA.bind(null,u,o),d)},useLayoutEffect:function(o,u){return a0(4194308,4,o,u)},useInsertionEffect:function(o,u){a0(4,2,o,u)},useMemo:function(o,u){var d=_g();u=u===void 0?null:u;var y=o();if(gv){Ma(!0);try{o()}finally{Ma(!1)}}return d.memoizedState=[y,u],y},useReducer:function(o,u,d){var y=_g();if(d!==void 0){var E=d(u);if(gv){Ma(!0);try{d(u)}finally{Ma(!1)}}}else E=u;return y.memoizedState=y.baseState=E,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:E},y.queue=o,o=o.dispatch=kI.bind(null,ri,o),[y.memoizedState,o]},useRef:function(o){var u=_g();return o={current:o},u.memoizedState=o},useState:function(o){o=_E(o);var u=o.queue,d=TA.bind(null,ri,u);return u.dispatch=d,[o.memoizedState,d]},useDebugValue:bE,useDeferredValue:function(o,u){var d=_g();return TE(d,o,u)},useTransition:function(){var o=_E(!1);return o=gA.bind(null,ri,o.queue,!0,!1),_g().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,d){var y=ri,E=_g();if(No){if(d===void 0)throw Error(r(407));d=d()}else{if(d=u(),Ta===null)throw Error(r(349));(Uo&127)!==0||qw(y,u,d)}E.memoizedState=d;var w={value:d,getSnapshot:u};return E.queue=w,aA(Ww.bind(null,y,w,o),[o]),y.flags|=2048,$v(9,{destroy:void 0},Gw.bind(null,y,w,d,u),null),d},useId:function(){var o=_g(),u=Ta.identifierPrefix;if(No){var d=Vn,y=kt;d=(y&~(1<<32-Us(y)-1)).toString(32)+d,u="_"+u+"R_"+d,d=r0++,0<d&&(u+="H"+d.toString(32)),u+="_"}else d=OI++,u="_"+u+"r_"+d.toString(32)+"_";return o.memoizedState=u},useHostTransitionStatus:wE,useFormState:nA,useActionState:nA,useOptimistic:function(o){var u=_g();u.memoizedState=u.baseState=o;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=d,u=AE.bind(null,ri,!0,d),d.dispatch=u,[o,u]},useMemoCache:pE,useCacheRefresh:function(){return _g().memoizedState=MI.bind(null,ri)},useEffectEvent:function(o){var u=_g(),d={impl:o};return u.memoizedState=d,function(){if((js&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}},IE={readContext:Td,use:o0,useCallback:dA,useContext:Td,useEffect:vE,useImperativeHandle:fA,useInsertionEffect:uA,useLayoutEffect:cA,useMemo:pA,useReducer:s0,useRef:sA,useState:function(){return s0(ny)},useDebugValue:bE,useDeferredValue:function(o,u){var d=Ga();return mA(d,ma.memoizedState,o,u)},useTransition:function(){var o=s0(ny)[0],u=Ga().memoizedState;return[typeof o=="boolean"?o:fT(o),u]},useSyncExternalStore:Hw,useId:vA,useHostTransitionStatus:wE,useFormState:rA,useActionState:rA,useOptimistic:function(o,u){var d=Ga();return Yw(d,ma,o,u)},useMemoCache:pE,useCacheRefresh:bA};IE.useEffectEvent=lA;var IA={readContext:Td,use:o0,useCallback:dA,useContext:Td,useEffect:vE,useImperativeHandle:fA,useInsertionEffect:uA,useLayoutEffect:cA,useMemo:pA,useReducer:gE,useRef:sA,useState:function(){return gE(ny)},useDebugValue:bE,useDeferredValue:function(o,u){var d=Ga();return ma===null?TE(d,o,u):mA(d,ma.memoizedState,o,u)},useTransition:function(){var o=gE(ny)[0],u=Ga().memoizedState;return[typeof o=="boolean"?o:fT(o),u]},useSyncExternalStore:Hw,useId:vA,useHostTransitionStatus:wE,useFormState:oA,useActionState:oA,useOptimistic:function(o,u){var d=Ga();return ma!==null?Yw(d,ma,o,u):(d.baseState=o,[o,d.queue.dispatch])},useMemoCache:pE,useCacheRefresh:bA};IA.useEffectEvent=lA;function SE(o,u,d,y){u=o.memoizedState,d=d(y,u),d=d==null?u:f({},u,d),o.memoizedState=d,o.lanes===0&&(o.updateQueue.baseState=d)}var RE={enqueueSetState:function(o,u,d){o=o._reactInternals;var y=Qg(),E=Sy(y);E.payload=u,d!=null&&(E.callback=d),u=Ry(o,E,y),u!==null&&(Lg(u,o,y),lT(u,o,y))},enqueueReplaceState:function(o,u,d){o=o._reactInternals;var y=Qg(),E=Sy(y);E.tag=1,E.payload=u,d!=null&&(E.callback=d),u=Ry(o,E,y),u!==null&&(Lg(u,o,y),lT(u,o,y))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var d=Qg(),y=Sy(d);y.tag=2,u!=null&&(y.callback=u),u=Ry(o,y,d),u!==null&&(Lg(u,o,d),lT(u,o,d))}};function SA(o,u,d,y,E,w,C){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,w,C):u.prototype&&u.prototype.isPureReactComponent?!vy(d,y)||!vy(E,w):!0}function RA(o,u,d,y){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(d,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(d,y),u.state!==o&&RE.enqueueReplaceState(u,u.state,null)}function _v(o,u){var d=u;if("ref"in u){d={};for(var y in u)y!=="ref"&&(d[y]=u[y])}if(o=o.defaultProps){d===u&&(d=f({},d));for(var E in o)d[E]===void 0&&(d[E]=o[E])}return d}function xA(o){ov(o)}function PA(o){console.error(o)}function OA(o){ov(o)}function c0(o,u){try{var d=o.onUncaughtError;d(u.value,{componentStack:u.stack})}catch(y){setTimeout(function(){throw y})}}function CA(o,u,d){try{var y=o.onCaughtError;y(d.value,{componentStack:d.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function xE(o,u,d){return d=Sy(d),d.tag=3,d.payload={element:null},d.callback=function(){c0(o,u)},d}function DA(o){return o=Sy(o),o.tag=3,o}function NA(o,u,d,y){var E=d.type.getDerivedStateFromError;if(typeof E=="function"){var w=y.value;o.payload=function(){return E(w)},o.callback=function(){CA(u,d,y)}}var C=d.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(o.callback=function(){CA(u,d,y),typeof E!="function"&&(Ny===null?Ny=new Set([this]):Ny.add(this));var ee=y.stack;this.componentDidCatch(y.value,{componentStack:ee!==null?ee:""})})}function FI(o,u,d,y,E){if(d.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(u=d.alternate,u!==null&&Nv(u,d,E,!0),d=Kg.current,d!==null){switch(d.tag){case 31:case 13:return f_===null?E0():d.alternate===null&&Ba===0&&(Ba=3),d.flags&=-257,d.flags|=65536,d.lanes=E,y===XT?d.flags|=16384:(u=d.updateQueue,u===null?d.updateQueue=new Set([y]):u.add(y),JE(o,y,E)),!1;case 22:return d.flags|=65536,y===XT?d.flags|=16384:(u=d.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([y])},d.updateQueue=u):(d=u.retryQueue,d===null?u.retryQueue=new Set([y]):d.add(y)),JE(o,y,E)),!1}throw Error(r(435,d.tag))}return JE(o,y,E),E0(),!1}if(No)return u=Kg.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=E,y!==Dv&&(o=Error(r(422),{cause:y}),uv(g(o,d)))):(y!==Dv&&(u=Error(r(423),{cause:y}),uv(g(u,d))),o=o.current.alternate,o.flags|=65536,E&=-E,o.lanes|=E,y=g(y,d),E=xE(o.stateNode,y,E),iE(o,E),Ba!==4&&(Ba=2)),!1;var w=Error(r(520),{cause:y});if(w=g(w,d),ET===null?ET=[w]:ET.push(w),Ba!==4&&(Ba=2),u===null)return!0;y=g(y,d),d=u;do{switch(d.tag){case 3:return d.flags|=65536,o=E&-E,d.lanes|=o,o=xE(d.stateNode,y,o),iE(d,o),!1;case 1:if(u=d.type,w=d.stateNode,(d.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ny===null||!Ny.has(w))))return d.flags|=65536,E&=-E,d.lanes|=E,E=DA(E),NA(E,o,d,y),iE(d,E),!1}d=d.return}while(d!==null);return!1}var PE=Error(r(461)),su=!1;function wd(o,u,d,y){u.child=o===null?kw(u,null,d,y):mv(u,o.child,d,y)}function VA(o,u,d,y,E){d=d.render;var w=u.ref;if("ref"in y){var C={};for(var ee in y)ee!=="ref"&&(C[ee]=y[ee])}else C=y;return hv(u),y=cE(o,u,d,C,w,E),ee=hE(),o!==null&&!su?(fE(o,u,E),ry(o,u,E)):(No&&ee&&_u(u),u.flags|=1,wd(o,u,y,E),u.child)}function LA(o,u,d,y,E){if(o===null){var w=d.type;return typeof w=="function"&&!Ov(w)&&w.defaultProps===void 0&&d.compare===null?(u.tag=15,u.type=w,MA(o,u,w,y,E)):(o=lv(d.type,null,y,u,u.mode,E),o.ref=u.ref,o.return=u,u.child=o)}if(w=o.child,!kE(o,E)){var C=w.memoizedProps;if(d=d.compare,d=d!==null?d:vy,d(C,y)&&o.ref===u.ref)return ry(o,u,E)}return u.flags|=1,o=h_(w,y),o.ref=u.ref,o.return=u,u.child=o}function MA(o,u,d,y,E){if(o!==null){var w=o.memoizedProps;if(vy(w,y)&&o.ref===u.ref)if(su=!1,u.pendingProps=y=w,kE(o,E))(o.flags&131072)!==0&&(su=!0);else return u.lanes=o.lanes,ry(o,u,E)}return OE(o,u,d,y,E)}function kA(o,u,d,y){var E=y.children,w=o!==null?o.memoizedState:null;if(o===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.mode==="hidden"){if((u.flags&128)!==0){if(w=w!==null?w.baseLanes|d:d,o!==null){for(y=u.child=o.child,E=0;y!==null;)E=E|y.lanes|y.childLanes,y=y.sibling;y=E&~w}else y=0,u.child=null;return FA(o,u,w,d,y)}if((d&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&ZT(u,w!==null?w.cachePool:null),w!==null?Bw(u,w):sE(),$w(u);else return y=u.lanes=536870912,FA(o,u,w!==null?w.baseLanes|d:d,d,y)}else w!==null?(ZT(u,w.cachePool),Bw(u,w),Py(),u.memoizedState=null):(o!==null&&ZT(u,null),sE(),Py());return wd(o,u,E,d),u.child}function mT(o,u){return o!==null&&o.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function FA(o,u,d,y,E){var w=eE();return w=w===null?null:{parent:iu._currentValue,pool:w},u.memoizedState={baseLanes:d,cachePool:w},o!==null&&ZT(u,null),sE(),$w(u),o!==null&&Nv(o,u,y,!0),u.childLanes=E,null}function h0(o,u){return u=d0({mode:u.mode,children:u.children},o.mode),u.ref=o.ref,o.child=u,u.return=o,u}function UA(o,u,d){return mv(u,o.child,null,d),o=h0(u,u.pendingProps),o.flags|=2,Zg(u),u.memoizedState=null,o}function UI(o,u,d){var y=u.pendingProps,E=(u.flags&128)!==0;if(u.flags&=-129,o===null){if(No){if(y.mode==="hidden")return o=h0(u,y),u.lanes=536870912,mT(null,o);if(lE(u),(o=Vs)?(o=X1(o,Og),o=o!==null&&o.data==="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:Ge!==null?{id:kt,overflow:Vn}:null,retryLane:536870912,hydrationErrors:null},d=eT(o),d.return=u,u.child=d,Ns=u,Vs=null)):o=null,o===null)throw j_(u);return u.lanes=536870912,null}return h0(u,y)}var w=o.memoizedState;if(w!==null){var C=w.dehydrated;if(lE(u),E)if(u.flags&256)u.flags&=-257,u=UA(o,u,d);else if(u.memoizedState!==null)u.child=o.child,u.flags|=128,u=null;else throw Error(r(558));else if(su||Nv(o,u,d,!1),E=(d&o.childLanes)!==0,su||E){if(y=Ta,y!==null&&(C=Qo(y,d),C!==0&&C!==w.retryLane))throw w.retryLane=C,c_(o,C),Lg(y,o,C),PE;E0(),u=UA(o,u,d)}else o=w.treeContext,Vs=d_(C.nextSibling),Ns=u,No=!0,z_=null,Og=!1,o!==null&&gg(u,o),u=h0(u,y),u.flags|=4096;return u}return o=h_(o.child,{mode:y.mode,children:y.children}),o.ref=u.ref,u.child=o,o.return=u,o}function f0(o,u){var d=u.ref;if(d===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(o===null||o.ref!==d)&&(u.flags|=4194816)}}function OE(o,u,d,y,E){return hv(u),d=cE(o,u,d,y,void 0,E),y=hE(),o!==null&&!su?(fE(o,u,E),ry(o,u,E)):(No&&y&&_u(u),u.flags|=1,wd(o,u,d,E),u.child)}function BA(o,u,d,y,E,w){return hv(u),u.updateQueue=null,d=jw(u,y,d,E),zw(o),y=hE(),o!==null&&!su?(fE(o,u,w),ry(o,u,w)):(No&&y&&_u(u),u.flags|=1,wd(o,u,d,w),u.child)}function $A(o,u,d,y,E){if(hv(u),u.stateNode===null){var w=X_,C=d.contextType;typeof C=="object"&&C!==null&&(w=Td(C)),w=new d(y,w),u.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=RE,u.stateNode=w,w._reactInternals=u,w=u.stateNode,w.props=y,w.state=u.memoizedState,w.refs={},nE(u),C=d.contextType,w.context=typeof C=="object"&&C!==null?Td(C):X_,w.state=u.memoizedState,C=d.getDerivedStateFromProps,typeof C=="function"&&(SE(u,d,C,y),w.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(C=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),C!==w.state&&RE.enqueueReplaceState(w,w.state,null),cT(u,y,w,E),uT(),w.state=u.memoizedState),typeof w.componentDidMount=="function"&&(u.flags|=4194308),y=!0}else if(o===null){w=u.stateNode;var ee=u.memoizedProps,xe=_v(d,ee);w.props=xe;var qe=w.context,At=d.contextType;C=X_,typeof At=="object"&&At!==null&&(C=Td(At));var Ft=d.getDerivedStateFromProps;At=typeof Ft=="function"||typeof w.getSnapshotBeforeUpdate=="function",ee=u.pendingProps!==ee,At||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(ee||qe!==C)&&RA(u,w,y,C),Iy=!1;var Ke=u.memoizedState;w.state=Ke,cT(u,y,w,E),uT(),qe=u.memoizedState,ee||Ke!==qe||Iy?(typeof Ft=="function"&&(SE(u,d,Ft,y),qe=u.memoizedState),(xe=Iy||SA(u,d,xe,y,Ke,qe,C))?(At||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(u.flags|=4194308)):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=qe),w.props=y,w.state=qe,w.context=C,y=xe):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{w=u.stateNode,rE(o,u),C=u.memoizedProps,At=_v(d,C),w.props=At,Ft=u.pendingProps,Ke=w.context,qe=d.contextType,xe=X_,typeof qe=="object"&&qe!==null&&(xe=Td(qe)),ee=d.getDerivedStateFromProps,(qe=typeof ee=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==Ft||Ke!==xe)&&RA(u,w,y,xe),Iy=!1,Ke=u.memoizedState,w.state=Ke,cT(u,y,w,E),uT();var tt=u.memoizedState;C!==Ft||Ke!==tt||Iy||o!==null&&o.dependencies!==null&&WT(o.dependencies)?(typeof ee=="function"&&(SE(u,d,ee,y),tt=u.memoizedState),(At=Iy||SA(u,d,At,y,Ke,tt,xe)||o!==null&&o.dependencies!==null&&WT(o.dependencies))?(qe||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(y,tt,xe),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(y,tt,xe)),typeof w.componentDidUpdate=="function"&&(u.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof w.componentDidUpdate!="function"||C===o.memoizedProps&&Ke===o.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===o.memoizedProps&&Ke===o.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=tt),w.props=y,w.state=tt,w.context=xe,y=At):(typeof w.componentDidUpdate!="function"||C===o.memoizedProps&&Ke===o.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===o.memoizedProps&&Ke===o.memoizedState||(u.flags|=1024),y=!1)}return w=y,f0(o,u),y=(u.flags&128)!==0,w||y?(w=u.stateNode,d=y&&typeof d.getDerivedStateFromError!="function"?null:w.render(),u.flags|=1,o!==null&&y?(u.child=mv(u,o.child,null,E),u.child=mv(u,null,d,E)):wd(o,u,d,E),u.memoizedState=w.state,o=u.child):o=ry(o,u,E),o}function zA(o,u,d,y){return J_(),u.flags|=256,wd(o,u,d,y),u.child}var CE={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function DE(o){return{baseLanes:o,cachePool:Cw()}}function NE(o,u,d){return o=o!==null?o.childLanes&~d:0,u&&(o|=Xg),o}function jA(o,u,d){var y=u.pendingProps,E=!1,w=(u.flags&128)!==0,C;if((C=w)||(C=o!==null&&o.memoizedState===null?!1:(za.current&2)!==0),C&&(E=!0,u.flags&=-129),C=(u.flags&32)!==0,u.flags&=-33,o===null){if(No){if(E?xy(u):Py(),(o=Vs)?(o=X1(o,Og),o=o!==null&&o.data!=="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:Ge!==null?{id:kt,overflow:Vn}:null,retryLane:536870912,hydrationErrors:null},d=eT(o),d.return=u,u.child=d,Ns=u,Vs=null)):o=null,o===null)throw j_(u);return mw(o)?u.lanes=32:u.lanes=536870912,null}var ee=y.children;return y=y.fallback,E?(Py(),E=u.mode,ee=d0({mode:"hidden",children:ee},E),y=Q_(y,E,d,null),ee.return=u,y.return=u,ee.sibling=y,u.child=ee,y=u.child,y.memoizedState=DE(d),y.childLanes=NE(o,C,d),u.memoizedState=CE,mT(null,y)):(xy(u),VE(u,ee))}var xe=o.memoizedState;if(xe!==null&&(ee=xe.dehydrated,ee!==null)){if(w)u.flags&256?(xy(u),u.flags&=-257,u=LE(o,u,d)):u.memoizedState!==null?(Py(),u.child=o.child,u.flags|=128,u=null):(Py(),ee=y.fallback,E=u.mode,y=d0({mode:"visible",children:y.children},E),ee=Q_(ee,E,d,null),ee.flags|=2,y.return=u,ee.return=u,y.sibling=ee,u.child=y,mv(u,o.child,null,d),y=u.child,y.memoizedState=DE(d),y.childLanes=NE(o,C,d),u.memoizedState=CE,u=mT(null,y));else if(xy(u),mw(ee)){if(C=ee.nextSibling&&ee.nextSibling.dataset,C)var qe=C.dgst;C=qe,y=Error(r(419)),y.stack="",y.digest=C,uv({value:y,source:null,stack:null}),u=LE(o,u,d)}else if(su||Nv(o,u,d,!1),C=(d&o.childLanes)!==0,su||C){if(C=Ta,C!==null&&(y=Qo(C,d),y!==0&&y!==xe.retryLane))throw xe.retryLane=y,c_(o,y),Lg(C,o,y),PE;pw(ee)||E0(),u=LE(o,u,d)}else pw(ee)?(u.flags|=192,u.child=o.child,u=null):(o=xe.treeContext,Vs=d_(ee.nextSibling),Ns=u,No=!0,z_=null,Og=!1,o!==null&&gg(u,o),u=VE(u,y.children),u.flags|=4096);return u}return E?(Py(),ee=y.fallback,E=u.mode,xe=o.child,qe=xe.sibling,y=h_(xe,{mode:"hidden",children:y.children}),y.subtreeFlags=xe.subtreeFlags&65011712,qe!==null?ee=h_(qe,ee):(ee=Q_(ee,E,d,null),ee.flags|=2),ee.return=u,y.return=u,y.sibling=ee,u.child=y,mT(null,y),y=u.child,ee=o.child.memoizedState,ee===null?ee=DE(d):(E=ee.cachePool,E!==null?(xe=iu._currentValue,E=E.parent!==xe?{parent:xe,pool:xe}:E):E=Cw(),ee={baseLanes:ee.baseLanes|d,cachePool:E}),y.memoizedState=ee,y.childLanes=NE(o,C,d),u.memoizedState=CE,mT(o.child,y)):(xy(u),d=o.child,o=d.sibling,d=h_(d,{mode:"visible",children:y.children}),d.return=u,d.sibling=null,o!==null&&(C=u.deletions,C===null?(u.deletions=[o],u.flags|=16):C.push(o)),u.child=d,u.memoizedState=null,d)}function VE(o,u){return u=d0({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function d0(o,u){return o=Gd(22,o,null,u),o.lanes=0,o}function LE(o,u,d){return mv(u,o.child,null,d),o=VE(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function HA(o,u,d){o.lanes|=u;var y=o.alternate;y!==null&&(y.lanes|=u),Y0(o.return,u,d)}function ME(o,u,d,y,E,w){var C=o.memoizedState;C===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:d,tailMode:E,treeForkCount:w}:(C.isBackwards=u,C.rendering=null,C.renderingStartTime=0,C.last=y,C.tail=d,C.tailMode=E,C.treeForkCount=w)}function qA(o,u,d){var y=u.pendingProps,E=y.revealOrder,w=y.tail;y=y.children;var C=za.current,ee=(C&2)!==0;if(ee?(C=C&1|2,u.flags|=128):C&=1,vn(za,C),wd(o,u,y,d),y=No?Y:0,!ee&&o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&HA(o,d,u);else if(o.tag===19)HA(o,d,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(E){case"forwards":for(d=u.child,E=null;d!==null;)o=d.alternate,o!==null&&t0(o)===null&&(E=d),d=d.sibling;d=E,d===null?(E=u.child,u.child=null):(E=d.sibling,d.sibling=null),ME(u,!1,E,d,w,y);break;case"backwards":case"unstable_legacy-backwards":for(d=null,E=u.child,u.child=null;E!==null;){if(o=E.alternate,o!==null&&t0(o)===null){u.child=E;break}o=E.sibling,E.sibling=d,d=E,E=o}ME(u,!0,d,null,w,y);break;case"together":ME(u,!1,null,null,void 0,y);break;default:u.memoizedState=null}return u.child}function ry(o,u,d){if(o!==null&&(u.dependencies=o.dependencies),Dy|=u.lanes,(d&u.childLanes)===0)if(o!==null){if(Nv(o,u,d,!1),(d&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(r(153));if(u.child!==null){for(o=u.child,d=h_(o,o.pendingProps),u.child=d,d.return=u;o.sibling!==null;)o=o.sibling,d=d.sibling=h_(o,o.pendingProps),d.return=u;d.sibling=null}return u.child}function kE(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&WT(o)))}function BI(o,u,d){switch(u.tag){case 3:ti(u,u.stateNode.containerInfo),Ay(u,iu,o.memoizedState.cache),J_();break;case 27:case 5:$o(u);break;case 4:ti(u,u.stateNode.containerInfo);break;case 10:Ay(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,lE(u),null;break;case 13:var y=u.memoizedState;if(y!==null)return y.dehydrated!==null?(xy(u),u.flags|=128,null):(d&u.child.childLanes)!==0?jA(o,u,d):(xy(u),o=ry(o,u,d),o!==null?o.sibling:null);xy(u);break;case 19:var E=(o.flags&128)!==0;if(y=(d&u.childLanes)!==0,y||(Nv(o,u,d,!1),y=(d&u.childLanes)!==0),E){if(y)return qA(o,u,d);u.flags|=128}if(E=u.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),vn(za,za.current),y)break;return null;case 22:return u.lanes=0,kA(o,u,d,u.pendingProps);case 24:Ay(u,iu,o.memoizedState.cache)}return ry(o,u,d)}function GA(o,u,d){if(o!==null)if(o.memoizedProps!==u.pendingProps)su=!0;else{if(!kE(o,d)&&(u.flags&128)===0)return su=!1,BI(o,u,d);su=(o.flags&131072)!==0}else su=!1,No&&(u.flags&1048576)!==0&&ii(u,Y,u.index);switch(u.lanes=0,u.tag){case 16:e:{var y=u.pendingProps;if(o=dv(u.elementType),u.type=o,typeof o=="function")Ov(o)?(y=_v(o,y),u.tag=1,u=$A(null,u,o,y,d)):(u.tag=0,u=OE(null,u,o,y,d));else{if(o!=null){var E=o.$$typeof;if(E===je){u.tag=11,u=VA(null,u,o,y,d);break e}else if(E===de){u.tag=14,u=LA(null,u,o,y,d);break e}}throw u=Hr(o)||o,Error(r(306,u,""))}}return u;case 0:return OE(o,u,u.type,u.pendingProps,d);case 1:return y=u.type,E=_v(y,u.pendingProps),$A(o,u,y,E,d);case 3:e:{if(ti(u,u.stateNode.containerInfo),o===null)throw Error(r(387));y=u.pendingProps;var w=u.memoizedState;E=w.element,rE(o,u),cT(u,y,null,d);var C=u.memoizedState;if(y=C.cache,Ay(u,iu,y),y!==w.cache&&X0(u,[iu],d,!0),uT(),y=C.element,w.isDehydrated)if(w={element:y,isDehydrated:!1,cache:C.cache},u.updateQueue.baseState=w,u.memoizedState=w,u.flags&256){u=zA(o,u,y,d);break e}else if(y!==E){E=g(Error(r(424)),u),uv(E),u=zA(o,u,y,d);break e}else{switch(o=u.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Vs=d_(o.firstChild),Ns=u,No=!0,z_=null,Og=!0,d=kw(u,null,y,d),u.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(J_(),y===E){u=ry(o,u,d);break e}wd(o,u,y,d)}u=u.child}return u;case 26:return f0(o,u),o===null?(d=rI(u.type,null,u.pendingProps,null))?u.memoizedState=d:No||(d=u.type,o=u.pendingProps,y=P0(Sn.current).createElement(d),y[wa]=u,y[Ia]=o,Rd(y,d,o),Sa(y),u.stateNode=y):u.memoizedState=rI(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return $o(u),o===null&&No&&(y=u.stateNode=eI(u.type,u.pendingProps,Sn.current),Ns=u,Og=!0,E=Vs,ky(u.type)?(gw=E,Vs=d_(y.firstChild)):Vs=E),wd(o,u,u.pendingProps.children,d),f0(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&No&&((E=y=Vs)&&(y=gS(y,u.type,u.pendingProps,Og),y!==null?(u.stateNode=y,Ns=u,Vs=d_(y.firstChild),Og=!1,E=!0):E=!1),E||j_(u)),$o(u),E=u.type,w=u.pendingProps,C=o!==null?o.memoizedProps:null,y=w.children,hw(E,w)?y=null:C!==null&&hw(E,C)&&(u.flags|=32),u.memoizedState!==null&&(E=cE(o,u,CI,null,null,d),OT._currentValue=E),f0(o,u),wd(o,u,y,d),u.child;case 6:return o===null&&No&&((o=d=Vs)&&(d=_S(d,u.pendingProps,Og),d!==null?(u.stateNode=d,Ns=u,Vs=null,o=!0):o=!1),o||j_(u)),null;case 13:return jA(o,u,d);case 4:return ti(u,u.stateNode.containerInfo),y=u.pendingProps,o===null?u.child=mv(u,null,y,d):wd(o,u,y,d),u.child;case 11:return VA(o,u,u.type,u.pendingProps,d);case 7:return wd(o,u,u.pendingProps,d),u.child;case 8:return wd(o,u,u.pendingProps.children,d),u.child;case 12:return wd(o,u,u.pendingProps.children,d),u.child;case 10:return y=u.pendingProps,Ay(u,u.type,y.value),wd(o,u,y.children,d),u.child;case 9:return E=u.type._context,y=u.pendingProps.children,hv(u),E=Td(E),y=y(E),u.flags|=1,wd(o,u,y,d),u.child;case 14:return LA(o,u,u.type,u.pendingProps,d);case 15:return MA(o,u,u.type,u.pendingProps,d);case 19:return qA(o,u,d);case 31:return UI(o,u,d);case 22:return kA(o,u,d,u.pendingProps);case 24:return hv(u),y=Td(iu),o===null?(E=eE(),E===null&&(E=Ta,w=Q0(),E.pooledCache=w,w.refCount++,w!==null&&(E.pooledCacheLanes|=d),E=w),u.memoizedState={parent:y,cache:E},nE(u),Ay(u,iu,E)):((o.lanes&d)!==0&&(rE(o,u),cT(u,null,null,d),uT()),E=o.memoizedState,w=u.memoizedState,E.parent!==y?(E={parent:y,cache:y},u.memoizedState=E,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=E),Ay(u,iu,y)):(y=w.cache,Ay(u,iu,y),y!==E.cache&&X0(u,[iu],d,!0))),wd(o,u,u.pendingProps.children,d),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function iy(o){o.flags|=4}function FE(o,u,d,y,E){if((u=(o.mode&32)!==0)&&(u=!1),u){if(o.flags|=16777216,(E&335544128)===E)if(o.stateNode.complete)o.flags|=8192;else if(v1())o.flags|=8192;else throw pv=XT,tE}else o.flags&=-16777217}function WA(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!lI(u))if(v1())o.flags|=8192;else throw pv=XT,tE}function p0(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?xa():536870912,o.lanes|=u,qv|=u)}function gT(o,u){if(!No)switch(o.tailMode){case"hidden":u=o.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?o.tail=null:d.sibling=null;break;case"collapsed":d=o.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function Ra(o){var u=o.alternate!==null&&o.alternate.child===o.child,d=0,y=0;if(u)for(var E=o.child;E!==null;)d|=E.lanes|E.childLanes,y|=E.subtreeFlags&65011712,y|=E.flags&65011712,E.return=o,E=E.sibling;else for(E=o.child;E!==null;)d|=E.lanes|E.childLanes,y|=E.subtreeFlags,y|=E.flags,E.return=o,E=E.sibling;return o.subtreeFlags|=y,o.childLanes=d,u}function $I(o,u,d){var y=u.pendingProps;switch(Fa(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ra(u),null;case 1:return Ra(u),null;case 3:return d=u.stateNode,y=null,o!==null&&(y=o.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),ey(iu),ei(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(o===null||o.child===null)&&(I_(u)?iy(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,rT())),Ra(u),null;case 26:var E=u.type,w=u.memoizedState;return o===null?(iy(u),w!==null?(Ra(u),WA(u,w)):(Ra(u),FE(u,E,null,y,d))):w?w!==o.memoizedState?(iy(u),Ra(u),WA(u,w)):(Ra(u),u.flags&=-16777217):(o=o.memoizedProps,o!==y&&iy(u),Ra(u),FE(u,E,o,y,d)),null;case 27:if(Ea(u),d=Sn.current,E=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==y&&iy(u);else{if(!y){if(u.stateNode===null)throw Error(r(166));return Ra(u),null}o=Tn.current,I_(u)?nT(u):(o=eI(E,y,d),u.stateNode=o,iy(u))}return Ra(u),null;case 5:if(Ea(u),E=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==y&&iy(u);else{if(!y){if(u.stateNode===null)throw Error(r(166));return Ra(u),null}if(w=Tn.current,I_(u))nT(u);else{var C=P0(Sn.current);switch(w){case 1:w=C.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:w=C.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":w=C.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":w=C.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":w=C.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof y.is=="string"?C.createElement("select",{is:y.is}):C.createElement("select"),y.multiple?w.multiple=!0:y.size&&(w.size=y.size);break;default:w=typeof y.is=="string"?C.createElement(E,{is:y.is}):C.createElement(E)}}w[wa]=u,w[Ia]=y;e:for(C=u.child;C!==null;){if(C.tag===5||C.tag===6)w.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===u)break e;for(;C.sibling===null;){if(C.return===null||C.return===u)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}u.stateNode=w;e:switch(Rd(w,E,y),E){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}y&&iy(u)}}return Ra(u),FE(u,u.type,o===null?null:o.memoizedProps,u.pendingProps,d),null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==y&&iy(u);else{if(typeof y!="string"&&u.stateNode===null)throw Error(r(166));if(o=Sn.current,I_(u)){if(o=u.stateNode,d=u.memoizedProps,y=null,E=Ns,E!==null)switch(E.tag){case 27:case 5:y=E.memoizedProps}o[wa]=u,o=!!(o.nodeValue===d||y!==null&&y.suppressHydrationWarning===!0||j1(o.nodeValue,d)),o||j_(u,!0)}else o=P0(o).createTextNode(y),o[wa]=u,u.stateNode=o}return Ra(u),null;case 31:if(d=u.memoizedState,o===null||o.memoizedState!==null){if(y=I_(u),d!==null){if(o===null){if(!y)throw Error(r(318));if(o=u.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(557));o[wa]=u}else J_(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Ra(u),o=!1}else d=rT(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=d),o=!0;if(!o)return u.flags&256?(Zg(u),u):(Zg(u),null);if((u.flags&128)!==0)throw Error(r(558))}return Ra(u),null;case 13:if(y=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(E=I_(u),y!==null&&y.dehydrated!==null){if(o===null){if(!E)throw Error(r(318));if(E=u.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(r(317));E[wa]=u}else J_(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Ra(u),E=!1}else E=rT(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=E),E=!0;if(!E)return u.flags&256?(Zg(u),u):(Zg(u),null)}return Zg(u),(u.flags&128)!==0?(u.lanes=d,u):(d=y!==null,o=o!==null&&o.memoizedState!==null,d&&(y=u.child,E=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(E=y.alternate.memoizedState.cachePool.pool),w=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(w=y.memoizedState.cachePool.pool),w!==E&&(y.flags|=2048)),d!==o&&d&&(u.child.flags|=8192),p0(u,u.updateQueue),Ra(u),null);case 4:return ei(),o===null&&sw(u.stateNode.containerInfo),Ra(u),null;case 10:return ey(u.type),Ra(u),null;case 19:if(et(za),y=u.memoizedState,y===null)return Ra(u),null;if(E=(u.flags&128)!==0,w=y.rendering,w===null)if(E)gT(y,!1);else{if(Ba!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(w=t0(o),w!==null){for(u.flags|=128,gT(y,!1),o=w.updateQueue,u.updateQueue=o,p0(u,o),u.subtreeFlags=0,o=d,d=u.child;d!==null;)Wb(d,o),d=d.sibling;return vn(za,za.current&1|2),No&&Or(u,y.treeForkCount),u.child}o=o.sibling}y.tail!==null&&Na()>v0&&(u.flags|=128,E=!0,gT(y,!1),u.lanes=4194304)}else{if(!E)if(o=t0(w),o!==null){if(u.flags|=128,E=!0,o=o.updateQueue,u.updateQueue=o,p0(u,o),gT(y,!0),y.tail===null&&y.tailMode==="hidden"&&!w.alternate&&!No)return Ra(u),null}else 2*Na()-y.renderingStartTime>v0&&d!==536870912&&(u.flags|=128,E=!0,gT(y,!1),u.lanes=4194304);y.isBackwards?(w.sibling=u.child,u.child=w):(o=y.last,o!==null?o.sibling=w:u.child=w,y.last=w)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=Na(),o.sibling=null,d=za.current,vn(za,E?d&1|2:d&1),No&&Or(u,y.treeForkCount),o):(Ra(u),null);case 22:case 23:return Zg(u),aE(),y=u.memoizedState!==null,o!==null?o.memoizedState!==null!==y&&(u.flags|=8192):y&&(u.flags|=8192),y?(d&536870912)!==0&&(u.flags&128)===0&&(Ra(u),u.subtreeFlags&6&&(u.flags|=8192)):Ra(u),d=u.updateQueue,d!==null&&p0(u,d.retryQueue),d=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==d&&(u.flags|=2048),o!==null&&et(fv),null;case 24:return d=null,o!==null&&(d=o.memoizedState.cache),u.memoizedState.cache!==d&&(u.flags|=2048),ey(iu),Ra(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function zI(o,u){switch(Fa(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return ey(iu),ei(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return Ea(u),null;case 31:if(u.memoizedState!==null){if(Zg(u),u.alternate===null)throw Error(r(340));J_()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 13:if(Zg(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(r(340));J_()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return et(za),null;case 4:return ei(),null;case 10:return ey(u.type),null;case 22:case 23:return Zg(u),aE(),o!==null&&et(fv),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return ey(iu),null;case 25:return null;default:return null}}function KA(o,u){switch(Fa(u),u.tag){case 3:ey(iu),ei();break;case 26:case 27:case 5:Ea(u);break;case 4:ei();break;case 31:u.memoizedState!==null&&Zg(u);break;case 13:Zg(u);break;case 19:et(za);break;case 10:ey(u.type);break;case 22:case 23:Zg(u),aE(),o!==null&&et(fv);break;case 24:ey(iu)}}function _T(o,u){try{var d=u.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var E=y.next;d=E;do{if((d.tag&o)===o){y=void 0;var w=d.create,C=d.inst;y=w(),C.destroy=y}d=d.next}while(d!==E)}}catch(ee){Js(u,u.return,ee)}}function Oy(o,u,d){try{var y=u.updateQueue,E=y!==null?y.lastEffect:null;if(E!==null){var w=E.next;y=w;do{if((y.tag&o)===o){var C=y.inst,ee=C.destroy;if(ee!==void 0){C.destroy=void 0,E=u;var xe=d,qe=ee;try{qe()}catch(At){Js(E,xe,At)}}}y=y.next}while(y!==w)}}catch(At){Js(u,u.return,At)}}function ZA(o){var u=o.updateQueue;if(u!==null){var d=o.stateNode;try{Uw(u,d)}catch(y){Js(o,o.return,y)}}}function YA(o,u,d){d.props=_v(o.type,o.memoizedProps),d.state=o.memoizedState;try{d.componentWillUnmount()}catch(y){Js(o,u,y)}}function yT(o,u){try{var d=o.ref;if(d!==null){switch(o.tag){case 26:case 27:case 5:var y=o.stateNode;break;case 30:y=o.stateNode;break;default:y=o.stateNode}typeof d=="function"?o.refCleanup=d(y):d.current=y}}catch(E){Js(o,u,E)}}function q_(o,u){var d=o.ref,y=o.refCleanup;if(d!==null)if(typeof y=="function")try{y()}catch(E){Js(o,u,E)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(E){Js(o,u,E)}else d.current=null}function XA(o){var u=o.type,d=o.memoizedProps,y=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":d.autoFocus&&y.focus();break e;case"img":d.src?y.src=d.src:d.srcSet&&(y.srcset=d.srcSet)}}catch(E){Js(o,o.return,E)}}function UE(o,u,d){try{var y=o.stateNode;cS(y,o.type,d,u),y[Ia]=u}catch(E){Js(o,o.return,E)}}function QA(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&ky(o.type)||o.tag===4}function BE(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||QA(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&ky(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function $E(o,u,d){var y=o.tag;if(y===5||y===6)o=o.stateNode,u?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(o,u):(u=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,u.appendChild(o),d=d._reactRootContainer,d!=null||u.onclick!==null||(u.onclick=Be));else if(y!==4&&(y===27&&ky(o.type)&&(d=o.stateNode,u=null),o=o.child,o!==null))for($E(o,u,d),o=o.sibling;o!==null;)$E(o,u,d),o=o.sibling}function m0(o,u,d){var y=o.tag;if(y===5||y===6)o=o.stateNode,u?d.insertBefore(o,u):d.appendChild(o);else if(y!==4&&(y===27&&ky(o.type)&&(d=o.stateNode),o=o.child,o!==null))for(m0(o,u,d),o=o.sibling;o!==null;)m0(o,u,d),o=o.sibling}function JA(o){var u=o.stateNode,d=o.memoizedProps;try{for(var y=o.type,E=u.attributes;E.length;)u.removeAttributeNode(E[0]);Rd(u,y,d),u[wa]=o,u[Ia]=d}catch(w){Js(o,o.return,w)}}var oy=!1,au=!1,zE=!1,e1=typeof WeakSet=="function"?WeakSet:Set,Qu=null;function jI(o,u){if(o=o.containerInfo,uw=M0,o=tv(o),k_(o)){if("selectionStart"in o)var d={start:o.selectionStart,end:o.selectionEnd};else e:{d=(d=o.ownerDocument)&&d.defaultView||window;var y=d.getSelection&&d.getSelection();if(y&&y.rangeCount!==0){d=y.anchorNode;var E=y.anchorOffset,w=y.focusNode;y=y.focusOffset;try{d.nodeType,w.nodeType}catch{d=null;break e}var C=0,ee=-1,xe=-1,qe=0,At=0,Ft=o,Ke=null;t:for(;;){for(var tt;Ft!==d||E!==0&&Ft.nodeType!==3||(ee=C+E),Ft!==w||y!==0&&Ft.nodeType!==3||(xe=C+y),Ft.nodeType===3&&(C+=Ft.nodeValue.length),(tt=Ft.firstChild)!==null;)Ke=Ft,Ft=tt;for(;;){if(Ft===o)break t;if(Ke===d&&++qe===E&&(ee=C),Ke===w&&++At===y&&(xe=C),(tt=Ft.nextSibling)!==null)break;Ft=Ke,Ke=Ft.parentNode}Ft=tt}d=ee===-1||xe===-1?null:{start:ee,end:xe}}else d=null}d=d||{start:0,end:0}}else d=null;for(cw={focusedElem:o,selectionRange:d},M0=!1,Qu=u;Qu!==null;)if(u=Qu,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,Qu=o;else for(;Qu!==null;){switch(u=Qu,w=u.alternate,o=u.flags,u.tag){case 0:if((o&4)!==0&&(o=u.updateQueue,o=o!==null?o.events:null,o!==null))for(d=0;d<o.length;d++)E=o[d],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&w!==null){o=void 0,d=u,E=w.memoizedProps,w=w.memoizedState,y=d.stateNode;try{var dr=_v(d.type,E);o=y.getSnapshotBeforeUpdate(dr,w),y.__reactInternalSnapshotBeforeUpdate=o}catch(Zr){Js(d,d.return,Zr)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,d=o.nodeType,d===9)dw(o);else if(d===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":dw(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=u.sibling,o!==null){o.return=u.return,Qu=o;break}Qu=u.return}}function t1(o,u,d){var y=d.flags;switch(d.tag){case 0:case 11:case 15:ay(o,d),y&4&&_T(5,d);break;case 1:if(ay(o,d),y&4)if(o=d.stateNode,u===null)try{o.componentDidMount()}catch(C){Js(d,d.return,C)}else{var E=_v(d.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(E,u,o.__reactInternalSnapshotBeforeUpdate)}catch(C){Js(d,d.return,C)}}y&64&&ZA(d),y&512&&yT(d,d.return);break;case 3:if(ay(o,d),y&64&&(o=d.updateQueue,o!==null)){if(u=null,d.child!==null)switch(d.child.tag){case 27:case 5:u=d.child.stateNode;break;case 1:u=d.child.stateNode}try{Uw(o,u)}catch(C){Js(d,d.return,C)}}break;case 27:u===null&&y&4&&JA(d);case 26:case 5:ay(o,d),u===null&&y&4&&XA(d),y&512&&yT(d,d.return);break;case 12:ay(o,d);break;case 31:ay(o,d),y&4&&i1(o,d);break;case 13:ay(o,d),y&4&&o1(o,d),y&64&&(o=d.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(d=QI.bind(null,d),yS(o,d))));break;case 22:if(y=d.memoizedState!==null||oy,!y){u=u!==null&&u.memoizedState!==null||au,E=oy;var w=au;oy=y,(au=u)&&!w?ly(o,d,(d.subtreeFlags&8772)!==0):ay(o,d),oy=E,au=w}break;case 30:break;default:ay(o,d)}}function n1(o){var u=o.alternate;u!==null&&(o.alternate=null,n1(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&g_(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Oa=null,Cg=!1;function sy(o,u,d){for(d=d.child;d!==null;)r1(o,u,d),d=d.sibling}function r1(o,u,d){if(rr&&typeof rr.onCommitFiberUnmount=="function")try{rr.onCommitFiberUnmount(hu,d)}catch{}switch(d.tag){case 26:au||q_(d,u),sy(o,u,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:au||q_(d,u);var y=Oa,E=Cg;ky(d.type)&&(Oa=d.stateNode,Cg=!1),sy(o,u,d),RT(d.stateNode),Oa=y,Cg=E;break;case 5:au||q_(d,u);case 6:if(y=Oa,E=Cg,Oa=null,sy(o,u,d),Oa=y,Cg=E,Oa!==null)if(Cg)try{(Oa.nodeType===9?Oa.body:Oa.nodeName==="HTML"?Oa.ownerDocument.body:Oa).removeChild(d.stateNode)}catch(w){Js(d,u,w)}else try{Oa.removeChild(d.stateNode)}catch(w){Js(d,u,w)}break;case 18:Oa!==null&&(Cg?(o=Oa,Z1(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,d.stateNode),Jv(o)):Z1(Oa,d.stateNode));break;case 4:y=Oa,E=Cg,Oa=d.stateNode.containerInfo,Cg=!0,sy(o,u,d),Oa=y,Cg=E;break;case 0:case 11:case 14:case 15:Oy(2,d,u),au||Oy(4,d,u),sy(o,u,d);break;case 1:au||(q_(d,u),y=d.stateNode,typeof y.componentWillUnmount=="function"&&YA(d,u,y)),sy(o,u,d);break;case 21:sy(o,u,d);break;case 22:au=(y=au)||d.memoizedState!==null,sy(o,u,d),au=y;break;default:sy(o,u,d)}}function i1(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Jv(o)}catch(d){Js(u,u.return,d)}}}function o1(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Jv(o)}catch(d){Js(u,u.return,d)}}function HI(o){switch(o.tag){case 31:case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new e1),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new e1),u;default:throw Error(r(435,o.tag))}}function g0(o,u){var d=HI(o);u.forEach(function(y){if(!d.has(y)){d.add(y);var E=JI.bind(null,o,y);y.then(E,E)}})}function Dg(o,u){var d=u.deletions;if(d!==null)for(var y=0;y<d.length;y++){var E=d[y],w=o,C=u,ee=C;e:for(;ee!==null;){switch(ee.tag){case 27:if(ky(ee.type)){Oa=ee.stateNode,Cg=!1;break e}break;case 5:Oa=ee.stateNode,Cg=!1;break e;case 3:case 4:Oa=ee.stateNode.containerInfo,Cg=!0;break e}ee=ee.return}if(Oa===null)throw Error(r(160));r1(w,C,E),Oa=null,Cg=!1,w=E.alternate,w!==null&&(w.return=null),E.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)s1(u,o),u=u.sibling}var R_=null;function s1(o,u){var d=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Dg(u,o),Ng(o),y&4&&(Oy(3,o,o.return),_T(3,o),Oy(5,o,o.return));break;case 1:Dg(u,o),Ng(o),y&512&&(au||d===null||q_(d,d.return)),y&64&&oy&&(o=o.updateQueue,o!==null&&(y=o.callbacks,y!==null&&(d=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=d===null?y:d.concat(y))));break;case 26:var E=R_;if(Dg(u,o),Ng(o),y&512&&(au||d===null||q_(d,d.return)),y&4){var w=d!==null?d.memoizedState:null;if(y=o.memoizedState,d===null)if(y===null)if(o.stateNode===null){e:{y=o.type,d=o.memoizedProps,E=E.ownerDocument||E;t:switch(y){case"title":w=E.getElementsByTagName("title")[0],(!w||w[Sp]||w[wa]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=E.createElement(y),E.head.insertBefore(w,E.querySelector("head > title"))),Rd(w,y,d),w[wa]=o,Sa(w),y=w;break e;case"link":var C=sI("link","href",E).get(y+(d.href||""));if(C){for(var ee=0;ee<C.length;ee++)if(w=C[ee],w.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&w.getAttribute("rel")===(d.rel==null?null:d.rel)&&w.getAttribute("title")===(d.title==null?null:d.title)&&w.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){C.splice(ee,1);break t}}w=E.createElement(y),Rd(w,y,d),E.head.appendChild(w);break;case"meta":if(C=sI("meta","content",E).get(y+(d.content||""))){for(ee=0;ee<C.length;ee++)if(w=C[ee],w.getAttribute("content")===(d.content==null?null:""+d.content)&&w.getAttribute("name")===(d.name==null?null:d.name)&&w.getAttribute("property")===(d.property==null?null:d.property)&&w.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&w.getAttribute("charset")===(d.charSet==null?null:d.charSet)){C.splice(ee,1);break t}}w=E.createElement(y),Rd(w,y,d),E.head.appendChild(w);break;default:throw Error(r(468,y))}w[wa]=o,Sa(w),y=w}o.stateNode=y}else aI(E,o.type,o.stateNode);else o.stateNode=oI(E,y,o.memoizedProps);else w!==y?(w===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):w.count--,y===null?aI(E,o.type,o.stateNode):oI(E,y,o.memoizedProps)):y===null&&o.stateNode!==null&&UE(o,o.memoizedProps,d.memoizedProps)}break;case 27:Dg(u,o),Ng(o),y&512&&(au||d===null||q_(d,d.return)),d!==null&&y&4&&UE(o,o.memoizedProps,d.memoizedProps);break;case 5:if(Dg(u,o),Ng(o),y&512&&(au||d===null||q_(d,d.return)),o.flags&32){E=o.stateNode;try{Pa(E,"")}catch(dr){Js(o,o.return,dr)}}y&4&&o.stateNode!=null&&(E=o.memoizedProps,UE(o,E,d!==null?d.memoizedProps:E)),y&1024&&(zE=!0);break;case 6:if(Dg(u,o),Ng(o),y&4){if(o.stateNode===null)throw Error(r(162));y=o.memoizedProps,d=o.stateNode;try{d.nodeValue=y}catch(dr){Js(o,o.return,dr)}}break;case 3:if(D0=null,E=R_,R_=O0(u.containerInfo),Dg(u,o),R_=E,Ng(o),y&4&&d!==null&&d.memoizedState.isDehydrated)try{Jv(u.containerInfo)}catch(dr){Js(o,o.return,dr)}zE&&(zE=!1,a1(o));break;case 4:y=R_,R_=O0(o.stateNode.containerInfo),Dg(u,o),Ng(o),R_=y;break;case 12:Dg(u,o),Ng(o);break;case 31:Dg(u,o),Ng(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,g0(o,y)));break;case 13:Dg(u,o),Ng(o),o.child.flags&8192&&o.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(y0=Na()),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,g0(o,y)));break;case 22:E=o.memoizedState!==null;var xe=d!==null&&d.memoizedState!==null,qe=oy,At=au;if(oy=qe||E,au=At||xe,Dg(u,o),au=At,oy=qe,Ng(o),y&8192)e:for(u=o.stateNode,u._visibility=E?u._visibility&-2:u._visibility|1,E&&(d===null||xe||oy||au||yv(o)),d=null,u=o;;){if(u.tag===5||u.tag===26){if(d===null){xe=d=u;try{if(w=xe.stateNode,E)C=w.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{ee=xe.stateNode;var Ft=xe.memoizedProps.style,Ke=Ft!=null&&Ft.hasOwnProperty("display")?Ft.display:null;ee.style.display=Ke==null||typeof Ke=="boolean"?"":(""+Ke).trim()}}catch(dr){Js(xe,xe.return,dr)}}}else if(u.tag===6){if(d===null){xe=u;try{xe.stateNode.nodeValue=E?"":xe.memoizedProps}catch(dr){Js(xe,xe.return,dr)}}}else if(u.tag===18){if(d===null){xe=u;try{var tt=xe.stateNode;E?Y1(tt,!0):Y1(xe.stateNode,!1)}catch(dr){Js(xe,xe.return,dr)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}y&4&&(y=o.updateQueue,y!==null&&(d=y.retryQueue,d!==null&&(y.retryQueue=null,g0(o,d))));break;case 19:Dg(u,o),Ng(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,g0(o,y)));break;case 30:break;case 21:break;default:Dg(u,o),Ng(o)}}function Ng(o){var u=o.flags;if(u&2){try{for(var d,y=o.return;y!==null;){if(QA(y)){d=y;break}y=y.return}if(d==null)throw Error(r(160));switch(d.tag){case 27:var E=d.stateNode,w=BE(o);m0(o,w,E);break;case 5:var C=d.stateNode;d.flags&32&&(Pa(C,""),d.flags&=-33);var ee=BE(o);m0(o,ee,C);break;case 3:case 4:var xe=d.stateNode.containerInfo,qe=BE(o);$E(o,qe,xe);break;default:throw Error(r(161))}}catch(At){Js(o,o.return,At)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function a1(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;a1(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function ay(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)t1(o,u.alternate,u),u=u.sibling}function yv(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:Oy(4,u,u.return),yv(u);break;case 1:q_(u,u.return);var d=u.stateNode;typeof d.componentWillUnmount=="function"&&YA(u,u.return,d),yv(u);break;case 27:RT(u.stateNode);case 26:case 5:q_(u,u.return),yv(u);break;case 22:u.memoizedState===null&&yv(u);break;case 30:yv(u);break;default:yv(u)}o=o.sibling}}function ly(o,u,d){for(d=d&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var y=u.alternate,E=o,w=u,C=w.flags;switch(w.tag){case 0:case 11:case 15:ly(E,w,d),_T(4,w);break;case 1:if(ly(E,w,d),y=w,E=y.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(qe){Js(y,y.return,qe)}if(y=w,E=y.updateQueue,E!==null){var ee=y.stateNode;try{var xe=E.shared.hiddenCallbacks;if(xe!==null)for(E.shared.hiddenCallbacks=null,E=0;E<xe.length;E++)Fw(xe[E],ee)}catch(qe){Js(y,y.return,qe)}}d&&C&64&&ZA(w),yT(w,w.return);break;case 27:JA(w);case 26:case 5:ly(E,w,d),d&&y===null&&C&4&&XA(w),yT(w,w.return);break;case 12:ly(E,w,d);break;case 31:ly(E,w,d),d&&C&4&&i1(E,w);break;case 13:ly(E,w,d),d&&C&4&&o1(E,w);break;case 22:w.memoizedState===null&&ly(E,w,d),yT(w,w.return);break;case 30:break;default:ly(E,w,d)}u=u.sibling}}function jE(o,u){var d=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==d&&(o!=null&&o.refCount++,d!=null&&iT(d))}function HE(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&iT(o))}function x_(o,u,d,y){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)l1(o,u,d,y),u=u.sibling}function l1(o,u,d,y){var E=u.flags;switch(u.tag){case 0:case 11:case 15:x_(o,u,d,y),E&2048&&_T(9,u);break;case 1:x_(o,u,d,y);break;case 3:x_(o,u,d,y),E&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&iT(o)));break;case 12:if(E&2048){x_(o,u,d,y),o=u.stateNode;try{var w=u.memoizedProps,C=w.id,ee=w.onPostCommit;typeof ee=="function"&&ee(C,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(xe){Js(u,u.return,xe)}}else x_(o,u,d,y);break;case 31:x_(o,u,d,y);break;case 13:x_(o,u,d,y);break;case 23:break;case 22:w=u.stateNode,C=u.alternate,u.memoizedState!==null?w._visibility&2?x_(o,u,d,y):vT(o,u):w._visibility&2?x_(o,u,d,y):(w._visibility|=2,zv(o,u,d,y,(u.subtreeFlags&10256)!==0||!1)),E&2048&&jE(C,u);break;case 24:x_(o,u,d,y),E&2048&&HE(u.alternate,u);break;default:x_(o,u,d,y)}}function zv(o,u,d,y,E){for(E=E&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var w=o,C=u,ee=d,xe=y,qe=C.flags;switch(C.tag){case 0:case 11:case 15:zv(w,C,ee,xe,E),_T(8,C);break;case 23:break;case 22:var At=C.stateNode;C.memoizedState!==null?At._visibility&2?zv(w,C,ee,xe,E):vT(w,C):(At._visibility|=2,zv(w,C,ee,xe,E)),E&&qe&2048&&jE(C.alternate,C);break;case 24:zv(w,C,ee,xe,E),E&&qe&2048&&HE(C.alternate,C);break;default:zv(w,C,ee,xe,E)}u=u.sibling}}function vT(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var d=o,y=u,E=y.flags;switch(y.tag){case 22:vT(d,y),E&2048&&jE(y.alternate,y);break;case 24:vT(d,y),E&2048&&HE(y.alternate,y);break;default:vT(d,y)}u=u.sibling}}var bT=8192;function jv(o,u,d){if(o.subtreeFlags&bT)for(o=o.child;o!==null;)u1(o,u,d),o=o.sibling}function u1(o,u,d){switch(o.tag){case 26:jv(o,u,d),o.flags&bT&&o.memoizedState!==null&&OS(d,R_,o.memoizedState,o.memoizedProps);break;case 5:jv(o,u,d);break;case 3:case 4:var y=R_;R_=O0(o.stateNode.containerInfo),jv(o,u,d),R_=y;break;case 22:o.memoizedState===null&&(y=o.alternate,y!==null&&y.memoizedState!==null?(y=bT,bT=16777216,jv(o,u,d),bT=y):jv(o,u,d));break;default:jv(o,u,d)}}function c1(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function TT(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var d=0;d<u.length;d++){var y=u[d];Qu=y,f1(y,o)}c1(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)h1(o),o=o.sibling}function h1(o){switch(o.tag){case 0:case 11:case 15:TT(o),o.flags&2048&&Oy(9,o,o.return);break;case 3:TT(o);break;case 12:TT(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,_0(o)):TT(o);break;default:TT(o)}}function _0(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var d=0;d<u.length;d++){var y=u[d];Qu=y,f1(y,o)}c1(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:Oy(8,u,u.return),_0(u);break;case 22:d=u.stateNode,d._visibility&2&&(d._visibility&=-3,_0(u));break;default:_0(u)}o=o.sibling}}function f1(o,u){for(;Qu!==null;){var d=Qu;switch(d.tag){case 0:case 11:case 15:Oy(8,d,u);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var y=d.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:iT(d.memoizedState.cache)}if(y=d.child,y!==null)y.return=d,Qu=y;else e:for(d=o;Qu!==null;){y=Qu;var E=y.sibling,w=y.return;if(n1(y),y===d){Qu=null;break e}if(E!==null){E.return=w,Qu=E;break e}Qu=w}}}var qI={getCacheForType:function(o){var u=Td(iu),d=u.data.get(o);return d===void 0&&(d=o(),u.data.set(o,d)),d},cacheSignal:function(){return Td(iu).controller.signal}},GI=typeof WeakMap=="function"?WeakMap:Map,js=0,Ta=null,Mo=null,Uo=0,Qs=0,Yg=null,Cy=!1,Hv=!1,qE=!1,uy=0,Ba=0,Dy=0,vv=0,GE=0,Xg=0,qv=0,ET=null,Vg=null,WE=!1,y0=0,d1=0,v0=1/0,b0=null,Ny=null,yu=0,Vy=null,Gv=null,cy=0,KE=0,ZE=null,p1=null,wT=0,YE=null;function Qg(){return(js&2)!==0&&Uo!==0?Uo&-Uo:ze.T!==null?nw():O_()}function m1(){if(Xg===0)if((Uo&536870912)===0||No){var o=wt;wt<<=1,(wt&3932160)===0&&(wt=262144),Xg=o}else Xg=536870912;return o=Kg.current,o!==null&&(o.flags|=32),Xg}function Lg(o,u,d){(o===Ta&&(Qs===2||Qs===9)||o.cancelPendingCommit!==null)&&(Wv(o,0),Ly(o,Uo,Xg,!1)),ah(o,d),((js&2)===0||o!==Ta)&&(o===Ta&&((js&2)===0&&(vv|=d),Ba===4&&Ly(o,Uo,Xg,!1)),G_(o))}function g1(o,u,d){if((js&6)!==0)throw Error(r(327));var y=!d&&(u&127)===0&&(u&o.expiredLanes)===0||zo(o,u),E=y?ZI(o,u):QE(o,u,!0),w=y;do{if(E===0){Hv&&!y&&Ly(o,u,0,!1);break}else{if(d=o.current.alternate,w&&!WI(d)){E=QE(o,u,!1),w=!1;continue}if(E===2){if(w=u,o.errorRecoveryDisabledLanes&w)var C=0;else C=o.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){u=C;e:{var ee=o;E=ET;var xe=ee.current.memoizedState.isDehydrated;if(xe&&(Wv(ee,C).flags|=256),C=QE(ee,C,!1),C!==2){if(qE&&!xe){ee.errorRecoveryDisabledLanes|=w,vv|=w,E=4;break e}w=Vg,Vg=E,w!==null&&(Vg===null?Vg=w:Vg.push.apply(Vg,w))}E=C}if(w=!1,E!==2)continue}}if(E===1){Wv(o,0),Ly(o,u,0,!0);break}e:{switch(y=o,w=E,w){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:Ly(y,u,Xg,!Cy);break e;case 2:Vg=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(E=y0+300-Na(),10<E)){if(Ly(y,u,Xg,!Cy),qr(y,0,!0)!==0)break e;cy=u,y.timeoutHandle=W1(_1.bind(null,y,d,Vg,b0,WE,u,Xg,vv,qv,Cy,w,"Throttled",-0,0),E);break e}_1(y,d,Vg,b0,WE,u,Xg,vv,qv,Cy,w,null,-0,0)}}break}while(!0);G_(o)}function _1(o,u,d,y,E,w,C,ee,xe,qe,At,Ft,Ke,tt){if(o.timeoutHandle=-1,Ft=u.subtreeFlags,Ft&8192||(Ft&16785408)===16785408){Ft={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Be},u1(u,w,Ft);var dr=(w&62914560)===w?y0-Na():(w&4194048)===w?d1-Na():0;if(dr=CS(Ft,dr),dr!==null){cy=w,o.cancelPendingCommit=dr(I1.bind(null,o,u,w,d,y,E,C,ee,xe,At,Ft,null,Ke,tt)),Ly(o,w,C,!qe);return}}I1(o,u,w,d,y,E,C,ee,xe)}function WI(o){for(var u=o;;){var d=u.tag;if((d===0||d===11||d===15)&&u.flags&16384&&(d=u.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var y=0;y<d.length;y++){var E=d[y],w=E.getSnapshot;E=E.value;try{if(!Cu(w(),E))return!1}catch{return!1}}if(d=u.child,u.subtreeFlags&16384&&d!==null)d.return=u,u=d;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Ly(o,u,d,y){u&=~GE,u&=~vv,o.suspendedLanes|=u,o.pingedLanes&=~u,y&&(o.warmLanes|=u),y=o.expirationTimes;for(var E=u;0<E;){var w=31-Us(E),C=1<<w;y[w]=-1,E&=~C}d!==0&&st(o,d,u)}function T0(){return(js&6)===0?(AT(0),!1):!0}function XE(){if(Mo!==null){if(Qs===0)var o=Mo.return;else o=Mo,S_=H_=null,dE(o),kv=null,sT=0,o=Mo;for(;o!==null;)KA(o.alternate,o),o=o.return;Mo=null}}function Wv(o,u){var d=o.timeoutHandle;d!==-1&&(o.timeoutHandle=-1,dS(d)),d=o.cancelPendingCommit,d!==null&&(o.cancelPendingCommit=null,d()),cy=0,XE(),Ta=o,Mo=d=h_(o.current,null),Uo=u,Qs=0,Yg=null,Cy=!1,Hv=zo(o,u),qE=!1,qv=Xg=GE=vv=Dy=Ba=0,Vg=ET=null,WE=!1,(u&8)!==0&&(u|=u&32);var y=o.entangledLanes;if(y!==0)for(o=o.entanglements,y&=u;0<y;){var E=31-Us(y),w=1<<E;u|=o[E],y&=~w}return uy=u,sv(),d}function y1(o,u){ri=null,ze.H=pT,u===Mv||u===YT?(u=Vw(),Qs=3):u===tE?(u=Vw(),Qs=4):Qs=u===PE?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Yg=u,Mo===null&&(Ba=1,c0(o,g(u,o.current)))}function v1(){var o=Kg.current;return o===null?!0:(Uo&4194048)===Uo?f_===null:(Uo&62914560)===Uo||(Uo&536870912)!==0?o===f_:!1}function b1(){var o=ze.H;return ze.H=pT,o===null?pT:o}function T1(){var o=ze.A;return ze.A=qI,o}function E0(){Ba=4,Cy||(Uo&4194048)!==Uo&&Kg.current!==null||(Hv=!0),(Dy&134217727)===0&&(vv&134217727)===0||Ta===null||Ly(Ta,Uo,Xg,!1)}function QE(o,u,d){var y=js;js|=2;var E=b1(),w=T1();(Ta!==o||Uo!==u)&&(b0=null,Wv(o,u)),u=!1;var C=Ba;e:do try{if(Qs!==0&&Mo!==null){var ee=Mo,xe=Yg;switch(Qs){case 8:XE(),C=6;break e;case 3:case 2:case 9:case 6:Kg.current===null&&(u=!0);var qe=Qs;if(Qs=0,Yg=null,Kv(o,ee,xe,qe),d&&Hv){C=0;break e}break;default:qe=Qs,Qs=0,Yg=null,Kv(o,ee,xe,qe)}}KI(),C=Ba;break}catch(At){y1(o,At)}while(!0);return u&&o.shellSuspendCounter++,S_=H_=null,js=y,ze.H=E,ze.A=w,Mo===null&&(Ta=null,Uo=0,sv()),C}function KI(){for(;Mo!==null;)E1(Mo)}function ZI(o,u){var d=js;js|=2;var y=b1(),E=T1();Ta!==o||Uo!==u?(b0=null,v0=Na()+500,Wv(o,u)):Hv=zo(o,u);e:do try{if(Qs!==0&&Mo!==null){u=Mo;var w=Yg;t:switch(Qs){case 1:Qs=0,Yg=null,Kv(o,u,w,1);break;case 2:case 9:if(Dw(w)){Qs=0,Yg=null,w1(u);break}u=function(){Qs!==2&&Qs!==9||Ta!==o||(Qs=7),G_(o)},w.then(u,u);break e;case 3:Qs=7;break e;case 4:Qs=5;break e;case 7:Dw(w)?(Qs=0,Yg=null,w1(u)):(Qs=0,Yg=null,Kv(o,u,w,7));break;case 5:var C=null;switch(Mo.tag){case 26:C=Mo.memoizedState;case 5:case 27:var ee=Mo;if(C?lI(C):ee.stateNode.complete){Qs=0,Yg=null;var xe=ee.sibling;if(xe!==null)Mo=xe;else{var qe=ee.return;qe!==null?(Mo=qe,w0(qe)):Mo=null}break t}}Qs=0,Yg=null,Kv(o,u,w,5);break;case 6:Qs=0,Yg=null,Kv(o,u,w,6);break;case 8:XE(),Ba=6;break e;default:throw Error(r(462))}}YI();break}catch(At){y1(o,At)}while(!0);return S_=H_=null,ze.H=y,ze.A=E,js=d,Mo!==null?0:(Ta=null,Uo=0,sv(),Ba)}function YI(){for(;Mo!==null&&!Jg();)E1(Mo)}function E1(o){var u=GA(o.alternate,o,uy);o.memoizedProps=o.pendingProps,u===null?w0(o):Mo=u}function w1(o){var u=o,d=u.alternate;switch(u.tag){case 15:case 0:u=BA(d,u,u.pendingProps,u.type,void 0,Uo);break;case 11:u=BA(d,u,u.pendingProps,u.type.render,u.ref,Uo);break;case 5:dE(u);default:KA(d,u),u=Mo=Wb(u,uy),u=GA(d,u,uy)}o.memoizedProps=o.pendingProps,u===null?w0(o):Mo=u}function Kv(o,u,d,y){S_=H_=null,dE(u),kv=null,sT=0;var E=u.return;try{if(FI(o,E,u,d,Uo)){Ba=1,c0(o,g(d,o.current)),Mo=null;return}}catch(w){if(E!==null)throw Mo=E,w;Ba=1,c0(o,g(d,o.current)),Mo=null;return}u.flags&32768?(No||y===1?o=!0:Hv||(Uo&536870912)!==0?o=!1:(Cy=o=!0,(y===2||y===9||y===3||y===6)&&(y=Kg.current,y!==null&&y.tag===13&&(y.flags|=16384))),A1(u,o)):w0(u)}function w0(o){var u=o;do{if((u.flags&32768)!==0){A1(u,Cy);return}o=u.return;var d=$I(u.alternate,u,uy);if(d!==null){Mo=d;return}if(u=u.sibling,u!==null){Mo=u;return}Mo=u=o}while(u!==null);Ba===0&&(Ba=5)}function A1(o,u){do{var d=zI(o.alternate,o);if(d!==null){d.flags&=32767,Mo=d;return}if(d=o.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!u&&(o=o.sibling,o!==null)){Mo=o;return}Mo=o=d}while(o!==null);Ba=6,Mo=null}function I1(o,u,d,y,E,w,C,ee,xe){o.cancelPendingCommit=null;do A0();while(yu!==0);if((js&6)!==0)throw Error(r(327));if(u!==null){if(u===o.current)throw Error(r(177));if(w=u.lanes|u.childLanes,w|=Pv,yg(o,d,w,C,ee,xe),o===Ta&&(Mo=Ta=null,Uo=0),Gv=u,Vy=o,cy=d,KE=w,ZE=E,p1=y,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,eS(ui,function(){return O1(),null})):(o.callbackNode=null,o.callbackPriority=0),y=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||y){y=ze.T,ze.T=null,E=An.p,An.p=2,C=js,js|=4;try{jI(o,u,d)}finally{js=C,An.p=E,ze.T=y}}yu=1,S1(),R1(),x1()}}function S1(){if(yu===1){yu=0;var o=Vy,u=Gv,d=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||d){d=ze.T,ze.T=null;var y=An.p;An.p=2;var E=js;js|=4;try{s1(u,o);var w=cw,C=tv(o.containerInfo),ee=w.focusedElem,xe=w.selectionRange;if(C!==ee&&ee&&ee.ownerDocument&&Iv(ee.ownerDocument.documentElement,ee)){if(xe!==null&&k_(ee)){var qe=xe.start,At=xe.end;if(At===void 0&&(At=qe),"selectionStart"in ee)ee.selectionStart=qe,ee.selectionEnd=Math.min(At,ee.value.length);else{var Ft=ee.ownerDocument||document,Ke=Ft&&Ft.defaultView||window;if(Ke.getSelection){var tt=Ke.getSelection(),dr=ee.textContent.length,Zr=Math.min(xe.start,dr),_a=xe.end===void 0?Zr:Math.min(xe.end,dr);!tt.extend&&Zr>_a&&(C=_a,_a=Zr,Zr=C);var Le=ev(ee,Zr),Oe=ev(ee,_a);if(Le&&Oe&&(tt.rangeCount!==1||tt.anchorNode!==Le.node||tt.anchorOffset!==Le.offset||tt.focusNode!==Oe.node||tt.focusOffset!==Oe.offset)){var He=Ft.createRange();He.setStart(Le.node,Le.offset),tt.removeAllRanges(),Zr>_a?(tt.addRange(He),tt.extend(Oe.node,Oe.offset)):(He.setEnd(Oe.node,Oe.offset),tt.addRange(He))}}}}for(Ft=[],tt=ee;tt=tt.parentNode;)tt.nodeType===1&&Ft.push({element:tt,left:tt.scrollLeft,top:tt.scrollTop});for(typeof ee.focus=="function"&&ee.focus(),ee=0;ee<Ft.length;ee++){var Lt=Ft[ee];Lt.element.scrollLeft=Lt.left,Lt.element.scrollTop=Lt.top}}M0=!!uw,cw=uw=null}finally{js=E,An.p=y,ze.T=d}}o.current=u,yu=2}}function R1(){if(yu===2){yu=0;var o=Vy,u=Gv,d=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||d){d=ze.T,ze.T=null;var y=An.p;An.p=2;var E=js;js|=4;try{t1(o,u.alternate,u)}finally{js=E,An.p=y,ze.T=d}}yu=3}}function x1(){if(yu===4||yu===3){yu=0,Nd();var o=Vy,u=Gv,d=cy,y=p1;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?yu=5:(yu=0,Gv=Vy=null,P1(o,o.pendingLanes));var E=o.pendingLanes;if(E===0&&(Ny=null),Wn(d),u=u.stateNode,rr&&typeof rr.onCommitFiberRoot=="function")try{rr.onCommitFiberRoot(hu,u,void 0,(u.current.flags&128)===128)}catch{}if(y!==null){u=ze.T,E=An.p,An.p=2,ze.T=null;try{for(var w=o.onRecoverableError,C=0;C<y.length;C++){var ee=y[C];w(ee.value,{componentStack:ee.stack})}}finally{ze.T=u,An.p=E}}(cy&3)!==0&&A0(),G_(o),E=o.pendingLanes,(d&261930)!==0&&(E&42)!==0?o===YE?wT++:(wT=0,YE=o):wT=0,AT(0)}}function P1(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,iT(u)))}function A0(){return S1(),R1(),x1(),O1()}function O1(){if(yu!==5)return!1;var o=Vy,u=KE;KE=0;var d=Wn(cy),y=ze.T,E=An.p;try{An.p=32>d?32:d,ze.T=null,d=ZE,ZE=null;var w=Vy,C=cy;if(yu=0,Gv=Vy=null,cy=0,(js&6)!==0)throw Error(r(331));var ee=js;if(js|=4,h1(w.current),l1(w,w.current,C,d),js=ee,AT(0,!1),rr&&typeof rr.onPostCommitFiberRoot=="function")try{rr.onPostCommitFiberRoot(hu,w)}catch{}return!0}finally{An.p=E,ze.T=y,P1(o,u)}}function C1(o,u,d){u=g(d,u),u=xE(o.stateNode,u,2),o=Ry(o,u,2),o!==null&&(ah(o,2),G_(o))}function Js(o,u,d){if(o.tag===3)C1(o,o,d);else for(;u!==null;){if(u.tag===3){C1(u,o,d);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Ny===null||!Ny.has(y))){o=g(d,o),d=DA(2),y=Ry(u,d,2),y!==null&&(NA(d,y,u,o),ah(y,2),G_(y));break}}u=u.return}}function JE(o,u,d){var y=o.pingCache;if(y===null){y=o.pingCache=new GI;var E=new Set;y.set(u,E)}else E=y.get(u),E===void 0&&(E=new Set,y.set(u,E));E.has(d)||(qE=!0,E.add(d),o=XI.bind(null,o,u,d),u.then(o,o))}function XI(o,u,d){var y=o.pingCache;y!==null&&y.delete(u),o.pingedLanes|=o.suspendedLanes&d,o.warmLanes&=~d,Ta===o&&(Uo&d)===d&&(Ba===4||Ba===3&&(Uo&62914560)===Uo&&300>Na()-y0?(js&2)===0&&Wv(o,0):GE|=d,qv===Uo&&(qv=0)),G_(o)}function D1(o,u){u===0&&(u=xa()),o=c_(o,u),o!==null&&(ah(o,u),G_(o))}function QI(o){var u=o.memoizedState,d=0;u!==null&&(d=u.retryLane),D1(o,d)}function JI(o,u){var d=0;switch(o.tag){case 31:case 13:var y=o.stateNode,E=o.memoizedState;E!==null&&(d=E.retryLane);break;case 19:y=o.stateNode;break;case 22:y=o.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(u),D1(o,d)}function eS(o,u){return ra(o,u)}var I0=null,Zv=null,ew=!1,S0=!1,tw=!1,My=0;function G_(o){o!==Zv&&o.next===null&&(Zv===null?I0=Zv=o:Zv=Zv.next=o),S0=!0,ew||(ew=!0,nS())}function AT(o,u){if(!tw&&S0){tw=!0;do for(var d=!1,y=I0;y!==null;){if(o!==0){var E=y.pendingLanes;if(E===0)var w=0;else{var C=y.suspendedLanes,ee=y.pingedLanes;w=(1<<31-Us(42|o)+1)-1,w&=E&~(C&~ee),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(d=!0,M1(y,w))}else w=Uo,w=qr(y,y===Ta?w:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(w&3)===0||zo(y,w)||(d=!0,M1(y,w));y=y.next}while(d);tw=!1}}function tS(){N1()}function N1(){S0=ew=!1;var o=0;My!==0&&fS()&&(o=My);for(var u=Na(),d=null,y=I0;y!==null;){var E=y.next,w=V1(y,u);w===0?(y.next=null,d===null?I0=E:d.next=E,E===null&&(Zv=d)):(d=y,(o!==0||(w&3)!==0)&&(S0=!0)),y=E}yu!==0&&yu!==5||AT(o),My!==0&&(My=0)}function V1(o,u){for(var d=o.suspendedLanes,y=o.pingedLanes,E=o.expirationTimes,w=o.pendingLanes&-62914561;0<w;){var C=31-Us(w),ee=1<<C,xe=E[C];xe===-1?((ee&d)===0||(ee&y)!==0)&&(E[C]=fu(ee,u)):xe<=u&&(o.expiredLanes|=ee),w&=~ee}if(u=Ta,d=Uo,d=qr(o,o===u?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y=o.callbackNode,d===0||o===u&&(Qs===2||Qs===9)||o.cancelPendingCommit!==null)return y!==null&&y!==null&&Da(y),o.callbackNode=null,o.callbackPriority=0;if((d&3)===0||zo(o,d)){if(u=d&-d,u===o.callbackPriority)return u;switch(y!==null&&Da(y),Wn(d)){case 2:case 8:d=e_;break;case 32:d=ui;break;case 268435456:d=Kr;break;default:d=ui}return y=L1.bind(null,o),d=ra(d,y),o.callbackPriority=u,o.callbackNode=d,u}return y!==null&&y!==null&&Da(y),o.callbackPriority=2,o.callbackNode=null,2}function L1(o,u){if(yu!==0&&yu!==5)return o.callbackNode=null,o.callbackPriority=0,null;var d=o.callbackNode;if(A0()&&o.callbackNode!==d)return null;var y=Uo;return y=qr(o,o===Ta?y:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y===0?null:(g1(o,y,u),V1(o,Na()),o.callbackNode!=null&&o.callbackNode===d?L1.bind(null,o):null)}function M1(o,u){if(A0())return null;g1(o,u,!0)}function nS(){pS(function(){(js&6)!==0?ra(uu,tS):N1()})}function nw(){if(My===0){var o=Vv;o===0&&(o=Ve,Ve<<=1,(Ve&261888)===0&&(Ve=256)),My=o}return My}function k1(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Re(""+o)}function F1(o,u){var d=u.ownerDocument.createElement("input");return d.name=u.name,d.value=u.value,o.id&&d.setAttribute("form",o.id),u.parentNode.insertBefore(d,u),o=new FormData(o),d.parentNode.removeChild(d),o}function rS(o,u,d,y,E){if(u==="submit"&&d&&d.stateNode===E){var w=k1((E[Ia]||null).action),C=y.submitter;C&&(u=(u=C[Ia]||null)?k1(u.formAction):C.getAttribute("formAction"),u!==null&&(w=u,C=null));var ee=new s_("action","action",null,y,E);o.push({event:ee,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(My!==0){var xe=C?F1(E,C):new FormData(E);EE(d,{pending:!0,data:xe,method:E.method,action:w},null,xe)}}else typeof w=="function"&&(ee.preventDefault(),xe=C?F1(E,C):new FormData(E),EE(d,{pending:!0,data:xe,method:E.method,action:w},w,xe))},currentTarget:E}]})}}for(var rw=0;rw<B_.length;rw++){var iw=B_[rw],iS=iw.toLowerCase(),oS=iw[0].toUpperCase()+iw.slice(1);Rg(iS,"on"+oS)}Rg(rv,"onAnimationEnd"),Rg(HT,"onAnimationIteration"),Rg(iv,"onAnimationStart"),Rg("dblclick","onDoubleClick"),Rg("focusin","onFocus"),Rg("focusout","onBlur"),Rg(W0,"onTransitionRun"),Rg(qT,"onTransitionStart"),Rg(K0,"onTransitionCancel"),Rg(Ey,"onTransitionEnd"),bd("onMouseEnter",["mouseout","mouseover"]),bd("onMouseLeave",["mouseout","mouseover"]),bd("onPointerEnter",["pointerout","pointerover"]),bd("onPointerLeave",["pointerout","pointerover"]),Fp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fp("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var IT="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(IT));function U1(o,u){u=(u&4)!==0;for(var d=0;d<o.length;d++){var y=o[d],E=y.event;y=y.listeners;e:{var w=void 0;if(u)for(var C=y.length-1;0<=C;C--){var ee=y[C],xe=ee.instance,qe=ee.currentTarget;if(ee=ee.listener,xe!==w&&E.isPropagationStopped())break e;w=ee,E.currentTarget=qe;try{w(E)}catch(At){ov(At)}E.currentTarget=null,w=xe}else for(C=0;C<y.length;C++){if(ee=y[C],xe=ee.instance,qe=ee.currentTarget,ee=ee.listener,xe!==w&&E.isPropagationStopped())break e;w=ee,E.currentTarget=qe;try{w(E)}catch(At){ov(At)}E.currentTarget=null,w=xe}}}}function ko(o,u){var d=u[gd];d===void 0&&(d=u[gd]=new Set);var y=o+"__bubble";d.has(y)||(B1(u,o,2,!1),d.add(y))}function ow(o,u,d){var y=0;u&&(y|=4),B1(d,o,y,u)}var R0="_reactListening"+Math.random().toString(36).slice(2);function sw(o){if(!o[R0]){o[R0]=!0,__.forEach(function(d){d!=="selectionchange"&&(sS.has(d)||ow(d,!1,o),ow(d,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[R0]||(u[R0]=!0,ow("selectionchange",!1,u))}}function B1(o,u,d,y){switch(mI(u)){case 2:var E=VS;break;case 8:E=LS;break;default:E=Tw}d=E.bind(null,u,d,o),E=void 0,!vt||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(E=!0),y?E!==void 0?o.addEventListener(u,d,{capture:!0,passive:E}):o.addEventListener(u,d,!0):E!==void 0?o.addEventListener(u,d,{passive:E}):o.addEventListener(u,d,!1)}function aw(o,u,d,y,E){var w=y;if((u&1)===0&&(u&2)===0&&y!==null)e:for(;;){if(y===null)return;var C=y.tag;if(C===3||C===4){var ee=y.stateNode.containerInfo;if(ee===E)break;if(C===4)for(C=y.return;C!==null;){var xe=C.tag;if((xe===3||xe===4)&&C.stateNode.containerInfo===E)return;C=C.return}for(;ee!==null;){if(C=Md(ee),C===null)return;if(xe=C.tag,xe===5||xe===6||xe===26||xe===27){y=w=C;continue e}ee=ee.parentNode}}y=y.return}Aa(function(){var qe=w,At=$t(d),Ft=[];e:{var Ke=GT.get(o);if(Ke!==void 0){var tt=s_,dr=o;switch(o){case"keypress":if(V_(d)===0)break e;case"keydown":case"keyup":tt=Zy;break;case"focusin":dr="focus",tt=K_;break;case"focusout":dr="blur",tt=K_;break;case"beforeblur":case"afterblur":tt=K_;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":tt=Hy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":tt=bv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":tt=S;break;case rv:case HT:case iv:tt=fy;break;case Ey:tt=te;break;case"scroll":case"scrollend":tt=li;break;case"wheel":tt=Ye;break;case"copy":case"cut":case"paste":tt=eg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":tt=E_;break;case"toggle":case"beforetoggle":tt=Jr}var Zr=(u&4)!==0,_a=!Zr&&(o==="scroll"||o==="scrollend"),Le=Zr?Ke!==null?Ke+"Capture":null:Ke;Zr=[];for(var Oe=qe,He;Oe!==null;){var Lt=Oe;if(He=Lt.stateNode,Lt=Lt.tag,Lt!==5&&Lt!==26&&Lt!==27||He===null||Le===null||(Lt=Au(Oe,Le),Lt!=null&&Zr.push(ST(Oe,Lt,He))),_a)break;Oe=Oe.return}0<Zr.length&&(Ke=new tt(Ke,dr,null,d,At),Ft.push({event:Ke,listeners:Zr}))}}if((u&7)===0){e:{if(Ke=o==="mouseover"||o==="pointerover",tt=o==="mouseout"||o==="pointerout",Ke&&d!==Gt&&(dr=d.relatedTarget||d.fromElement)&&(Md(dr)||dr[Vd]))break e;if((tt||Ke)&&(Ke=At.window===At?At:(Ke=At.ownerDocument)?Ke.defaultView||Ke.parentWindow:window,tt?(dr=d.relatedTarget||d.toElement,tt=qe,dr=dr?Md(dr):null,dr!==null&&(_a=i(dr),Zr=dr.tag,dr!==_a||Zr!==5&&Zr!==27&&Zr!==6)&&(dr=null)):(tt=null,dr=qe),tt!==dr)){if(Zr=Hy,Lt="onMouseLeave",Le="onMouseEnter",Oe="mouse",(o==="pointerout"||o==="pointerover")&&(Zr=E_,Lt="onPointerLeave",Le="onPointerEnter",Oe="pointer"),_a=tt==null?Ke:ka(tt),He=dr==null?Ke:ka(dr),Ke=new Zr(Lt,Oe+"leave",tt,d,At),Ke.target=_a,Ke.relatedTarget=He,Lt=null,Md(At)===qe&&(Zr=new Zr(Le,Oe+"enter",dr,d,At),Zr.target=He,Zr.relatedTarget=_a,Lt=Zr),_a=Lt,tt&&dr)t:{for(Zr=aS,Le=tt,Oe=dr,He=0,Lt=Le;Lt;Lt=Zr(Lt))He++;Lt=0;for(var jr=Oe;jr;jr=Zr(jr))Lt++;for(;0<He-Lt;)Le=Zr(Le),He--;for(;0<Lt-He;)Oe=Zr(Oe),Lt--;for(;He--;){if(Le===Oe||Oe!==null&&Le===Oe.alternate){Zr=Le;break t}Le=Zr(Le),Oe=Zr(Oe)}Zr=null}else Zr=null;tt!==null&&$1(Ft,Ke,tt,Zr,!1),dr!==null&&_a!==null&&$1(Ft,_a,dr,Zr,!0)}}e:{if(Ke=qe?ka(qe):window,tt=Ke.nodeName&&Ke.nodeName.toLowerCase(),tt==="select"||tt==="input"&&Ke.type==="file")var Ms=Jy;else if(a_(Ke))if(UT)Ms=G0;else{Ms=q0;var Ir=w_}else tt=Ke.nodeName,!tt||tt.toLowerCase()!=="input"||Ke.type!=="checkbox"&&Ke.type!=="radio"?qe&&Bg(qe.elementType)&&(Ms=Jy):Ms=yy;if(Ms&&(Ms=Ms(o,qe))){FT(Ft,Ms,d,At);break e}Ir&&Ir(o,Ke,qe),o==="focusout"&&qe&&Ke.type==="number"&&qe.memoizedProps.value!=null&&Bd(Ke,"number",Ke.value)}switch(Ir=qe?ka(qe):window,o){case"focusin":(a_(Ir)||Ir.contentEditable==="true")&&(F_=Ir,Rv=qe,nv=null);break;case"focusout":nv=Rv=F_=null;break;case"mousedown":by=!0;break;case"contextmenu":case"mouseup":case"dragend":by=!1,zT(Ft,d,At);break;case"selectionchange":if(Sv)break;case"keydown":case"keyup":zT(Ft,d,At)}var oi;if(Xo)e:{switch(o){case"compositionstart":var Bo="onCompositionStart";break e;case"compositionend":Bo="onCompositionEnd";break e;case"compositionupdate":Bo="onCompositionUpdate";break e}Bo=void 0}else my?Z_(o,d)&&(Bo="onCompositionEnd"):o==="keydown"&&d.keyCode===229&&(Bo="onCompositionStart");Bo&&(Sg&&d.locale!=="ko"&&(my||Bo!=="onCompositionStart"?Bo==="onCompositionEnd"&&my&&(oi=$g()):(Ro=At,gu="value"in Ro?Ro.value:Ro.textContent,my=!0)),Ir=x0(qe,Bo),0<Ir.length&&(Bo=new Hg(Bo,o,null,d,At),Ft.push({event:Bo,listeners:Ir}),oi?Bo.data=oi:(oi=Y_(d),oi!==null&&(Bo.data=oi)))),(oi=Ig?Wg(o,d):gy(o,d))&&(Bo=x0(qe,"onBeforeInput"),0<Bo.length&&(Ir=new Hg("onBeforeInput","beforeinput",null,d,At),Ft.push({event:Ir,listeners:Bo}),Ir.data=oi)),rS(Ft,o,qe,d,At)}U1(Ft,u)})}function ST(o,u,d){return{instance:o,listener:u,currentTarget:d}}function x0(o,u){for(var d=u+"Capture",y=[];o!==null;){var E=o,w=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||w===null||(E=Au(o,d),E!=null&&y.unshift(ST(o,E,w)),E=Au(o,u),E!=null&&y.push(ST(o,E,w))),o.tag===3)return y;o=o.return}return[]}function aS(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function $1(o,u,d,y,E){for(var w=u._reactName,C=[];d!==null&&d!==y;){var ee=d,xe=ee.alternate,qe=ee.stateNode;if(ee=ee.tag,xe!==null&&xe===y)break;ee!==5&&ee!==26&&ee!==27||qe===null||(xe=qe,E?(qe=Au(d,w),qe!=null&&C.unshift(ST(d,qe,xe))):E||(qe=Au(d,w),qe!=null&&C.push(ST(d,qe,xe)))),d=d.return}C.length!==0&&o.push({event:u,listeners:C})}var lS=/\r\n?/g,uS=/\u0000|\uFFFD/g;function z1(o){return(typeof o=="string"?o:""+o).replace(lS,`
`).replace(uS,"")}function j1(o,u){return u=z1(u),z1(o)===u}function ga(o,u,d,y,E,w){switch(d){case"children":typeof y=="string"?u==="body"||u==="textarea"&&y===""||Pa(o,y):(typeof y=="number"||typeof y=="bigint")&&u!=="body"&&Pa(o,""+y);break;case"className":ai(o,"class",y);break;case"tabIndex":ai(o,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":ai(o,d,y);break;case"style":Ag(o,y,w);break;case"data":if(u!=="object"){ai(o,"data",y);break}case"src":case"href":if(y===""&&(u!=="a"||d!=="href")){o.removeAttribute(d);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(d);break}y=Re(""+y),o.setAttribute(d,y);break;case"action":case"formAction":if(typeof y=="function"){o.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(d==="formAction"?(u!=="input"&&ga(o,u,"name",E.name,E,null),ga(o,u,"formEncType",E.formEncType,E,null),ga(o,u,"formMethod",E.formMethod,E,null),ga(o,u,"formTarget",E.formTarget,E,null)):(ga(o,u,"encType",E.encType,E,null),ga(o,u,"method",E.method,E,null),ga(o,u,"target",E.target,E,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(d);break}y=Re(""+y),o.setAttribute(d,y);break;case"onClick":y!=null&&(o.onclick=Be);break;case"onScroll":y!=null&&ko("scroll",o);break;case"onScrollEnd":y!=null&&ko("scrollend",o);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(d=y.__html,d!=null){if(E.children!=null)throw Error(r(60));o.innerHTML=d}}break;case"multiple":o.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":o.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){o.removeAttribute("xlink:href");break}d=Re(""+y),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(d,""+y):o.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(d,""):o.removeAttribute(d);break;case"capture":case"download":y===!0?o.setAttribute(d,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(d,y):o.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?o.setAttribute(d,y):o.removeAttribute(d);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?o.removeAttribute(d):o.setAttribute(d,y);break;case"popover":ko("beforetoggle",o),ko("toggle",o),ni(o,"popover",y);break;case"xlinkActuate":ya(o,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":ya(o,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":ya(o,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":ya(o,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":ya(o,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":ya(o,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":ya(o,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":ya(o,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":ya(o,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":ni(o,"is",y);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=D.get(d)||d,ni(o,d,y))}}function lw(o,u,d,y,E,w){switch(d){case"style":Ag(o,y,w);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(d=y.__html,d!=null){if(E.children!=null)throw Error(r(60));o.innerHTML=d}}break;case"children":typeof y=="string"?Pa(o,y):(typeof y=="number"||typeof y=="bigint")&&Pa(o,""+y);break;case"onScroll":y!=null&&ko("scroll",o);break;case"onScrollEnd":y!=null&&ko("scrollend",o);break;case"onClick":y!=null&&(o.onclick=Be);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!D_.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(E=d.endsWith("Capture"),u=d.slice(2,E?d.length-7:void 0),w=o[Ia]||null,w=w!=null?w[d]:null,typeof w=="function"&&o.removeEventListener(u,w,E),typeof y=="function")){typeof w!="function"&&w!==null&&(d in o?o[d]=null:o.hasAttribute(d)&&o.removeAttribute(d)),o.addEventListener(u,y,E);break e}d in o?o[d]=y:y===!0?o.setAttribute(d,""):ni(o,d,y)}}}function Rd(o,u,d){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ko("error",o),ko("load",o);var y=!1,E=!1,w;for(w in d)if(d.hasOwnProperty(w)){var C=d[w];if(C!=null)switch(w){case"src":y=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:ga(o,u,w,C,d,null)}}E&&ga(o,u,"srcSet",d.srcSet,d,null),y&&ga(o,u,"src",d.src,d,null);return;case"input":ko("invalid",o);var ee=w=C=E=null,xe=null,qe=null;for(y in d)if(d.hasOwnProperty(y)){var At=d[y];if(At!=null)switch(y){case"name":E=At;break;case"type":C=At;break;case"checked":xe=At;break;case"defaultChecked":qe=At;break;case"value":w=At;break;case"defaultValue":ee=At;break;case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(r(137,u));break;default:ga(o,u,y,At,d,null)}}Fg(o,w,ee,xe,qe,C,E,!1);return;case"select":ko("invalid",o),y=C=w=null;for(E in d)if(d.hasOwnProperty(E)&&(ee=d[E],ee!=null))switch(E){case"value":w=ee;break;case"defaultValue":C=ee;break;case"multiple":y=ee;default:ga(o,u,E,ee,d,null)}u=w,d=C,o.multiple=!!y,u!=null?Rs(o,!!y,u,!1):d!=null&&Rs(o,!!y,d,!0);return;case"textarea":ko("invalid",o),w=E=y=null;for(C in d)if(d.hasOwnProperty(C)&&(ee=d[C],ee!=null))switch(C){case"value":y=ee;break;case"defaultValue":E=ee;break;case"children":w=ee;break;case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(91));break;default:ga(o,u,C,ee,d,null)}pu(o,y,E,w);return;case"option":for(xe in d)if(d.hasOwnProperty(xe)&&(y=d[xe],y!=null))switch(xe){case"selected":o.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:ga(o,u,xe,y,d,null)}return;case"dialog":ko("beforetoggle",o),ko("toggle",o),ko("cancel",o),ko("close",o);break;case"iframe":case"object":ko("load",o);break;case"video":case"audio":for(y=0;y<IT.length;y++)ko(IT[y],o);break;case"image":ko("error",o),ko("load",o);break;case"details":ko("toggle",o);break;case"embed":case"source":case"link":ko("error",o),ko("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(qe in d)if(d.hasOwnProperty(qe)&&(y=d[qe],y!=null))switch(qe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:ga(o,u,qe,y,d,null)}return;default:if(Bg(u)){for(At in d)d.hasOwnProperty(At)&&(y=d[At],y!==void 0&&lw(o,u,At,y,d,void 0));return}}for(ee in d)d.hasOwnProperty(ee)&&(y=d[ee],y!=null&&ga(o,u,ee,y,d,null))}function cS(o,u,d,y){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,w=null,C=null,ee=null,xe=null,qe=null,At=null;for(tt in d){var Ft=d[tt];if(d.hasOwnProperty(tt)&&Ft!=null)switch(tt){case"checked":break;case"value":break;case"defaultValue":xe=Ft;default:y.hasOwnProperty(tt)||ga(o,u,tt,null,y,Ft)}}for(var Ke in y){var tt=y[Ke];if(Ft=d[Ke],y.hasOwnProperty(Ke)&&(tt!=null||Ft!=null))switch(Ke){case"type":w=tt;break;case"name":E=tt;break;case"checked":qe=tt;break;case"defaultChecked":At=tt;break;case"value":C=tt;break;case"defaultValue":ee=tt;break;case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(r(137,u));break;default:tt!==Ft&&ga(o,u,Ke,tt,y,Ft)}}r_(o,C,ee,xe,qe,At,w,E);return;case"select":tt=C=ee=Ke=null;for(w in d)if(xe=d[w],d.hasOwnProperty(w)&&xe!=null)switch(w){case"value":break;case"multiple":tt=xe;default:y.hasOwnProperty(w)||ga(o,u,w,null,y,xe)}for(E in y)if(w=y[E],xe=d[E],y.hasOwnProperty(E)&&(w!=null||xe!=null))switch(E){case"value":Ke=w;break;case"defaultValue":ee=w;break;case"multiple":C=w;default:w!==xe&&ga(o,u,E,w,y,xe)}u=ee,d=C,y=tt,Ke!=null?Rs(o,!!d,Ke,!1):!!y!=!!d&&(u!=null?Rs(o,!!d,u,!0):Rs(o,!!d,d?[]:"",!1));return;case"textarea":tt=Ke=null;for(ee in d)if(E=d[ee],d.hasOwnProperty(ee)&&E!=null&&!y.hasOwnProperty(ee))switch(ee){case"value":break;case"children":break;default:ga(o,u,ee,null,y,E)}for(C in y)if(E=y[C],w=d[C],y.hasOwnProperty(C)&&(E!=null||w!=null))switch(C){case"value":Ke=E;break;case"defaultValue":tt=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:E!==w&&ga(o,u,C,E,y,w)}rm(o,Ke,tt);return;case"option":for(var dr in d)if(Ke=d[dr],d.hasOwnProperty(dr)&&Ke!=null&&!y.hasOwnProperty(dr))switch(dr){case"selected":o.selected=!1;break;default:ga(o,u,dr,null,y,Ke)}for(xe in y)if(Ke=y[xe],tt=d[xe],y.hasOwnProperty(xe)&&Ke!==tt&&(Ke!=null||tt!=null))switch(xe){case"selected":o.selected=Ke&&typeof Ke!="function"&&typeof Ke!="symbol";break;default:ga(o,u,xe,Ke,y,tt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Zr in d)Ke=d[Zr],d.hasOwnProperty(Zr)&&Ke!=null&&!y.hasOwnProperty(Zr)&&ga(o,u,Zr,null,y,Ke);for(qe in y)if(Ke=y[qe],tt=d[qe],y.hasOwnProperty(qe)&&Ke!==tt&&(Ke!=null||tt!=null))switch(qe){case"children":case"dangerouslySetInnerHTML":if(Ke!=null)throw Error(r(137,u));break;default:ga(o,u,qe,Ke,y,tt)}return;default:if(Bg(u)){for(var _a in d)Ke=d[_a],d.hasOwnProperty(_a)&&Ke!==void 0&&!y.hasOwnProperty(_a)&&lw(o,u,_a,void 0,y,Ke);for(At in y)Ke=y[At],tt=d[At],!y.hasOwnProperty(At)||Ke===tt||Ke===void 0&&tt===void 0||lw(o,u,At,Ke,y,tt);return}}for(var Le in d)Ke=d[Le],d.hasOwnProperty(Le)&&Ke!=null&&!y.hasOwnProperty(Le)&&ga(o,u,Le,null,y,Ke);for(Ft in y)Ke=y[Ft],tt=d[Ft],!y.hasOwnProperty(Ft)||Ke===tt||Ke==null&&tt==null||ga(o,u,Ft,Ke,y,tt)}function H1(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function hS(){if(typeof performance.getEntriesByType=="function"){for(var o=0,u=0,d=performance.getEntriesByType("resource"),y=0;y<d.length;y++){var E=d[y],w=E.transferSize,C=E.initiatorType,ee=E.duration;if(w&&ee&&H1(C)){for(C=0,ee=E.responseEnd,y+=1;y<d.length;y++){var xe=d[y],qe=xe.startTime;if(qe>ee)break;var At=xe.transferSize,Ft=xe.initiatorType;At&&H1(Ft)&&(xe=xe.responseEnd,C+=At*(xe<ee?1:(ee-qe)/(xe-qe)))}if(--y,u+=8*(w+C)/(E.duration/1e3),o++,10<o)break}}if(0<o)return u/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var uw=null,cw=null;function P0(o){return o.nodeType===9?o:o.ownerDocument}function q1(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function G1(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function hw(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var fw=null;function fS(){var o=window.event;return o&&o.type==="popstate"?o===fw?!1:(fw=o,!0):(fw=null,!1)}var W1=typeof setTimeout=="function"?setTimeout:void 0,dS=typeof clearTimeout=="function"?clearTimeout:void 0,K1=typeof Promise=="function"?Promise:void 0,pS=typeof queueMicrotask=="function"?queueMicrotask:typeof K1<"u"?function(o){return K1.resolve(null).then(o).catch(mS)}:W1;function mS(o){setTimeout(function(){throw o})}function ky(o){return o==="head"}function Z1(o,u){var d=u,y=0;do{var E=d.nextSibling;if(o.removeChild(d),E&&E.nodeType===8)if(d=E.data,d==="/$"||d==="/&"){if(y===0){o.removeChild(E),Jv(u);return}y--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")y++;else if(d==="html")RT(o.ownerDocument.documentElement);else if(d==="head"){d=o.ownerDocument.head,RT(d);for(var w=d.firstChild;w;){var C=w.nextSibling,ee=w.nodeName;w[Sp]||ee==="SCRIPT"||ee==="STYLE"||ee==="LINK"&&w.rel.toLowerCase()==="stylesheet"||d.removeChild(w),w=C}}else d==="body"&&RT(o.ownerDocument.body);d=E}while(d);Jv(u)}function Y1(o,u){var d=o;o=0;do{var y=d.nextSibling;if(d.nodeType===1?u?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(u?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),y&&y.nodeType===8)if(d=y.data,d==="/$"){if(o===0)break;o--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||o++;d=y}while(d)}function dw(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var d=u;switch(u=u.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":dw(d),g_(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}o.removeChild(d)}}function gS(o,u,d,y){for(;o.nodeType===1;){var E=d;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!y&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(y){if(!o[Sp])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(w=o.getAttribute("rel"),w==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(w!==E.rel||o.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||o.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||o.getAttribute("title")!==(E.title==null?null:E.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(w=o.getAttribute("src"),(w!==(E.src==null?null:E.src)||o.getAttribute("type")!==(E.type==null?null:E.type)||o.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&w&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var w=E.name==null?null:""+E.name;if(E.type==="hidden"&&o.getAttribute("name")===w)return o}else return o;if(o=d_(o.nextSibling),o===null)break}return null}function _S(o,u,d){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!d||(o=d_(o.nextSibling),o===null))return null;return o}function X1(o,u){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=d_(o.nextSibling),o===null))return null;return o}function pw(o){return o.data==="$?"||o.data==="$~"}function mw(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function yS(o,u){var d=o.ownerDocument;if(o.data==="$~")o._reactRetry=u;else if(o.data!=="$?"||d.readyState!=="loading")u();else{var y=function(){u(),d.removeEventListener("DOMContentLoaded",y)};d.addEventListener("DOMContentLoaded",y),o._reactRetry=y}}function d_(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return o}var gw=null;function Q1(o){o=o.nextSibling;for(var u=0;o;){if(o.nodeType===8){var d=o.data;if(d==="/$"||d==="/&"){if(u===0)return d_(o.nextSibling);u--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||u++}o=o.nextSibling}return null}function J1(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var d=o.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(u===0)return o;u--}else d!=="/$"&&d!=="/&"||u++}o=o.previousSibling}return null}function eI(o,u,d){switch(u=P0(d),o){case"html":if(o=u.documentElement,!o)throw Error(r(452));return o;case"head":if(o=u.head,!o)throw Error(r(453));return o;case"body":if(o=u.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function RT(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);g_(o)}var p_=new Map,tI=new Set;function O0(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var hy=An.d;An.d={f:vS,r:bS,D:TS,C:ES,L:wS,m:AS,X:SS,S:IS,M:RS};function vS(){var o=hy.f(),u=T0();return o||u}function bS(o){var u=yd(o);u!==null&&u.tag===5&&u.type==="form"?yA(u):hy.r(o)}var Yv=typeof document>"u"?null:document;function nI(o,u,d){var y=Yv;if(y&&typeof u=="string"&&u){var E=qs(u);E='link[rel="'+o+'"][href="'+E+'"]',typeof d=="string"&&(E+='[crossorigin="'+d+'"]'),tI.has(E)||(tI.add(E),o={rel:o,crossOrigin:d,href:u},y.querySelector(E)===null&&(u=y.createElement("link"),Rd(u,"link",o),Sa(u),y.head.appendChild(u)))}}function TS(o){hy.D(o),nI("dns-prefetch",o,null)}function ES(o,u){hy.C(o,u),nI("preconnect",o,u)}function wS(o,u,d){hy.L(o,u,d);var y=Yv;if(y&&o&&u){var E='link[rel="preload"][as="'+qs(u)+'"]';u==="image"&&d&&d.imageSrcSet?(E+='[imagesrcset="'+qs(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(E+='[imagesizes="'+qs(d.imageSizes)+'"]')):E+='[href="'+qs(o)+'"]';var w=E;switch(u){case"style":w=Xv(o);break;case"script":w=Qv(o)}p_.has(w)||(o=f({rel:"preload",href:u==="image"&&d&&d.imageSrcSet?void 0:o,as:u},d),p_.set(w,o),y.querySelector(E)!==null||u==="style"&&y.querySelector(xT(w))||u==="script"&&y.querySelector(PT(w))||(u=y.createElement("link"),Rd(u,"link",o),Sa(u),y.head.appendChild(u)))}}function AS(o,u){hy.m(o,u);var d=Yv;if(d&&o){var y=u&&typeof u.as=="string"?u.as:"script",E='link[rel="modulepreload"][as="'+qs(y)+'"][href="'+qs(o)+'"]',w=E;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Qv(o)}if(!p_.has(w)&&(o=f({rel:"modulepreload",href:o},u),p_.set(w,o),d.querySelector(E)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(PT(w)))return}y=d.createElement("link"),Rd(y,"link",o),Sa(y),d.head.appendChild(y)}}}function IS(o,u,d){hy.S(o,u,d);var y=Yv;if(y&&o){var E=Ud(y).hoistableStyles,w=Xv(o);u=u||"default";var C=E.get(w);if(!C){var ee={loading:0,preload:null};if(C=y.querySelector(xT(w)))ee.loading=5;else{o=f({rel:"stylesheet",href:o,"data-precedence":u},d),(d=p_.get(w))&&_w(o,d);var xe=C=y.createElement("link");Sa(xe),Rd(xe,"link",o),xe._p=new Promise(function(qe,At){xe.onload=qe,xe.onerror=At}),xe.addEventListener("load",function(){ee.loading|=1}),xe.addEventListener("error",function(){ee.loading|=2}),ee.loading|=4,C0(C,u,y)}C={type:"stylesheet",instance:C,count:1,state:ee},E.set(w,C)}}}function SS(o,u){hy.X(o,u);var d=Yv;if(d&&o){var y=Ud(d).hoistableScripts,E=Qv(o),w=y.get(E);w||(w=d.querySelector(PT(E)),w||(o=f({src:o,async:!0},u),(u=p_.get(E))&&yw(o,u),w=d.createElement("script"),Sa(w),Rd(w,"link",o),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},y.set(E,w))}}function RS(o,u){hy.M(o,u);var d=Yv;if(d&&o){var y=Ud(d).hoistableScripts,E=Qv(o),w=y.get(E);w||(w=d.querySelector(PT(E)),w||(o=f({src:o,async:!0,type:"module"},u),(u=p_.get(E))&&yw(o,u),w=d.createElement("script"),Sa(w),Rd(w,"link",o),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},y.set(E,w))}}function rI(o,u,d,y){var E=(E=Sn.current)?O0(E):null;if(!E)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(u=Xv(d.href),d=Ud(E).hoistableStyles,y=d.get(u),y||(y={type:"style",instance:null,count:0,state:null},d.set(u,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){o=Xv(d.href);var w=Ud(E).hoistableStyles,C=w.get(o);if(C||(E=E.ownerDocument||E,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(o,C),(w=E.querySelector(xT(o)))&&!w._p&&(C.instance=w,C.state.loading=5),p_.has(o)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},p_.set(o,d),w||xS(E,o,d,C.state))),u&&y===null)throw Error(r(528,""));return C}if(u&&y!==null)throw Error(r(529,""));return null;case"script":return u=d.async,d=d.src,typeof d=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Qv(d),d=Ud(E).hoistableScripts,y=d.get(u),y||(y={type:"script",instance:null,count:0,state:null},d.set(u,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function Xv(o){return'href="'+qs(o)+'"'}function xT(o){return'link[rel="stylesheet"]['+o+"]"}function iI(o){return f({},o,{"data-precedence":o.precedence,precedence:null})}function xS(o,u,d,y){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?y.loading=1:(u=o.createElement("link"),y.preload=u,u.addEventListener("load",function(){return y.loading|=1}),u.addEventListener("error",function(){return y.loading|=2}),Rd(u,"link",d),Sa(u),o.head.appendChild(u))}function Qv(o){return'[src="'+qs(o)+'"]'}function PT(o){return"script[async]"+o}function oI(o,u,d){if(u.count++,u.instance===null)switch(u.type){case"style":var y=o.querySelector('style[data-href~="'+qs(d.href)+'"]');if(y)return u.instance=y,Sa(y),y;var E=f({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return y=(o.ownerDocument||o).createElement("style"),Sa(y),Rd(y,"style",E),C0(y,d.precedence,o),u.instance=y;case"stylesheet":E=Xv(d.href);var w=o.querySelector(xT(E));if(w)return u.state.loading|=4,u.instance=w,Sa(w),w;y=iI(d),(E=p_.get(E))&&_w(y,E),w=(o.ownerDocument||o).createElement("link"),Sa(w);var C=w;return C._p=new Promise(function(ee,xe){C.onload=ee,C.onerror=xe}),Rd(w,"link",y),u.state.loading|=4,C0(w,d.precedence,o),u.instance=w;case"script":return w=Qv(d.src),(E=o.querySelector(PT(w)))?(u.instance=E,Sa(E),E):(y=d,(E=p_.get(w))&&(y=f({},d),yw(y,E)),o=o.ownerDocument||o,E=o.createElement("script"),Sa(E),Rd(E,"link",y),o.head.appendChild(E),u.instance=E);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(y=u.instance,u.state.loading|=4,C0(y,d.precedence,o));return u.instance}function C0(o,u,d){for(var y=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=y.length?y[y.length-1]:null,w=E,C=0;C<y.length;C++){var ee=y[C];if(ee.dataset.precedence===u)w=ee;else if(w!==E)break}w?w.parentNode.insertBefore(o,w.nextSibling):(u=d.nodeType===9?d.head:d,u.insertBefore(o,u.firstChild))}function _w(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function yw(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var D0=null;function sI(o,u,d){if(D0===null){var y=new Map,E=D0=new Map;E.set(d,y)}else E=D0,y=E.get(d),y||(y=new Map,E.set(d,y));if(y.has(o))return y;for(y.set(o,null),d=d.getElementsByTagName(o),E=0;E<d.length;E++){var w=d[E];if(!(w[Sp]||w[wa]||o==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var C=w.getAttribute(u)||"";C=o+C;var ee=y.get(C);ee?ee.push(w):y.set(C,[w])}}return y}function aI(o,u,d){o=o.ownerDocument||o,o.head.insertBefore(d,u==="title"?o.querySelector("head > title"):null)}function PS(o,u,d){if(d===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return o=u.disabled,typeof u.precedence=="string"&&o==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function lI(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function OS(o,u,d,y){if(d.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var E=Xv(y.href),w=u.querySelector(xT(E));if(w){u=w._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(o.count++,o=N0.bind(o),u.then(o,o)),d.state.loading|=4,d.instance=w,Sa(w);return}w=u.ownerDocument||u,y=iI(y),(E=p_.get(E))&&_w(y,E),w=w.createElement("link"),Sa(w);var C=w;C._p=new Promise(function(ee,xe){C.onload=ee,C.onerror=xe}),Rd(w,"link",y),d.instance=w}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(d,u),(u=d.state.preload)&&(d.state.loading&3)===0&&(o.count++,d=N0.bind(o),u.addEventListener("load",d),u.addEventListener("error",d))}}var vw=0;function CS(o,u){return o.stylesheets&&o.count===0&&L0(o,o.stylesheets),0<o.count||0<o.imgCount?function(d){var y=setTimeout(function(){if(o.stylesheets&&L0(o,o.stylesheets),o.unsuspend){var w=o.unsuspend;o.unsuspend=null,w()}},6e4+u);0<o.imgBytes&&vw===0&&(vw=62500*hS());var E=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&L0(o,o.stylesheets),o.unsuspend)){var w=o.unsuspend;o.unsuspend=null,w()}},(o.imgBytes>vw?50:800)+u);return o.unsuspend=d,function(){o.unsuspend=null,clearTimeout(y),clearTimeout(E)}}:null}function N0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)L0(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var V0=null;function L0(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,V0=new Map,u.forEach(DS,o),V0=null,N0.call(o))}function DS(o,u){if(!(u.state.loading&4)){var d=V0.get(o);if(d)var y=d.get(null);else{d=new Map,V0.set(o,d);for(var E=o.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<E.length;w++){var C=E[w];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(d.set(C.dataset.precedence,C),y=C)}y&&d.set(null,y)}E=u.instance,C=E.getAttribute("data-precedence"),w=d.get(C)||y,w===y&&d.set(null,E),d.set(C,E),this.count++,y=N0.bind(this),E.addEventListener("load",y),E.addEventListener("error",y),w?w.parentNode.insertBefore(E,w.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(E,o.firstChild)),u.state.loading|=4}}var OT={$$typeof:Pe,Provider:null,Consumer:null,_currentValue:jt,_currentValue2:jt,_threadCount:0};function NS(o,u,d,y,E,w,C,ee,xe){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hs(0),this.hiddenUpdates=Hs(null),this.identifierPrefix=y,this.onUncaughtError=E,this.onCaughtError=w,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=xe,this.incompleteTransitions=new Map}function uI(o,u,d,y,E,w,C,ee,xe,qe,At,Ft){return o=new NS(o,u,d,C,xe,qe,At,Ft,ee),u=1,w===!0&&(u|=24),w=Gd(3,null,null,u),o.current=w,w.stateNode=o,u=Q0(),u.refCount++,o.pooledCache=u,u.refCount++,w.memoizedState={element:y,isDehydrated:d,cache:u},nE(w),o}function cI(o){return o?(o=X_,o):X_}function hI(o,u,d,y,E,w){E=cI(E),y.context===null?y.context=E:y.pendingContext=E,y=Sy(u),y.payload={element:d},w=w===void 0?null:w,w!==null&&(y.callback=w),d=Ry(o,y,u),d!==null&&(Lg(d,o,u),lT(d,o,u))}function fI(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var d=o.retryLane;o.retryLane=d!==0&&d<u?d:u}}function bw(o,u){fI(o,u),(o=o.alternate)&&fI(o,u)}function dI(o){if(o.tag===13||o.tag===31){var u=c_(o,67108864);u!==null&&Lg(u,o,67108864),bw(o,67108864)}}function pI(o){if(o.tag===13||o.tag===31){var u=Qg();u=Ws(u);var d=c_(o,u);d!==null&&Lg(d,o,u),bw(o,u)}}var M0=!0;function VS(o,u,d,y){var E=ze.T;ze.T=null;var w=An.p;try{An.p=2,Tw(o,u,d,y)}finally{An.p=w,ze.T=E}}function LS(o,u,d,y){var E=ze.T;ze.T=null;var w=An.p;try{An.p=8,Tw(o,u,d,y)}finally{An.p=w,ze.T=E}}function Tw(o,u,d,y){if(M0){var E=Ew(y);if(E===null)aw(o,u,y,k0,d),gI(o,y);else if(kS(E,o,u,d,y))y.stopPropagation();else if(gI(o,y),u&4&&-1<MS.indexOf(o)){for(;E!==null;){var w=yd(E);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var C=ir(w.pendingLanes);if(C!==0){var ee=w;for(ee.pendingLanes|=2,ee.entangledLanes|=2;C;){var xe=1<<31-Us(C);ee.entanglements[1]|=xe,C&=~xe}G_(w),(js&6)===0&&(v0=Na()+500,AT(0))}}break;case 31:case 13:ee=c_(w,2),ee!==null&&Lg(ee,w,2),T0(),bw(w,2)}if(w=Ew(y),w===null&&aw(o,u,y,k0,d),w===E)break;E=w}E!==null&&y.stopPropagation()}else aw(o,u,y,null,d)}}function Ew(o){return o=$t(o),ww(o)}var k0=null;function ww(o){if(k0=null,o=Md(o),o!==null){var u=i(o);if(u===null)o=null;else{var d=u.tag;if(d===13){if(o=l(u),o!==null)return o;o=null}else if(d===31){if(o=p(u),o!==null)return o;o=null}else if(d===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return k0=o,null}function mI(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ap()){case uu:return 2;case e_:return 8;case ui:case P_:return 32;case Kr:return 268435456;default:return 32}default:return 32}}var Aw=!1,Fy=null,Uy=null,By=null,CT=new Map,DT=new Map,$y=[],MS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gI(o,u){switch(o){case"focusin":case"focusout":Fy=null;break;case"dragenter":case"dragleave":Uy=null;break;case"mouseover":case"mouseout":By=null;break;case"pointerover":case"pointerout":CT.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":DT.delete(u.pointerId)}}function NT(o,u,d,y,E,w){return o===null||o.nativeEvent!==w?(o={blockedOn:u,domEventName:d,eventSystemFlags:y,nativeEvent:w,targetContainers:[E]},u!==null&&(u=yd(u),u!==null&&dI(u)),o):(o.eventSystemFlags|=y,u=o.targetContainers,E!==null&&u.indexOf(E)===-1&&u.push(E),o)}function kS(o,u,d,y,E){switch(u){case"focusin":return Fy=NT(Fy,o,u,d,y,E),!0;case"dragenter":return Uy=NT(Uy,o,u,d,y,E),!0;case"mouseover":return By=NT(By,o,u,d,y,E),!0;case"pointerover":var w=E.pointerId;return CT.set(w,NT(CT.get(w)||null,o,u,d,y,E)),!0;case"gotpointercapture":return w=E.pointerId,DT.set(w,NT(DT.get(w)||null,o,u,d,y,E)),!0}return!1}function _I(o){var u=Md(o.target);if(u!==null){var d=i(u);if(d!==null){if(u=d.tag,u===13){if(u=l(d),u!==null){o.blockedOn=u,fh(o.priority,function(){pI(d)});return}}else if(u===31){if(u=p(d),u!==null){o.blockedOn=u,fh(o.priority,function(){pI(d)});return}}else if(u===3&&d.stateNode.current.memoizedState.isDehydrated){o.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}o.blockedOn=null}function F0(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var d=Ew(o.nativeEvent);if(d===null){d=o.nativeEvent;var y=new d.constructor(d.type,d);Gt=y,d.target.dispatchEvent(y),Gt=null}else return u=yd(d),u!==null&&dI(u),o.blockedOn=d,!1;u.shift()}return!0}function yI(o,u,d){F0(o)&&d.delete(u)}function FS(){Aw=!1,Fy!==null&&F0(Fy)&&(Fy=null),Uy!==null&&F0(Uy)&&(Uy=null),By!==null&&F0(By)&&(By=null),CT.forEach(yI),DT.forEach(yI)}function U0(o,u){o.blockedOn===u&&(o.blockedOn=null,Aw||(Aw=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,FS)))}var B0=null;function vI(o){B0!==o&&(B0=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){B0===o&&(B0=null);for(var u=0;u<o.length;u+=3){var d=o[u],y=o[u+1],E=o[u+2];if(typeof y!="function"){if(ww(y||d)===null)continue;break}var w=yd(d);w!==null&&(o.splice(u,3),u-=3,EE(w,{pending:!0,data:E,method:d.method,action:y},y,E))}}))}function Jv(o){function u(xe){return U0(xe,o)}Fy!==null&&U0(Fy,o),Uy!==null&&U0(Uy,o),By!==null&&U0(By,o),CT.forEach(u),DT.forEach(u);for(var d=0;d<$y.length;d++){var y=$y[d];y.blockedOn===o&&(y.blockedOn=null)}for(;0<$y.length&&(d=$y[0],d.blockedOn===null);)_I(d),d.blockedOn===null&&$y.shift();if(d=(o.ownerDocument||o).$$reactFormReplay,d!=null)for(y=0;y<d.length;y+=3){var E=d[y],w=d[y+1],C=E[Ia]||null;if(typeof w=="function")C||vI(d);else if(C){var ee=null;if(w&&w.hasAttribute("formAction")){if(E=w,C=w[Ia]||null)ee=C.formAction;else if(ww(E)!==null)continue}else ee=C.action;typeof ee=="function"?d[y+1]=ee:(d.splice(y,3),y-=3),vI(d)}}}function bI(){function o(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(C){return E=C})},focusReset:"manual",scroll:"manual"})}function u(){E!==null&&(E(),E=null),y||setTimeout(d,20)}function d(){if(!y&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var y=!1,E=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(d,100),function(){y=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),E!==null&&(E(),E=null)}}}function Iw(o){this._internalRoot=o}$0.prototype.render=Iw.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(r(409));var d=u.current,y=Qg();hI(d,y,o,u,null,null)},$0.prototype.unmount=Iw.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;hI(o.current,2,null,o,null,null),T0(),u[Vd]=null}};function $0(o){this._internalRoot=o}$0.prototype.unstable_scheduleHydration=function(o){if(o){var u=O_();o={blockedOn:null,target:o,priority:u};for(var d=0;d<$y.length&&u!==0&&u<$y[d].priority;d++);$y.splice(d,0,o),d===0&&_I(o)}};var TI=e.version;if(TI!=="19.2.0")throw Error(r(527,TI,"19.2.0"));An.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=s(u),o=o!==null?h(o):null,o=o===null?null:o.stateNode,o};var US={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ze,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var z0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!z0.isDisabled&&z0.supportsFiber)try{hu=z0.inject(US),rr=z0}catch{}}return reactDomClient_production.createRoot=function(o,u){if(!a(o))throw Error(r(299));var d=!1,y="",E=xA,w=PA,C=OA;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(E=u.onUncaughtError),u.onCaughtError!==void 0&&(w=u.onCaughtError),u.onRecoverableError!==void 0&&(C=u.onRecoverableError)),u=uI(o,1,!1,null,null,d,y,null,E,w,C,bI),o[Vd]=u.current,sw(o),new Iw(u)},reactDomClient_production.hydrateRoot=function(o,u,d){if(!a(o))throw Error(r(299));var y=!1,E="",w=xA,C=PA,ee=OA,xe=null;return d!=null&&(d.unstable_strictMode===!0&&(y=!0),d.identifierPrefix!==void 0&&(E=d.identifierPrefix),d.onUncaughtError!==void 0&&(w=d.onUncaughtError),d.onCaughtError!==void 0&&(C=d.onCaughtError),d.onRecoverableError!==void 0&&(ee=d.onRecoverableError),d.formState!==void 0&&(xe=d.formState)),u=uI(o,1,!0,u,d??null,y,E,xe,w,C,ee,bI),u.context=cI(null),d=u.current,y=Qg(),y=Ws(y),E=Sy(y),E.callback=null,Ry(d,E,y),d=y,u.current.lanes=d,ah(u,d),G_(u),o[Vd]=u.current,sw(o),new $0(u)},reactDomClient_production.version="19.2.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();var PopStateEventType="popstate";function createHashHistory(t={}){function e(a,i){let{pathname:l="/",search:p="",hash:m=""}=parsePath(a.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),createLocation("",{pathname:l,search:p,hash:m},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(a,i){let l=a.document.querySelector("base"),p="";if(l&&l.getAttribute("href")){let m=a.location.href,s=m.indexOf("#");p=s===-1?m:m.slice(0,s)}return p+"#"+(typeof i=="string"?i:createPath(i))}function r(a,i){warning(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return getUrlBasedHistory(e,n,r,t)}function invariant(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function warning(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(t,e){return{usr:t.state,key:t.key,idx:e}}function createLocation(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?parsePath(e):e,state:n,key:e&&e.key||r||createKey()}}function createPath({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function parsePath(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function getUrlBasedHistory(t,e,n,r={}){let{window:a=document.defaultView,v5Compat:i=!1}=r,l=a.history,p="POP",m=null,s=h();s==null&&(s=0,l.replaceState({...l.state,idx:s},""));function h(){return(l.state||{idx:null}).idx}function f(){p="POP";let X=h(),ge=X==null?null:X-s;s=X,m&&m({action:p,location:W.location,delta:ge})}function v(X,ge){p="PUSH";let ie=createLocation(W.location,X,ge);n&&n(ie,X),s=h()+1;let Pe=getHistoryState(ie,s),je=W.createHref(ie);try{l.pushState(Pe,"",je)}catch(rt){if(rt instanceof DOMException&&rt.name==="DataCloneError")throw rt;a.location.assign(je)}i&&m&&m({action:p,location:W.location,delta:1})}function I(X,ge){p="REPLACE";let ie=createLocation(W.location,X,ge);n&&n(ie,X),s=h();let Pe=getHistoryState(ie,s),je=W.createHref(ie);l.replaceState(Pe,"",je),i&&m&&m({action:p,location:W.location,delta:0})}function G(X){return createBrowserURLImpl(X)}let W={get action(){return p},get location(){return t(a,l)},listen(X){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(PopStateEventType,f),m=X,()=>{a.removeEventListener(PopStateEventType,f),m=null}},createHref(X){return e(a,X)},createURL:G,encodeLocation(X){let ge=G(X);return{pathname:ge.pathname,search:ge.search,hash:ge.hash}},push:v,replace:I,go(X){return l.go(X)}};return W}function createBrowserURLImpl(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),invariant(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:createPath(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function matchRoutes(t,e,n="/"){return matchRoutesImpl(t,e,n,!1)}function matchRoutesImpl(t,e,n,r){let a=typeof e=="string"?parsePath(e):e,i=stripBasename(a.pathname||"/",n);if(i==null)return null;let l=flattenRoutes(t);rankRouteBranches(l);let p=null;for(let m=0;p==null&&m<l.length;++m){let s=decodePath(i);p=matchRouteBranch(l[m],s,r)}return p}function flattenRoutes(t,e=[],n=[],r="",a=!1){let i=(l,p,m=a,s)=>{let h={relativePath:s===void 0?l.path||"":s,caseSensitive:l.caseSensitive===!0,childrenIndex:p,route:l};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&m)return;invariant(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let f=joinPaths([r,h.relativePath]),v=n.concat(h);l.children&&l.children.length>0&&(invariant(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),flattenRoutes(l.children,e,v,f,m)),!(l.path==null&&!l.index)&&e.push({path:f,score:computeScore(f,l.index),routesMeta:v})};return t.forEach((l,p)=>{if(l.path===""||!l.path?.includes("?"))i(l,p);else for(let m of explodeOptionalSegments(l.path))i(l,p,!0,m)}),e}function explodeOptionalSegments(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let l=explodeOptionalSegments(r.join("/")),p=[];return p.push(...l.map(m=>m===""?i:[i,m].join("/"))),a&&p.push(...l),p.map(m=>t.startsWith("/")&&m===""?"/":m)}function rankRouteBranches(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:compareIndexes(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=t=>t==="*";function computeScore(t,e){let n=t.split("/"),r=n.length;return n.some(isSplat)&&(r+=splatPenalty),e&&(r+=indexRouteValue),n.filter(a=>!isSplat(a)).reduce((a,i)=>a+(paramRe.test(i)?dynamicSegmentValue:i===""?emptySegmentValue:staticSegmentValue),r)}function compareIndexes(t,e){return t.length===e.length&&t.slice(0,-1).every((r,a)=>r===e[a])?t[t.length-1]-e[e.length-1]:0}function matchRouteBranch(t,e,n=!1){let{routesMeta:r}=t,a={},i="/",l=[];for(let p=0;p<r.length;++p){let m=r[p],s=p===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=matchPath({path:m.relativePath,caseSensitive:m.caseSensitive,end:s},h),v=m.route;if(!f&&s&&n&&!r[r.length-1].route.index&&(f=matchPath({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},h)),!f)return null;Object.assign(a,f.params),l.push({params:a,pathname:joinPaths([i,f.pathname]),pathnameBase:normalizePathname(joinPaths([i,f.pathnameBase])),route:v}),f.pathnameBase!=="/"&&(i=joinPaths([i,f.pathnameBase]))}return l}function matchPath(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=compilePath(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let i=a[0],l=i.replace(/(.)\/+$/,"$1"),p=a.slice(1);return{params:r.reduce((s,{paramName:h,isOptional:f},v)=>{if(h==="*"){let G=p[v]||"";l=i.slice(0,i.length-G.length).replace(/(.)\/+$/,"$1")}const I=p[v];return f&&!I?s[h]=void 0:s[h]=(I||"").replace(/%2F/g,"/"),s},{}),pathname:i,pathnameBase:l,pattern:t}}function compilePath(t,e=!1,n=!0){warning(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,p,m)=>(r.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function decodePath(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function stripBasename(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,isAbsoluteUrl=t=>ABSOLUTE_URL_REGEX.test(t);function resolvePath(t,e="/"){let{pathname:n,search:r="",hash:a=""}=typeof t=="string"?parsePath(t):t,i;if(n)if(isAbsoluteUrl(n))i=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),warning(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${n}`)}n.startsWith("/")?i=resolvePathname(n.substring(1),"/"):i=resolvePathname(n,e)}else i=e;return{pathname:i,search:normalizeSearch(r),hash:normalizeHash(a)}}function resolvePathname(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function getInvalidPathError(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(t){let e=getPathContributingMatches(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function resolveTo(t,e,n,r=!1){let a;typeof t=="string"?a=parsePath(t):(a={...t},invariant(!a.pathname||!a.pathname.includes("?"),getInvalidPathError("?","pathname","search",a)),invariant(!a.pathname||!a.pathname.includes("#"),getInvalidPathError("#","pathname","hash",a)),invariant(!a.search||!a.search.includes("#"),getInvalidPathError("#","search","hash",a)));let i=t===""||a.pathname==="",l=i?"/":a.pathname,p;if(l==null)p=n;else{let f=e.length-1;if(!r&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),f-=1;a.pathname=v.join("/")}p=f>=0?e[f]:"/"}let m=resolvePath(a,p),s=l&&l!=="/"&&l.endsWith("/"),h=(i||l===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(s||h)&&(m.pathname+="/"),m}var joinPaths=t=>t.join("/").replace(/\/\/+/g,"/"),normalizePathname=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,normalizeHash=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function isRouteErrorResponse(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";reactExports.createContext(!1);var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(t,{relative:e}={}){invariant(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=reactExports.useContext(NavigationContext),{hash:a,pathname:i,search:l}=useResolvedPath(t,{relative:e}),p=i;return n!=="/"&&(p=i==="/"?n:joinPaths([n,i])),r.createHref({pathname:p,search:l,hash:a})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect(t){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(t)}function useNavigate(){let{isDataRoute:t}=reactExports.useContext(RouteContext);return t?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let t=reactExports.useContext(DataRouterContext),{basename:e,navigator:n}=reactExports.useContext(NavigationContext),{matches:r}=reactExports.useContext(RouteContext),{pathname:a}=useLocation(),i=JSON.stringify(getResolveToMatches(r)),l=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{l.current=!0}),reactExports.useCallback((m,s={})=>{if(warning(l.current,navigateEffectWarning),!l.current)return;if(typeof m=="number"){n.go(m);return}let h=resolveTo(m,JSON.parse(i),a,s.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:joinPaths([e,h.pathname])),(s.replace?n.replace:n.push)(h,s.state,s)},[e,n,i,a,t])}reactExports.createContext(null);function useResolvedPath(t,{relative:e}={}){let{matches:n}=reactExports.useContext(RouteContext),{pathname:r}=useLocation(),a=JSON.stringify(getResolveToMatches(n));return reactExports.useMemo(()=>resolveTo(t,JSON.parse(a),r,e==="path"),[t,a,r,e])}function useRoutes(t,e){return useRoutesImpl(t,e)}function useRoutesImpl(t,e,n,r,a){invariant(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=reactExports.useContext(NavigationContext),{matches:l}=reactExports.useContext(RouteContext),p=l[l.length-1],m=p?p.params:{},s=p?p.pathname:"/",h=p?p.pathnameBase:"/",f=p&&p.route;{let ie=f&&f.path||"";warningOnce(s,!f||ie.endsWith("*")||ie.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${s}" (under <Route path="${ie}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ie}"> to <Route path="${ie==="/"?"*":`${ie}/*`}">.`)}let v=useLocation(),I;if(e){let ie=typeof e=="string"?parsePath(e):e;invariant(h==="/"||ie.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${ie.pathname}" was given in the \`location\` prop.`),I=ie}else I=v;let G=I.pathname||"/",W=G;if(h!=="/"){let ie=h.replace(/^\//,"").split("/");W="/"+G.replace(/^\//,"").split("/").slice(ie.length).join("/")}let X=matchRoutes(t,{pathname:W});warning(f||X!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),warning(X==null||X[X.length-1].route.element!==void 0||X[X.length-1].route.Component!==void 0||X[X.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ge=_renderMatches(X&&X.map(ie=>Object.assign({},ie,{params:Object.assign({},m,ie.params),pathname:joinPaths([h,i.encodeLocation?i.encodeLocation(ie.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ie.pathname]),pathnameBase:ie.pathnameBase==="/"?h:joinPaths([h,i.encodeLocation?i.encodeLocation(ie.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ie.pathnameBase])})),l,n,r,a);return e&&ge?reactExports.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},ge):ge}function DefaultErrorComponent(){let t=useRouteError(),e=isRouteErrorResponse(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:i},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:i},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),n?reactExports.createElement("pre",{style:a},n):null,l)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:t,match:e,children:n}){let r=reactExports.useContext(DataRouterContext);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),reactExports.createElement(RouteContext.Provider,{value:t},n)}function _renderMatches(t,e=[],n=null,r=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,l=n?.errors;if(l!=null){let h=i.findIndex(f=>f.route.id&&l?.[f.route.id]!==void 0);invariant(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let p=!1,m=-1;if(n)for(let h=0;h<i.length;h++){let f=i[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(m=h),f.route.id){let{loaderData:v,errors:I}=n,G=f.route.loader&&!v.hasOwnProperty(f.route.id)&&(!I||I[f.route.id]===void 0);if(f.route.lazy||G){p=!0,m>=0?i=i.slice(0,m+1):i=[i[0]];break}}}let s=n&&r?(h,f)=>{r(h,{location:n.location,params:n.matches?.[0]?.params??{},errorInfo:f})}:void 0;return i.reduceRight((h,f,v)=>{let I,G=!1,W=null,X=null;n&&(I=l&&f.route.id?l[f.route.id]:void 0,W=f.route.errorElement||defaultErrorElement,p&&(m<0&&v===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),G=!0,X=null):m===v&&(G=!0,X=f.route.hydrateFallbackElement||null)));let ge=e.concat(i.slice(0,v+1)),ie=()=>{let Pe;return I?Pe=W:G?Pe=X:f.route.Component?Pe=reactExports.createElement(f.route.Component,null):f.route.element?Pe=f.route.element:Pe=h,reactExports.createElement(RenderedRoute,{match:f,routeContext:{outlet:h,matches:ge,isDataRoute:n!=null},children:Pe})};return n&&(f.route.ErrorBoundary||f.route.errorElement||v===0)?reactExports.createElement(RenderErrorBoundary,{location:n.location,revalidation:n.revalidation,component:W,error:I,children:ie(),routeContext:{outlet:null,matches:ge,isDataRoute:!0},onError:s}):ie()},null)}function getDataRouterConsoleError(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(t){let e=reactExports.useContext(DataRouterContext);return invariant(e,getDataRouterConsoleError(t)),e}function useDataRouterState(t){let e=reactExports.useContext(DataRouterStateContext);return invariant(e,getDataRouterConsoleError(t)),e}function useRouteContext(t){let e=reactExports.useContext(RouteContext);return invariant(e,getDataRouterConsoleError(t)),e}function useCurrentRouteId(t){let e=useRouteContext(t),n=e.matches[e.matches.length-1];return invariant(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){let t=reactExports.useContext(RouteErrorContext),e=useDataRouterState("useRouteError"),n=useCurrentRouteId("useRouteError");return t!==void 0?t:e.errors?.[n]}function useNavigateStable(){let{router:t}=useDataRouterContext("useNavigate"),e=useCurrentRouteId("useNavigate"),n=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{n.current=!0}),reactExports.useCallback(async(a,i={})=>{warning(n.current,navigateEffectWarning),n.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...i}))},[t,e])}var alreadyWarned={};function warningOnce(t,e,n){!e&&!alreadyWarned[t]&&(alreadyWarned[t]=!0,warning(!1,n))}reactExports.memo(DataRoutes);function DataRoutes({routes:t,future:e,state:n,unstable_onError:r}){return useRoutesImpl(t,void 0,n,r,e)}function Route(t){invariant(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:a,static:i=!1}){invariant(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),p=reactExports.useMemo(()=>({basename:l,navigator:a,static:i,future:{}}),[l,a,i]);typeof n=="string"&&(n=parsePath(n));let{pathname:m="/",search:s="",hash:h="",state:f=null,key:v="default"}=n,I=reactExports.useMemo(()=>{let G=stripBasename(m,l);return G==null?null:{location:{pathname:G,search:s,hash:h,state:f,key:v},navigationType:r}},[l,m,s,h,f,v,r]);return warning(I!=null,`<Router basename="${l}"> is not able to match the URL "${m}${s}${h}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:reactExports.createElement(NavigationContext.Provider,{value:p},reactExports.createElement(LocationContext.Provider,{children:e,value:I}))}function Routes({children:t,location:e}){return useRoutes(createRoutesFromChildren(t),e)}function createRoutesFromChildren(t,e=[]){let n=[];return reactExports.Children.forEach(t,(r,a)=>{if(!reactExports.isValidElement(r))return;let i=[...e,a];if(r.type===reactExports.Fragment){n.push.apply(n,createRoutesFromChildren(r.props.children,i));return}invariant(r.type===Route,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=createRoutesFromChildren(r.props.children,i)),n.push(l)}),n}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(t){return t!=null&&typeof t.tagName=="string"}function isButtonElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="button"}function isFormElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="form"}function isInputElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="input"}function isModifiedEvent(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function shouldProcessLinkClick(t,e){return t.button===0&&(!e||e==="_self")&&!isModifiedEvent(t)}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(t){return t!=null&&!supportedFormEncTypes.has(t)?(warning(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):t}function getFormSubmissionInfo(t,e){let n,r,a,i,l;if(isFormElement(t)){let p=t.getAttribute("action");r=p?stripBasename(p,e):null,n=t.getAttribute("method")||defaultMethod,a=getFormEncType(t.getAttribute("enctype"))||defaultEncType,i=new FormData(t)}else if(isButtonElement(t)||isInputElement(t)&&(t.type==="submit"||t.type==="image")){let p=t.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=t.getAttribute("formaction")||p.getAttribute("action");if(r=m?stripBasename(m,e):null,n=t.getAttribute("formmethod")||p.getAttribute("method")||defaultMethod,a=getFormEncType(t.getAttribute("formenctype"))||getFormEncType(p.getAttribute("enctype"))||defaultEncType,i=new FormData(p,t),!isFormDataSubmitterSupported()){let{name:s,type:h,value:f}=t;if(h==="image"){let v=s?`${s}.`:"";i.append(`${v}x`,"0"),i.append(`${v}y`,"0")}else s&&i.append(s,f)}}else{if(isHtmlElement(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=defaultMethod,r=null,a=defaultEncType,l=t}return i&&a==="text/plain"&&(l=i,i=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:i,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function singleFetchUrl(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&stripBasename(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function loadRouteModule(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function getKeyedPrefetchLinks(t,e,n){let r=await Promise.all(t.map(async a=>{let i=e.routes[a.route.id];if(i){let l=await loadRouteModule(i,n);return l.links?l.links():[]}return[]}));return dedupeLinkDescriptors(r.flat(1).filter(isHtmlLinkDescriptor).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function getNewMatchesForLinks(t,e,n,r,a,i){let l=(m,s)=>n[s]?m.route.id!==n[s].route.id:!0,p=(m,s)=>n[s].pathname!==m.pathname||n[s].route.path?.endsWith("*")&&n[s].params["*"]!==m.params["*"];return i==="assets"?e.filter((m,s)=>l(m,s)||p(m,s)):i==="data"?e.filter((m,s)=>{let h=r.routes[m.route.id];if(!h||!h.hasLoader)return!1;if(l(m,s)||p(m,s))return!0;if(m.route.shouldRevalidate){let f=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function getModuleLinkHrefs(t,e,{includeHydrateFallback:n}={}){return dedupeHrefs(t.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function dedupeHrefs(t){return[...new Set(t)]}function sortKeys(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function dedupeLinkDescriptors(t,e){let n=new Set;return new Set(e),t.reduce((r,a)=>{let i=JSON.stringify(sortKeys(a));return n.has(i)||(n.add(i),r.push({key:i,link:a})),r},[])}function useDataRouterContext2(){let t=reactExports.useContext(DataRouterContext);return invariant2(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function useDataRouterStateContext(){let t=reactExports.useContext(DataRouterStateContext);return invariant2(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let t=reactExports.useContext(FrameworkContext);return invariant2(t,"You must render this element inside a <HydratedRouter> element"),t}function usePrefetchBehavior(t,e){let n=reactExports.useContext(FrameworkContext),[r,a]=reactExports.useState(!1),[i,l]=reactExports.useState(!1),{onFocus:p,onBlur:m,onMouseEnter:s,onMouseLeave:h,onTouchStart:f}=e,v=reactExports.useRef(null);reactExports.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let W=ge=>{ge.forEach(ie=>{l(ie.isIntersecting)})},X=new IntersectionObserver(W,{threshold:.5});return v.current&&X.observe(v.current),()=>{X.disconnect()}}},[t]),reactExports.useEffect(()=>{if(r){let W=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(W)}}},[r]);let I=()=>{a(!0)},G=()=>{a(!1),l(!1)};return n?t!=="intent"?[i,v,{}]:[i,v,{onFocus:composeEventHandlers(p,I),onBlur:composeEventHandlers(m,G),onMouseEnter:composeEventHandlers(s,I),onMouseLeave:composeEventHandlers(h,G),onTouchStart:composeEventHandlers(f,I)}]:[!1,v,{}]}function composeEventHandlers(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function PrefetchPageLinks({page:t,...e}){let{router:n}=useDataRouterContext2(),r=reactExports.useMemo(()=>matchRoutes(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?reactExports.createElement(PrefetchPageLinksImpl,{page:t,matches:r,...e}):null}function useKeyedPrefetchLinks(t){let{manifest:e,routeModules:n}=useFrameworkContext(),[r,a]=reactExports.useState([]);return reactExports.useEffect(()=>{let i=!1;return getKeyedPrefetchLinks(t,e,n).then(l=>{i||a(l)}),()=>{i=!0}},[t,e,n]),r}function PrefetchPageLinksImpl({page:t,matches:e,...n}){let r=useLocation(),{manifest:a,routeModules:i}=useFrameworkContext(),{basename:l}=useDataRouterContext2(),{loaderData:p,matches:m}=useDataRouterStateContext(),s=reactExports.useMemo(()=>getNewMatchesForLinks(t,e,m,a,r,"data"),[t,e,m,a,r]),h=reactExports.useMemo(()=>getNewMatchesForLinks(t,e,m,a,r,"assets"),[t,e,m,a,r]),f=reactExports.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let G=new Set,W=!1;if(e.forEach(ge=>{let ie=a.routes[ge.route.id];!ie||!ie.hasLoader||(!s.some(Pe=>Pe.route.id===ge.route.id)&&ge.route.id in p&&i[ge.route.id]?.shouldRevalidate||ie.hasClientLoader?W=!0:G.add(ge.route.id))}),G.size===0)return[];let X=singleFetchUrl(t,l,"data");return W&&G.size>0&&X.searchParams.set("_routes",e.filter(ge=>G.has(ge.route.id)).map(ge=>ge.route.id).join(",")),[X.pathname+X.search]},[l,p,r,a,s,e,t,i]),v=reactExports.useMemo(()=>getModuleLinkHrefs(h,a),[h,a]),I=useKeyedPrefetchLinks(h);return reactExports.createElement(reactExports.Fragment,null,f.map(G=>reactExports.createElement("link",{key:G,rel:"prefetch",as:"fetch",href:G,...n})),v.map(G=>reactExports.createElement("link",{key:G,rel:"modulepreload",href:G,...n})),I.map(({key:G,link:W})=>reactExports.createElement("link",{key:G,nonce:n.nonce,...W})))}function mergeRefs(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser&&(window.__reactRouterVersion="7.9.6")}catch{}function HashRouter({basename:t,children:e,window:n}){let r=reactExports.useRef();r.current==null&&(r.current=createHashHistory({window:n,v5Compat:!0}));let a=r.current,[i,l]=reactExports.useState({action:a.action,location:a.location}),p=reactExports.useCallback(m=>{reactExports.startTransition(()=>l(m))},[l]);return reactExports.useLayoutEffect(()=>a.listen(p),[a,p]),reactExports.createElement(Router,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:a})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:a,reloadDocument:i,replace:l,state:p,target:m,to:s,preventScrollReset:h,viewTransition:f,...v},I){let{basename:G}=reactExports.useContext(NavigationContext),W=typeof s=="string"&&ABSOLUTE_URL_REGEX2.test(s),X,ge=!1;if(typeof s=="string"&&W&&(X=s,isBrowser))try{let he=new URL(window.location.href),pe=s.startsWith("//")?new URL(he.protocol+s):new URL(s),Ae=stripBasename(pe.pathname,G);pe.origin===he.origin&&Ae!=null?s=Ae+pe.search+pe.hash:ge=!0}catch{warning(!1,`<Link to="${s}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ie=useHref(s,{relative:a}),[Pe,je,rt]=usePrefetchBehavior(r,v),qt=useLinkClickHandler(s,{replace:l,state:p,target:m,preventScrollReset:h,relative:a,viewTransition:f});function de(he){e&&e(he),he.defaultPrevented||qt(he)}let se=reactExports.createElement("a",{...v,...rt,href:X||ie,onClick:ge||i?e:de,ref:mergeRefs(I,je),target:m,"data-discover":!W&&n==="render"?"true":void 0});return Pe&&!W?reactExports.createElement(reactExports.Fragment,null,se,reactExports.createElement(PrefetchPageLinks,{page:ie})):se});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:a=!1,style:i,to:l,viewTransition:p,children:m,...s},h){let f=useResolvedPath(l,{relative:s.relative}),v=useLocation(),I=reactExports.useContext(DataRouterStateContext),{navigator:G,basename:W}=reactExports.useContext(NavigationContext),X=I!=null&&useViewTransitionState(f)&&p===!0,ge=G.encodeLocation?G.encodeLocation(f).pathname:f.pathname,ie=v.pathname,Pe=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;n||(ie=ie.toLowerCase(),Pe=Pe?Pe.toLowerCase():null,ge=ge.toLowerCase()),Pe&&W&&(Pe=stripBasename(Pe,W)||Pe);const je=ge!=="/"&&ge.endsWith("/")?ge.length-1:ge.length;let rt=ie===ge||!a&&ie.startsWith(ge)&&ie.charAt(je)==="/",qt=Pe!=null&&(Pe===ge||!a&&Pe.startsWith(ge)&&Pe.charAt(ge.length)==="/"),de={isActive:rt,isPending:qt,isTransitioning:X},se=rt?e:void 0,he;typeof r=="function"?he=r(de):he=[r,rt?"active":null,qt?"pending":null,X?"transitioning":null].filter(Boolean).join(" ");let pe=typeof i=="function"?i(de):i;return reactExports.createElement(Link,{...s,"aria-current":se,className:he,ref:h,style:pe,to:l,viewTransition:p},typeof m=="function"?m(de):m)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:a,state:i,method:l=defaultMethod,action:p,onSubmit:m,relative:s,preventScrollReset:h,viewTransition:f,...v},I)=>{let G=useSubmit(),W=useFormAction(p,{relative:s}),X=l.toLowerCase()==="get"?"get":"post",ge=typeof p=="string"&&ABSOLUTE_URL_REGEX2.test(p),ie=Pe=>{if(m&&m(Pe),Pe.defaultPrevented)return;Pe.preventDefault();let je=Pe.nativeEvent.submitter,rt=je?.getAttribute("formmethod")||l;G(je||Pe.currentTarget,{fetcherKey:e,method:rt,navigate:n,replace:a,state:i,relative:s,preventScrollReset:h,viewTransition:f})};return reactExports.createElement("form",{ref:I,method:X,action:W,onSubmit:r?m:ie,...v,"data-discover":!ge&&t==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(t){let e=reactExports.useContext(DataRouterContext);return invariant(e,getDataRouterConsoleError2(t)),e}function useLinkClickHandler(t,{target:e,replace:n,state:r,preventScrollReset:a,relative:i,viewTransition:l}={}){let p=useNavigate(),m=useLocation(),s=useResolvedPath(t,{relative:i});return reactExports.useCallback(h=>{if(shouldProcessLinkClick(h,e)){h.preventDefault();let f=n!==void 0?n:createPath(m)===createPath(s);p(t,{replace:f,state:r,preventScrollReset:a,relative:i,viewTransition:l})}},[m,p,s,n,r,e,t,a,i,l])}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:t}=useDataRouterContext3("useSubmit"),{basename:e}=reactExports.useContext(NavigationContext),n=useRouteId();return reactExports.useCallback(async(r,a={})=>{let{action:i,method:l,encType:p,formData:m,body:s}=getFormSubmissionInfo(r,e);if(a.navigate===!1){let h=a.fetcherKey||getUniqueFetcherId();await t.fetch(h,n,a.action||i,{preventScrollReset:a.preventScrollReset,formData:m,body:s,formMethod:a.method||l,formEncType:a.encType||p,flushSync:a.flushSync})}else await t.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:m,body:s,formMethod:a.method||l,formEncType:a.encType||p,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,n])}function useFormAction(t,{relative:e}={}){let{basename:n}=reactExports.useContext(NavigationContext),r=reactExports.useContext(RouteContext);invariant(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),i={...useResolvedPath(t||".",{relative:e})},l=useLocation();if(t==null){i.search=l.search;let p=new URLSearchParams(i.search),m=p.getAll("index");if(m.some(h=>h==="")){p.delete("index"),m.filter(f=>f).forEach(f=>p.append("index",f));let h=p.toString();i.search=h?`?${h}`:""}}return(!t||t===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:joinPaths([n,i.pathname])),createPath(i)}function useViewTransitionState(t,{relative:e}={}){let n=reactExports.useContext(ViewTransitionContext);invariant(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=useDataRouterContext3("useViewTransitionState"),a=useResolvedPath(t,{relative:e});if(!n.isTransitioning)return!1;let i=stripBasename(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=stripBasename(n.nextLocation.pathname,r)||n.nextLocation.pathname;return matchPath(a.pathname,l)!=null||matchPath(a.pathname,i)!=null}var reactDomExports=requireReactDom();const getDefaultsFromPostinstall=()=>{};var define_process_env_default={};const stringToByteArray$1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let a=t.charCodeAt(r);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},byteArrayToString=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const a=t[n++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const i=t[n++];e[r++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=t[n++],l=t[n++],p=t[n++],m=((a&7)<<18|(i&63)<<12|(l&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const i=t[n++],l=t[n++];e[r++]=String.fromCharCode((a&15)<<12|(i&63)<<6|l&63)}}return e.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<t.length;a+=3){const i=t[a],l=a+1<t.length,p=l?t[a+1]:0,m=a+2<t.length,s=m?t[a+2]:0,h=i>>2,f=(i&3)<<4|p>>4;let v=(p&15)<<2|s>>6,I=s&63;m||(I=64,l||(v=64)),r.push(n[h],n[f],n[v],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(stringToByteArray$1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):byteArrayToString(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<t.length;){const i=n[t.charAt(a++)],p=a<t.length?n[t.charAt(a)]:0;++a;const s=a<t.length?n[t.charAt(a)]:64;++a;const f=a<t.length?n[t.charAt(a)]:64;if(++a,i==null||p==null||s==null||f==null)throw new DecodeBase64StringError;const v=i<<2|p>>4;if(r.push(v),s!==64){const I=p<<4&240|s>>2;if(r.push(I),f!==64){const G=s<<6&192|f;r.push(G)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(t){const e=stringToByteArray$1(t);return base64.encodeByteArray(e,!0)},base64urlEncodeWithoutPadding=function(t){return base64Encode(t).replace(/\./g,"")},base64Decode=function(t){try{return base64.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default>"u")return;const t=define_process_env_default.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&base64Decode(t[1]);return e&&JSON.parse(e)},getDefaults=()=>{try{return getDefaultsFromPostinstall()||getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},getDefaultEmulatorHost=t=>getDefaults()?.emulatorHosts?.[t],getDefaultEmulatorHostnameAndPort=t=>{const e=getDefaultEmulatorHost(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},getDefaultAppConfig=()=>getDefaults()?.config,getExperimentalSetting=t=>getDefaults()?.[`_${t}`];class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function isCloudWorkstation(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function pingServer(t){return(await fetch(t,{credentials:"include"})).ok}function createMockUserToken(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",a=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[base64urlEncodeWithoutPadding(JSON.stringify(n)),base64urlEncodeWithoutPadding(JSON.stringify(l)),""].join(".")}const emulatorStatus={};function getEmulatorSummary(){const t={prod:[],emulator:[]};for(const e of Object.keys(emulatorStatus))emulatorStatus[e]?t.emulator.push(e):t.prod.push(e);return t}function getOrCreateEl(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let previouslyDismissed=!1;function updateEmulatorBanner(t,e){if(typeof window>"u"||typeof document>"u"||!isCloudWorkstation(window.location.host)||emulatorStatus[t]===e||emulatorStatus[t]||previouslyDismissed)return;emulatorStatus[t]=e;function n(v){return`__firebase__banner__${v}`}const r="__firebase__banner",i=getEmulatorSummary().prod.length>0;function l(){const v=document.getElementById(r);v&&v.remove()}function p(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function m(v,I){v.setAttribute("width","24"),v.setAttribute("id",I),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function s(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{previouslyDismissed=!0,l()},v}function h(v,I){v.setAttribute("id",I),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function f(){const v=getOrCreateEl(r),I=n("text"),G=document.getElementById(I)||document.createElement("span"),W=n("learnmore"),X=document.getElementById(W)||document.createElement("a"),ge=n("preprendIcon"),ie=document.getElementById(ge)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const Pe=v.element;p(Pe),h(X,W);const je=s();m(ie,ge),Pe.append(ie,G,X,je),document.body.appendChild(Pe)}i?(G.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,G.innerText="Preview backend running in this workspace."),G.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isNode(){const t=getDefaults()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function isCloudflareWorker(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function isBrowserExtension(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function isReactNative(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const t=getUA();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function isSafari(){return!isNode()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(n){e(n)}})}function areCookiesEnabled(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},a=`${this.service}/${e}`,i=this.errors[e],l=i?replaceTemplate(i,r):"Error",p=`${this.serviceName}: ${l} (${a}).`;return new FirebaseError(a,p,r)}}function replaceTemplate(t,e){return t.replace(PATTERN,(n,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const PATTERN=/\{\$([^}]+)}/g;function isEmpty$1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function deepEqual(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const a of n){if(!r.includes(a))return!1;const i=t[a],l=e[a];if(isObject(i)&&isObject(l)){if(!deepEqual(i,l))return!1}else if(i!==l)return!1}for(const a of r)if(!n.includes(a))return!1;return!0}function isObject(t){return t!==null&&typeof t=="object"}function querystring(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function querystringDecode(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,i]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(i)}}),e}function extractQuerystring(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function createSubscribe(t,e){const n=new ObserverProxy(t,e);return n.subscribe.bind(n)}class ObserverProxy{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let a;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");implementsAnyMethods(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:r},a.next===void 0&&(a.next=noop),a.error===void 0&&(a.error=noop),a.complete===void 0&&(a.complete=noop);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function noop(){}const DEFAULT_INTERVAL_MILLIS=1e3,DEFAULT_BACKOFF_FACTOR=2,MAX_VALUE_MILLIS=14400*1e3,RANDOM_FACTOR=.5;function calculateBackoffMillis(t,e=DEFAULT_INTERVAL_MILLIS,n=DEFAULT_BACKOFF_FACTOR){const r=e*Math.pow(n,t),a=Math.round(RANDOM_FACTOR*r*(Math.random()-.5)*2);return Math.min(MAX_VALUE_MILLIS,r+a)}function getModularInstance(t){return t&&t._delegate?t._delegate:t}class Component{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const DEFAULT_ENTRY_NAME$1="[DEFAULT]";class Provider{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Deferred;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(isComponentEager(e))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:a});r.resolve(i)}catch{}}}}clearInstance(e=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=DEFAULT_ENTRY_NAME$1){return this.instances.has(e)}getOptions(e=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,l]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(i);r===p&&l.resolve(a)}return a}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const i=this.instances.get(r);return i&&e(i,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const a of r)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?e:DEFAULT_ENTRY_NAME$1:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function normalizeIdentifierForFactory(t){return t===DEFAULT_ENTRY_NAME$1?void 0:t}function isComponentEager(t){return t.instantiationMode==="EAGER"}class ComponentContainer{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Provider(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var LogLevel;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),a=ConsoleMethod[e];if(a)console[a](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Logger{constructor(e){this.name=e,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in LogLevel))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?levelStringToEnum[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...e),this._logHandler(this,LogLevel.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...e),this._logHandler(this,LogLevel.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...e),this._logHandler(this,LogLevel.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...e),this._logHandler(this,LogLevel.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...e),this._logHandler(this,LogLevel.ERROR,...e)}}const instanceOfAny=(t,e)=>e.some(n=>t instanceof n);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(t){const e=new Promise((n,r)=>{const a=()=>{t.removeEventListener("success",i),t.removeEventListener("error",l)},i=()=>{n(wrap(t.result)),a()},l=()=>{r(t.error),a()};t.addEventListener("success",i),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&cursorRequestMap.set(n,t)}).catch(()=>{}),reverseTransformCache.set(e,t),e}function cacheDonePromiseForTransaction(t){if(transactionDoneMap.has(t))return;const e=new Promise((n,r)=>{const a=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",l),t.removeEventListener("abort",l)},i=()=>{n(),a()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",i),t.addEventListener("error",l),t.addEventListener("abort",l)});transactionDoneMap.set(t,e)}let idbProxyTraps={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return transactionDoneMap.get(t);if(e==="objectStoreNames")return t.objectStoreNames||transactionStoreNamesMap.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wrap(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function replaceTraps(t){idbProxyTraps=t(idbProxyTraps)}function wrapFunction(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(unwrap(this),e,...n);return transactionStoreNamesMap.set(r,e.sort?e.sort():[e]),wrap(r)}:getCursorAdvanceMethods().includes(t)?function(...e){return t.apply(unwrap(this),e),wrap(cursorRequestMap.get(this))}:function(...e){return wrap(t.apply(unwrap(this),e))}}function transformCachableValue(t){return typeof t=="function"?wrapFunction(t):(t instanceof IDBTransaction&&cacheDonePromiseForTransaction(t),instanceOfAny(t,getIdbProxyableTypes())?new Proxy(t,idbProxyTraps):t)}function wrap(t){if(t instanceof IDBRequest)return promisifyRequest(t);if(transformCache.has(t))return transformCache.get(t);const e=transformCachableValue(t);return e!==t&&(transformCache.set(t,e),reverseTransformCache.set(e,t)),e}const unwrap=t=>reverseTransformCache.get(t);function openDB(t,e,{blocked:n,upgrade:r,blocking:a,terminated:i}={}){const l=indexedDB.open(t,e),p=wrap(l);return r&&l.addEventListener("upgradeneeded",m=>{r(wrap(l.result),m.oldVersion,m.newVersion,wrap(l.transaction),m)}),n&&l.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),p.then(m=>{i&&m.addEventListener("close",()=>i()),a&&m.addEventListener("versionchange",s=>a(s.oldVersion,s.newVersion,s))}).catch(()=>{}),p}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(cachedMethods.get(e))return cachedMethods.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,a=writeMethods.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(a||readMethods.includes(n)))return;const i=async function(l,...p){const m=this.transaction(l,a?"readwrite":"readonly");let s=m.store;return r&&(s=s.index(p.shift())),(await Promise.all([s[n](...p),a&&m.done]))[0]};return cachedMethods.set(e,i),i}replaceTraps(t=>({...t,get:(e,n,r)=>getMethod(e,n)||t.get(e,n,r),has:(e,n)=>!!getMethod(e,n)||t.has(e,n)}));class PlatformLoggerServiceImpl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(isVersionServiceProvider(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function isVersionServiceProvider(t){return t.getComponent()?.type==="VERSION"}const name$q="@firebase/app",version$1$1="0.14.6";const logger$1=new Logger("@firebase/app"),name$p="@firebase/app-compat",name$o="@firebase/analytics-compat",name$n="@firebase/analytics",name$m="@firebase/app-check-compat",name$l="@firebase/app-check",name$k="@firebase/auth",name$j="@firebase/auth-compat",name$i="@firebase/database",name$h="@firebase/data-connect",name$g="@firebase/database-compat",name$f="@firebase/functions",name$e="@firebase/functions-compat",name$d="@firebase/installations",name$c="@firebase/installations-compat",name$b="@firebase/messaging",name$a="@firebase/messaging-compat",name$9="@firebase/performance",name$8="@firebase/performance-compat",name$7="@firebase/remote-config",name$6="@firebase/remote-config-compat",name$5$1="@firebase/storage",name$4$1="@firebase/storage-compat",name$3$1="@firebase/firestore",name$2$1="@firebase/ai",name$1$1="@firebase/firestore-compat",name$r="firebase",version$5="12.6.0";const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$q]:"fire-core",[name$p]:"fire-core-compat",[name$n]:"fire-analytics",[name$o]:"fire-analytics-compat",[name$l]:"fire-app-check",[name$m]:"fire-app-check-compat",[name$k]:"fire-auth",[name$j]:"fire-auth-compat",[name$i]:"fire-rtdb",[name$h]:"fire-data-connect",[name$g]:"fire-rtdb-compat",[name$f]:"fire-fn",[name$e]:"fire-fn-compat",[name$d]:"fire-iid",[name$c]:"fire-iid-compat",[name$b]:"fire-fcm",[name$a]:"fire-fcm-compat",[name$9]:"fire-perf",[name$8]:"fire-perf-compat",[name$7]:"fire-rc",[name$6]:"fire-rc-compat",[name$5$1]:"fire-gcs",[name$4$1]:"fire-gcs-compat",[name$3$1]:"fire-fst",[name$1$1]:"fire-fst-compat",[name$2$1]:"fire-vertex","fire-js":"fire-js",[name$r]:"fire-js-all"};const _apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent(t,e){try{t.container.addComponent(e)}catch(n){logger$1.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _registerComponent(t){const e=t.name;if(_components.has(e))return logger$1.debug(`There were multiple attempts to register component ${e}.`),!1;_components.set(e,t);for(const n of _apps.values())_addComponent(n,t);for(const n of _serverApps.values())_addComponent(n,t);return!0}function _getProvider(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _isFirebaseServerApp(t){return t==null?!1:t.settings!==void 0}const ERRORS$1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY$2=new ErrorFactory("app","Firebase",ERRORS$1);class FirebaseAppImpl{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY$2.create("app-deleted",{appName:this._name})}}const SDK_VERSION=version$5;function initializeApp(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw ERROR_FACTORY$2.create("bad-app-name",{appName:String(a)});if(n||(n=getDefaultAppConfig()),!n)throw ERROR_FACTORY$2.create("no-options");const i=_apps.get(a);if(i){if(deepEqual(n,i.options)&&deepEqual(r,i.config))return i;throw ERROR_FACTORY$2.create("duplicate-app",{appName:a})}const l=new ComponentContainer(a);for(const m of _components.values())l.addComponent(m);const p=new FirebaseAppImpl(n,r,l);return _apps.set(a,p),p}function getApp(t=DEFAULT_ENTRY_NAME){const e=_apps.get(t);if(!e&&t===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!e)throw ERROR_FACTORY$2.create("no-app",{appName:t});return e}function registerVersion(t,e,n){let r=PLATFORM_LOG_STRING[t]??t;n&&(r+=`-${n}`);const a=r.match(/\s|\//),i=e.match(/\s|\//);if(a||i){const l=[`Unable to register library "${r}" with version "${e}":`];a&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&i&&l.push("and"),i&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),logger$1.warn(l.join(" "));return}_registerComponent(new Component(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise$1=null;function getDbPromise$1(){return dbPromise$1||(dbPromise$1=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(STORE_NAME)}catch(n){console.warn(n)}}}}).catch(t=>{throw ERROR_FACTORY$2.create("idb-open",{originalErrorMessage:t.message})})),dbPromise$1}async function readHeartbeatsFromIndexedDB(t){try{const n=(await getDbPromise$1()).transaction(STORE_NAME),r=await n.objectStore(STORE_NAME).get(computeKey(t));return await n.done,r}catch(e){if(e instanceof FirebaseError)logger$1.warn(e.message);else{const n=ERROR_FACTORY$2.create("idb-get",{originalErrorMessage:e?.message});logger$1.warn(n.message)}}}async function writeHeartbeatsToIndexedDB(t,e){try{const r=(await getDbPromise$1()).transaction(STORE_NAME,"readwrite");await r.objectStore(STORE_NAME).put(e,computeKey(t)),await r.done}catch(n){if(n instanceof FirebaseError)logger$1.warn(n.message);else{const r=ERROR_FACTORY$2.create("idb-set",{originalErrorMessage:n?.message});logger$1.warn(r.message)}}}function computeKey(t){return`${t.name}!${t.options.appId}`}const MAX_HEADER_BYTES=1024,MAX_NUM_STORED_HEARTBEATS=30;class HeartbeatServiceImpl{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=getUTCDateString();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>MAX_NUM_STORED_HEARTBEATS){const a=getEarliestHeartbeatIdx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){logger$1.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=getUTCDateString(),{heartbeatsToSend:n,unsentEntries:r}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),a=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return logger$1.warn(e),""}}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(t,e=MAX_HEADER_BYTES){const n=[];let r=t.slice();for(const a of t){const i=n.find(l=>l.agent===a.agent);if(i){if(i.dates.push(a.date),countBytes(n)>e){i.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),countBytes(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class HeartbeatStorageImpl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await readHeartbeatsFromIndexedDB(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function countBytes(t){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:t})).length}function getEarliestHeartbeatIdx(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function registerCoreComponents(t){_registerComponent(new Component("platform-logger",e=>new PlatformLoggerServiceImpl(e),"PRIVATE")),_registerComponent(new Component("heartbeat",e=>new HeartbeatServiceImpl(e),"PRIVATE")),registerVersion(name$q,version$1$1,t),registerVersion(name$q,version$1$1,"esm2020"),registerVersion("fire-js","")}registerCoreComponents("");function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap());const logClient=new Logger("@firebase/auth");function _logWarn(t,...e){logClient.logLevel<=LogLevel.WARN&&logClient.warn(`Auth (${SDK_VERSION}): ${t}`,...e)}function _logError(t,...e){logClient.logLevel<=LogLevel.ERROR&&logClient.error(`Auth (${SDK_VERSION}): ${t}`,...e)}function _fail(t,...e){throw createErrorInternal(t,...e)}function _createError(t,...e){return createErrorInternal(t,...e)}function _errorWithCustomMessage(t,e,n){const r={...prodErrorMap(),[e]:n};return new ErrorFactory("auth","Firebase",r).create(e,{appName:t.name})}function _serverAppCurrentUserOperationNotSupportedError(t){return _errorWithCustomMessage(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _assertInstanceOf(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&_fail(t,"argument-error"),_errorWithCustomMessage(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function createErrorInternal(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return _DEFAULT_AUTH_ERROR_FACTORY.create(t,...e)}function _assert(t,e,...n){if(!t)throw createErrorInternal(e,...n)}function debugFail(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _logError(e),new Error(e)}function debugAssert(t,e){t||debugFail(e)}function _getCurrentUrl(){return typeof self<"u"&&self.location?.href||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){return typeof self<"u"&&self.location?.protocol||null}function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Delay{constructor(e,n){this.shortDelay=e,this.longDelay=n,debugAssert(n>e,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _emulatorUrl(t,e){debugAssert(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class FetchProvider{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const CookieAuthProxiedEndpoints=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function _performApiRequest(t,e,n,r,a={}){return _performFetchWithErrorHandling(t,a,async()=>{let i={},l={};r&&(e==="GET"?l=r:i={body:JSON.stringify(r)});const p=querystring({key:t.config.apiKey,...l}).slice(1),m=await t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);const s={method:e,headers:m,...i};return isCloudflareWorker()||(s.referrerPolicy="no-referrer"),t.emulatorConfig&&isCloudWorkstation(t.emulatorConfig.host)&&(s.credentials="include"),FetchProvider.fetch()(await _getFinalTarget(t,t.config.apiHost,n,p),s)})}async function _performFetchWithErrorHandling(t,e,n){t._canInitEmulator=!1;const r={...SERVER_ERROR_MAP,...e};try{const a=new NetworkTimeout(t),i=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const l=await i.json();if("needConfirmation"in l)throw _makeTaggedError(t,"account-exists-with-different-credential",l);if(i.ok&&!("errorMessage"in l))return l;{const p=i.ok?l.errorMessage:l.error.message,[m,s]=p.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError(t,"credential-already-in-use",l);if(m==="EMAIL_EXISTS")throw _makeTaggedError(t,"email-already-in-use",l);if(m==="USER_DISABLED")throw _makeTaggedError(t,"user-disabled",l);const h=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw _errorWithCustomMessage(t,h,s);_fail(t,h)}}catch(a){if(a instanceof FirebaseError)throw a;_fail(t,"network-request-failed",{message:String(a)})}}async function _performSignInRequest(t,e,n,r,a={}){const i=await _performApiRequest(t,e,n,r,a);return"mfaPendingCredential"in i&&_fail(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function _getFinalTarget(t,e,n,r){const a=`${e}${n}?${r}`,i=t,l=i.config.emulator?_emulatorUrl(t.config,a):`${t.config.apiScheme}://${a}`;return CookieAuthProxiedEndpoints.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(l).toString():l}function _parseEnforcementState(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NetworkTimeout{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}}function _makeTaggedError(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const a=_createError(t,e,r);return a.customData._tokenResponse=n,a}function isEnterprise(t){return t!==void 0&&t.enterprise!==void 0}class RecaptchaConfig{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return _parseEnforcementState(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function getRecaptchaConfig(t,e){return _performApiRequest(t,"GET","/v2/recaptchaConfig",_addTidIfNecessary(t,e))}async function deleteAccount(t,e){return _performApiRequest(t,"POST","/v1/accounts:delete",e)}async function getAccountInfo(t,e){return _performApiRequest(t,"POST","/v1/accounts:lookup",e)}function utcTimestampToDateString(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function getIdTokenResult(t,e=!1){const n=getModularInstance(t),r=await n.getIdToken(e),a=_parseToken(r);_assert(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const i=typeof a.firebase=="object"?a.firebase:void 0,l=i?.sign_in_provider;return{claims:a,token:r,authTime:utcTimestampToDateString(secondsStringToMilliseconds(a.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(a.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(a.exp)),signInProvider:l||null,signInSecondFactor:i?.sign_in_second_factor||null}}function secondsStringToMilliseconds(t){return Number(t)*1e3}function _parseToken(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const a=base64Decode(n);return a?JSON.parse(a):(_logError("Failed to decode base64 JWT payload"),null)}catch(a){return _logError("Caught error parsing JWT payload as JSON",a?.toString()),null}}function _tokenExpiresIn(t){const e=_parseToken(t);return _assert(e,"internal-error"),_assert(typeof e.exp<"u","internal-error"),_assert(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function _logoutIfInvalidated(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof FirebaseError&&isUserInvalidated(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function isUserInvalidated({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class ProactiveRefresh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class UserMetadata{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function _reloadWithoutSaving(t){const e=t.auth,n=await t.getIdToken(),r=await _logoutIfInvalidated(t,getAccountInfo(e,{idToken:n}));_assert(r?.users.length,e,"internal-error");const a=r.users[0];t._notifyReloadListener(a);const i=a.providerUserInfo?.length?extractProviderData(a.providerUserInfo):[],l=mergeProviderData(t.providerData,i),p=t.isAnonymous,m=!(t.email&&a.passwordHash)&&!l?.length,s=p?m:!1,h={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new UserMetadata(a.createdAt,a.lastLoginAt),isAnonymous:s};Object.assign(t,h)}async function reload(t){const e=getModularInstance(t);await _reloadWithoutSaving(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mergeProviderData(t,e){return[...t.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function extractProviderData(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function requestStsToken(t,e){const n=await _performFetchWithErrorHandling(t,{},async()=>{const r=querystring({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:i}=t.config,l=await _getFinalTarget(t,a,"/v1/token",`key=${i}`),p=await t._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:p,body:r};return t.emulatorConfig&&isCloudWorkstation(t.emulatorConfig.host)&&(m.credentials="include"),FetchProvider.fetch()(l,m)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function revokeToken(t,e){return _performApiRequest(t,"POST","/v2/accounts:revokeToken",_addTidIfNecessary(t,e))}class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_assert(e.idToken,"internal-error"),_assert(typeof e.idToken<"u","internal-error"),_assert(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_tokenExpiresIn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){_assert(e.length!==0,"internal-error");const n=_tokenExpiresIn(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(_assert(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:a,expiresIn:i}=await requestStsToken(e,n);this.updateTokensAndExpiration(r,a,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:a,expirationTime:i}=n,l=new StsTokenManager;return r&&(_assert(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),a&&(_assert(typeof a=="string","internal-error",{appName:e}),l.accessToken=a),i&&(_assert(typeof i=="number","internal-error",{appName:e}),l.expirationTime=i),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}function assertStringOrUndefined(t,e){_assert(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class UserImpl{constructor({uid:e,auth:n,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new UserMetadata(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,e));return _assert(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return getIdTokenResult(this,e)}reload(){return reload(this)}_assign(e){this!==e&&(_assert(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new UserImpl({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_isFirebaseServerApp(this.auth.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this.auth));const e=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,a=n.email??void 0,i=n.phoneNumber??void 0,l=n.photoURL??void 0,p=n.tenantId??void 0,m=n._redirectEventId??void 0,s=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:v,isAnonymous:I,providerData:G,stsTokenManager:W}=n;_assert(f&&W,e,"internal-error");const X=StsTokenManager.fromJSON(this.name,W);_assert(typeof f=="string",e,"internal-error"),assertStringOrUndefined(r,e.name),assertStringOrUndefined(a,e.name),_assert(typeof v=="boolean",e,"internal-error"),_assert(typeof I=="boolean",e,"internal-error"),assertStringOrUndefined(i,e.name),assertStringOrUndefined(l,e.name),assertStringOrUndefined(p,e.name),assertStringOrUndefined(m,e.name),assertStringOrUndefined(s,e.name),assertStringOrUndefined(h,e.name);const ge=new UserImpl({uid:f,auth:e,email:a,emailVerified:v,displayName:r,isAnonymous:I,photoURL:l,phoneNumber:i,tenantId:p,stsTokenManager:X,createdAt:s,lastLoginAt:h});return G&&Array.isArray(G)&&(ge.providerData=G.map(ie=>({...ie}))),m&&(ge._redirectEventId=m),ge}static async _fromIdTokenResponse(e,n,r=!1){const a=new StsTokenManager;a.updateFromServerResponse(n);const i=new UserImpl({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await _reloadWithoutSaving(i),i}static async _fromGetAccountInfoResponse(e,n,r){const a=n.users[0];_assert(a.localId!==void 0,"internal-error");const i=a.providerUserInfo!==void 0?extractProviderData(a.providerUserInfo):[],l=!(a.email&&a.passwordHash)&&!i?.length,p=new StsTokenManager;p.updateFromIdToken(r);const m=new UserImpl({uid:a.localId,auth:e,stsTokenManager:p,isAnonymous:l}),s={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new UserMetadata(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!i?.length};return Object.assign(m,s),m}}const instanceCache=new Map;function _getInstance(t){debugAssert(t instanceof Function,"Expected a class definition");let e=instanceCache.get(t);return e?(debugAssert(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,instanceCache.set(t,e),e)}class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;function _persistenceKeyName(t,e,n){return`firebase:${t}:${e}:${n}`}class PersistenceUserManager{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:a,name:i}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,a.apiKey,i),this.fullPersistenceKey=_persistenceKeyName("persistence",a.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await getAccountInfo(this.auth,{idToken:e}).catch(()=>{});return n?UserImpl._fromGetAccountInfoResponse(this.auth,n,e):null}return UserImpl._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),e,r);const a=(await Promise.all(n.map(async s=>{if(await s._isAvailable())return s}))).filter(s=>s);let i=a[0]||_getInstance(inMemoryPersistence);const l=_persistenceKeyName(r,e.config.apiKey,e.name);let p=null;for(const s of n)try{const h=await s._get(l);if(h){let f;if(typeof h=="string"){const v=await getAccountInfo(e,{idToken:h}).catch(()=>{});if(!v)break;f=await UserImpl._fromGetAccountInfoResponse(e,v,h)}else f=UserImpl._fromJSON(e,h);s!==i&&(p=f),i=s;break}}catch{}const m=a.filter(s=>s._shouldAllowMigration);return!i._shouldAllowMigration||!m.length?new PersistenceUserManager(i,e,r):(i=m[0],p&&await i._set(l,p.toJSON()),await Promise.all(n.map(async s=>{if(s!==i)try{await s._remove(l)}catch{}})),new PersistenceUserManager(i,e,r))}}function _getBrowserName(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_isIEMobile(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_isFirefox(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_isBlackBerry(e))return"Blackberry";if(_isWebOS(e))return"Webos";if(_isSafari(e))return"Safari";if((e.includes("chrome/")||_isChromeIOS(e))&&!e.includes("edge/"))return"Chrome";if(_isAndroid(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function _isFirefox(t=getUA()){return/firefox\//i.test(t)}function _isSafari(t=getUA()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _isChromeIOS(t=getUA()){return/crios\//i.test(t)}function _isIEMobile(t=getUA()){return/iemobile/i.test(t)}function _isAndroid(t=getUA()){return/android/i.test(t)}function _isBlackBerry(t=getUA()){return/blackberry/i.test(t)}function _isWebOS(t=getUA()){return/webos/i.test(t)}function _isIOS(t=getUA()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _isIOSStandalone(t=getUA()){return _isIOS(t)&&!!window.navigator?.standalone}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser(t=getUA()){return _isIOS(t)||_isAndroid(t)||_isWebOS(t)||_isBlackBerry(t)||/windows phone/i.test(t)||_isIEMobile(t)}function _getClientVersion(t,e=[]){let n;switch(t){case"Browser":n=_getBrowserName(getUA());break;case"Worker":n=`${_getBrowserName(getUA())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${SDK_VERSION}/${r}`}class AuthMiddlewareQueue{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((l,p)=>{try{const m=e(i);l(m)}catch(m){p(m)}});r.onAbort=n,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function _getPasswordPolicy(t,e={}){return _performApiRequest(t,"GET","/v2/passwordPolicy",_addTidIfNecessary(t,e))}const MINIMUM_MIN_PASSWORD_LENGTH=6;class PasswordPolicyImpl{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??MINIMUM_MIN_PASSWORD_LENGTH,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,a,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class AuthImpl{constructor(e,n,r,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_getInstance(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await getAccountInfo(this,{idToken:e}),r=await UserImpl._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(_isFirebaseServerApp(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,l=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!i||i===l)&&p?.user&&(r=p.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await _reloadWithoutSaving(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_isFirebaseServerApp(this.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this));const n=e?getModularInstance(e):null;return n&&_assert(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&_assert(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _getPasswordPolicy(this),n=new PasswordPolicyImpl(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ErrorFactory("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await revokeToken(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_getInstance(e)||this._popupRedirectResolver;_assert(n,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,a){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let l=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(_assert(p,this,"internal-error"),p.then(()=>{l||i(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,r,a);return()=>{l=!0,m()}}else{const m=e.addObserver(n);return()=>{l=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(_isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&_logWarn(`Error while retrieving App Check token: ${e.error}`),e?.token}}function _castAuth(t){return getModularInstance(t)}class Subscription{constructor(e){this.auth=e,this.observer=null,this.addObserver=createSubscribe(n=>this.observer=n)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let externalJSProvider={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _setExternalJSProvider(t){externalJSProvider=t}function _loadJS(t){return externalJSProvider.loadJS(t)}function _recaptchaEnterpriseScriptUrl(){return externalJSProvider.recaptchaEnterpriseScript}function _gapiScriptUrl(){return externalJSProvider.gapiScript}function _generateCallbackName(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class MockGreCAPTCHATopLevel{constructor(){this.enterprise=new MockGreCAPTCHA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class MockGreCAPTCHA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const RECAPTCHA_ENTERPRISE_VERIFIER_TYPE="recaptcha-enterprise",FAKE_TOKEN="NO_RECAPTCHA";class RecaptchaEnterpriseVerifier{constructor(e){this.type=RECAPTCHA_ENTERPRISE_VERIFIER_TYPE,this.auth=_castAuth(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(l,p)=>{getRecaptchaConfig(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const s=new RecaptchaConfig(m);return i.tenantId==null?i._agentRecaptchaConfig=s:i._tenantRecaptchaConfigs[i.tenantId]=s,l(s.siteKey)}}).catch(m=>{p(m)})})}function a(i,l,p){const m=window.grecaptcha;isEnterprise(m)?m.enterprise.ready(()=>{m.enterprise.execute(i,{action:e}).then(s=>{l(s)}).catch(()=>{l(FAKE_TOKEN)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MockGreCAPTCHATopLevel().execute("siteKey",{action:"verify"}):new Promise((i,l)=>{r(this.auth).then(p=>{if(!n&&isEnterprise(window.grecaptcha))a(p,i,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let m=_recaptchaEnterpriseScriptUrl();m.length!==0&&(m+=p),_loadJS(m).then(()=>{a(p,i,l)}).catch(s=>{l(s)})}}).catch(p=>{l(p)})})}}async function injectRecaptchaFields(t,e,n,r=!1,a=!1){const i=new RecaptchaEnterpriseVerifier(t);let l;if(a)l=FAKE_TOKEN;else try{l=await i.verify(n)}catch{l=await i.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const m=p.phoneEnrollmentInfo.phoneNumber,s=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:s,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const m=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:l}):Object.assign(p,{captchaResponse:l}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function handleRecaptchaFlow(t,e,n,r,a){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await injectRecaptchaFields(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await injectRecaptchaFields(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(i)})}function initializeAuth(t,e){const n=_getProvider(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),i=n.getOptions();if(deepEqual(i,e??{}))return a;_fail(a,"already-initialized")}return n.initialize({options:e})}function _initializeAuthInstance(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(_getInstance);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function connectAuthEmulator(t,e,n){const r=_castAuth(t);_assert(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,i=extractProtocol(e),{host:l,port:p}=extractHostAndPort(e),m=p===null?"":`:${p}`,s={url:`${i}//${l}${m}/`},h=Object.freeze({host:l,port:p,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){_assert(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),_assert(deepEqual(s,r.config.emulator)&&deepEqual(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=s,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,isCloudWorkstation(l)?(pingServer(`${i}//${l}${m}`),updateEmulatorBanner("Auth",!0)):emitEmulatorWarning()}function extractProtocol(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function extractHostAndPort(t){const e=extractProtocol(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const i=a[1];return{host:i,port:parsePort(r.substr(i.length+1))}}else{const[i,l]=r.split(":");return{host:i,port:parsePort(l)}}}function parsePort(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function emitEmulatorWarning(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class AuthCredential{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(e){return debugFail("not implemented")}_linkToIdToken(e,n){return debugFail("not implemented")}_getReauthenticationResolver(e){return debugFail("not implemented")}}async function linkEmailPassword(t,e){return _performApiRequest(t,"POST","/v1/accounts:signUp",e)}async function signInWithPassword(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithPassword",_addTidIfNecessary(t,e))}async function signInWithEmailLink$1(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(t,e))}async function signInWithEmailLinkForLinking(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(t,e))}class EmailAuthCredential extends AuthCredential{constructor(e,n,r,a=null){super("password",r),this._email=e,this._password=n,this._tenantId=a}static _fromEmailAndPassword(e,n){return new EmailAuthCredential(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new EmailAuthCredential(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(e,n,"signInWithPassword",signInWithPassword);case"emailLink":return signInWithEmailLink$1(e,{email:this._email,oobCode:this._password});default:_fail(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(e,r,"signUpPassword",linkEmailPassword);case"emailLink":return signInWithEmailLinkForLinking(e,{idToken:n,email:this._email,oobCode:this._password});default:_fail(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function signInWithIdp(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(t,e))}const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new OAuthCredential(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):_fail("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...i}=n;if(!r||!a)return null;const l=new OAuthCredential(r,a);return l.idToken=i.idToken||void 0,l.accessToken=i.accessToken||void 0,l.secret=i.secret,l.nonce=i.nonce,l.pendingToken=i.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return signInWithIdp(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,signInWithIdp(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,signInWithIdp(e,n)}buildRequest(){const e={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=querystring(n)}return e}}function parseMode(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function parseDeepLink(t){const e=querystringDecode(extractQuerystring(t)).link,n=e?querystringDecode(extractQuerystring(e)).deep_link_id:null,r=querystringDecode(extractQuerystring(t)).deep_link_id;return(r?querystringDecode(extractQuerystring(r)).link:null)||r||n||e||t}class ActionCodeURL{constructor(e){const n=querystringDecode(extractQuerystring(e)),r=n.apiKey??null,a=n.oobCode??null,i=parseMode(n.mode??null);_assert(r&&a&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=a,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=parseDeepLink(e);try{return new ActionCodeURL(n)}catch{return null}}}class EmailAuthProvider{constructor(){this.providerId=EmailAuthProvider.PROVIDER_ID}static credential(e,n){return EmailAuthCredential._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ActionCodeURL.parseLink(n);return _assert(r,"argument-error"),EmailAuthCredential._fromEmailAndCode(e,r.code,r.tenantId)}}EmailAuthProvider.PROVIDER_ID="password";EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD="password";EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class FederatedAuthProvider{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(e){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return FacebookAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return FacebookAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com";FacebookAuthProvider.PROVIDER_ID="facebook.com";class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return GoogleAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GoogleAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return GoogleAuthProvider.credential(n,r)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com";GoogleAuthProvider.PROVIDER_ID="google.com";class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(e){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return GithubAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GithubAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return GithubAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com";GithubAuthProvider.PROVIDER_ID="github.com";class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(e,n){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return TwitterAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return TwitterAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return TwitterAuthProvider.credential(n,r)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com";TwitterAuthProvider.PROVIDER_ID="twitter.com";async function signUp(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signUp",_addTidIfNecessary(t,e))}class UserCredentialImpl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,a=!1){const i=await UserImpl._fromIdTokenResponse(e,r,a),l=providerIdForResponse(r);return new UserCredentialImpl({user:i,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const a=providerIdForResponse(r);return new UserCredentialImpl({user:e,providerId:a,_tokenResponse:r,operationType:n})}}function providerIdForResponse(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}async function signInAnonymously(t){if(_isFirebaseServerApp(t.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t));const e=_castAuth(t);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new UserCredentialImpl({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await signUp(e,{returnSecureToken:!0}),r=await UserCredentialImpl._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}class MultiFactorError extends FirebaseError{constructor(e,n,r,a){super(n.code,n.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,a){return new MultiFactorError(e,n,r,a)}}function _processCredentialSavingMfaContextIfNecessary(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation(t,i,e,r):i})}async function _link$1(t,e,n=!1){const r=await _logoutIfInvalidated(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return UserCredentialImpl._forOperation(t,"link",r)}async function _reauthenticate(t,e,n=!1){const{auth:r}=t;if(_isFirebaseServerApp(r.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(r));const a="reauthenticate";try{const i=await _logoutIfInvalidated(t,_processCredentialSavingMfaContextIfNecessary(r,a,e,t),n);_assert(i.idToken,r,"internal-error");const l=_parseToken(i.idToken);_assert(l,r,"internal-error");const{sub:p}=l;return _assert(t.uid===p,r,"user-mismatch"),UserCredentialImpl._forOperation(t,a,i)}catch(i){throw i?.code==="auth/user-not-found"&&_fail(r,"user-mismatch"),i}}async function _signInWithCredential(t,e,n=!1){if(_isFirebaseServerApp(t.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t));const r="signIn",a=await _processCredentialSavingMfaContextIfNecessary(t,r,e),i=await UserCredentialImpl._fromIdTokenResponse(t,r,a);return n||await t._updateCurrentUser(i.user),i}async function signInWithCredential(t,e){return _signInWithCredential(_castAuth(t),e)}async function recachePasswordPolicy(t){const e=_castAuth(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function createUserWithEmailAndPassword(t,e,n){if(_isFirebaseServerApp(t.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t));const r=_castAuth(t),l=await handleRecaptchaFlow(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",signUp).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(t),m}),p=await UserCredentialImpl._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(p.user),p}function signInWithEmailAndPassword(t,e,n){return _isFirebaseServerApp(t.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t)):signInWithCredential(getModularInstance(t),EmailAuthProvider.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(t),r})}function onIdTokenChanged(t,e,n,r){return getModularInstance(t).onIdTokenChanged(e,n,r)}function beforeAuthStateChanged(t,e,n){return getModularInstance(t).beforeAuthStateChanged(e,n)}function onAuthStateChanged(t,e,n,r){return getModularInstance(t).onAuthStateChanged(e,n,r)}const STORAGE_AVAILABLE_KEY="__sak";class BrowserPersistenceClass{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),a=this.localCache[n];r!==a&&e(n,a,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,p,m)=>{this.notifyListeners(l,m)});return}const r=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},i=this.storage.getItem(r);_isIE10()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,IE10_LOCAL_STORAGE_SYNC_DELAY):a()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;function _allSettled(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Receiver{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const r=new Receiver(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:a,data:i}=n.data,l=this.handlersMap[a];if(!l?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const p=Array.from(l).map(async s=>s(n.origin,i)),m=await _allSettled(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];function _generateEventId(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class Sender{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let i,l;return new Promise((p,m)=>{const s=_generateEventId("",20);a.port1.start();const h=setTimeout(()=>{m(new Error("unsupported_event"))},r);l={messageChannel:a,onMessage(f){const v=f;if(v.data.eventId===s)switch(v.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),p(v.data.response);break;default:clearTimeout(h),clearTimeout(i),m(new Error("invalid_response"));break}}},this.handlers.add(l),a.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:s,data:n},[a.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}function _window(){return window}function _setWindowLocation(t){_window().location.href=t}function _isWorker(){return typeof _window().WorkerGlobalScope<"u"&&typeof _window().importScripts=="function"}async function _getActiveServiceWorker(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){return navigator?.serviceWorker?.controller||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function getObjectStore(t,e){return t.transaction([DB_OBJECTSTORE_NAME],e?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const t=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(t).toPromise()}function _openDatabase(){const t=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?e(r):(r.close(),await _deleteDatabase(),e(await _openDatabase()))})})}async function _putObject(t,e,n){const r=getObjectStore(t,!0).put({[DB_DATA_KEYPATH]:e,value:n});return new DBPromise(r).toPromise()}async function getObject(t,e){const n=getObjectStore(t,!1).get(e),r=await new DBPromise(n).toPromise();return r===void 0?null:r.value}function _deleteObject(t,e){const n=getObjectStore(t,!0).delete(e);return new DBPromise(n).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>_TRANSACTION_RETRY_COUNT)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _openDatabase();return await _putObject(e,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(e,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>_putObject(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>getObject(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_deleteObject(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const i=getObjectStore(a,!1).getAll();return new DBPromise(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:i}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(i)&&(this.notifyListeners(a,i),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;new Delay(3e4,6e4);function _withDefaultResolver(t,e){return e?_getInstance(e):(_assert(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class IdpCredential extends AuthCredential{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return signInWithIdp(e,this._buildIdpRequest())}_linkToIdToken(e,n){return signInWithIdp(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return signInWithIdp(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _signIn(t){return _signInWithCredential(t.auth,new IdpCredential(t),t.bypassAuthState)}function _reauth(t){const{auth:e,user:n}=t;return _assert(n,e,"internal-error"),_reauthenticate(n,new IdpCredential(t),t.bypassAuthState)}async function _link(t){const{auth:e,user:n}=t;return _assert(n,e,"internal-error"),_link$1(n,new IdpCredential(t),t.bypassAuthState)}class AbstractPopupRedirectOperation{constructor(e,n,r,a,i=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:a,tenantId:i,error:l,type:p}=e;if(l){this.reject(l);return}const m={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(m))}catch(s){this.reject(s)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);async function signInWithPopup(t,e,n){if(_isFirebaseServerApp(t.app))return Promise.reject(_createError(t,"operation-not-supported-in-this-environment"));const r=_castAuth(t);_assertInstanceOf(t,e,FederatedAuthProvider);const a=_withDefaultResolver(r,n);return new PopupOperation(r,"signInViaPopup",e,a).executeNotNull()}class PopupOperation extends AbstractPopupRedirectOperation{constructor(e,n,r,a,i){super(e,n,a,i),this.provider=r,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _assert(e,this.auth,"internal-error"),e}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const e=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_POLL_WINDOW_CLOSE_TIMEOUT.get())};e()}}PopupOperation.currentPopupAction=null;const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=redirectOutcomeMap.get(this.auth._key());if(!e){try{const r=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}redirectOutcomeMap.set(this.auth._key(),e)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(t,e){const n=pendingRedirectKey(e),r=resolverPersistence(t);if(!await r._isAvailable())return!1;const a=await r._get(n)==="true";return await r._remove(n),a}function _overrideRedirectResult(t,e){redirectOutcomeMap.set(t._key(),e)}function resolverPersistence(t){return _getInstance(t._redirectPersistence)}function pendingRedirectKey(t){return _persistenceKeyName(PENDING_REDIRECT_KEY,t.config.apiKey,t.name)}async function _getRedirectResult(t,e,n=!1){if(_isFirebaseServerApp(t.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t));const r=_castAuth(t),a=_withDefaultResolver(r,e),l=await new RedirectAction(r,a,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}const EVENT_DUPLICATION_CACHE_DURATION_MS=600*1e3;class AuthEventManager{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!isRedirectEvent(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!isNullRedirectEvent(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(_createError(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(e))}saveEventToCache(e){this.cachedEventUids.add(eventUid(e)),this.lastProcessedEventTime=Date.now()}}function eventUid(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function isNullRedirectEvent({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function isRedirectEvent(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(t);default:return!1}}async function _getProjectConfig(t,e={}){return _performApiRequest(t,"GET","/v1/projects",e)}const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _getProjectConfig(t);for(const n of e)try{if(matchDomain(n))return}catch{}_fail(t,"unauthorized-domain")}function matchDomain(t){const e=_getCurrentUrl(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!HTTP_REGEX.test(n))return!1;if(IP_ADDRESS_REGEX.test(t))return r===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const t=_window().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function loadGapi(t){return new Promise((e,n)=>{function r(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),n(_createError(t,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(_window().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(_window().gapi?.load)r();else{const a=_generateCallbackName("iframefcb");return _window()[a]=()=>{gapi.load?r():n(_createError(t,"network-request-failed"))},_loadJS(`${_gapiScriptUrl()}?onload=${a}`).catch(i=>n(i))}}).catch(e=>{throw cachedGApiLoader=null,e})}let cachedGApiLoader=null;function _loadGapi(t){return cachedGApiLoader=cachedGApiLoader||loadGapi(t),cachedGApiLoader}const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(t){const e=t.config;_assert(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?_emulatorUrl(e,EMULATED_IFRAME_PATH):`https://${t.config.authDomain}/${IFRAME_PATH}`,r={apiKey:e.apiKey,appName:t.name,v:SDK_VERSION},a=EID_FROM_APIHOST.get(t.config.apiHost);a&&(r.eid=a);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${querystring(r).slice(1)}`}async function _openIframe(t){const e=await _loadGapi(t),n=_window().gapi;return _assert(n,t,"internal-error"),e.open({where:document.body,url:getIframeUrl(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},r=>new Promise(async(a,i)=>{await r.restyle({setHideOnLeave:!1});const l=_createError(t,"network-request-failed"),p=_window().setTimeout(()=>{i(l)},PING_TIMEOUT.get());function m(){_window().clearTimeout(p),a(r)}r.ping(m).then(m,()=>{i(l)})}))}const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open(t,e,n,r=DEFAULT_WIDTH,a=DEFAULT_HEIGHT){const i=Math.max((window.screen.availHeight-a)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const m={...BASE_POPUP_OPTIONS,width:r.toString(),height:a.toString(),top:i,left:l},s=getUA().toLowerCase();n&&(p=_isChromeIOS(s)?TARGET_BLANK:n),_isFirefox(s)&&(e=e||FIREFOX_EMPTY_URL,m.scrollbars="yes");const h=Object.entries(m).reduce((v,[I,G])=>`${v}${I}=${G},`,"");if(_isIOSStandalone(s)&&p!=="_self")return openAsNewWindowIOS(e||"",p),new AuthPopup(null);const f=window.open(e||"",p,h);_assert(f,t,"popup-blocked");try{f.focus()}catch{}return new AuthPopup(f)}function openAsNewWindowIOS(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler",FIREBASE_APP_CHECK_FRAGMENT_ID=encodeURIComponent("fac");async function _getRedirectUrl(t,e,n,r,a,i){_assert(t.config.authDomain,t,"auth-domain-config-required"),_assert(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:SDK_VERSION,eventId:a};if(e instanceof FederatedAuthProvider){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",isEmpty$1(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))l[h]=f}if(e instanceof BaseOAuthProvider){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(l.scopes=h.join(","))}t.tenantId&&(l.tid=t.tenantId);const p=l;for(const h of Object.keys(p))p[h]===void 0&&delete p[h];const m=await t._getAppCheckToken(),s=m?`#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent(m)}`:"";return`${getHandlerBase(t)}?${querystring(p).slice(1)}${s}`}function getHandlerBase({config:t}){return t.emulator?_emulatorUrl(t,EMULATOR_WIDGET_PATH):`https://${t.authDomain}/${WIDGET_PATH}`}const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(e,n,r,a){debugAssert(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await _getRedirectUrl(e,n,r,_getCurrentUrl(),a);return _open(e,i,_generateEventId())}async _openRedirect(e,n,r,a){await this._originValidation(e);const i=await _getRedirectUrl(e,n,r,_getCurrentUrl(),a);return _setWindowLocation(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:i}=this.eventManagers[n];return a?Promise.resolve(a):(debugAssert(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await _openIframe(e),r=new AuthEventManager(e);return n.register("authEvent",a=>(_assert(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},a=>{const i=a?.[0]?.[WEB_STORAGE_SUPPORT_KEY];i!==void 0&&n(!!i),_fail(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_validateOrigin(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name$5="@firebase/auth",version$4="1.11.1";class AuthInterop{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function getVersionForPlatform(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function registerAuth(t){_registerComponent(new Component("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:l,authDomain:p}=r.options;_assert(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:l,authDomain:p,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(t)},s=new AuthImpl(r,a,i,m);return _initializeAuthInstance(s,n),s},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),_registerComponent(new Component("auth-internal",e=>{const n=_castAuth(e.getProvider("auth").getImmediate());return(r=>new AuthInterop(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name$5,version$4,getVersionForPlatform(t)),registerVersion(name$5,version$4,"esm2020")}const DEFAULT_ID_TOKEN_MAX_AGE=300,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>authIdTokenMaxAge)return;const a=n?.token;lastPostedIdToken!==a&&(lastPostedIdToken=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function getAuth(t=getApp()){const e=_getProvider(t,"auth");if(e.isInitialized())return e.getImmediate();const n=initializeAuth(t,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),r=getExperimentalSetting("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const l=mintCookieFactory(i.toString());beforeAuthStateChanged(n,l,()=>l(n.currentUser)),onIdTokenChanged(n,p=>l(p))}}const a=getDefaultEmulatorHost("auth");return a&&connectAuthEmulator(n,`http://${a}`),n}function getScriptParentElement(){return document.getElementsByTagName("head")?.[0]??document}_setExternalJSProvider({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=a=>{const i=_createError("internal-error");i.customData=a,n(i)},r.type="text/javascript",r.charset="UTF-8",getScriptParentElement().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});registerAuth("Browser");var name$4="firebase",version$3="12.6.0";registerVersion(name$4,version$3,"app");const name$3="@firebase/installations",version$2="0.6.19";const PENDING_TIMEOUT_MS=1e4,PACKAGE_VERSION=`w:${version$2}`,INTERNAL_AUTH_VERSION="FIS_v2",INSTALLATIONS_API_URL="https://firebaseinstallations.googleapis.com/v1",TOKEN_EXPIRATION_BUFFER=3600*1e3,SERVICE="installations",SERVICE_NAME="Installations";const ERROR_DESCRIPTION_MAP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ERROR_FACTORY$1=new ErrorFactory(SERVICE,SERVICE_NAME,ERROR_DESCRIPTION_MAP);function isServerError(t){return t instanceof FirebaseError&&t.code.includes("request-failed")}function getInstallationsEndpoint({projectId:t}){return`${INSTALLATIONS_API_URL}/projects/${t}/installations`}function extractAuthTokenInfoFromResponse(t){return{token:t.token,requestStatus:2,expiresIn:getExpiresInFromResponseExpiresIn(t.expiresIn),creationTime:Date.now()}}async function getErrorFromResponse(t,e){const r=(await e.json()).error;return ERROR_FACTORY$1.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function getHeaders$1({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function getHeadersWithAuth(t,{refreshToken:e}){const n=getHeaders$1(t);return n.append("Authorization",getAuthorizationHeader(e)),n}async function retryIfServerError(t){const e=await t();return e.status>=500&&e.status<600?t():e}function getExpiresInFromResponseExpiresIn(t){return Number(t.replace("s","000"))}function getAuthorizationHeader(t){return`${INTERNAL_AUTH_VERSION} ${t}`}async function createInstallationRequest({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=getInstallationsEndpoint(t),a=getHeaders$1(t),i=e.getImmediate({optional:!0});if(i){const s=await i.getHeartbeatsHeader();s&&a.append("x-firebase-client",s)}const l={fid:n,authVersion:INTERNAL_AUTH_VERSION,appId:t.appId,sdkVersion:PACKAGE_VERSION},p={method:"POST",headers:a,body:JSON.stringify(l)},m=await retryIfServerError(()=>fetch(r,p));if(m.ok){const s=await m.json();return{fid:s.fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:extractAuthTokenInfoFromResponse(s.authToken)}}else throw await getErrorFromResponse("Create Installation",m)}function sleep(t){return new Promise(e=>{setTimeout(e,t)})}function bufferToBase64UrlSafe(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}const VALID_FID_PATTERN=/^[cdef][\w-]{21}$/,INVALID_FID="";function generateFid(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=encode(t);return VALID_FID_PATTERN.test(n)?n:INVALID_FID}catch{return INVALID_FID}}function encode(t){return bufferToBase64UrlSafe(t).substr(0,22)}function getKey(t){return`${t.appName}!${t.appId}`}const fidChangeCallbacks=new Map;function fidChanged(t,e){const n=getKey(t);callFidChangeCallbacks(n,e),broadcastFidChange(n,e)}function callFidChangeCallbacks(t,e){const n=fidChangeCallbacks.get(t);if(n)for(const r of n)r(e)}function broadcastFidChange(t,e){const n=getBroadcastChannel();n&&n.postMessage({key:t,fid:e}),closeBroadcastChannel()}let broadcastChannel=null;function getBroadcastChannel(){return!broadcastChannel&&"BroadcastChannel"in self&&(broadcastChannel=new BroadcastChannel("[Firebase] FID Change"),broadcastChannel.onmessage=t=>{callFidChangeCallbacks(t.data.key,t.data.fid)}),broadcastChannel}function closeBroadcastChannel(){fidChangeCallbacks.size===0&&broadcastChannel&&(broadcastChannel.close(),broadcastChannel=null)}const DATABASE_NAME="firebase-installations-database",DATABASE_VERSION=1,OBJECT_STORE_NAME="firebase-installations-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DATABASE_NAME,DATABASE_VERSION,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(OBJECT_STORE_NAME)}}})),dbPromise}async function set(t,e){const n=getKey(t),a=(await getDbPromise()).transaction(OBJECT_STORE_NAME,"readwrite"),i=a.objectStore(OBJECT_STORE_NAME),l=await i.get(n);return await i.put(e,n),await a.done,(!l||l.fid!==e.fid)&&fidChanged(t,e.fid),e}async function remove(t){const e=getKey(t),r=(await getDbPromise()).transaction(OBJECT_STORE_NAME,"readwrite");await r.objectStore(OBJECT_STORE_NAME).delete(e),await r.done}async function update(t,e){const n=getKey(t),a=(await getDbPromise()).transaction(OBJECT_STORE_NAME,"readwrite"),i=a.objectStore(OBJECT_STORE_NAME),l=await i.get(n),p=e(l);return p===void 0?await i.delete(n):await i.put(p,n),await a.done,p&&(!l||l.fid!==p.fid)&&fidChanged(t,p.fid),p}async function getInstallationEntry(t){let e;const n=await update(t.appConfig,r=>{const a=updateOrCreateInstallationEntry(r),i=triggerRegistrationIfNecessary(t,a);return e=i.registrationPromise,i.installationEntry});return n.fid===INVALID_FID?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function updateOrCreateInstallationEntry(t){const e=t||{fid:generateFid(),registrationStatus:0};return clearTimedOutRequest(e)}function triggerRegistrationIfNecessary(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(ERROR_FACTORY$1.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=registerInstallation(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:waitUntilFidRegistration(t)}:{installationEntry:e}}async function registerInstallation(t,e){try{const n=await createInstallationRequest(t,e);return set(t.appConfig,n)}catch(n){throw isServerError(n)&&n.customData.serverCode===409?await remove(t.appConfig):await set(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function waitUntilFidRegistration(t){let e=await updateInstallationRequest(t.appConfig);for(;e.registrationStatus===1;)await sleep(100),e=await updateInstallationRequest(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await getInstallationEntry(t);return r||n}return e}function updateInstallationRequest(t){return update(t,e=>{if(!e)throw ERROR_FACTORY$1.create("installation-not-found");return clearTimedOutRequest(e)})}function clearTimedOutRequest(t){return hasInstallationRequestTimedOut(t)?{fid:t.fid,registrationStatus:0}:t}function hasInstallationRequestTimedOut(t){return t.registrationStatus===1&&t.registrationTime+PENDING_TIMEOUT_MS<Date.now()}async function generateAuthTokenRequest({appConfig:t,heartbeatServiceProvider:e},n){const r=getGenerateAuthTokenEndpoint(t,n),a=getHeadersWithAuth(t,n),i=e.getImmediate({optional:!0});if(i){const s=await i.getHeartbeatsHeader();s&&a.append("x-firebase-client",s)}const l={installation:{sdkVersion:PACKAGE_VERSION,appId:t.appId}},p={method:"POST",headers:a,body:JSON.stringify(l)},m=await retryIfServerError(()=>fetch(r,p));if(m.ok){const s=await m.json();return extractAuthTokenInfoFromResponse(s)}else throw await getErrorFromResponse("Generate Auth Token",m)}function getGenerateAuthTokenEndpoint(t,{fid:e}){return`${getInstallationsEndpoint(t)}/${e}/authTokens:generate`}async function refreshAuthToken(t,e=!1){let n;const r=await update(t.appConfig,i=>{if(!isEntryRegistered(i))throw ERROR_FACTORY$1.create("not-registered");const l=i.authToken;if(!e&&isAuthTokenValid(l))return i;if(l.requestStatus===1)return n=waitUntilAuthTokenRequest(t,e),i;{if(!navigator.onLine)throw ERROR_FACTORY$1.create("app-offline");const p=makeAuthTokenRequestInProgressEntry(i);return n=fetchAuthTokenFromServer(t,p),p}});return n?await n:r.authToken}async function waitUntilAuthTokenRequest(t,e){let n=await updateAuthTokenRequest(t.appConfig);for(;n.authToken.requestStatus===1;)await sleep(100),n=await updateAuthTokenRequest(t.appConfig);const r=n.authToken;return r.requestStatus===0?refreshAuthToken(t,e):r}function updateAuthTokenRequest(t){return update(t,e=>{if(!isEntryRegistered(e))throw ERROR_FACTORY$1.create("not-registered");const n=e.authToken;return hasAuthTokenRequestTimedOut(n)?{...e,authToken:{requestStatus:0}}:e})}async function fetchAuthTokenFromServer(t,e){try{const n=await generateAuthTokenRequest(t,e),r={...e,authToken:n};return await set(t.appConfig,r),n}catch(n){if(isServerError(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await remove(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await set(t.appConfig,r)}throw n}}function isEntryRegistered(t){return t!==void 0&&t.registrationStatus===2}function isAuthTokenValid(t){return t.requestStatus===2&&!isAuthTokenExpired(t)}function isAuthTokenExpired(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+TOKEN_EXPIRATION_BUFFER}function makeAuthTokenRequestInProgressEntry(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function hasAuthTokenRequestTimedOut(t){return t.requestStatus===1&&t.requestTime+PENDING_TIMEOUT_MS<Date.now()}async function getId(t){const e=t,{installationEntry:n,registrationPromise:r}=await getInstallationEntry(e);return r?r.catch(console.error):refreshAuthToken(e).catch(console.error),n.fid}async function getToken(t,e=!1){const n=t;return await completeInstallationRegistration(n),(await refreshAuthToken(n,e)).token}async function completeInstallationRegistration(t){const{registrationPromise:e}=await getInstallationEntry(t);e&&await e}function extractAppConfig(t){if(!t||!t.options)throw getMissingValueError("App Configuration");if(!t.name)throw getMissingValueError("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw getMissingValueError(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function getMissingValueError(t){return ERROR_FACTORY$1.create("missing-app-config-values",{valueName:t})}const INSTALLATIONS_NAME="installations",INSTALLATIONS_NAME_INTERNAL="installations-internal",publicFactory=t=>{const e=t.getProvider("app").getImmediate(),n=extractAppConfig(e),r=_getProvider(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},internalFactory=t=>{const e=t.getProvider("app").getImmediate(),n=_getProvider(e,INSTALLATIONS_NAME).getImmediate();return{getId:()=>getId(n),getToken:a=>getToken(n,a)}};function registerInstallations(){_registerComponent(new Component(INSTALLATIONS_NAME,publicFactory,"PUBLIC")),_registerComponent(new Component(INSTALLATIONS_NAME_INTERNAL,internalFactory,"PRIVATE"))}registerInstallations();registerVersion(name$3,version$2);registerVersion(name$3,version$2,"esm2020");const ANALYTICS_TYPE="analytics",GA_FID_KEY="firebase_id",ORIGIN_KEY="origin",FETCH_TIMEOUT_MILLIS=60*1e3,DYNAMIC_CONFIG_URL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",GTAG_URL="https://www.googletagmanager.com/gtag/js";const logger=new Logger("@firebase/analytics");const ERRORS={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ERROR_FACTORY=new ErrorFactory("analytics","Analytics",ERRORS);function createGtagTrustedTypesScriptURL(t){if(!t.startsWith(GTAG_URL)){const e=ERROR_FACTORY.create("invalid-gtag-resource",{gtagURL:t});return logger.warn(e.message),""}return t}function promiseAllSettled(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function createTrustedTypesPolicy(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function insertScriptTag(t,e){const n=createTrustedTypesPolicy("firebase-js-sdk-policy",{createScriptURL:createGtagTrustedTypesScriptURL}),r=document.createElement("script"),a=`${GTAG_URL}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(a):a,r.async=!0,document.head.appendChild(r)}function getOrCreateDataLayer(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function gtagOnConfig(t,e,n,r,a,i){const l=r[a];try{if(l)await e[l];else{const m=(await promiseAllSettled(n)).find(s=>s.measurementId===a);m&&await e[m.appId]}}catch(p){logger.error(p)}t("config",a,i)}async function gtagOnEvent(t,e,n,r,a){try{let i=[];if(a&&a.send_to){let l=a.send_to;Array.isArray(l)||(l=[l]);const p=await promiseAllSettled(n);for(const m of l){const s=p.find(f=>f.measurementId===m),h=s&&e[s.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,a||{})}catch(i){logger.error(i)}}function wrapGtag(t,e,n,r){async function a(i,...l){try{if(i==="event"){const[p,m]=l;await gtagOnEvent(t,e,n,p,m)}else if(i==="config"){const[p,m]=l;await gtagOnConfig(t,e,n,r,p,m)}else if(i==="consent"){const[p,m]=l;t("consent",p,m)}else if(i==="get"){const[p,m,s]=l;t("get",p,m,s)}else if(i==="set"){const[p]=l;t("set",p)}else t(i,...l)}catch(p){logger.error(p)}}return a}function wrapOrCreateGtag(t,e,n,r,a){let i=function(...l){window[r].push(arguments)};return window[a]&&typeof window[a]=="function"&&(i=window[a]),window[a]=wrapGtag(i,t,e,n),{gtagCore:i,wrappedGtag:window[a]}}function findGtagScriptOnPage(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(GTAG_URL)&&n.src.includes(t))return n;return null}const LONG_RETRY_FACTOR=30,BASE_INTERVAL_MILLIS=1e3;class RetryData{constructor(e={},n=BASE_INTERVAL_MILLIS){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const defaultRetryData=new RetryData;function getHeaders(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function fetchDynamicConfig(t){const{appId:e,apiKey:n}=t,r={method:"GET",headers:getHeaders(n)},a=DYNAMIC_CONFIG_URL.replace("{app-id}",e),i=await fetch(a,r);if(i.status!==200&&i.status!==304){let l="";try{const p=await i.json();p.error?.message&&(l=p.error.message)}catch{}throw ERROR_FACTORY.create("config-fetch-failed",{httpStatus:i.status,responseMessage:l})}return i.json()}async function fetchDynamicConfigWithRetry(t,e=defaultRetryData,n){const{appId:r,apiKey:a,measurementId:i}=t.options;if(!r)throw ERROR_FACTORY.create("no-app-id");if(!a){if(i)return{measurementId:i,appId:r};throw ERROR_FACTORY.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},p=new AnalyticsAbortSignal;return setTimeout(async()=>{p.abort()},FETCH_TIMEOUT_MILLIS),attemptFetchDynamicConfigWithRetry({appId:r,apiKey:a,measurementId:i},l,p,e)}async function attemptFetchDynamicConfigWithRetry(t,{throttleEndTimeMillis:e,backoffCount:n},r,a=defaultRetryData){const{appId:i,measurementId:l}=t;try{await setAbortableTimeout(r,e)}catch(p){if(l)return logger.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:i,measurementId:l};throw p}try{const p=await fetchDynamicConfig(t);return a.deleteThrottleMetadata(i),p}catch(p){const m=p;if(!isRetriableError(m)){if(a.deleteThrottleMetadata(i),l)return logger.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:i,measurementId:l};throw p}const s=Number(m?.customData?.httpStatus)===503?calculateBackoffMillis(n,a.intervalMillis,LONG_RETRY_FACTOR):calculateBackoffMillis(n,a.intervalMillis),h={throttleEndTimeMillis:Date.now()+s,backoffCount:n+1};return a.setThrottleMetadata(i,h),logger.debug(`Calling attemptFetch again in ${s} millis`),attemptFetchDynamicConfigWithRetry(t,h,r,a)}}function setAbortableTimeout(t,e){return new Promise((n,r)=>{const a=Math.max(e-Date.now(),0),i=setTimeout(n,a);t.addEventListener(()=>{clearTimeout(i),r(ERROR_FACTORY.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function isRetriableError(t){if(!(t instanceof FirebaseError)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class AnalyticsAbortSignal{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function logEvent$1(t,e,n,r,a){if(a&&a.global){t("event",n,r);return}else{const i=await e,l={...r,send_to:i};t("event",n,l)}}async function setUserProperties$1(t,e,n,r){if(r&&r.global){const a={};for(const i of Object.keys(n))a[`user_properties.${i}`]=n[i];return t("set",a),Promise.resolve()}else{const a=await e;t("config",a,{update:!0,user_properties:n})}}async function validateIndexedDB(){if(isIndexedDBAvailable())try{await validateIndexedDBOpenable()}catch(t){return logger.warn(ERROR_FACTORY.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return logger.warn(ERROR_FACTORY.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function _initializeAnalytics(t,e,n,r,a,i,l){const p=fetchDynamicConfigWithRetry(t);p.then(v=>{n[v.measurementId]=v.appId,t.options.measurementId&&v.measurementId!==t.options.measurementId&&logger.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>logger.error(v)),e.push(p);const m=validateIndexedDB().then(v=>{if(v)return r.getId()}),[s,h]=await Promise.all([p,m]);findGtagScriptOnPage(i)||insertScriptTag(i,s.measurementId),a("js",new Date);const f=l?.config??{};return f[ORIGIN_KEY]="firebase",f.update=!0,h!=null&&(f[GA_FID_KEY]=h),a("config",s.measurementId,f),s.measurementId}class AnalyticsService{constructor(e){this.app=e}_delete(){return delete initializationPromisesMap[this.app.options.appId],Promise.resolve()}}let initializationPromisesMap={},dynamicConfigPromisesList=[];const measurementIdToAppId={};let dataLayerName="dataLayer",gtagName="gtag",gtagCoreFunction,wrappedGtagFunction,globalInitDone=!1;function warnOnBrowserContextMismatch(){const t=[];if(isBrowserExtension()&&t.push("This is a browser extension environment."),areCookiesEnabled()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,a)=>`(${a+1}) ${r}`).join(" "),n=ERROR_FACTORY.create("invalid-analytics-context",{errorInfo:e});logger.warn(n.message)}}function factory$1(t,e,n){warnOnBrowserContextMismatch();const r=t.options.appId;if(!r)throw ERROR_FACTORY.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)logger.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ERROR_FACTORY.create("no-api-key");if(initializationPromisesMap[r]!=null)throw ERROR_FACTORY.create("already-exists",{id:r});if(!globalInitDone){getOrCreateDataLayer(dataLayerName);const{wrappedGtag:i,gtagCore:l}=wrapOrCreateGtag(initializationPromisesMap,dynamicConfigPromisesList,measurementIdToAppId,dataLayerName,gtagName);wrappedGtagFunction=i,gtagCoreFunction=l,globalInitDone=!0}return initializationPromisesMap[r]=_initializeAnalytics(t,dynamicConfigPromisesList,measurementIdToAppId,e,gtagCoreFunction,dataLayerName,n),new AnalyticsService(t)}function getAnalytics(t=getApp()){t=getModularInstance(t);const e=_getProvider(t,ANALYTICS_TYPE);return e.isInitialized()?e.getImmediate():initializeAnalytics(t)}function initializeAnalytics(t,e={}){const n=_getProvider(t,ANALYTICS_TYPE);if(n.isInitialized()){const a=n.getImmediate();if(deepEqual(e,n.getOptions()))return a;throw ERROR_FACTORY.create("already-initialized")}return n.initialize({options:e})}function setUserProperties(t,e,n){t=getModularInstance(t),setUserProperties$1(wrappedGtagFunction,initializationPromisesMap[t.app.options.appId],e,n).catch(r=>logger.error(r))}function logEvent(t,e,n,r){t=getModularInstance(t),logEvent$1(wrappedGtagFunction,initializationPromisesMap[t.app.options.appId],e,n,r).catch(a=>logger.error(a))}const name$2="@firebase/analytics",version$1="0.10.19";function registerAnalytics(){_registerComponent(new Component(ANALYTICS_TYPE,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return factory$1(r,a,n)},"PUBLIC")),_registerComponent(new Component("analytics-internal",t,"PRIVATE")),registerVersion(name$2,version$1),registerVersion(name$2,version$1,"esm2020");function t(e){try{const n=e.getProvider(ANALYTICS_TYPE).getImmediate();return{logEvent:(r,a,i)=>logEvent(n,r,a,i),setUserProperties:(r,a)=>setUserProperties(n,r,a)}}catch(n){throw ERROR_FACTORY.create("interop-component-reg-failed",{reason:n})}}}registerAnalytics();var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Integer,Md5;(function(){var t;function e(de,se){function he(){}he.prototype=se.prototype,de.F=se.prototype,de.prototype=new he,de.prototype.constructor=de,de.D=function(pe,Ae,Ce){for(var Te=Array(arguments.length-2),Hr=2;Hr<arguments.length;Hr++)Te[Hr-2]=arguments[Hr];return se.prototype[Ae].apply(pe,Te)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(de,se,he){he||(he=0);const pe=Array(16);if(typeof se=="string")for(var Ae=0;Ae<16;++Ae)pe[Ae]=se.charCodeAt(he++)|se.charCodeAt(he++)<<8|se.charCodeAt(he++)<<16|se.charCodeAt(he++)<<24;else for(Ae=0;Ae<16;++Ae)pe[Ae]=se[he++]|se[he++]<<8|se[he++]<<16|se[he++]<<24;se=de.g[0],he=de.g[1],Ae=de.g[2];let Ce=de.g[3],Te;Te=se+(Ce^he&(Ae^Ce))+pe[0]+3614090360&4294967295,se=he+(Te<<7&4294967295|Te>>>25),Te=Ce+(Ae^se&(he^Ae))+pe[1]+3905402710&4294967295,Ce=se+(Te<<12&4294967295|Te>>>20),Te=Ae+(he^Ce&(se^he))+pe[2]+606105819&4294967295,Ae=Ce+(Te<<17&4294967295|Te>>>15),Te=he+(se^Ae&(Ce^se))+pe[3]+3250441966&4294967295,he=Ae+(Te<<22&4294967295|Te>>>10),Te=se+(Ce^he&(Ae^Ce))+pe[4]+4118548399&4294967295,se=he+(Te<<7&4294967295|Te>>>25),Te=Ce+(Ae^se&(he^Ae))+pe[5]+1200080426&4294967295,Ce=se+(Te<<12&4294967295|Te>>>20),Te=Ae+(he^Ce&(se^he))+pe[6]+2821735955&4294967295,Ae=Ce+(Te<<17&4294967295|Te>>>15),Te=he+(se^Ae&(Ce^se))+pe[7]+4249261313&4294967295,he=Ae+(Te<<22&4294967295|Te>>>10),Te=se+(Ce^he&(Ae^Ce))+pe[8]+1770035416&4294967295,se=he+(Te<<7&4294967295|Te>>>25),Te=Ce+(Ae^se&(he^Ae))+pe[9]+2336552879&4294967295,Ce=se+(Te<<12&4294967295|Te>>>20),Te=Ae+(he^Ce&(se^he))+pe[10]+4294925233&4294967295,Ae=Ce+(Te<<17&4294967295|Te>>>15),Te=he+(se^Ae&(Ce^se))+pe[11]+2304563134&4294967295,he=Ae+(Te<<22&4294967295|Te>>>10),Te=se+(Ce^he&(Ae^Ce))+pe[12]+1804603682&4294967295,se=he+(Te<<7&4294967295|Te>>>25),Te=Ce+(Ae^se&(he^Ae))+pe[13]+4254626195&4294967295,Ce=se+(Te<<12&4294967295|Te>>>20),Te=Ae+(he^Ce&(se^he))+pe[14]+2792965006&4294967295,Ae=Ce+(Te<<17&4294967295|Te>>>15),Te=he+(se^Ae&(Ce^se))+pe[15]+1236535329&4294967295,he=Ae+(Te<<22&4294967295|Te>>>10),Te=se+(Ae^Ce&(he^Ae))+pe[1]+4129170786&4294967295,se=he+(Te<<5&4294967295|Te>>>27),Te=Ce+(he^Ae&(se^he))+pe[6]+3225465664&4294967295,Ce=se+(Te<<9&4294967295|Te>>>23),Te=Ae+(se^he&(Ce^se))+pe[11]+643717713&4294967295,Ae=Ce+(Te<<14&4294967295|Te>>>18),Te=he+(Ce^se&(Ae^Ce))+pe[0]+3921069994&4294967295,he=Ae+(Te<<20&4294967295|Te>>>12),Te=se+(Ae^Ce&(he^Ae))+pe[5]+3593408605&4294967295,se=he+(Te<<5&4294967295|Te>>>27),Te=Ce+(he^Ae&(se^he))+pe[10]+38016083&4294967295,Ce=se+(Te<<9&4294967295|Te>>>23),Te=Ae+(se^he&(Ce^se))+pe[15]+3634488961&4294967295,Ae=Ce+(Te<<14&4294967295|Te>>>18),Te=he+(Ce^se&(Ae^Ce))+pe[4]+3889429448&4294967295,he=Ae+(Te<<20&4294967295|Te>>>12),Te=se+(Ae^Ce&(he^Ae))+pe[9]+568446438&4294967295,se=he+(Te<<5&4294967295|Te>>>27),Te=Ce+(he^Ae&(se^he))+pe[14]+3275163606&4294967295,Ce=se+(Te<<9&4294967295|Te>>>23),Te=Ae+(se^he&(Ce^se))+pe[3]+4107603335&4294967295,Ae=Ce+(Te<<14&4294967295|Te>>>18),Te=he+(Ce^se&(Ae^Ce))+pe[8]+1163531501&4294967295,he=Ae+(Te<<20&4294967295|Te>>>12),Te=se+(Ae^Ce&(he^Ae))+pe[13]+2850285829&4294967295,se=he+(Te<<5&4294967295|Te>>>27),Te=Ce+(he^Ae&(se^he))+pe[2]+4243563512&4294967295,Ce=se+(Te<<9&4294967295|Te>>>23),Te=Ae+(se^he&(Ce^se))+pe[7]+1735328473&4294967295,Ae=Ce+(Te<<14&4294967295|Te>>>18),Te=he+(Ce^se&(Ae^Ce))+pe[12]+2368359562&4294967295,he=Ae+(Te<<20&4294967295|Te>>>12),Te=se+(he^Ae^Ce)+pe[5]+4294588738&4294967295,se=he+(Te<<4&4294967295|Te>>>28),Te=Ce+(se^he^Ae)+pe[8]+2272392833&4294967295,Ce=se+(Te<<11&4294967295|Te>>>21),Te=Ae+(Ce^se^he)+pe[11]+1839030562&4294967295,Ae=Ce+(Te<<16&4294967295|Te>>>16),Te=he+(Ae^Ce^se)+pe[14]+4259657740&4294967295,he=Ae+(Te<<23&4294967295|Te>>>9),Te=se+(he^Ae^Ce)+pe[1]+2763975236&4294967295,se=he+(Te<<4&4294967295|Te>>>28),Te=Ce+(se^he^Ae)+pe[4]+1272893353&4294967295,Ce=se+(Te<<11&4294967295|Te>>>21),Te=Ae+(Ce^se^he)+pe[7]+4139469664&4294967295,Ae=Ce+(Te<<16&4294967295|Te>>>16),Te=he+(Ae^Ce^se)+pe[10]+3200236656&4294967295,he=Ae+(Te<<23&4294967295|Te>>>9),Te=se+(he^Ae^Ce)+pe[13]+681279174&4294967295,se=he+(Te<<4&4294967295|Te>>>28),Te=Ce+(se^he^Ae)+pe[0]+3936430074&4294967295,Ce=se+(Te<<11&4294967295|Te>>>21),Te=Ae+(Ce^se^he)+pe[3]+3572445317&4294967295,Ae=Ce+(Te<<16&4294967295|Te>>>16),Te=he+(Ae^Ce^se)+pe[6]+76029189&4294967295,he=Ae+(Te<<23&4294967295|Te>>>9),Te=se+(he^Ae^Ce)+pe[9]+3654602809&4294967295,se=he+(Te<<4&4294967295|Te>>>28),Te=Ce+(se^he^Ae)+pe[12]+3873151461&4294967295,Ce=se+(Te<<11&4294967295|Te>>>21),Te=Ae+(Ce^se^he)+pe[15]+530742520&4294967295,Ae=Ce+(Te<<16&4294967295|Te>>>16),Te=he+(Ae^Ce^se)+pe[2]+3299628645&4294967295,he=Ae+(Te<<23&4294967295|Te>>>9),Te=se+(Ae^(he|~Ce))+pe[0]+4096336452&4294967295,se=he+(Te<<6&4294967295|Te>>>26),Te=Ce+(he^(se|~Ae))+pe[7]+1126891415&4294967295,Ce=se+(Te<<10&4294967295|Te>>>22),Te=Ae+(se^(Ce|~he))+pe[14]+2878612391&4294967295,Ae=Ce+(Te<<15&4294967295|Te>>>17),Te=he+(Ce^(Ae|~se))+pe[5]+4237533241&4294967295,he=Ae+(Te<<21&4294967295|Te>>>11),Te=se+(Ae^(he|~Ce))+pe[12]+1700485571&4294967295,se=he+(Te<<6&4294967295|Te>>>26),Te=Ce+(he^(se|~Ae))+pe[3]+2399980690&4294967295,Ce=se+(Te<<10&4294967295|Te>>>22),Te=Ae+(se^(Ce|~he))+pe[10]+4293915773&4294967295,Ae=Ce+(Te<<15&4294967295|Te>>>17),Te=he+(Ce^(Ae|~se))+pe[1]+2240044497&4294967295,he=Ae+(Te<<21&4294967295|Te>>>11),Te=se+(Ae^(he|~Ce))+pe[8]+1873313359&4294967295,se=he+(Te<<6&4294967295|Te>>>26),Te=Ce+(he^(se|~Ae))+pe[15]+4264355552&4294967295,Ce=se+(Te<<10&4294967295|Te>>>22),Te=Ae+(se^(Ce|~he))+pe[6]+2734768916&4294967295,Ae=Ce+(Te<<15&4294967295|Te>>>17),Te=he+(Ce^(Ae|~se))+pe[13]+1309151649&4294967295,he=Ae+(Te<<21&4294967295|Te>>>11),Te=se+(Ae^(he|~Ce))+pe[4]+4149444226&4294967295,se=he+(Te<<6&4294967295|Te>>>26),Te=Ce+(he^(se|~Ae))+pe[11]+3174756917&4294967295,Ce=se+(Te<<10&4294967295|Te>>>22),Te=Ae+(se^(Ce|~he))+pe[2]+718787259&4294967295,Ae=Ce+(Te<<15&4294967295|Te>>>17),Te=he+(Ce^(Ae|~se))+pe[9]+3951481745&4294967295,de.g[0]=de.g[0]+se&4294967295,de.g[1]=de.g[1]+(Ae+(Te<<21&4294967295|Te>>>11))&4294967295,de.g[2]=de.g[2]+Ae&4294967295,de.g[3]=de.g[3]+Ce&4294967295}r.prototype.v=function(de,se){se===void 0&&(se=de.length);const he=se-this.blockSize,pe=this.C;let Ae=this.h,Ce=0;for(;Ce<se;){if(Ae==0)for(;Ce<=he;)a(this,de,Ce),Ce+=this.blockSize;if(typeof de=="string"){for(;Ce<se;)if(pe[Ae++]=de.charCodeAt(Ce++),Ae==this.blockSize){a(this,pe),Ae=0;break}}else for(;Ce<se;)if(pe[Ae++]=de[Ce++],Ae==this.blockSize){a(this,pe),Ae=0;break}}this.h=Ae,this.o+=se},r.prototype.A=function(){var de=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);de[0]=128;for(var se=1;se<de.length-8;++se)de[se]=0;se=this.o*8;for(var he=de.length-8;he<de.length;++he)de[he]=se&255,se/=256;for(this.v(de),de=Array(16),se=0,he=0;he<4;++he)for(let pe=0;pe<32;pe+=8)de[se++]=this.g[he]>>>pe&255;return de};function i(de,se){var he=p;return Object.prototype.hasOwnProperty.call(he,de)?he[de]:he[de]=se(de)}function l(de,se){this.h=se;const he=[];let pe=!0;for(let Ae=de.length-1;Ae>=0;Ae--){const Ce=de[Ae]|0;pe&&Ce==se||(he[Ae]=Ce,pe=!1)}this.g=he}var p={};function m(de){return-128<=de&&de<128?i(de,function(se){return new l([se|0],se<0?-1:0)}):new l([de|0],de<0?-1:0)}function s(de){if(isNaN(de)||!isFinite(de))return f;if(de<0)return X(s(-de));const se=[];let he=1;for(let pe=0;de>=he;pe++)se[pe]=de/he|0,he*=4294967296;return new l(se,0)}function h(de,se){if(de.length==0)throw Error("number format error: empty string");if(se=se||10,se<2||36<se)throw Error("radix out of range: "+se);if(de.charAt(0)=="-")return X(h(de.substring(1),se));if(de.indexOf("-")>=0)throw Error('number format error: interior "-" character');const he=s(Math.pow(se,8));let pe=f;for(let Ce=0;Ce<de.length;Ce+=8){var Ae=Math.min(8,de.length-Ce);const Te=parseInt(de.substring(Ce,Ce+Ae),se);Ae<8?(Ae=s(Math.pow(se,Ae)),pe=pe.j(Ae).add(s(Te))):(pe=pe.j(he),pe=pe.add(s(Te)))}return pe}var f=m(0),v=m(1),I=m(16777216);t=l.prototype,t.m=function(){if(W(this))return-X(this).m();let de=0,se=1;for(let he=0;he<this.g.length;he++){const pe=this.i(he);de+=(pe>=0?pe:4294967296+pe)*se,se*=4294967296}return de},t.toString=function(de){if(de=de||10,de<2||36<de)throw Error("radix out of range: "+de);if(G(this))return"0";if(W(this))return"-"+X(this).toString(de);const se=s(Math.pow(de,6));var he=this;let pe="";for(;;){const Ae=je(he,se).g;he=ge(he,Ae.j(se));let Ce=((he.g.length>0?he.g[0]:he.h)>>>0).toString(de);if(he=Ae,G(he))return Ce+pe;for(;Ce.length<6;)Ce="0"+Ce;pe=Ce+pe}},t.i=function(de){return de<0?0:de<this.g.length?this.g[de]:this.h};function G(de){if(de.h!=0)return!1;for(let se=0;se<de.g.length;se++)if(de.g[se]!=0)return!1;return!0}function W(de){return de.h==-1}t.l=function(de){return de=ge(this,de),W(de)?-1:G(de)?0:1};function X(de){const se=de.g.length,he=[];for(let pe=0;pe<se;pe++)he[pe]=~de.g[pe];return new l(he,~de.h).add(v)}t.abs=function(){return W(this)?X(this):this},t.add=function(de){const se=Math.max(this.g.length,de.g.length),he=[];let pe=0;for(let Ae=0;Ae<=se;Ae++){let Ce=pe+(this.i(Ae)&65535)+(de.i(Ae)&65535),Te=(Ce>>>16)+(this.i(Ae)>>>16)+(de.i(Ae)>>>16);pe=Te>>>16,Ce&=65535,Te&=65535,he[Ae]=Te<<16|Ce}return new l(he,he[he.length-1]&-2147483648?-1:0)};function ge(de,se){return de.add(X(se))}t.j=function(de){if(G(this)||G(de))return f;if(W(this))return W(de)?X(this).j(X(de)):X(X(this).j(de));if(W(de))return X(this.j(X(de)));if(this.l(I)<0&&de.l(I)<0)return s(this.m()*de.m());const se=this.g.length+de.g.length,he=[];for(var pe=0;pe<2*se;pe++)he[pe]=0;for(pe=0;pe<this.g.length;pe++)for(let Ae=0;Ae<de.g.length;Ae++){const Ce=this.i(pe)>>>16,Te=this.i(pe)&65535,Hr=de.i(Ae)>>>16,or=de.i(Ae)&65535;he[2*pe+2*Ae]+=Te*or,ie(he,2*pe+2*Ae),he[2*pe+2*Ae+1]+=Ce*or,ie(he,2*pe+2*Ae+1),he[2*pe+2*Ae+1]+=Te*Hr,ie(he,2*pe+2*Ae+1),he[2*pe+2*Ae+2]+=Ce*Hr,ie(he,2*pe+2*Ae+2)}for(de=0;de<se;de++)he[de]=he[2*de+1]<<16|he[2*de];for(de=se;de<2*se;de++)he[de]=0;return new l(he,0)};function ie(de,se){for(;(de[se]&65535)!=de[se];)de[se+1]+=de[se]>>>16,de[se]&=65535,se++}function Pe(de,se){this.g=de,this.h=se}function je(de,se){if(G(se))throw Error("division by zero");if(G(de))return new Pe(f,f);if(W(de))return se=je(X(de),se),new Pe(X(se.g),X(se.h));if(W(se))return se=je(de,X(se)),new Pe(X(se.g),se.h);if(de.g.length>30){if(W(de)||W(se))throw Error("slowDivide_ only works with positive integers.");for(var he=v,pe=se;pe.l(de)<=0;)he=rt(he),pe=rt(pe);var Ae=qt(he,1),Ce=qt(pe,1);for(pe=qt(pe,2),he=qt(he,2);!G(pe);){var Te=Ce.add(pe);Te.l(de)<=0&&(Ae=Ae.add(he),Ce=Te),pe=qt(pe,1),he=qt(he,1)}return se=ge(de,Ae.j(se)),new Pe(Ae,se)}for(Ae=f;de.l(se)>=0;){for(he=Math.max(1,Math.floor(de.m()/se.m())),pe=Math.ceil(Math.log(he)/Math.LN2),pe=pe<=48?1:Math.pow(2,pe-48),Ce=s(he),Te=Ce.j(se);W(Te)||Te.l(de)>0;)he-=pe,Ce=s(he),Te=Ce.j(se);G(Ce)&&(Ce=v),Ae=Ae.add(Ce),de=ge(de,Te)}return new Pe(Ae,de)}t.B=function(de){return je(this,de).h},t.and=function(de){const se=Math.max(this.g.length,de.g.length),he=[];for(let pe=0;pe<se;pe++)he[pe]=this.i(pe)&de.i(pe);return new l(he,this.h&de.h)},t.or=function(de){const se=Math.max(this.g.length,de.g.length),he=[];for(let pe=0;pe<se;pe++)he[pe]=this.i(pe)|de.i(pe);return new l(he,this.h|de.h)},t.xor=function(de){const se=Math.max(this.g.length,de.g.length),he=[];for(let pe=0;pe<se;pe++)he[pe]=this.i(pe)^de.i(pe);return new l(he,this.h^de.h)};function rt(de){const se=de.g.length+1,he=[];for(let pe=0;pe<se;pe++)he[pe]=de.i(pe)<<1|de.i(pe-1)>>>31;return new l(he,de.h)}function qt(de,se){const he=se>>5;se%=32;const pe=de.g.length-he,Ae=[];for(let Ce=0;Ce<pe;Ce++)Ae[Ce]=se>0?de.i(Ce+he)>>>se|de.i(Ce+he+1)<<32-se:de.i(Ce+he);return new l(Ae,de.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Md5=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=s,l.fromString=h,Integer=l}).apply(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{});var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var XhrIo,WebChannel,EventType,ErrorCode$1,Stat,Event,getStatEventTarget,createWebChannelTransport;(function(){var t,e=Object.defineProperty;function n(b){b=[typeof globalThis=="object"&&globalThis,b,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var S=0;S<b.length;++S){var z=b[S];if(z&&z.Math==Math)return z}throw Error("Cannot find global object")}var r=n(this);function a(b,S){if(S)e:{var z=r;b=b.split(".");for(var te=0;te<b.length-1;te++){var Fe=b[te];if(!(Fe in z))break e;z=z[Fe]}b=b[b.length-1],te=z[b],S=S(te),S!=te&&S!=null&&e(z,b,{configurable:!0,writable:!0,value:S})}}a("Symbol.dispose",function(b){return b||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(b){return b||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(b){return b||function(S){var z=[],te;for(te in S)Object.prototype.hasOwnProperty.call(S,te)&&z.push([te,S[te]]);return z}});var i=i||{},l=this||self;function p(b){var S=typeof b;return S=="object"&&b!=null||S=="function"}function m(b,S,z){return b.call.apply(b.bind,arguments)}function s(b,S,z){return s=m,s.apply(null,arguments)}function h(b,S){var z=Array.prototype.slice.call(arguments,1);return function(){var te=z.slice();return te.push.apply(te,arguments),b.apply(this,te)}}function f(b,S){function z(){}z.prototype=S.prototype,b.Z=S.prototype,b.prototype=new z,b.prototype.constructor=b,b.Ob=function(te,Fe,Ye){for(var On=Array(arguments.length-2),Jr=2;Jr<arguments.length;Jr++)On[Jr-2]=arguments[Jr];return S.prototype[Fe].apply(te,On)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?b=>b&&AsyncContext.Snapshot.wrap(b):b=>b;function I(b){const S=b.length;if(S>0){const z=Array(S);for(let te=0;te<S;te++)z[te]=b[te];return z}return[]}function G(b,S){for(let te=1;te<arguments.length;te++){const Fe=arguments[te];var z=typeof Fe;if(z=z!="object"?z:Fe?Array.isArray(Fe)?"array":z:"null",z=="array"||z=="object"&&typeof Fe.length=="number"){z=b.length||0;const Ye=Fe.length||0;b.length=z+Ye;for(let On=0;On<Ye;On++)b[z+On]=Fe[On]}else b.push(Fe)}}class W{constructor(S,z){this.i=S,this.j=z,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function X(b){l.setTimeout(()=>{throw b},0)}function ge(){var b=de;let S=null;return b.g&&(S=b.g,b.g=b.g.next,b.g||(b.h=null),S.next=null),S}class ie{constructor(){this.h=this.g=null}add(S,z){const te=Pe.get();te.set(S,z),this.h?this.h.next=te:this.g=te,this.h=te}}var Pe=new W(()=>new je,b=>b.reset());class je{constructor(){this.next=this.g=this.h=null}set(S,z){this.h=S,this.g=z,this.next=null}reset(){this.next=this.g=this.h=null}}let rt,qt=!1,de=new ie,se=()=>{const b=Promise.resolve(void 0);rt=()=>{b.then(he)}};function he(){for(var b;b=ge();){try{b.h.call(b.g)}catch(z){X(z)}var S=Pe;S.j(b),S.h<100&&(S.h++,b.next=S.g,S.g=b)}qt=!1}function pe(){this.u=this.u,this.C=this.C}pe.prototype.u=!1,pe.prototype.dispose=function(){this.u||(this.u=!0,this.N())},pe.prototype[Symbol.dispose]=function(){this.dispose()},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ae(b,S){this.type=b,this.g=this.target=S,this.defaultPrevented=!1}Ae.prototype.h=function(){this.defaultPrevented=!0};var Ce=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var b=!1,S=Object.defineProperty({},"passive",{get:function(){b=!0}});try{const z=()=>{};l.addEventListener("test",z,S),l.removeEventListener("test",z,S)}catch{}return b})();function Te(b){return/^[\s\xa0]*$/.test(b)}function Hr(b,S){Ae.call(this,b?b.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,b&&this.init(b,S)}f(Hr,Ae),Hr.prototype.init=function(b,S){const z=this.type=b.type,te=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:null;this.target=b.target||b.srcElement,this.g=S,S=b.relatedTarget,S||(z=="mouseover"?S=b.fromElement:z=="mouseout"&&(S=b.toElement)),this.relatedTarget=S,te?(this.clientX=te.clientX!==void 0?te.clientX:te.pageX,this.clientY=te.clientY!==void 0?te.clientY:te.pageY,this.screenX=te.screenX||0,this.screenY=te.screenY||0):(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0),this.button=b.button,this.key=b.key||"",this.ctrlKey=b.ctrlKey,this.altKey=b.altKey,this.shiftKey=b.shiftKey,this.metaKey=b.metaKey,this.pointerId=b.pointerId||0,this.pointerType=b.pointerType,this.state=b.state,this.i=b,b.defaultPrevented&&Hr.Z.h.call(this)},Hr.prototype.h=function(){Hr.Z.h.call(this);const b=this.i;b.preventDefault?b.preventDefault():b.returnValue=!1};var or="closure_listenable_"+(Math.random()*1e6|0),ze=0;function An(b,S,z,te,Fe){this.listener=b,this.proxy=null,this.src=S,this.type=z,this.capture=!!te,this.ha=Fe,this.key=++ze,this.da=this.fa=!1}function jt(b){b.da=!0,b.listener=null,b.proxy=null,b.src=null,b.ha=null}function Xr(b,S,z){for(const te in b)S.call(z,b[te],te,b)}function wn(b,S){for(const z in b)S.call(void 0,b[z],z,b)}function Se(b){const S={};for(const z in b)S[z]=b[z];return S}const et="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vn(b,S){let z,te;for(let Fe=1;Fe<arguments.length;Fe++){te=arguments[Fe];for(z in te)b[z]=te[z];for(let Ye=0;Ye<et.length;Ye++)z=et[Ye],Object.prototype.hasOwnProperty.call(te,z)&&(b[z]=te[z])}}function Tn(b){this.src=b,this.g={},this.h=0}Tn.prototype.add=function(b,S,z,te,Fe){const Ye=b.toString();b=this.g[Ye],b||(b=this.g[Ye]=[],this.h++);const On=Sn(b,S,te,Fe);return On>-1?(S=b[On],z||(S.fa=!1)):(S=new An(S,this.src,Ye,!!te,Fe),S.fa=z,b.push(S)),S};function xn(b,S){const z=S.type;if(z in b.g){var te=b.g[z],Fe=Array.prototype.indexOf.call(te,S,void 0),Ye;(Ye=Fe>=0)&&Array.prototype.splice.call(te,Fe,1),Ye&&(jt(S),b.g[z].length==0&&(delete b.g[z],b.h--))}}function Sn(b,S,z,te){for(let Fe=0;Fe<b.length;++Fe){const Ye=b[Fe];if(!Ye.da&&Ye.listener==S&&Ye.capture==!!z&&Ye.ha==te)return Fe}return-1}var Lr="closure_lm_"+(Math.random()*1e6|0),ti={};function ei(b,S,z,te,Fe){if(Array.isArray(S)){for(let Ye=0;Ye<S.length;Ye++)ei(b,S[Ye],z,te,Fe);return null}return z=Wd(z),b&&b[or]?b.J(S,z,p(te)?!!te.capture:!1,Fe):$o(b,S,z,!1,te,Fe)}function $o(b,S,z,te,Fe,Ye){if(!S)throw Error("Invalid event type");const On=p(Fe)?!!Fe.capture:!!Fe;let Jr=Ca(b);if(Jr||(b[Lr]=Jr=new Tn(b)),z=Jr.add(S,z,te,On,Ye),z.proxy)return z;if(te=Ea(),z.proxy=te,te.src=b,te.listener=z,b.addEventListener)Ce||(Fe=On),Fe===void 0&&(Fe=!1),b.addEventListener(S.toString(),te,Fe);else if(b.attachEvent)b.attachEvent(tu(S.toString()),te);else if(b.addListener&&b.removeListener)b.addListener(te);else throw Error("addEventListener and attachEvent are unavailable.");return z}function Ea(){function b(z){return S.call(b.src,b.listener,z)}const S=xd;return b}function $a(b,S,z,te,Fe){if(Array.isArray(S))for(var Ye=0;Ye<S.length;Ye++)$a(b,S[Ye],z,te,Fe);else te=p(te)?!!te.capture:!!te,z=Wd(z),b&&b[or]?(b=b.i,Ye=String(S).toString(),Ye in b.g&&(S=b.g[Ye],z=Sn(S,z,te,Fe),z>-1&&(jt(S[z]),Array.prototype.splice.call(S,z,1),S.length==0&&(delete b.g[Ye],b.h--)))):b&&(b=Ca(b))&&(S=b.g[S.toString()],b=-1,S&&(b=Sn(S,z,te,Fe)),(z=b>-1?S[b]:null)&&bu(z))}function bu(b){if(typeof b!="number"&&b&&!b.da){var S=b.src;if(S&&S[or])xn(S.i,b);else{var z=b.type,te=b.proxy;S.removeEventListener?S.removeEventListener(z,te,b.capture):S.detachEvent?S.detachEvent(tu(z),te):S.addListener&&S.removeListener&&S.removeListener(te),(z=Ca(S))?(xn(z,b),z.h==0&&(z.src=null,S[Lr]=null)):jt(b)}}}function tu(b){return b in ti?ti[b]:ti[b]="on"+b}function xd(b,S){if(b.da)b=!0;else{S=new Hr(S,this);const z=b.listener,te=b.ha||b.src;b.fa&&bu(b),b=z.call(te,S)}return b}function Ca(b){return b=b[Lr],b instanceof Tn?b:null}var lu="__closure_events_fn_"+(Math.random()*1e9>>>0);function Wd(b){return typeof b=="function"?b:(b[lu]||(b[lu]=function(S){return b.handleEvent(S)}),b[lu])}function na(){pe.call(this),this.i=new Tn(this),this.M=this,this.G=null}f(na,pe),na.prototype[or]=!0,na.prototype.removeEventListener=function(b,S,z,te){$a(this,b,S,z,te)};function ra(b,S){var z,te=b.G;if(te)for(z=[];te;te=te.G)z.push(te);if(b=b.M,te=S.type||S,typeof S=="string")S=new Ae(S,b);else if(S instanceof Ae)S.target=S.target||b;else{var Fe=S;S=new Ae(te,b),vn(S,Fe)}Fe=!0;let Ye,On;if(z)for(On=z.length-1;On>=0;On--)Ye=S.g=z[On],Fe=Da(Ye,te,!0,S)&&Fe;if(Ye=S.g=b,Fe=Da(Ye,te,!0,S)&&Fe,Fe=Da(Ye,te,!1,S)&&Fe,z)for(On=0;On<z.length;On++)Ye=S.g=z[On],Fe=Da(Ye,te,!1,S)&&Fe}na.prototype.N=function(){if(na.Z.N.call(this),this.i){var b=this.i;for(const S in b.g){const z=b.g[S];for(let te=0;te<z.length;te++)jt(z[te]);delete b.g[S],b.h--}}this.G=null},na.prototype.J=function(b,S,z,te){return this.i.add(String(b),S,!1,z,te)},na.prototype.K=function(b,S,z,te){return this.i.add(String(b),S,!0,z,te)};function Da(b,S,z,te){if(S=b.i.g[String(S)],!S)return!0;S=S.concat();let Fe=!0;for(let Ye=0;Ye<S.length;++Ye){const On=S[Ye];if(On&&!On.da&&On.capture==z){const Jr=On.listener,Go=On.ha||On.src;On.fa&&xn(b.i,On),Fe=Jr.call(Go,te)!==!1&&Fe}}return Fe&&!te.defaultPrevented}function Jg(b,S){if(typeof b!="function")if(b&&typeof b.handleEvent=="function")b=s(b.handleEvent,b);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:l.setTimeout(b,S||0)}function Nd(b){b.g=Jg(()=>{b.g=null,b.i&&(b.i=!1,Nd(b))},b.l);const S=b.h;b.h=null,b.m.apply(null,S)}class Na extends pe{constructor(S,z){super(),this.m=S,this.l=z,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:Nd(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ap(b){pe.call(this),this.h=b,this.g={}}f(Ap,pe);var uu=[];function e_(b){Xr(b.g,function(S,z){this.g.hasOwnProperty(z)&&bu(S)},b),b.g={}}Ap.prototype.N=function(){Ap.Z.N.call(this),e_(this)},Ap.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ui=l.JSON.stringify,P_=l.JSON.parse,Kr=class{stringify(b){return l.JSON.stringify(b,void 0)}parse(b){return l.JSON.parse(b,void 0)}};function t_(){}function n_(){}var hu={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function rr(){Ae.call(this,"d")}f(rr,Ae);function Ma(){Ae.call(this,"c")}f(Ma,Ae);var Us={},Tu=null;function re(){return Tu=Tu||new na}Us.Ia="serverreachability";function Ne(b){Ae.call(this,Us.Ia,b)}f(Ne,Ae);function Ve(b){const S=re();ra(S,new Ne(S))}Us.STAT_EVENT="statevent";function wt(b,S){Ae.call(this,Us.STAT_EVENT,b),this.stat=S}f(wt,Ae);function In(b){const S=re();ra(S,new wt(S,b))}Us.Ja="timingevent";function ir(b,S){Ae.call(this,Us.Ja,b),this.size=S}f(ir,Ae);function qr(b,S){if(typeof b!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){b()},S)}function zo(){this.g=!0}zo.prototype.ua=function(){this.g=!1};function fu(b,S,z,te,Fe,Ye){b.info(function(){if(b.g)if(Ye){var On="",Jr=Ye.split("&");for(let Xo=0;Xo<Jr.length;Xo++){var Go=Jr[Xo].split("=");if(Go.length>1){const ba=Go[0];Go=Go[1];const Ig=ba.split("_");On=Ig.length>=2&&Ig[1]=="type"?On+(ba+"="+Go+"&"):On+(ba+"=redacted&")}}}else On=null;else On=Ye;return"XMLHTTP REQ ("+te+") [attempt "+Fe+"]: "+S+`
`+z+`
`+On})}function xa(b,S,z,te,Fe,Ye,On){b.info(function(){return"XMLHTTP RESP ("+te+") [ attempt "+Fe+"]: "+S+`
`+z+`
`+Ye+" "+On})}function Hs(b,S,z,te){b.info(function(){return"XMLHTTP TEXT ("+S+"): "+yg(b,z)+(te?" "+te:"")})}function ah(b,S){b.info(function(){return"TIMEOUT: "+S})}zo.prototype.info=function(){};function yg(b,S){if(!b.g)return S;if(!S)return null;try{const Ye=JSON.parse(S);if(Ye){for(b=0;b<Ye.length;b++)if(Array.isArray(Ye[b])){var z=Ye[b];if(!(z.length<2)){var te=z[1];if(Array.isArray(te)&&!(te.length<1)){var Fe=te[0];if(Fe!="noop"&&Fe!="stop"&&Fe!="close")for(let On=1;On<te.length;On++)te[On]=""}}}}return ui(Ye)}catch{return S}}var st={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ci={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Qo;function Ws(){}f(Ws,t_),Ws.prototype.g=function(){return new XMLHttpRequest},Qo=new Ws;function Wn(b){return encodeURIComponent(String(b))}function O_(b){var S=1;b=b.split(":");const z=[];for(;S>0&&b.length;)z.push(b.shift()),S--;return b.length&&z.push(b.join(":")),z}function fh(b,S,z,te){this.j=b,this.i=S,this.l=z,this.S=te||1,this.V=new Ap(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ih}function Ih(){this.i=null,this.g="",this.h=!1}var wa={},Ia={};function Vd(b,S,z){b.M=1,b.A=Hn(ya(S)),b.u=z,b.R=!0,gd(b,null)}function gd(b,S){b.F=Date.now(),Sp(b),b.B=ya(b.A);var z=b.B,te=b.S;Array.isArray(te)||(te=[String(te)]),Bg(z.i,"t",te),b.C=0,z=b.j.L,b.h=new Ih,b.g=Ky(b.j,z?S:null,!b.u),b.P>0&&(b.O=new Na(s(b.Y,b,b.g),b.P)),S=b.V,z=b.g,te=b.ba;var Fe="readystatechange";Array.isArray(Fe)||(Fe&&(uu[0]=Fe.toString()),Fe=uu);for(let Ye=0;Ye<Fe.length;Ye++){const On=ei(z,Fe[Ye],te||S.handleEvent,!1,S.h||S);if(!On)break;S.g[On.key]=On}S=b.J?Se(b.J):{},b.u?(b.v||(b.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",b.g.ea(b.B,b.v,b.u,S)):(b.v="GET",b.g.ea(b.B,b.v,null,S)),Ve(),fu(b.i,b.v,b.B,b.l,b.S,b.u)}fh.prototype.ba=function(b){b=b.target;const S=this.O;S&&zg(b)==3?S.j():this.Y(b)},fh.prototype.Y=function(b){try{if(b==this.g)e:{const Jr=zg(this.g),Go=this.g.ya(),Xo=this.g.ca();if(!(Jr<3)&&(Jr!=3||this.g&&(this.h.h||this.g.la()||nu(this.g)))){this.K||Jr!=4||Go==7||(Go==8||Xo<=0?Ve(3):Ve(2)),Md(this);var S=this.g.ca();this.X=S;var z=m_(this);if(this.o=S==200,xa(this.i,this.v,this.B,this.l,this.S,Jr,S),this.o){if(this.U&&!this.L){t:{if(this.g){var te,Fe=this.g;if((te=Fe.g?Fe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Te(te)){var Ye=te;break t}}Ye=null}if(b=Ye)Hs(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ud(this,b);else{this.o=!1,this.m=3,In(12),ka(this),yd(this);break e}}if(this.R){b=!0;let ba;for(;!this.K&&this.C<z.length;)if(ba=Mg(this,z),ba==Ia){Jr==4&&(this.m=4,In(14),b=!1),Hs(this.i,this.l,null,"[Incomplete Response]");break}else if(ba==wa){this.m=4,In(15),Hs(this.i,this.l,z,"[Invalid Chunk]"),b=!1;break}else Hs(this.i,this.l,ba,null),Ud(this,ba);if(C_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jr!=4||z.length!=0||this.h.h||(this.m=1,In(16),b=!1),this.o=this.o&&b,!b)Hs(this.i,this.l,z,"[Invalid Chunked Response]"),ka(this),yd(this);else if(z.length>0&&!this.W){this.W=!0;var On=this.j;On.g==this&&On.aa&&!On.P&&(On.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),Gy(On),On.P=!0,In(11))}}else Hs(this.i,this.l,z,null),Ud(this,z);Jr==4&&ka(this),this.o&&!this.K&&(Jr==4?eg(this.j,this):(this.o=!1,Sp(this)))}else jg(this.g),S==400&&z.indexOf("Unknown SID")>0?(this.m=3,In(12)):(this.m=0,In(13)),ka(this),yd(this)}}}catch{}finally{}};function m_(b){if(!C_(b))return b.g.la();const S=nu(b.g);if(S==="")return"";let z="";const te=S.length,Fe=zg(b.g)==4;if(!b.h.i){if(typeof TextDecoder>"u")return ka(b),yd(b),"";b.h.i=new l.TextDecoder}for(let Ye=0;Ye<te;Ye++)b.h.h=!0,z+=b.h.i.decode(S[Ye],{stream:!(Fe&&Ye==te-1)});return S.length=0,b.h.g+=z,b.C=0,b.h.g}function C_(b){return b.g?b.v=="GET"&&b.M!=2&&b.j.Aa:!1}function Mg(b,S){var z=b.C,te=S.indexOf(`
`,z);return te==-1?Ia:(z=Number(S.substring(z,te)),isNaN(z)?wa:(te+=1,te+z>S.length?Ia:(S=S.slice(te,te+z),b.C=te+z,S)))}fh.prototype.cancel=function(){this.K=!0,ka(this)};function Sp(b){b.T=Date.now()+b.H,g_(b,b.H)}function g_(b,S){if(b.D!=null)throw Error("WatchDog timer not null");b.D=qr(s(b.aa,b),S)}function Md(b){b.D&&(l.clearTimeout(b.D),b.D=null)}fh.prototype.aa=function(){this.D=null;const b=Date.now();b-this.T>=0?(ah(this.i,this.B),this.M!=2&&(Ve(),In(17)),ka(this),this.m=2,yd(this)):g_(this,this.T-b)};function yd(b){b.j.I==0||b.K||eg(b.j,b)}function ka(b){Md(b);var S=b.O;S&&typeof S.dispose=="function"&&S.dispose(),b.O=null,e_(b.V),b.g&&(S=b.g,b.g=null,S.abort(),S.dispose())}function Ud(b,S){try{var z=b.j;if(z.I!=0&&(z.g==b||bd(z.h,b))){if(!b.L&&bd(z.h,b)&&z.I==3){try{var te=z.Ba.g.parse(S)}catch{te=null}if(Array.isArray(te)&&te.length==3){var Fe=te;if(Fe[0]==0){e:if(!z.v){if(z.g)if(z.g.F+3e3<b.F)dy(z),L_(z);else break e;K_(z),In(18)}}else z.xa=Fe[1],0<z.xa-z.K&&Fe[2]<37500&&z.F&&z.A==0&&!z.C&&(z.C=qr(s(z.Va,z),6e3));Fp(z.h)<=1&&z.ta&&(z.ta=void 0)}else Hg(z,11)}else if((b.L||z.g==b)&&dy(z),!Te(S))for(Fe=z.Ba.g.parse(S),S=0;S<Fe.length;S++){let Xo=Fe[S];const ba=Xo[0];if(!(ba<=z.K))if(z.K=ba,Xo=Xo[1],z.I==2)if(Xo[0]=="c"){z.M=Xo[1],z.ba=Xo[2];const Ig=Xo[3];Ig!=null&&(z.ka=Ig,z.j.info("VER="+z.ka));const Sg=Xo[4];Sg!=null&&(z.za=Sg,z.j.info("SVER="+z.za));const ag=Xo[5];ag!=null&&typeof ag=="number"&&ag>0&&(te=1.5*ag,z.O=te,z.j.info("backChannelRequestTimeoutMs_="+te)),te=z;const Gg=b.g;if(Gg){const Z_=Gg.g?Gg.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z_){var Ye=te.h;Ye.g||Z_.indexOf("spdy")==-1&&Z_.indexOf("quic")==-1&&Z_.indexOf("h2")==-1||(Ye.j=Ye.l,Ye.g=new Set,Ye.h&&(Eg(Ye,Ye.h),Ye.h=null))}if(te.G){const Y_=Gg.g?Gg.g.getResponseHeader("X-HTTP-Session-Id"):null;Y_&&(te.wa=Y_,tr(te.J,te.G,Y_))}}z.I=3,z.l&&z.l.ra(),z.aa&&(z.T=Date.now()-b.F,z.j.info("Handshake RTT: "+z.T+"ms")),te=z;var On=b;if(te.na=Wy(te,te.L?te.ba:null,te.W),On.L){y_(te.h,On);var Jr=On,Go=te.O;Go&&(Jr.H=Go),Jr.D&&(Md(Jr),Sp(Jr)),te.g=On}else qy(te);z.i.length>0&&$d(z)}else Xo[0]!="stop"&&Xo[0]!="close"||Hg(z,7);else z.I==3&&(Xo[0]=="stop"||Xo[0]=="close"?Xo[0]=="stop"?Hg(z,7):li(z):Xo[0]!="noop"&&z.l&&z.l.qa(Xo),z.A=0)}}Ve(4)}catch{}}var Sa=class{constructor(b,S){this.g=b,this.map=S}};function __(b){this.l=b||10,l.PerformanceNavigationTiming?(b=l.performance.getEntriesByType("navigation"),b=b.length>0&&(b[0].nextHopProtocol=="hq"||b[0].nextHopProtocol=="h2")):b=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=b?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function D_(b){return b.h?!0:b.g?b.g.size>=b.j:!1}function Fp(b){return b.h?1:b.g?b.g.size:0}function bd(b,S){return b.h?b.h==S:b.g?b.g.has(S):!1}function Eg(b,S){b.g?b.g.add(S):b.h=S}function y_(b,S){b.h&&b.h==S?b.h=null:b.g&&b.g.has(S)&&b.g.delete(S)}__.prototype.cancel=function(){if(this.i=N_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const b of this.g.values())b.cancel();this.g.clear()}};function N_(b){if(b.h!=null)return b.i.concat(b.h.G);if(b.g!=null&&b.g.size!==0){let S=b.i;for(const z of b.g.values())S=S.concat(z.G);return S}return I(b.i)}var kg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ni(b,S){if(b){b=b.split("&");for(let z=0;z<b.length;z++){const te=b[z].indexOf("=");let Fe,Ye=null;te>=0?(Fe=b[z].substring(0,te),Ye=b[z].substring(te+1)):Fe=b[z],S(Fe,Ye?decodeURIComponent(Ye.replace(/\+/g," ")):"")}}}function ai(b){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;b instanceof ai?(this.l=b.l,va(this,b.j),this.o=b.o,this.g=b.g,wu(this,b.u),this.h=b.h,v_(this,D(b.i)),this.m=b.m):b&&(S=String(b).match(kg))?(this.l=!1,va(this,S[1]||"",!0),this.o=du(S[2]||""),this.g=du(S[3]||"",!0),wu(this,S[4]),this.h=du(S[5]||"",!0),v_(this,S[6]||"",!0),this.m=du(S[7]||"")):(this.l=!1,this.i=new pu(null,this.l))}ai.prototype.toString=function(){const b=[];var S=this.j;S&&b.push($p(S,r_,!0),":");var z=this.g;return(z||S=="file")&&(b.push("//"),(S=this.o)&&b.push($p(S,r_,!0),"@"),b.push(Wn(z).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),z=this.u,z!=null&&b.push(":",String(z))),(z=this.h)&&(this.g&&z.charAt(0)!="/"&&b.push("/"),b.push($p(z,z.charAt(0)=="/"?Bd:Fg,!0))),(z=this.i.toString())&&b.push("?",z),(z=this.m)&&b.push("#",$p(z,rm)),b.join("")},ai.prototype.resolve=function(b){const S=ya(this);let z=!!b.j;z?va(S,b.j):z=!!b.o,z?S.o=b.o:z=!!b.g,z?S.g=b.g:z=b.u!=null;var te=b.h;if(z)wu(S,b.u);else if(z=!!b.h){if(te.charAt(0)!="/")if(this.g&&!this.h)te="/"+te;else{var Fe=S.h.lastIndexOf("/");Fe!=-1&&(te=S.h.slice(0,Fe+1)+te)}if(Fe=te,Fe==".."||Fe==".")te="";else if(Fe.indexOf("./")!=-1||Fe.indexOf("/.")!=-1){te=Fe.lastIndexOf("/",0)==0,Fe=Fe.split("/");const Ye=[];for(let On=0;On<Fe.length;){const Jr=Fe[On++];Jr=="."?te&&On==Fe.length&&Ye.push(""):Jr==".."?((Ye.length>1||Ye.length==1&&Ye[0]!="")&&Ye.pop(),te&&On==Fe.length&&Ye.push("")):(Ye.push(Jr),te=!0)}te=Ye.join("/")}else te=Fe}return z?S.h=te:z=b.i.toString()!=="",z?v_(S,D(b.i)):z=!!b.m,z&&(S.m=b.m),S};function ya(b){return new ai(b)}function va(b,S,z){b.j=z?du(S,!0):S,b.j&&(b.j=b.j.replace(/:$/,""))}function wu(b,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);b.u=S}else b.u=null}function v_(b,S,z){S instanceof pu?(b.i=S,Re(b.i,b.l)):(z||(S=$p(S,Rs)),b.i=new pu(S,b.l))}function tr(b,S,z){b.i.set(S,z)}function Hn(b){return tr(b,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),b}function du(b,S){return b?S?decodeURI(b.replace(/%25/g,"%2525")):decodeURIComponent(b):""}function $p(b,S,z){return typeof b=="string"?(b=encodeURI(b).replace(S,qs),z&&(b=b.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b):null}function qs(b){return b=b.charCodeAt(0),"%"+(b>>4&15).toString(16)+(b&15).toString(16)}var r_=/[#\/\?@]/g,Fg=/[#\?:]/g,Bd=/[#\?]/g,Rs=/[#\?@]/g,rm=/#/g;function pu(b,S){this.h=this.g=null,this.i=b||null,this.j=!!S}function Pa(b){b.g||(b.g=new Map,b.h=0,b.i&&ni(b.i,function(S,z){b.add(decodeURIComponent(S.replace(/\+/g," ")),z)}))}t=pu.prototype,t.add=function(b,S){Pa(this),this.i=null,b=ue(this,b);let z=this.g.get(b);return z||this.g.set(b,z=[]),z.push(S),this.h+=1,this};function i_(b,S){Pa(b),S=ue(b,S),b.g.has(S)&&(b.i=null,b.h-=b.g.get(S).length,b.g.delete(S))}function Ug(b,S){return Pa(b),S=ue(b,S),b.g.has(S)}t.forEach=function(b,S){Pa(this),this.g.forEach(function(z,te){z.forEach(function(Fe){b.call(S,Fe,te,this)},this)},this)};function Ag(b,S){Pa(b);let z=[];if(typeof S=="string")Ug(b,S)&&(z=z.concat(b.g.get(ue(b,S))));else for(b=Array.from(b.g.values()),S=0;S<b.length;S++)z=z.concat(b[S]);return z}t.set=function(b,S){return Pa(this),this.i=null,b=ue(this,b),Ug(this,b)&&(this.h-=this.g.get(b).length),this.g.set(b,[S]),this.h+=1,this},t.get=function(b,S){return b?(b=Ag(this,b),b.length>0?String(b[0]):S):S};function Bg(b,S,z){i_(b,S),z.length>0&&(b.i=null,b.g.set(ue(b,S),I(z)),b.h+=z.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const b=[],S=Array.from(this.g.keys());for(let te=0;te<S.length;te++){var z=S[te];const Fe=Wn(z);z=Ag(this,z);for(let Ye=0;Ye<z.length;Ye++){let On=Fe;z[Ye]!==""&&(On+="="+Wn(z[Ye])),b.push(On)}}return this.i=b.join("&")};function D(b){const S=new pu;return S.i=b.i,b.g&&(S.g=new Map(b.g),S.h=b.h),S}function ue(b,S){return S=String(S),b.j&&(S=S.toLowerCase()),S}function Re(b,S){S&&!b.j&&(Pa(b),b.i=null,b.g.forEach(function(z,te){const Fe=te.toLowerCase();te!=Fe&&(i_(this,te),Bg(this,Fe,z))},b)),b.j=S}function Be(b,S){const z=new zo;if(l.Image){const te=new Image;te.onload=h($t,z,"TestLoadImage: loaded",!0,S,te),te.onerror=h($t,z,"TestLoadImage: error",!1,S,te),te.onabort=h($t,z,"TestLoadImage: abort",!1,S,te),te.ontimeout=h($t,z,"TestLoadImage: timeout",!1,S,te),l.setTimeout(function(){te.ontimeout&&te.ontimeout()},1e4),te.src=b}else S(!1)}function Gt(b,S){const z=new zo,te=new AbortController,Fe=setTimeout(()=>{te.abort(),$t(z,"TestPingServer: timeout",!1,S)},1e4);fetch(b,{signal:te.signal}).then(Ye=>{clearTimeout(Fe),Ye.ok?$t(z,"TestPingServer: ok",!0,S):$t(z,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(Fe),$t(z,"TestPingServer: error",!1,S)})}function $t(b,S,z,te,Fe){try{Fe&&(Fe.onload=null,Fe.onerror=null,Fe.onabort=null,Fe.ontimeout=null),te(z)}catch{}}function nr(){this.g=new Kr}function qn(b){this.i=b.Sb||null,this.h=b.ab||!1}f(qn,t_),qn.prototype.g=function(){return new Ys(this.i,this.h)};function Ys(b,S){na.call(this),this.H=b,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Ys,na),t=Ys.prototype,t.open=function(b,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=b,this.D=S,this.readyState=1,Au(this)},t.send=function(b){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};b&&(S.body=b),(this.H||l).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Aa(this)),this.readyState=0},t.Pa=function(b){if(this.g&&(this.l=b,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=b.headers,this.readyState=2,Au(this)),this.g&&(this.readyState=3,Au(this),this.g)))if(this.responseType==="arraybuffer")b.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in b){if(this.j=b.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Yr(this)}else b.text().then(this.Oa.bind(this),this.ga.bind(this))};function Yr(b){b.j.read().then(b.Ma.bind(b)).catch(b.ga.bind(b))}t.Ma=function(b){if(this.g){if(this.o&&b.value)this.response.push(b.value);else if(!this.o){var S=b.value?b.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!b.done}))&&(this.response=this.responseText+=S)}b.done?Aa(this):Au(this),this.readyState==3&&Yr(this)}},t.Oa=function(b){this.g&&(this.response=this.responseText=b,Aa(this))},t.Na=function(b){this.g&&(this.response=b,Aa(this))},t.ga=function(){this.g&&Aa(this)};function Aa(b){b.readyState=4,b.l=null,b.j=null,b.B=null,Au(b)}t.setRequestHeader=function(b,S){this.A.append(b,S)},t.getResponseHeader=function(b){return this.h&&this.h.get(b.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const b=[],S=this.h.entries();for(var z=S.next();!z.done;)z=z.value,b.push(z[0]+": "+z[1]),z=S.next();return b.join(`\r
`)};function Au(b){b.onreadystatechange&&b.onreadystatechange.call(b)}Object.defineProperty(Ys.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(b){this.m=b?"include":"same-origin"}});function mu(b){let S="";return Xr(b,function(z,te){S+=te,S+=":",S+=z,S+=`\r
`}),S}function vt(b,S,z){e:{for(te in z){var te=!1;break e}te=!0}te||(z=mu(z),typeof b=="string"?z!=null&&Wn(z):tr(b,S,z))}function pr(b){na.call(this),this.headers=new Map,this.L=b||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(pr,na);var Ro=/^https?$/i,gu=["POST","PUT"];t=pr.prototype,t.Fa=function(b){this.H=b},t.ea=function(b,S,z,te){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+b);S=S?S.toUpperCase():"GET",this.D=b,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Qo.g(),this.g.onreadystatechange=v(s(this.Ca,this));try{this.B=!0,this.g.open(S,String(b),!0),this.B=!1}catch(Ye){ha(this,Ye);return}if(b=z||"",z=new Map(this.headers),te)if(Object.getPrototypeOf(te)===Object.prototype)for(var Fe in te)z.set(Fe,te[Fe]);else if(typeof te.keys=="function"&&typeof te.get=="function")for(const Ye of te.keys())z.set(Ye,te.get(Ye));else throw Error("Unknown input type for opt_headers: "+String(te));te=Array.from(z.keys()).find(Ye=>Ye.toLowerCase()=="content-type"),Fe=l.FormData&&b instanceof l.FormData,!(Array.prototype.indexOf.call(gu,S,void 0)>=0)||te||Fe||z.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ye,On]of z)this.g.setRequestHeader(Ye,On);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(b),this.v=!1}catch(Ye){ha(this,Ye)}};function ha(b,S){b.h=!1,b.g&&(b.j=!0,b.g.abort(),b.j=!1),b.l=S,b.o=5,$g(b),o_(b)}function $g(b){b.A||(b.A=!0,ra(b,"complete"),ra(b,"error"))}t.abort=function(b){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=b||7,ra(this,"complete"),ra(this,"abort"),o_(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),o_(this,!0)),pr.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?V_(this):this.Xa())},t.Xa=function(){V_(this)};function V_(b){if(b.h&&typeof i<"u"){if(b.v&&zg(b)==4)setTimeout(b.Ca.bind(b),0);else if(ra(b,"readystatechange"),zg(b)==4){b.h=!1;try{const Ye=b.ca();e:switch(Ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var z;if(!(z=S)){var te;if(te=Ye===0){let On=String(b.D).match(kg)[1]||null;!On&&l.self&&l.self.location&&(On=l.self.location.protocol.slice(0,-1)),te=!Ro.test(On?On.toLowerCase():"")}z=te}if(z)ra(b,"complete"),ra(b,"success");else{b.o=6;try{var Fe=zg(b)>2?b.g.statusText:""}catch{Fe=""}b.l=Fe+" ["+b.ca()+"]",$g(b)}}finally{o_(b)}}}}function o_(b,S){if(b.g){b.m&&(clearTimeout(b.m),b.m=null);const z=b.g;b.g=null,S||ra(b,"ready");try{z.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function zg(b){return b.g?b.g.readyState:0}t.ca=function(){try{return zg(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(b){if(this.g){var S=this.g.responseText;return b&&S.indexOf(b)==0&&(S=S.substring(b.length)),P_(S)}};function nu(b){try{if(!b.g)return null;if("response"in b.g)return b.g.response;switch(b.F){case"":case"text":return b.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in b.g)return b.g.mozResponseArrayBuffer}return null}catch{return null}}function jg(b){const S={};b=(b.g&&zg(b)>=2&&b.g.getAllResponseHeaders()||"").split(`\r
`);for(let te=0;te<b.length;te++){if(Te(b[te]))continue;var z=O_(b[te]);const Fe=z[0];if(z=z[1],typeof z!="string")continue;z=z.trim();const Ye=S[Fe]||[];S[Fe]=Ye,Ye.push(z)}wn(S,function(te){return te.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function s_(b,S,z){return z&&z.internalChannelParams&&z.internalChannelParams[b]||S}function b_(b){this.za=0,this.i=[],this.j=new zo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=s_("failFast",!1,b),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=s_("baseRetryDelayMs",5e3,b),this.Za=s_("retryDelaySeedMs",1e4,b),this.Ta=s_("forwardChannelMaxRetries",2,b),this.va=s_("forwardChannelRequestTimeoutMs",2e4,b),this.ma=b&&b.xmlHttpFactory||void 0,this.Ua=b&&b.Rb||void 0,this.Aa=b&&b.useFetchStreams||!1,this.O=void 0,this.L=b&&b.supportsCrossDomainXhr||!1,this.M="",this.h=new __(b&&b.concurrentRequestLimit),this.Ba=new nr,this.S=b&&b.fastHandshake||!1,this.R=b&&b.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=b&&b.Pb||!1,b&&b.ua&&this.j.ua(),b&&b.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&b&&b.detectBufferingProxy||!1,this.ia=void 0,b&&b.longPollingTimeout&&b.longPollingTimeout>0&&(this.ia=b.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=b_.prototype,t.ka=8,t.I=1,t.connect=function(b,S,z,te){In(0),this.W=b,this.H=S||{},z&&te!==void 0&&(this.H.OSID=z,this.H.OAID=te),this.F=this.X,this.J=Wy(this,null,this.W),$d(this)};function li(b){if(Iu(b),b.I==3){var S=b.V++,z=ya(b.J);if(tr(z,"SID",b.M),tr(z,"RID",S),tr(z,"TYPE","terminate"),T_(b,z),S=new fh(b,b.j,S),S.M=2,S.A=Hn(ya(z)),z=!1,l.navigator&&l.navigator.sendBeacon)try{z=l.navigator.sendBeacon(S.A.toString(),"")}catch{}!z&&l.Image&&(new Image().src=S.A,z=!0),z||(S.g=Ky(S.j,null),S.g.ea(S.A)),S.F=Date.now(),Sp(S)}qg(b)}function L_(b){b.g&&(Gy(b),b.g.cancel(),b.g=null)}function Iu(b){L_(b),b.v&&(l.clearTimeout(b.v),b.v=null),dy(b),b.h.cancel(),b.m&&(typeof b.m=="number"&&l.clearTimeout(b.m),b.m=null)}function $d(b){if(!D_(b.h)&&!b.m){b.m=!0;var S=b.Ea;rt||se(),qt||(rt(),qt=!0),de.add(S,b),b.D=0}}function W_(b,S){return Fp(b.h)>=b.h.j-(b.m?1:0)?!1:b.m?(b.i=S.G.concat(b.i),!0):b.I==1||b.I==2||b.D>=(b.Sa?0:b.Ta)?!1:(b.m=qr(s(b.Ea,b,S),Tv(b,b.D)),b.D++,!0)}t.Ea=function(b){if(this.m)if(this.m=null,this.I==1){if(!b){this.V=Math.floor(Math.random()*1e5),b=this.V++;const Fe=new fh(this,this.j,b);let Ye=this.o;if(this.U&&(Ye?(Ye=Se(Ye),vn(Ye,this.U)):Ye=this.U),this.u!==null||this.R||(Fe.J=Ye,Ye=null),this.S)e:{for(var S=0,z=0;z<this.i.length;z++){t:{var te=this.i[z];if("__data__"in te.map&&(te=te.map.__data__,typeof te=="string")){te=te.length;break t}te=void 0}if(te===void 0)break;if(S+=te,S>4096){S=z;break e}if(S===4096||z===this.i.length-1){S=z+1;break e}}S=1e3}else S=1e3;S=bv(this,Fe,S),z=ya(this.J),tr(z,"RID",b),tr(z,"CVER",22),this.G&&tr(z,"X-HTTP-Session-Id",this.G),T_(this,z),Ye&&(this.R?S="headers="+Wn(mu(Ye))+"&"+S:this.u&&vt(z,this.u,Ye)),Eg(this.h,Fe),this.Ra&&tr(z,"TYPE","init"),this.S?(tr(z,"$req",S),tr(z,"SID","null"),Fe.U=!0,Vd(Fe,z,null)):Vd(Fe,z,S),this.I=2}}else this.I==3&&(b?Hy(this,b):this.i.length==0||D_(this.h)||Hy(this))};function Hy(b,S){var z;S?z=S.l:z=b.V++;const te=ya(b.J);tr(te,"SID",b.M),tr(te,"RID",z),tr(te,"AID",b.K),T_(b,te),b.u&&b.o&&vt(te,b.u,b.o),z=new fh(b,b.j,z,b.D+1),b.u===null&&(z.J=b.o),S&&(b.i=S.G.concat(b.i)),S=bv(b,z,1e3),z.H=Math.round(b.va*.5)+Math.round(b.va*.5*Math.random()),Eg(b.h,z),Vd(z,te,S)}function T_(b,S){b.H&&Xr(b.H,function(z,te){tr(S,te,z)}),b.l&&Xr({},function(z,te){tr(S,te,z)})}function bv(b,S,z){z=Math.min(b.i.length,z);const te=b.l?s(b.l.Ka,b.l,b):null;e:{var Fe=b.i;let Jr=-1;for(;;){const Go=["count="+z];Jr==-1?z>0?(Jr=Fe[0].g,Go.push("ofs="+Jr)):Jr=0:Go.push("ofs="+Jr);let Xo=!0;for(let ba=0;ba<z;ba++){var Ye=Fe[ba].g;const Ig=Fe[ba].map;if(Ye-=Jr,Ye<0)Jr=Math.max(0,Fe[ba].g-100),Xo=!1;else try{Ye="req"+Ye+"_"||"";try{var On=Ig instanceof Map?Ig:Object.entries(Ig);for(const[Sg,ag]of On){let Gg=ag;p(ag)&&(Gg=ui(ag)),Go.push(Ye+Sg+"="+encodeURIComponent(Gg))}}catch(Sg){throw Go.push(Ye+"type="+encodeURIComponent("_badmap")),Sg}}catch{te&&te(Ig)}}if(Xo){On=Go.join("&");break e}}On=void 0}return b=b.i.splice(0,z),S.G=b,On}function qy(b){if(!b.g&&!b.v){b.Y=1;var S=b.Da;rt||se(),qt||(rt(),qt=!0),de.add(S,b),b.A=0}}function K_(b){return b.g||b.v||b.A>=3?!1:(b.Y++,b.v=qr(s(b.Da,b),Tv(b,b.A)),b.A++,!0)}t.Da=function(){if(this.v=null,fy(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var b=4*this.T;this.j.info("BP detection timer enabled: "+b),this.B=qr(s(this.Wa,this),b)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,In(10),L_(this),fy(this))};function Gy(b){b.B!=null&&(l.clearTimeout(b.B),b.B=null)}function fy(b){b.g=new fh(b,b.j,"rpc",b.Y),b.u===null&&(b.g.J=b.o),b.g.P=0;var S=ya(b.na);tr(S,"RID","rpc"),tr(S,"SID",b.M),tr(S,"AID",b.K),tr(S,"CI",b.F?"0":"1"),!b.F&&b.ia&&tr(S,"TO",b.ia),tr(S,"TYPE","xmlhttp"),T_(b,S),b.u&&b.o&&vt(S,b.u,b.o),b.O&&(b.g.H=b.O);var z=b.g;b=b.ba,z.M=1,z.A=Hn(ya(S)),z.u=null,z.R=!0,gd(z,b)}t.Va=function(){this.C!=null&&(this.C=null,L_(this),K_(this),In(19))};function dy(b){b.C!=null&&(l.clearTimeout(b.C),b.C=null)}function eg(b,S){var z=null;if(b.g==S){dy(b),Gy(b),b.g=null;var te=2}else if(bd(b.h,S))z=S.G,y_(b.h,S),te=1;else return;if(b.I!=0){if(S.o)if(te==1){z=S.u?S.u.length:0,S=Date.now()-S.F;var Fe=b.D;te=re(),ra(te,new ir(te,z)),$d(b)}else qy(b);else if(Fe=S.m,Fe==3||Fe==0&&S.X>0||!(te==1&&W_(b,S)||te==2&&K_(b)))switch(z&&z.length>0&&(S=b.h,S.i=S.i.concat(z)),Fe){case 1:Hg(b,5);break;case 4:Hg(b,10);break;case 3:Hg(b,6);break;default:Hg(b,2)}}}function Tv(b,S){let z=b.Qa+Math.floor(Math.random()*b.Za);return b.isActive()||(z*=2),z*S}function Hg(b,S){if(b.j.info("Error code "+S),S==2){var z=s(b.bb,b),te=b.Ua;const Fe=!te;te=new ai(te||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||va(te,"https"),Hn(te),Fe?Be(te.toString(),z):Gt(te.toString(),z)}else In(2);b.I=0,b.l&&b.l.pa(S),qg(b),Iu(b)}t.bb=function(b){b?(this.j.info("Successfully pinged google.com"),In(2)):(this.j.info("Failed to ping google.com"),In(1))};function qg(b){if(b.I=0,b.ja=[],b.l){const S=N_(b.h);(S.length!=0||b.i.length!=0)&&(G(b.ja,S),G(b.ja,b.i),b.h.i.length=0,I(b.i),b.i.length=0),b.l.oa()}}function Wy(b,S,z){var te=z instanceof ai?ya(z):new ai(z);if(te.g!="")S&&(te.g=S+"."+te.g),wu(te,te.u);else{var Fe=l.location;te=Fe.protocol,S=S?S+"."+Fe.hostname:Fe.hostname,Fe=+Fe.port;const Ye=new ai(null);te&&va(Ye,te),S&&(Ye.g=S),Fe&&wu(Ye,Fe),z&&(Ye.h=z),te=Ye}return z=b.G,S=b.wa,z&&S&&tr(te,z,S),tr(te,"VER",b.ka),T_(b,te),te}function Ky(b,S,z){if(S&&!b.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=b.Aa&&!b.ma?new pr(new qn({ab:z})):new pr(b.ma),S.Fa(b.L),S}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function py(){}t=py.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function M_(){}M_.prototype.g=function(b,S){return new Pu(b,S)};function Pu(b,S){na.call(this),this.g=new b_(S),this.l=b,this.h=S&&S.messageUrlParams||null,b=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(b?b["X-Client-Protocol"]="webchannel":b={"X-Client-Protocol":"webchannel"}),this.g.o=b,b=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(b?b["X-WebChannel-Content-Type"]=S.messageContentType:b={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(b?b["X-WebChannel-Client-Profile"]=S.sa:b={"X-WebChannel-Client-Profile":S.sa}),this.g.U=b,(b=S&&S.Qb)&&!Te(b)&&(this.g.u=b),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!Te(S)&&(this.g.G=S,b=this.h,b!==null&&S in b&&(b=this.h,S in b&&delete b[S])),this.j=new E_(this)}f(Pu,na),Pu.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Pu.prototype.close=function(){li(this.g)},Pu.prototype.o=function(b){var S=this.g;if(typeof b=="string"){var z={};z.__data__=b,b=z}else this.v&&(z={},z.__data__=ui(b),b=z);S.i.push(new Sa(S.Ya++,b)),S.I==3&&$d(S)},Pu.prototype.N=function(){this.g.l=null,delete this.j,li(this.g),delete this.g,Pu.Z.N.call(this)};function Zy(b){rr.call(this),b.__headers__&&(this.headers=b.__headers__,this.statusCode=b.__status__,delete b.__headers__,delete b.__status__);var S=b.__sm__;if(S){e:{for(const z in S){b=z;break e}b=void 0}(this.i=b)&&(b=this.i,S=S!==null&&b in S?S[b]:void 0),this.data=S}else this.data=b}f(Zy,rr);function Ev(){Ma.call(this),this.status=1}f(Ev,Ma);function E_(b){this.g=b}f(E_,py),E_.prototype.ra=function(){ra(this.g,"a")},E_.prototype.qa=function(b){ra(this.g,new Zy(b))},E_.prototype.pa=function(b){ra(this.g,new Ev)},E_.prototype.oa=function(){ra(this.g,"b")},M_.prototype.createWebChannel=M_.prototype.g,Pu.prototype.send=Pu.prototype.o,Pu.prototype.open=Pu.prototype.m,Pu.prototype.close=Pu.prototype.close,createWebChannelTransport=function(){return new M_},getStatEventTarget=function(){return re()},Event=Us,Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},st.NO_ERROR=0,st.TIMEOUT=8,st.HTTP_ERROR=6,ErrorCode$1=st,ci.COMPLETE="complete",EventType=ci,n_.EventType=hu,hu.OPEN="a",hu.CLOSE="b",hu.ERROR="c",hu.MESSAGE="d",na.prototype.listen=na.prototype.J,WebChannel=n_,pr.prototype.listenOnce=pr.prototype.K,pr.prototype.getLastError=pr.prototype.Ha,pr.prototype.getLastErrorCode=pr.prototype.ya,pr.prototype.getStatus=pr.prototype.ca,pr.prototype.getResponseJson=pr.prototype.La,pr.prototype.getResponseText=pr.prototype.la,pr.prototype.send=pr.prototype.ea,pr.prototype.setWithCredentials=pr.prototype.Fa,XhrIo=pr}).apply(typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{});const F="@firebase/firestore",M="4.9.2";class User{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}User.UNAUTHENTICATED=new User(null),User.GOOGLE_CREDENTIALS=new User("google-credentials-uid"),User.FIRST_PARTY=new User("first-party-uid"),User.MOCK_USER=new User("mock-user");let x="12.3.0";const O=new Logger("@firebase/firestore");function __PRIVATE_getLogLevel(){return O.logLevel}function __PRIVATE_logDebug(t,...e){if(O.logLevel<=LogLevel.DEBUG){const n=e.map(__PRIVATE_argToString);O.debug(`Firestore (${x}): ${t}`,...n)}}function __PRIVATE_logError(t,...e){if(O.logLevel<=LogLevel.ERROR){const n=e.map(__PRIVATE_argToString);O.error(`Firestore (${x}): ${t}`,...n)}}function __PRIVATE_logWarn(t,...e){if(O.logLevel<=LogLevel.WARN){const n=e.map(__PRIVATE_argToString);O.warn(`Firestore (${x}): ${t}`,...n)}}function __PRIVATE_argToString(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function fail(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,__PRIVATE__fail(t,r,n)}function __PRIVATE__fail(t,e,n){let r=`FIRESTORE (${x}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw __PRIVATE_logError(r),new Error(r)}function __PRIVATE_hardAssert(t,e,n,r){let a="Unexpected state";typeof n=="string"?a=n:r=n,t||__PRIVATE__fail(e,a,r)}function __PRIVATE_debugCast(t,e){return t}const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class FirestoreError extends FirebaseError{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class __PRIVATE_Deferred{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class __PRIVATE_OAuthToken{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class __PRIVATE_EmptyAuthCredentialsProvider{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(User.UNAUTHENTICATED)))}shutdown(){}}class __PRIVATE_EmulatorAuthCredentialsProvider{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class __PRIVATE_FirebaseAuthCredentialsProvider{constructor(e){this.t=e,this.currentUser=User.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){__PRIVATE_hardAssert(this.o===void 0,42304);let r=this.i;const a=m=>this.i!==r?(r=this.i,n(m)):Promise.resolve();let i=new __PRIVATE_Deferred;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new __PRIVATE_Deferred,e.enqueueRetryable((()=>a(this.currentUser)))};const l=()=>{const m=i;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},p=m=>{__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((m=>p(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?p(m):(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new __PRIVATE_Deferred)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(__PRIVATE_hardAssert(typeof r.accessToken=="string",31837,{l:r}),new __PRIVATE_OAuthToken(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return __PRIVATE_hardAssert(e===null||typeof e=="string",2055,{h:e}),new User(e)}}class __PRIVATE_FirstPartyToken{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=User.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class __PRIVATE_FirstPartyAuthCredentialsProvider{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new __PRIVATE_FirstPartyToken(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(User.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class AppCheckToken{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class __PRIVATE_FirebaseAppCheckTokenProvider{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_isFirebaseServerApp(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){__PRIVATE_hardAssert(this.o===void 0,3512);const r=i=>{i.error!=null&&__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const l=i.token!==this.m;return this.m=i.token,__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const a=i=>{__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>a(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?a(i):__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new AppCheckToken(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(__PRIVATE_hardAssert(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new AppCheckToken(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function __PRIVATE_randomBytes(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class __PRIVATE_AutoId{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=__PRIVATE_randomBytes(40);for(let i=0;i<a.length;++i)r.length<20&&a[i]<n&&(r+=e.charAt(a[i]%62))}return r}}function __PRIVATE_primitiveComparator(t,e){return t<e?-1:t>e?1:0}function __PRIVATE_compareUtf8Strings(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const a=t.charAt(r),i=e.charAt(r);if(a!==i)return __PRIVATE_isSurrogate(a)===__PRIVATE_isSurrogate(i)?__PRIVATE_primitiveComparator(a,i):__PRIVATE_isSurrogate(a)?1:-1}return __PRIVATE_primitiveComparator(t.length,e.length)}const B$1=55296,L$3=57343;function __PRIVATE_isSurrogate(t){const e=t.charCodeAt(0);return e>=B$1&&e<=L$3}function __PRIVATE_arrayEquals(t,e,n){return t.length===e.length&&t.every(((r,a)=>n(r,e[a])))}const k="__name__";class BasePath{constructor(e,n,r){n===void 0?n=0:n>e.length&&fail(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&fail(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return BasePath.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof BasePath?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let a=0;a<r;a++){const i=BasePath.compareSegments(e.get(a),n.get(a));if(i!==0)return i}return __PRIVATE_primitiveComparator(e.length,n.length)}static compareSegments(e,n){const r=BasePath.isNumericId(e),a=BasePath.isNumericId(n);return r&&!a?-1:!r&&a?1:r&&a?BasePath.extractNumericId(e).compare(BasePath.extractNumericId(n)):__PRIVATE_compareUtf8Strings(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Integer.fromString(e.substring(4,e.length-2))}}class ResourcePath extends BasePath{construct(e,n,r){return new ResourcePath(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((a=>a.length>0)))}return new ResourcePath(n)}static emptyPath(){return new ResourcePath([])}}const q=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class FieldPath$1 extends BasePath{construct(e,n,r){return new FieldPath$1(e,n,r)}static isValidIdentifier(e){return q.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),FieldPath$1.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===k}static keyField(){return new FieldPath$1([k])}static fromServerFormat(e){const n=[];let r="",a=0;const i=()=>{if(r.length===0)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;a<e.length;){const p=e[a];if(p==="\\"){if(a+1===e.length)throw new FirestoreError(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new FirestoreError(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else p==="`"?(l=!l,a++):p!=="."||l?(r+=p,a++):(i(),a++)}if(i(),l)throw new FirestoreError(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new FieldPath$1(n)}static emptyPath(){return new FieldPath$1([])}}class DocumentKey{constructor(e){this.path=e}static fromPath(e){return new DocumentKey(ResourcePath.fromString(e))}static fromName(e){return new DocumentKey(ResourcePath.fromString(e).popFirst(5))}static empty(){return new DocumentKey(ResourcePath.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ResourcePath.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ResourcePath.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new DocumentKey(new ResourcePath(e.slice()))}}function __PRIVATE_validateNonEmptyArgument(t,e,n){if(!n)throw new FirestoreError(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function __PRIVATE_validateIsNotUsedTogether(t,e,n,r){if(e===!0&&r===!0)throw new FirestoreError(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function __PRIVATE_validateDocumentPath(t){if(!DocumentKey.isDocumentKey(t))throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function __PRIVATE_validateCollectionPath(t){if(DocumentKey.isDocumentKey(t))throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function __PRIVATE_isPlainObject(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function __PRIVATE_valueDescription(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fail(12329,{type:typeof t})}function __PRIVATE_cast(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new FirestoreError(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=__PRIVATE_valueDescription(t);throw new FirestoreError(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function property(t,e){const n={typeString:t};return e&&(n.value=e),n}function __PRIVATE_validateJSON(t,e){if(!__PRIVATE_isPlainObject(t))throw new FirestoreError(N.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const a=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const l=t[r];if(a&&typeof l!==a){n=`JSON field '${r}' must be a ${a}.`;break}if(i!==void 0&&l!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new FirestoreError(N.INVALID_ARGUMENT,n);return!0}const Q$1=-62135596800,$=1e6;class Timestamp{static now(){return Timestamp.fromMillis(Date.now())}static fromDate(e){return Timestamp.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*$);return new Timestamp(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Q$1)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$}_compareTo(e){return this.seconds===e.seconds?__PRIVATE_primitiveComparator(this.nanoseconds,e.nanoseconds):__PRIVATE_primitiveComparator(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Timestamp._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(__PRIVATE_validateJSON(e,Timestamp._jsonSchema))return new Timestamp(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Q$1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Timestamp._jsonSchemaVersion="firestore/timestamp/1.0",Timestamp._jsonSchema={type:property("string",Timestamp._jsonSchemaVersion),seconds:property("number"),nanoseconds:property("number")};class SnapshotVersion{static fromTimestamp(e){return new SnapshotVersion(e)}static min(){return new SnapshotVersion(new Timestamp(0,0))}static max(){return new SnapshotVersion(new Timestamp(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const U$1=-1;function __PRIVATE_newIndexOffsetSuccessorFromReadTime(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,a=SnapshotVersion.fromTimestamp(r===1e9?new Timestamp(n+1,0):new Timestamp(n,r));return new IndexOffset(a,DocumentKey.empty(),e)}function __PRIVATE_newIndexOffsetFromDocument(t){return new IndexOffset(t.readTime,t.key,U$1)}class IndexOffset{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new IndexOffset(SnapshotVersion.min(),DocumentKey.empty(),U$1)}static max(){return new IndexOffset(SnapshotVersion.max(),DocumentKey.empty(),U$1)}}function __PRIVATE_indexOffsetComparator(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=DocumentKey.comparator(t.documentKey,e.documentKey),n!==0?n:__PRIVATE_primitiveComparator(t.largestBatchId,e.largestBatchId))}const K="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PersistenceTransaction{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function __PRIVATE_ignoreIfPrimaryLeaseLoss(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==K)throw t;__PRIVATE_logDebug("LocalStore","Unexpectedly lost primary lease")}class PersistencePromise{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fail(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new PersistencePromise(((r,a)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,a)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,a)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof PersistencePromise?n:PersistencePromise.resolve(n)}catch(n){return PersistencePromise.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):PersistencePromise.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):PersistencePromise.reject(n)}static resolve(e){return new PersistencePromise(((n,r)=>{n(e)}))}static reject(e){return new PersistencePromise(((n,r)=>{r(e)}))}static waitFor(e){return new PersistencePromise(((n,r)=>{let a=0,i=0,l=!1;e.forEach((p=>{++a,p.next((()=>{++i,l&&i===a&&n()}),(m=>r(m)))})),l=!0,i===a&&n()}))}static or(e){let n=PersistencePromise.resolve(!1);for(const r of e)n=n.next((a=>a?PersistencePromise.resolve(a):r()));return n}static forEach(e,n){const r=[];return e.forEach(((a,i)=>{r.push(n.call(this,a,i))})),this.waitFor(r)}static mapArray(e,n){return new PersistencePromise(((r,a)=>{const i=e.length,l=new Array(i);let p=0;for(let m=0;m<i;m++){const s=m;n(e[s]).next((h=>{l[s]=h,++p,p===i&&r(l)}),(h=>a(h)))}}))}static doWhile(e,n){return new PersistencePromise(((r,a)=>{const i=()=>{e()===!0?n().next((()=>{i()}),a):r()};i()}))}}function __PRIVATE_getAndroidVersion(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function __PRIVATE_isIndexedDbTransactionError(t){return t.name==="IndexedDbTransactionError"}class __PRIVATE_ListenSequence{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}__PRIVATE_ListenSequence.ce=-1;const j=-1;function __PRIVATE_isNullOrUndefined(t){return t==null}function __PRIVATE_isNegativeZero(t){return t===0&&1/t==-1/0}function isSafeInteger(t){return typeof t=="number"&&Number.isInteger(t)&&!__PRIVATE_isNegativeZero(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const J="";function __PRIVATE_encodeResourcePath(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=__PRIVATE_encodeSeparator(e)),e=__PRIVATE_encodeSegment(t.get(n),e);return __PRIVATE_encodeSeparator(e)}function __PRIVATE_encodeSegment(t,e){let n=e;const r=t.length;for(let a=0;a<r;a++){const i=t.charAt(a);switch(i){case"\0":n+="";break;case J:n+="";break;default:n+=i}}return n}function __PRIVATE_encodeSeparator(t){return t+J+""}function __PRIVATE_objectSize(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function forEach(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function isEmpty(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class SortedMap{constructor(e,n){this.comparator=e,this.root=n||LLRBNode.EMPTY}insert(e,n){return new SortedMap(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}remove(e){return new SortedMap(this.comparator,this.root.remove(e,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return n+r.left.size;a<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new SortedMapIterator(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!1)}getReverseIterator(){return new SortedMapIterator(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!0)}}class SortedMapIterator{constructor(e,n,r,a){this.isReverse=a,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&a&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class LLRBNode{constructor(e,n,r,a,i){this.key=e,this.value=n,this.color=r??LLRBNode.RED,this.left=a??LLRBNode.EMPTY,this.right=i??LLRBNode.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,a,i){return new LLRBNode(e??this.key,n??this.value,r??this.color,a??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let a=this;const i=r(e,a.key);return a=i<0?a.copy(null,null,null,a.left.insert(e,n,r),null):i===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return LLRBNode.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return LLRBNode.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fail(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fail(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fail(27949);return e+(this.isRed()?0:1)}}LLRBNode.EMPTY=null,LLRBNode.RED=!0,LLRBNode.BLACK=!1;LLRBNode.EMPTY=new class{constructor(){this.size=0}get key(){throw fail(57766)}get value(){throw fail(16141)}get color(){throw fail(16727)}get left(){throw fail(29726)}get right(){throw fail(36894)}copy(e,n,r,a,i){return this}insert(e,n,r){return new LLRBNode(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class SortedSet{constructor(e){this.comparator=e,this.data=new SortedMap(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new SortedSetIterator(this.data.getIterator())}getIteratorFrom(e){return new SortedSetIterator(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof SortedSet)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,i=r.getNext().key;if(this.comparator(a,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new SortedSet(this.comparator);return n.data=e,n}}class SortedSetIterator{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class FieldMask{constructor(e){this.fields=e,e.sort(FieldPath$1.comparator)}static empty(){return new FieldMask([])}unionWith(e){let n=new SortedSet(FieldPath$1.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new FieldMask(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return __PRIVATE_arrayEquals(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class __PRIVATE_Base64DecodeError extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ByteString{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(a){try{return atob(a)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new __PRIVATE_Base64DecodeError("Invalid base64 string: "+i):i}})(e);return new ByteString(n)}static fromUint8Array(e){const n=(function(a){let i="";for(let l=0;l<a.length;++l)i+=String.fromCharCode(a[l]);return i})(e);return new ByteString(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return __PRIVATE_primitiveComparator(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ByteString.EMPTY_BYTE_STRING=new ByteString("");const ot=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __PRIVATE_normalizeTimestamp(t){if(__PRIVATE_hardAssert(!!t,39018),typeof t=="string"){let e=0;const n=ot.exec(t);if(__PRIVATE_hardAssert(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:__PRIVATE_normalizeNumber(t.seconds),nanos:__PRIVATE_normalizeNumber(t.nanos)}}function __PRIVATE_normalizeNumber(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function __PRIVATE_normalizeByteString(t){return typeof t=="string"?ByteString.fromBase64String(t):ByteString.fromUint8Array(t)}const _t="server_timestamp",at="__type__",ut$1="__previous_value__",ct$1="__local_write_time__";function __PRIVATE_isServerTimestamp(t){return(t?.mapValue?.fields||{})[at]?.stringValue===_t}function __PRIVATE_getPreviousValue(t){const e=t.mapValue.fields[ut$1];return __PRIVATE_isServerTimestamp(e)?__PRIVATE_getPreviousValue(e):e}function __PRIVATE_getLocalWriteTime(t){const e=__PRIVATE_normalizeTimestamp(t.mapValue.fields[ct$1].timestampValue);return new Timestamp(e.seconds,e.nanos)}class DatabaseInfo{constructor(e,n,r,a,i,l,p,m,s,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=i,this.forceLongPolling=l,this.autoDetectLongPolling=p,this.longPollingOptions=m,this.useFetchStreams=s,this.isUsingEmulator=h}}const lt$1="(default)";class DatabaseId{constructor(e,n){this.projectId=e,this.database=n||lt$1}static empty(){return new DatabaseId("","")}get isDefaultDatabase(){return this.database===lt$1}isEqual(e){return e instanceof DatabaseId&&e.projectId===this.projectId&&e.database===this.database}}const ht$1="__type__",Pt="__max__",Tt={mapValue:{}},It$1="__vector__",Et="value";function __PRIVATE_typeOrder(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?__PRIVATE_isServerTimestamp(t)?4:__PRIVATE_isMaxValue(t)?9007199254740991:__PRIVATE_isVectorValue(t)?10:11:fail(28295,{value:t})}function __PRIVATE_valueEquals(t,e){if(t===e)return!0;const n=__PRIVATE_typeOrder(t);if(n!==__PRIVATE_typeOrder(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return __PRIVATE_getLocalWriteTime(t).isEqual(__PRIVATE_getLocalWriteTime(e));case 3:return(function(a,i){if(typeof a.timestampValue=="string"&&typeof i.timestampValue=="string"&&a.timestampValue.length===i.timestampValue.length)return a.timestampValue===i.timestampValue;const l=__PRIVATE_normalizeTimestamp(a.timestampValue),p=__PRIVATE_normalizeTimestamp(i.timestampValue);return l.seconds===p.seconds&&l.nanos===p.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,i){return __PRIVATE_normalizeByteString(a.bytesValue).isEqual(__PRIVATE_normalizeByteString(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,i){return __PRIVATE_normalizeNumber(a.geoPointValue.latitude)===__PRIVATE_normalizeNumber(i.geoPointValue.latitude)&&__PRIVATE_normalizeNumber(a.geoPointValue.longitude)===__PRIVATE_normalizeNumber(i.geoPointValue.longitude)})(t,e);case 2:return(function(a,i){if("integerValue"in a&&"integerValue"in i)return __PRIVATE_normalizeNumber(a.integerValue)===__PRIVATE_normalizeNumber(i.integerValue);if("doubleValue"in a&&"doubleValue"in i){const l=__PRIVATE_normalizeNumber(a.doubleValue),p=__PRIVATE_normalizeNumber(i.doubleValue);return l===p?__PRIVATE_isNegativeZero(l)===__PRIVATE_isNegativeZero(p):isNaN(l)&&isNaN(p)}return!1})(t,e);case 9:return __PRIVATE_arrayEquals(t.arrayValue.values||[],e.arrayValue.values||[],__PRIVATE_valueEquals);case 10:case 11:return(function(a,i){const l=a.mapValue.fields||{},p=i.mapValue.fields||{};if(__PRIVATE_objectSize(l)!==__PRIVATE_objectSize(p))return!1;for(const m in l)if(l.hasOwnProperty(m)&&(p[m]===void 0||!__PRIVATE_valueEquals(l[m],p[m])))return!1;return!0})(t,e);default:return fail(52216,{left:t})}}function __PRIVATE_arrayValueContains(t,e){return(t.values||[]).find((n=>__PRIVATE_valueEquals(n,e)))!==void 0}function __PRIVATE_valueCompare(t,e){if(t===e)return 0;const n=__PRIVATE_typeOrder(t),r=__PRIVATE_typeOrder(e);if(n!==r)return __PRIVATE_primitiveComparator(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return __PRIVATE_primitiveComparator(t.booleanValue,e.booleanValue);case 2:return(function(i,l){const p=__PRIVATE_normalizeNumber(i.integerValue||i.doubleValue),m=__PRIVATE_normalizeNumber(l.integerValue||l.doubleValue);return p<m?-1:p>m?1:p===m?0:isNaN(p)?isNaN(m)?0:-1:1})(t,e);case 3:return __PRIVATE_compareTimestamps(t.timestampValue,e.timestampValue);case 4:return __PRIVATE_compareTimestamps(__PRIVATE_getLocalWriteTime(t),__PRIVATE_getLocalWriteTime(e));case 5:return __PRIVATE_compareUtf8Strings(t.stringValue,e.stringValue);case 6:return(function(i,l){const p=__PRIVATE_normalizeByteString(i),m=__PRIVATE_normalizeByteString(l);return p.compareTo(m)})(t.bytesValue,e.bytesValue);case 7:return(function(i,l){const p=i.split("/"),m=l.split("/");for(let s=0;s<p.length&&s<m.length;s++){const h=__PRIVATE_primitiveComparator(p[s],m[s]);if(h!==0)return h}return __PRIVATE_primitiveComparator(p.length,m.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,l){const p=__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(i.latitude),__PRIVATE_normalizeNumber(l.latitude));return p!==0?p:__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(i.longitude),__PRIVATE_normalizeNumber(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return __PRIVATE_compareArrays(t.arrayValue,e.arrayValue);case 10:return(function(i,l){const p=i.fields||{},m=l.fields||{},s=p[Et]?.arrayValue,h=m[Et]?.arrayValue,f=__PRIVATE_primitiveComparator(s?.values?.length||0,h?.values?.length||0);return f!==0?f:__PRIVATE_compareArrays(s,h)})(t.mapValue,e.mapValue);case 11:return(function(i,l){if(i===Tt.mapValue&&l===Tt.mapValue)return 0;if(i===Tt.mapValue)return 1;if(l===Tt.mapValue)return-1;const p=i.fields||{},m=Object.keys(p),s=l.fields||{},h=Object.keys(s);m.sort(),h.sort();for(let f=0;f<m.length&&f<h.length;++f){const v=__PRIVATE_compareUtf8Strings(m[f],h[f]);if(v!==0)return v;const I=__PRIVATE_valueCompare(p[m[f]],s[h[f]]);if(I!==0)return I}return __PRIVATE_primitiveComparator(m.length,h.length)})(t.mapValue,e.mapValue);default:throw fail(23264,{he:n})}}function __PRIVATE_compareTimestamps(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return __PRIVATE_primitiveComparator(t,e);const n=__PRIVATE_normalizeTimestamp(t),r=__PRIVATE_normalizeTimestamp(e),a=__PRIVATE_primitiveComparator(n.seconds,r.seconds);return a!==0?a:__PRIVATE_primitiveComparator(n.nanos,r.nanos)}function __PRIVATE_compareArrays(t,e){const n=t.values||[],r=e.values||[];for(let a=0;a<n.length&&a<r.length;++a){const i=__PRIVATE_valueCompare(n[a],r[a]);if(i)return i}return __PRIVATE_primitiveComparator(n.length,r.length)}function canonicalId(t){return __PRIVATE_canonifyValue(t)}function __PRIVATE_canonifyValue(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=__PRIVATE_normalizeTimestamp(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return __PRIVATE_normalizeByteString(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return DocumentKey.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",a=!0;for(const i of n.values||[])a?a=!1:r+=",",r+=__PRIVATE_canonifyValue(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let a="{",i=!0;for(const l of r)i?i=!1:a+=",",a+=`${l}:${__PRIVATE_canonifyValue(n.fields[l])}`;return a+"}"})(t.mapValue):fail(61005,{value:t})}function __PRIVATE_estimateByteSize(t){switch(__PRIVATE_typeOrder(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=__PRIVATE_getPreviousValue(t);return e?16+__PRIVATE_estimateByteSize(e):16;case 5:return 2*t.stringValue.length;case 6:return __PRIVATE_normalizeByteString(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,i)=>a+__PRIVATE_estimateByteSize(i)),0)})(t.arrayValue);case 10:case 11:return(function(r){let a=0;return forEach(r.fields,((i,l)=>{a+=i.length+__PRIVATE_estimateByteSize(l)})),a})(t.mapValue);default:throw fail(13486,{value:t})}}function __PRIVATE_refValue(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function isInteger(t){return!!t&&"integerValue"in t}function isArray(t){return!!t&&"arrayValue"in t}function __PRIVATE_isNullValue(t){return!!t&&"nullValue"in t}function __PRIVATE_isNanValue(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function __PRIVATE_isMapValue(t){return!!t&&"mapValue"in t}function __PRIVATE_isVectorValue(t){return(t?.mapValue?.fields||{})[ht$1]?.stringValue===It$1}function __PRIVATE_deepClone(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return forEach(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=__PRIVATE_deepClone(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=__PRIVATE_deepClone(t.arrayValue.values[n]);return e}return{...t}}function __PRIVATE_isMaxValue(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Pt}class ObjectValue{constructor(e){this.value=e}static empty(){return new ObjectValue({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!__PRIVATE_isMapValue(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=__PRIVATE_deepClone(n)}setAll(e){let n=FieldPath$1.emptyPath(),r={},a=[];e.forEach(((l,p)=>{if(!n.isImmediateParentOf(p)){const m=this.getFieldsMap(n);this.applyChanges(m,r,a),r={},a=[],n=p.popLast()}l?r[p.lastSegment()]=__PRIVATE_deepClone(l):a.push(p.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,a)}delete(e){const n=this.field(e.popLast());__PRIVATE_isMapValue(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return __PRIVATE_valueEquals(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=n.mapValue.fields[e.get(r)];__PRIVATE_isMapValue(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,r){forEach(n,((a,i)=>e[a]=i));for(const a of r)delete e[a]}clone(){return new ObjectValue(__PRIVATE_deepClone(this.value))}}function __PRIVATE_extractFieldMask(t){const e=[];return forEach(t.fields,((n,r)=>{const a=new FieldPath$1([n]);if(__PRIVATE_isMapValue(r)){const i=__PRIVATE_extractFieldMask(r.mapValue).fields;if(i.length===0)e.push(a);else for(const l of i)e.push(a.child(l))}else e.push(a)})),new FieldMask(e)}class MutableDocument{constructor(e,n,r,a,i,l,p){this.key=e,this.documentType=n,this.version=r,this.readTime=a,this.createTime=i,this.data=l,this.documentState=p}static newInvalidDocument(e){return new MutableDocument(e,0,SnapshotVersion.min(),SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newFoundDocument(e,n,r,a){return new MutableDocument(e,1,n,SnapshotVersion.min(),r,a,0)}static newNoDocument(e,n){return new MutableDocument(e,2,n,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newUnknownDocument(e,n){return new MutableDocument(e,3,n,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(SnapshotVersion.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ObjectValue.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ObjectValue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=SnapshotVersion.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof MutableDocument&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new MutableDocument(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Bound{constructor(e,n){this.position=e,this.inclusive=n}}function __PRIVATE_boundCompareToDocument(t,e,n){let r=0;for(let a=0;a<t.position.length;a++){const i=e[a],l=t.position[a];if(i.field.isKeyField()?r=DocumentKey.comparator(DocumentKey.fromName(l.referenceValue),n.key):r=__PRIVATE_valueCompare(l,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function __PRIVATE_boundEquals(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!__PRIVATE_valueEquals(t.position[n],e.position[n]))return!1;return!0}class OrderBy{constructor(e,n="asc"){this.field=e,this.dir=n}}function __PRIVATE_orderByEquals(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Filter{}class FieldFilter extends Filter{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new __PRIVATE_KeyFieldFilter(e,n,r):n==="array-contains"?new __PRIVATE_ArrayContainsFilter(e,r):n==="in"?new __PRIVATE_InFilter(e,r):n==="not-in"?new __PRIVATE_NotInFilter(e,r):n==="array-contains-any"?new __PRIVATE_ArrayContainsAnyFilter(e,r):new FieldFilter(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new __PRIVATE_KeyFieldInFilter(e,r):new __PRIVATE_KeyFieldNotInFilter(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(__PRIVATE_valueCompare(n,this.value)):n!==null&&__PRIVATE_typeOrder(this.value)===__PRIVATE_typeOrder(n)&&this.matchesComparison(__PRIVATE_valueCompare(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fail(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class CompositeFilter extends Filter{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new CompositeFilter(e,n)}matches(e){return __PRIVATE_compositeFilterIsConjunction(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function __PRIVATE_compositeFilterIsConjunction(t){return t.op==="and"}function __PRIVATE_compositeFilterIsFlatConjunction(t){return __PRIVATE_compositeFilterIsFlat(t)&&__PRIVATE_compositeFilterIsConjunction(t)}function __PRIVATE_compositeFilterIsFlat(t){for(const e of t.filters)if(e instanceof CompositeFilter)return!1;return!0}function __PRIVATE_canonifyFilter(t){if(t instanceof FieldFilter)return t.field.canonicalString()+t.op.toString()+canonicalId(t.value);if(__PRIVATE_compositeFilterIsFlatConjunction(t))return t.filters.map((e=>__PRIVATE_canonifyFilter(e))).join(",");{const e=t.filters.map((n=>__PRIVATE_canonifyFilter(n))).join(",");return`${t.op}(${e})`}}function __PRIVATE_filterEquals(t,e){return t instanceof FieldFilter?(function(r,a){return a instanceof FieldFilter&&r.op===a.op&&r.field.isEqual(a.field)&&__PRIVATE_valueEquals(r.value,a.value)})(t,e):t instanceof CompositeFilter?(function(r,a){return a instanceof CompositeFilter&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((i,l,p)=>i&&__PRIVATE_filterEquals(l,a.filters[p])),!0):!1})(t,e):void fail(19439)}function __PRIVATE_stringifyFilter(t){return t instanceof FieldFilter?(function(n){return`${n.field.canonicalString()} ${n.op} ${canonicalId(n.value)}`})(t):t instanceof CompositeFilter?(function(n){return n.op.toString()+" {"+n.getFilters().map(__PRIVATE_stringifyFilter).join(" ,")+"}"})(t):"Filter"}class __PRIVATE_KeyFieldFilter extends FieldFilter{constructor(e,n,r){super(e,n,r),this.key=DocumentKey.fromName(r.referenceValue)}matches(e){const n=DocumentKey.comparator(e.key,this.key);return this.matchesComparison(n)}}class __PRIVATE_KeyFieldInFilter extends FieldFilter{constructor(e,n){super(e,"in",n),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class __PRIVATE_KeyFieldNotInFilter extends FieldFilter{constructor(e,n){super(e,"not-in",n),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function __PRIVATE_extractDocumentKeysFromArrayValue(t,e){return(e.arrayValue?.values||[]).map((n=>DocumentKey.fromName(n.referenceValue)))}class __PRIVATE_ArrayContainsFilter extends FieldFilter{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return isArray(n)&&__PRIVATE_arrayValueContains(n.arrayValue,this.value)}}class __PRIVATE_InFilter extends FieldFilter{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&__PRIVATE_arrayValueContains(this.value.arrayValue,n)}}class __PRIVATE_NotInFilter extends FieldFilter{constructor(e,n){super(e,"not-in",n)}matches(e){if(__PRIVATE_arrayValueContains(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!__PRIVATE_arrayValueContains(this.value.arrayValue,n)}}class __PRIVATE_ArrayContainsAnyFilter extends FieldFilter{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!isArray(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>__PRIVATE_arrayValueContains(this.value.arrayValue,r)))}}class __PRIVATE_TargetImpl{constructor(e,n=null,r=[],a=[],i=null,l=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=i,this.startAt=l,this.endAt=p,this.Te=null}}function __PRIVATE_newTarget(t,e=null,n=[],r=[],a=null,i=null,l=null){return new __PRIVATE_TargetImpl(t,e,n,r,a,i,l)}function __PRIVATE_canonifyTarget(t){const e=__PRIVATE_debugCast(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>__PRIVATE_canonifyFilter(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),__PRIVATE_isNullOrUndefined(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>canonicalId(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>canonicalId(r))).join(",")),e.Te=n}return e.Te}function __PRIVATE_targetEquals(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!__PRIVATE_orderByEquals(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!__PRIVATE_filterEquals(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!__PRIVATE_boundEquals(t.startAt,e.startAt)&&__PRIVATE_boundEquals(t.endAt,e.endAt)}function __PRIVATE_targetIsDocumentTarget(t){return DocumentKey.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class __PRIVATE_QueryImpl{constructor(e,n=null,r=[],a=[],i=null,l="F",p=null,m=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=i,this.limitType=l,this.startAt=p,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function __PRIVATE_newQuery(t,e,n,r,a,i,l,p){return new __PRIVATE_QueryImpl(t,e,n,r,a,i,l,p)}function __PRIVATE_newQueryForPath(t){return new __PRIVATE_QueryImpl(t)}function __PRIVATE_queryMatchesAllDocuments(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function __PRIVATE_isCollectionGroupQuery(t){return t.collectionGroup!==null}function __PRIVATE_queryNormalizedOrderBy(t){const e=__PRIVATE_debugCast(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let p=new SortedSet(FieldPath$1.comparator);return l.filters.forEach((m=>{m.getFlattenedFilters().forEach((s=>{s.isInequality()&&(p=p.add(s.field))}))})),p})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new OrderBy(i,r))})),n.has(FieldPath$1.keyField().canonicalString())||e.Ie.push(new OrderBy(FieldPath$1.keyField(),r))}return e.Ie}function __PRIVATE_queryToTarget(t){const e=__PRIVATE_debugCast(t);return e.Ee||(e.Ee=__PRIVATE__queryToTarget(e,__PRIVATE_queryNormalizedOrderBy(t))),e.Ee}function __PRIVATE__queryToTarget(t,e){if(t.limitType==="F")return __PRIVATE_newTarget(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const i=a.dir==="desc"?"asc":"desc";return new OrderBy(a.field,i)}));const n=t.endAt?new Bound(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Bound(t.startAt.position,t.startAt.inclusive):null;return __PRIVATE_newTarget(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function __PRIVATE_queryWithAddedFilter(t,e){const n=t.filters.concat([e]);return new __PRIVATE_QueryImpl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function __PRIVATE_queryWithLimit(t,e,n){return new __PRIVATE_QueryImpl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function __PRIVATE_queryEquals(t,e){return __PRIVATE_targetEquals(__PRIVATE_queryToTarget(t),__PRIVATE_queryToTarget(e))&&t.limitType===e.limitType}function __PRIVATE_canonifyQuery(t){return`${__PRIVATE_canonifyTarget(__PRIVATE_queryToTarget(t))}|lt:${t.limitType}`}function __PRIVATE_stringifyQuery(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((a=>__PRIVATE_stringifyFilter(a))).join(", ")}]`),__PRIVATE_isNullOrUndefined(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((a=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(a))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((a=>canonicalId(a))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((a=>canonicalId(a))).join(",")),`Target(${r})`})(__PRIVATE_queryToTarget(t))}; limitType=${t.limitType})`}function __PRIVATE_queryMatches(t,e){return e.isFoundDocument()&&(function(r,a){const i=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):DocumentKey.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,a){for(const i of __PRIVATE_queryNormalizedOrderBy(r))if(!i.field.isKeyField()&&a.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,a){for(const i of r.filters)if(!i.matches(a))return!1;return!0})(t,e)&&(function(r,a){return!(r.startAt&&!(function(l,p,m){const s=__PRIVATE_boundCompareToDocument(l,p,m);return l.inclusive?s<=0:s<0})(r.startAt,__PRIVATE_queryNormalizedOrderBy(r),a)||r.endAt&&!(function(l,p,m){const s=__PRIVATE_boundCompareToDocument(l,p,m);return l.inclusive?s>=0:s>0})(r.endAt,__PRIVATE_queryNormalizedOrderBy(r),a))})(t,e)}function __PRIVATE_queryCollectionGroup(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function __PRIVATE_newQueryComparator(t){return(e,n)=>{let r=!1;for(const a of __PRIVATE_queryNormalizedOrderBy(t)){const i=__PRIVATE_compareDocs(a,e,n);if(i!==0)return i;r=r||a.field.isKeyField()}return 0}}function __PRIVATE_compareDocs(t,e,n){const r=t.field.isKeyField()?DocumentKey.comparator(e.key,n.key):(function(i,l,p){const m=l.data.field(i),s=p.data.field(i);return m!==null&&s!==null?__PRIVATE_valueCompare(m,s):fail(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return fail(19790,{direction:t.dir})}}class ObjectMap{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[a,i]of r)if(this.equalsFn(a,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],e))return void(a[i]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[n]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){forEach(this.inner,((n,r)=>{for(const[a,i]of r)e(a,i)}))}isEmpty(){return isEmpty(this.inner)}size(){return this.innerSize}}const Rt$1=new SortedMap(DocumentKey.comparator);function __PRIVATE_mutableDocumentMap(){return Rt$1}const Vt$1=new SortedMap(DocumentKey.comparator);function documentMap(...t){let e=Vt$1;for(const n of t)e=e.insert(n.key,n);return e}function __PRIVATE_convertOverlayedDocumentMapToDocumentMap(t){let e=Vt$1;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function __PRIVATE_newOverlayMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newMutationMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newDocumentKeyMap(){return new ObjectMap((t=>t.toString()),((t,e)=>t.isEqual(e)))}const mt$1=new SortedMap(DocumentKey.comparator),ft$1=new SortedSet(DocumentKey.comparator);function __PRIVATE_documentKeySet(...t){let e=ft$1;for(const n of t)e=e.add(n);return e}const gt$1=new SortedSet(__PRIVATE_primitiveComparator);function __PRIVATE_targetIdSet(){return gt$1}function __PRIVATE_toDouble(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:__PRIVATE_isNegativeZero(e)?"-0":e}}function __PRIVATE_toInteger(t){return{integerValue:""+t}}function toNumber(t,e){return isSafeInteger(e)?__PRIVATE_toInteger(e):__PRIVATE_toDouble(t,e)}class TransformOperation{constructor(){this._=void 0}}function __PRIVATE_applyTransformOperationToLocalView(t,e,n){return t instanceof __PRIVATE_ServerTimestampTransform?(function(a,i){const l={fields:{[at]:{stringValue:_t},[ct$1]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return i&&__PRIVATE_isServerTimestamp(i)&&(i=__PRIVATE_getPreviousValue(i)),i&&(l.fields[ut$1]=i),{mapValue:l}})(n,e):t instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(t,e):t instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(t,e):(function(a,i){const l=__PRIVATE_computeTransformOperationBaseValue(a,i),p=asNumber(l)+asNumber(a.Ae);return isInteger(l)&&isInteger(a.Ae)?__PRIVATE_toInteger(p):__PRIVATE_toDouble(a.serializer,p)})(t,e)}function __PRIVATE_applyTransformOperationToRemoteDocument(t,e,n){return t instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(t,e):t instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(t,e):n}function __PRIVATE_computeTransformOperationBaseValue(t,e){return t instanceof __PRIVATE_NumericIncrementTransformOperation?(function(r){return isInteger(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class __PRIVATE_ServerTimestampTransform extends TransformOperation{}class __PRIVATE_ArrayUnionTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayUnionTransformOperation(t,e){const n=__PRIVATE_coercedFieldValuesArray(e);for(const r of t.elements)n.some((a=>__PRIVATE_valueEquals(a,r)))||n.push(r);return{arrayValue:{values:n}}}class __PRIVATE_ArrayRemoveTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayRemoveTransformOperation(t,e){let n=__PRIVATE_coercedFieldValuesArray(e);for(const r of t.elements)n=n.filter((a=>!__PRIVATE_valueEquals(a,r)));return{arrayValue:{values:n}}}class __PRIVATE_NumericIncrementTransformOperation extends TransformOperation{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function asNumber(t){return __PRIVATE_normalizeNumber(t.integerValue||t.doubleValue)}function __PRIVATE_coercedFieldValuesArray(t){return isArray(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function __PRIVATE_fieldTransformEquals(t,e){return t.field.isEqual(e.field)&&(function(r,a){return r instanceof __PRIVATE_ArrayUnionTransformOperation&&a instanceof __PRIVATE_ArrayUnionTransformOperation||r instanceof __PRIVATE_ArrayRemoveTransformOperation&&a instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_arrayEquals(r.elements,a.elements,__PRIVATE_valueEquals):r instanceof __PRIVATE_NumericIncrementTransformOperation&&a instanceof __PRIVATE_NumericIncrementTransformOperation?__PRIVATE_valueEquals(r.Ae,a.Ae):r instanceof __PRIVATE_ServerTimestampTransform&&a instanceof __PRIVATE_ServerTimestampTransform})(t.transform,e.transform)}class MutationResult{constructor(e,n){this.version=e,this.transformResults=n}}class Precondition{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Precondition}static exists(e){return new Precondition(void 0,e)}static updateTime(e){return new Precondition(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function __PRIVATE_preconditionIsValidForDocument(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mutation{}function __PRIVATE_calculateOverlayMutation(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new __PRIVATE_DeleteMutation(t.key,Precondition.none()):new __PRIVATE_SetMutation(t.key,t.data,Precondition.none());{const n=t.data,r=ObjectValue.empty();let a=new SortedSet(FieldPath$1.comparator);for(let i of e.fields)if(!a.has(i)){let l=n.field(i);l===null&&i.length>1&&(i=i.popLast(),l=n.field(i)),l===null?r.delete(i):r.set(i,l),a=a.add(i)}return new __PRIVATE_PatchMutation(t.key,r,new FieldMask(a.toArray()),Precondition.none())}}function __PRIVATE_mutationApplyToRemoteDocument(t,e,n){t instanceof __PRIVATE_SetMutation?(function(a,i,l){const p=a.value.clone(),m=__PRIVATE_serverTransformResults(a.fieldTransforms,i,l.transformResults);p.setAll(m),i.convertToFoundDocument(l.version,p).setHasCommittedMutations()})(t,e,n):t instanceof __PRIVATE_PatchMutation?(function(a,i,l){if(!__PRIVATE_preconditionIsValidForDocument(a.precondition,i))return void i.convertToUnknownDocument(l.version);const p=__PRIVATE_serverTransformResults(a.fieldTransforms,i,l.transformResults),m=i.data;m.setAll(__PRIVATE_getPatch(a)),m.setAll(p),i.convertToFoundDocument(l.version,m).setHasCommittedMutations()})(t,e,n):(function(a,i,l){i.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function __PRIVATE_mutationApplyToLocalView(t,e,n,r){return t instanceof __PRIVATE_SetMutation?(function(i,l,p,m){if(!__PRIVATE_preconditionIsValidForDocument(i.precondition,l))return p;const s=i.value.clone(),h=__PRIVATE_localTransformResults(i.fieldTransforms,m,l);return s.setAll(h),l.convertToFoundDocument(l.version,s).setHasLocalMutations(),null})(t,e,n,r):t instanceof __PRIVATE_PatchMutation?(function(i,l,p,m){if(!__PRIVATE_preconditionIsValidForDocument(i.precondition,l))return p;const s=__PRIVATE_localTransformResults(i.fieldTransforms,m,l),h=l.data;return h.setAll(__PRIVATE_getPatch(i)),h.setAll(s),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),p===null?null:p.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((f=>f.field)))})(t,e,n,r):(function(i,l,p){return __PRIVATE_preconditionIsValidForDocument(i.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):p})(t,e,n)}function __PRIVATE_mutationExtractBaseValue(t,e){let n=null;for(const r of t.fieldTransforms){const a=e.data.field(r.field),i=__PRIVATE_computeTransformOperationBaseValue(r.transform,a||null);i!=null&&(n===null&&(n=ObjectValue.empty()),n.set(r.field,i))}return n||null}function __PRIVATE_mutationEquals(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&__PRIVATE_arrayEquals(r,a,((i,l)=>__PRIVATE_fieldTransformEquals(i,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class __PRIVATE_SetMutation extends Mutation{constructor(e,n,r,a=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class __PRIVATE_PatchMutation extends Mutation{constructor(e,n,r,a,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=a,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function __PRIVATE_getPatch(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function __PRIVATE_serverTransformResults(t,e,n){const r=new Map;__PRIVATE_hardAssert(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let a=0;a<n.length;a++){const i=t[a],l=i.transform,p=e.data.field(i.field);r.set(i.field,__PRIVATE_applyTransformOperationToRemoteDocument(l,p,n[a]))}return r}function __PRIVATE_localTransformResults(t,e,n){const r=new Map;for(const a of t){const i=a.transform,l=n.data.field(a.field);r.set(a.field,__PRIVATE_applyTransformOperationToLocalView(i,l,e))}return r}class __PRIVATE_DeleteMutation extends Mutation{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class __PRIVATE_VerifyMutation extends Mutation{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class MutationBatch{constructor(e,n,r,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const i=this.mutations[a];i.key.isEqual(e.key)&&__PRIVATE_mutationApplyToRemoteDocument(i,e,r[a])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=__PRIVATE_mutationApplyToLocalView(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=__PRIVATE_mutationApplyToLocalView(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=__PRIVATE_newMutationMap();return this.mutations.forEach((a=>{const i=e.get(a.key),l=i.overlayedDocument;let p=this.applyToLocalView(l,i.mutatedFields);p=n.has(a.key)?null:p;const m=__PRIVATE_calculateOverlayMutation(l,p);m!==null&&r.set(a.key,m),l.isValidDocument()||l.convertToNoDocument(SnapshotVersion.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),__PRIVATE_documentKeySet())}isEqual(e){return this.batchId===e.batchId&&__PRIVATE_arrayEquals(this.mutations,e.mutations,((n,r)=>__PRIVATE_mutationEquals(n,r)))&&__PRIVATE_arrayEquals(this.baseMutations,e.baseMutations,((n,r)=>__PRIVATE_mutationEquals(n,r)))}}class MutationBatchResult{constructor(e,n,r,a){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}static from(e,n,r){__PRIVATE_hardAssert(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return mt$1})();const i=e.mutations;for(let l=0;l<i.length;l++)a=a.insert(i[l].key,r[l].version);return new MutationBatchResult(e,n,r,a)}}class Overlay{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class ExistenceFilter{constructor(e,n){this.count=e,this.unchangedNames=n}}var pt,yt;function __PRIVATE_isPermanentError(t){switch(t){case N.OK:return fail(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return fail(15467,{code:t})}}function __PRIVATE_mapCodeFromRpcCode(t){if(t===void 0)return __PRIVATE_logError("GRPC error has no .code"),N.UNKNOWN;switch(t){case pt.OK:return N.OK;case pt.CANCELLED:return N.CANCELLED;case pt.UNKNOWN:return N.UNKNOWN;case pt.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case pt.INTERNAL:return N.INTERNAL;case pt.UNAVAILABLE:return N.UNAVAILABLE;case pt.UNAUTHENTICATED:return N.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case pt.NOT_FOUND:return N.NOT_FOUND;case pt.ALREADY_EXISTS:return N.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return N.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case pt.ABORTED:return N.ABORTED;case pt.OUT_OF_RANGE:return N.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return N.UNIMPLEMENTED;case pt.DATA_LOSS:return N.DATA_LOSS;default:return fail(39323,{code:t})}}(yt=pt||(pt={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";function __PRIVATE_newTextEncoder(){return new TextEncoder}const St$1=new Integer([4294967295,4294967295],0);function __PRIVATE_getMd5HashValue(t){const e=__PRIVATE_newTextEncoder().encode(t),n=new Md5;return n.update(e),new Uint8Array(n.digest())}function __PRIVATE_get64BitUints(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Integer([n,r],0),new Integer([a,i],0)]}class BloomFilter{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new __PRIVATE_BloomFilterError(`Invalid padding: ${n}`);if(r<0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new __PRIVATE_BloomFilterError(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Integer.fromNumber(this.ge)}ye(e,n,r){let a=e.add(n.multiply(Integer.fromNumber(r)));return a.compare(St$1)===1&&(a=new Integer([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=__PRIVATE_getMd5HashValue(e),[r,a]=__PRIVATE_get64BitUints(n);for(let i=0;i<this.hashCount;i++){const l=this.ye(r,a,i);if(!this.we(l))return!1}return!0}static create(e,n,r){const a=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),l=new BloomFilter(i,a,n);return r.forEach((p=>l.insert(p))),l}insert(e){if(this.ge===0)return;const n=__PRIVATE_getMd5HashValue(e),[r,a]=__PRIVATE_get64BitUints(n);for(let i=0;i<this.hashCount;i++){const l=this.ye(r,a,i);this.Se(l)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class __PRIVATE_BloomFilterError extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class RemoteEvent{constructor(e,n,r,a,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const a=new Map;return a.set(e,TargetChange.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new RemoteEvent(SnapshotVersion.min(),a,new SortedMap(__PRIVATE_primitiveComparator),__PRIVATE_mutableDocumentMap(),__PRIVATE_documentKeySet())}}class TargetChange{constructor(e,n,r,a,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new TargetChange(r,n,__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet())}}class __PRIVATE_DocumentWatchChange{constructor(e,n,r,a){this.be=e,this.removedTargetIds=n,this.key=r,this.De=a}}class __PRIVATE_ExistenceFilterChange{constructor(e,n){this.targetId=e,this.Ce=n}}class __PRIVATE_WatchTargetChange{constructor(e,n,r=ByteString.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=a}}class __PRIVATE_TargetState{constructor(){this.ve=0,this.Fe=__PRIVATE_snapshotChangesMap(),this.Me=ByteString.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=__PRIVATE_documentKeySet(),n=__PRIVATE_documentKeySet(),r=__PRIVATE_documentKeySet();return this.Fe.forEach(((a,i)=>{switch(i){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:r=r.add(a);break;default:fail(38017,{changeType:i})}})),new TargetChange(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=__PRIVATE_snapshotChangesMap()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,__PRIVATE_hardAssert(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class __PRIVATE_WatchChangeAggregator{constructor(e){this.Ge=e,this.ze=new Map,this.je=__PRIVATE_mutableDocumentMap(),this.Je=__PRIVATE_documentTargetMap(),this.He=__PRIVATE_documentTargetMap(),this.Ye=new SortedMap(__PRIVATE_primitiveComparator)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:fail(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,a)=>{this.rt(a)&&n(a)}))}st(e){const n=e.targetId,r=e.Ce.count,a=this.ot(n);if(a){const i=a.target;if(__PRIVATE_targetIsDocumentTarget(i))if(r===0){const l=new DocumentKey(i.path);this.et(n,l,MutableDocument.newNoDocument(l,SnapshotVersion.min()))}else __PRIVATE_hardAssert(r===1,20013,{expectedCount:r});else{const l=this._t(n);if(l!==r){const p=this.ut(e),m=p?this.ct(p,e,l):1;if(m!==0){this.it(n);const s=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,s)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:i=0}=n;let l,p;try{l=__PRIVATE_normalizeByteString(r).toUint8Array()}catch(m){if(m instanceof __PRIVATE_Base64DecodeError)return __PRIVATE_logWarn("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{p=new BloomFilter(l,a,i)}catch(m){return __PRIVATE_logWarn(m instanceof __PRIVATE_BloomFilterError?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return p.ge===0?null:p}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let a=0;return r.forEach((i=>{const l=this.Ge.ht(),p=`projects/${l.projectId}/databases/${l.database}/documents/${i.path.canonicalString()}`;e.mightContain(p)||(this.et(n,i,null),a++)})),a}Tt(e){const n=new Map;this.ze.forEach(((i,l)=>{const p=this.ot(l);if(p){if(i.current&&__PRIVATE_targetIsDocumentTarget(p.target)){const m=new DocumentKey(p.target.path);this.It(m).has(l)||this.Et(l,m)||this.et(l,m,MutableDocument.newNoDocument(m,e))}i.Be&&(n.set(l,i.ke()),i.qe())}}));let r=__PRIVATE_documentKeySet();this.He.forEach(((i,l)=>{let p=!0;l.forEachWhile((m=>{const s=this.ot(m);return!s||s.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(i))})),this.je.forEach(((i,l)=>l.setReadTime(e)));const a=new RemoteEvent(e,n,this.Ye,this.je,r);return this.je=__PRIVATE_mutableDocumentMap(),this.Je=__PRIVATE_documentTargetMap(),this.He=__PRIVATE_documentTargetMap(),this.Ye=new SortedMap(__PRIVATE_primitiveComparator),a}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,n)?a.Qe(n,1):a.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new __PRIVATE_TargetState,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new SortedSet(__PRIVATE_primitiveComparator),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new SortedSet(__PRIVATE_primitiveComparator),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||__PRIVATE_logDebug("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new __PRIVATE_TargetState),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function __PRIVATE_documentTargetMap(){return new SortedMap(DocumentKey.comparator)}function __PRIVATE_snapshotChangesMap(){return new SortedMap(DocumentKey.comparator)}const bt$1={asc:"ASCENDING",desc:"DESCENDING"},Dt$1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ct={and:"AND",or:"OR"};class JsonProtoSerializer{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function __PRIVATE_toInt32Proto(t,e){return t.useProto3Json||__PRIVATE_isNullOrUndefined(e)?e:{value:e}}function toTimestamp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function __PRIVATE_toBytes(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function __PRIVATE_toVersion(t,e){return toTimestamp(t,e.toTimestamp())}function __PRIVATE_fromVersion(t){return __PRIVATE_hardAssert(!!t,49232),SnapshotVersion.fromTimestamp((function(n){const r=__PRIVATE_normalizeTimestamp(n);return new Timestamp(r.seconds,r.nanos)})(t))}function __PRIVATE_toResourceName(t,e){return __PRIVATE_toResourcePath(t,e).canonicalString()}function __PRIVATE_toResourcePath(t,e){const n=(function(a){return new ResourcePath(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?n:n.child(e)}function __PRIVATE_fromResourceName(t){const e=ResourcePath.fromString(t);return __PRIVATE_hardAssert(__PRIVATE_isValidResourceName(e),10190,{key:e.toString()}),e}function __PRIVATE_toName(t,e){return __PRIVATE_toResourceName(t.databaseId,e.path)}function fromName(t,e){const n=__PRIVATE_fromResourceName(e);if(n.get(1)!==t.databaseId.projectId)throw new FirestoreError(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new FirestoreError(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new DocumentKey(__PRIVATE_extractLocalPathFromResourceName(n))}function __PRIVATE_toQueryPath(t,e){return __PRIVATE_toResourceName(t.databaseId,e)}function __PRIVATE_fromQueryPath(t){const e=__PRIVATE_fromResourceName(t);return e.length===4?ResourcePath.emptyPath():__PRIVATE_extractLocalPathFromResourceName(e)}function __PRIVATE_getEncodedDatabaseId(t){return new ResourcePath(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function __PRIVATE_extractLocalPathFromResourceName(t){return __PRIVATE_hardAssert(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function __PRIVATE_toMutationDocument(t,e,n){return{name:__PRIVATE_toName(t,e),fields:n.value.mapValue.fields}}function __PRIVATE_fromWatchChange(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(s){return s==="NO_CHANGE"?0:s==="ADD"?1:s==="REMOVE"?2:s==="CURRENT"?3:s==="RESET"?4:fail(39313,{state:s})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],i=(function(s,h){return s.useProto3Json?(__PRIVATE_hardAssert(h===void 0||typeof h=="string",58123),ByteString.fromBase64String(h||"")):(__PRIVATE_hardAssert(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ByteString.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,p=l&&(function(s){const h=s.code===void 0?N.UNKNOWN:__PRIVATE_mapCodeFromRpcCode(s.code);return new FirestoreError(h,s.message||"")})(l);n=new __PRIVATE_WatchTargetChange(r,a,i,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=fromName(t,r.document.name),i=__PRIVATE_fromVersion(r.document.updateTime),l=r.document.createTime?__PRIVATE_fromVersion(r.document.createTime):SnapshotVersion.min(),p=new ObjectValue({mapValue:{fields:r.document.fields}}),m=MutableDocument.newFoundDocument(a,i,l,p),s=r.targetIds||[],h=r.removedTargetIds||[];n=new __PRIVATE_DocumentWatchChange(s,h,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=fromName(t,r.document),i=r.readTime?__PRIVATE_fromVersion(r.readTime):SnapshotVersion.min(),l=MutableDocument.newNoDocument(a,i),p=r.removedTargetIds||[];n=new __PRIVATE_DocumentWatchChange([],p,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=fromName(t,r.document),i=r.removedTargetIds||[];n=new __PRIVATE_DocumentWatchChange([],i,a,null)}else{if(!("filter"in e))return fail(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:i}=r,l=new ExistenceFilter(a,i),p=r.targetId;n=new __PRIVATE_ExistenceFilterChange(p,l)}}return n}function toMutation(t,e){let n;if(e instanceof __PRIVATE_SetMutation)n={update:__PRIVATE_toMutationDocument(t,e.key,e.value)};else if(e instanceof __PRIVATE_DeleteMutation)n={delete:__PRIVATE_toName(t,e.key)};else if(e instanceof __PRIVATE_PatchMutation)n={update:__PRIVATE_toMutationDocument(t,e.key,e.data),updateMask:__PRIVATE_toDocumentMask(e.fieldMask)};else{if(!(e instanceof __PRIVATE_VerifyMutation))return fail(16599,{Vt:e.type});n={verify:__PRIVATE_toName(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,l){const p=l.transform;if(p instanceof __PRIVATE_ServerTimestampTransform)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof __PRIVATE_ArrayUnionTransformOperation)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof __PRIVATE_ArrayRemoveTransformOperation)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof __PRIVATE_NumericIncrementTransformOperation)return{fieldPath:l.field.canonicalString(),increment:p.Ae};throw fail(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(a,i){return i.updateTime!==void 0?{updateTime:__PRIVATE_toVersion(a,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:fail(27497)})(t,e.precondition)),n}function __PRIVATE_fromWriteResults(t,e){return t&&t.length>0?(__PRIVATE_hardAssert(e!==void 0,14353),t.map((n=>(function(a,i){let l=a.updateTime?__PRIVATE_fromVersion(a.updateTime):__PRIVATE_fromVersion(i);return l.isEqual(SnapshotVersion.min())&&(l=__PRIVATE_fromVersion(i)),new MutationResult(l,a.transformResults||[])})(n,e)))):[]}function __PRIVATE_toDocumentsTarget(t,e){return{documents:[__PRIVATE_toQueryPath(t,e.path)]}}function __PRIVATE_toQueryTarget(t,e){const n={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=__PRIVATE_toQueryPath(t,a);const i=(function(s){if(s.length!==0)return __PRIVATE_toFilter(CompositeFilter.create(s,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const l=(function(s){if(s.length!==0)return s.map((h=>(function(v){return{field:__PRIVATE_toFieldPathReference(v.field),direction:__PRIVATE_toDirection(v.dir)}})(h)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const p=__PRIVATE_toInt32Proto(t,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(s){return{before:s.inclusive,values:s.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(s){return{before:!s.inclusive,values:s.position}})(e.endAt)),{ft:n,parent:a}}function __PRIVATE_convertQueryTargetToQuery(t){let e=__PRIVATE_fromQueryPath(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let a=null;if(r>0){__PRIVATE_hardAssert(r===1,65062);const h=n.from[0];h.allDescendants?a=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=(function(f){const v=__PRIVATE_fromFilter(f);return v instanceof CompositeFilter&&__PRIVATE_compositeFilterIsFlatConjunction(v)?v.getFilters():[v]})(n.where));let l=[];n.orderBy&&(l=(function(f){return f.map((v=>(function(G){return new OrderBy(__PRIVATE_fromFieldPathReference(G.field),(function(X){switch(X){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(G.direction))})(v)))})(n.orderBy));let p=null;n.limit&&(p=(function(f){let v;return v=typeof f=="object"?f.value:f,__PRIVATE_isNullOrUndefined(v)?null:v})(n.limit));let m=null;n.startAt&&(m=(function(f){const v=!!f.before,I=f.values||[];return new Bound(I,v)})(n.startAt));let s=null;return n.endAt&&(s=(function(f){const v=!f.before,I=f.values||[];return new Bound(I,v)})(n.endAt)),__PRIVATE_newQuery(e,a,l,i,p,"F",m,s)}function __PRIVATE_toListenRequestLabels(t,e){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fail(28987,{purpose:a})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function __PRIVATE_fromFilter(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=__PRIVATE_fromFieldPathReference(n.unaryFilter.field);return FieldFilter.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=__PRIVATE_fromFieldPathReference(n.unaryFilter.field);return FieldFilter.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=__PRIVATE_fromFieldPathReference(n.unaryFilter.field);return FieldFilter.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=__PRIVATE_fromFieldPathReference(n.unaryFilter.field);return FieldFilter.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fail(61313);default:return fail(60726)}})(t):t.fieldFilter!==void 0?(function(n){return FieldFilter.create(__PRIVATE_fromFieldPathReference(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fail(58110);default:return fail(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return CompositeFilter.create(n.compositeFilter.filters.map((r=>__PRIVATE_fromFilter(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return fail(1026)}})(n.compositeFilter.op))})(t):fail(30097,{filter:t})}function __PRIVATE_toDirection(t){return bt$1[t]}function __PRIVATE_toOperatorName(t){return Dt$1[t]}function __PRIVATE_toCompositeOperatorName(t){return Ct[t]}function __PRIVATE_toFieldPathReference(t){return{fieldPath:t.canonicalString()}}function __PRIVATE_fromFieldPathReference(t){return FieldPath$1.fromServerFormat(t.fieldPath)}function __PRIVATE_toFilter(t){return t instanceof FieldFilter?(function(n){if(n.op==="=="){if(__PRIVATE_isNanValue(n.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(n.field),op:"IS_NAN"}};if(__PRIVATE_isNullValue(n.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(__PRIVATE_isNanValue(n.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(n.field),op:"IS_NOT_NAN"}};if(__PRIVATE_isNullValue(n.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:__PRIVATE_toFieldPathReference(n.field),op:__PRIVATE_toOperatorName(n.op),value:n.value}}})(t):t instanceof CompositeFilter?(function(n){const r=n.getFilters().map((a=>__PRIVATE_toFilter(a)));return r.length===1?r[0]:{compositeFilter:{op:__PRIVATE_toCompositeOperatorName(n.op),filters:r}}})(t):fail(54877,{filter:t})}function __PRIVATE_toDocumentMask(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function __PRIVATE_isValidResourceName(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class TargetData{constructor(e,n,r,a,i=SnapshotVersion.min(),l=SnapshotVersion.min(),p=ByteString.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=p,this.expectedCount=m}withSequenceNumber(e){return new TargetData(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class __PRIVATE_LocalSerializer{constructor(e){this.yt=e}}function __PRIVATE_fromBundledQuery(t){const e=__PRIVATE_convertQueryTargetToQuery({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?__PRIVATE_queryWithLimit(e,e.limit,"L"):e}class __PRIVATE_MemoryIndexManager{constructor(){this.Cn=new __PRIVATE_MemoryCollectionParentIndex}addToCollectionParentIndex(e,n){return this.Cn.add(n),PersistencePromise.resolve()}getCollectionParents(e,n){return PersistencePromise.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return PersistencePromise.resolve()}deleteFieldIndex(e,n){return PersistencePromise.resolve()}deleteAllFieldIndexes(e){return PersistencePromise.resolve()}createTargetIndexes(e,n){return PersistencePromise.resolve()}getDocumentsMatchingTarget(e,n){return PersistencePromise.resolve(null)}getIndexType(e,n){return PersistencePromise.resolve(0)}getFieldIndexes(e,n){return PersistencePromise.resolve([])}getNextCollectionGroupToUpdate(e){return PersistencePromise.resolve(null)}getMinOffset(e,n){return PersistencePromise.resolve(IndexOffset.min())}getMinOffsetFromCollectionGroup(e,n){return PersistencePromise.resolve(IndexOffset.min())}updateCollectionGroup(e,n,r){return PersistencePromise.resolve()}updateIndexEntries(e,n){return PersistencePromise.resolve()}}class __PRIVATE_MemoryCollectionParentIndex{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),a=this.index[n]||new SortedSet(ResourcePath.comparator),i=!a.has(r);return this.index[n]=a.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),a=this.index[n];return a&&a.has(r)}getEntries(e){return(this.index[e]||new SortedSet(ResourcePath.comparator)).toArray()}}const xt={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ot$1=41943040;class LruParams{static withCacheSize(e){return new LruParams(e,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}LruParams.DEFAULT_COLLECTION_PERCENTILE=10,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,LruParams.DEFAULT=new LruParams(Ot$1,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),LruParams.DISABLED=new LruParams(-1,0,0);class __PRIVATE_TargetIdGenerator{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new __PRIVATE_TargetIdGenerator(0)}static cr(){return new __PRIVATE_TargetIdGenerator(-1)}}const Nt$1="LruGarbageCollector",Bt$1=1048576;function __PRIVATE_bufferEntryComparator([t,e],[n,r]){const a=__PRIVATE_primitiveComparator(t,n);return a===0?__PRIVATE_primitiveComparator(e,r):a}class __PRIVATE_RollingSequenceNumberBuffer{constructor(e){this.Ir=e,this.buffer=new SortedSet(__PRIVATE_bufferEntryComparator),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();__PRIVATE_bufferEntryComparator(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class __PRIVATE_LruScheduler{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){__PRIVATE_logDebug(Nt$1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){__PRIVATE_isIndexedDbTransactionError(n)?__PRIVATE_logDebug(Nt$1,"Ignoring IndexedDB error during garbage collection: ",n):await __PRIVATE_ignoreIfPrimaryLeaseLoss(n)}await this.Vr(3e5)}))}}class __PRIVATE_LruGarbageCollectorImpl{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return PersistencePromise.resolve(__PRIVATE_ListenSequence.ce);const r=new __PRIVATE_RollingSequenceNumberBuffer(n);return this.mr.forEachTarget(e,(a=>r.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>r.Ar(a))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(__PRIVATE_logDebug("LruGarbageCollector","Garbage collection skipped; disabled"),PersistencePromise.resolve(xt)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(__PRIVATE_logDebug("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xt):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,a,i,l,p,m,s;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((f=>(f>this.params.maximumSequenceNumbersToCollect?(__PRIVATE_logDebug("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,l=Date.now(),this.nthSequenceNumber(e,a)))).next((f=>(r=f,p=Date.now(),this.removeTargets(e,r,n)))).next((f=>(i=f,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((f=>(s=Date.now(),__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-h}ms
	Determined least recently used ${a} in `+(p-l)+`ms
	Removed ${i} targets in `+(m-p)+`ms
	Removed ${f} documents in `+(s-m)+`ms
Total Duration: ${s-h}ms`),PersistencePromise.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:i,documentsRemoved:f}))))}}function __PRIVATE_newLruGarbageCollector(t,e){return new __PRIVATE_LruGarbageCollectorImpl(t,e)}class RemoteDocumentChangeBuffer{constructor(){this.changes=new ObjectMap((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,MutableDocument.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?PersistencePromise.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class OverlayedDocument{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class LocalDocumentsView{constructor(e,n,r,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,n)))).next((a=>(r!==null&&__PRIVATE_mutationApplyToLocalView(r.mutation,a,FieldMask.empty(),Timestamp.now()),a)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,__PRIVATE_documentKeySet()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=__PRIVATE_documentKeySet()){const a=__PRIVATE_newOverlayMap();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,r).next((i=>{let l=documentMap();return i.forEach(((p,m)=>{l=l.insert(p,m.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const r=__PRIVATE_newOverlayMap();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,__PRIVATE_documentKeySet())))}populateOverlays(e,n,r){const a=[];return r.forEach((i=>{n.has(i)||a.push(i)})),this.documentOverlayCache.getOverlays(e,a).next((i=>{i.forEach(((l,p)=>{n.set(l,p)}))}))}computeViews(e,n,r,a){let i=__PRIVATE_mutableDocumentMap();const l=__PRIVATE_newDocumentKeyMap(),p=(function(){return __PRIVATE_newDocumentKeyMap()})();return n.forEach(((m,s)=>{const h=r.get(s.key);a.has(s.key)&&(h===void 0||h.mutation instanceof __PRIVATE_PatchMutation)?i=i.insert(s.key,s):h!==void 0?(l.set(s.key,h.mutation.getFieldMask()),__PRIVATE_mutationApplyToLocalView(h.mutation,s,h.mutation.getFieldMask(),Timestamp.now())):l.set(s.key,FieldMask.empty())})),this.recalculateAndSaveOverlays(e,i).next((m=>(m.forEach(((s,h)=>l.set(s,h))),n.forEach(((s,h)=>p.set(s,new OverlayedDocument(h,l.get(s)??null)))),p)))}recalculateAndSaveOverlays(e,n){const r=__PRIVATE_newDocumentKeyMap();let a=new SortedMap(((l,p)=>l-p)),i=__PRIVATE_documentKeySet();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const p of l)p.keys().forEach((m=>{const s=n.get(m);if(s===null)return;let h=r.get(m)||FieldMask.empty();h=p.applyToLocalView(s,h),r.set(m,h);const f=(a.get(p.batchId)||__PRIVATE_documentKeySet()).add(m);a=a.insert(p.batchId,f)}))})).next((()=>{const l=[],p=a.getReverseIterator();for(;p.hasNext();){const m=p.getNext(),s=m.key,h=m.value,f=__PRIVATE_newMutationMap();h.forEach((v=>{if(!i.has(v)){const I=__PRIVATE_calculateOverlayMutation(n.get(v),r.get(v));I!==null&&f.set(v,I),i=i.add(v)}})),l.push(this.documentOverlayCache.saveOverlays(e,s,f))}return PersistencePromise.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,a){return(function(l){return DocumentKey.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):__PRIVATE_isCollectionGroupQuery(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,a):this.getDocumentsMatchingCollectionQuery(e,n,r,a)}getNextDocuments(e,n,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,a).next((i=>{const l=a-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,a-i.size):PersistencePromise.resolve(__PRIVATE_newOverlayMap());let p=U$1,m=i;return l.next((s=>PersistencePromise.forEach(s,((h,f)=>(p<f.largestBatchId&&(p=f.largestBatchId),i.get(h)?PersistencePromise.resolve():this.remoteDocumentCache.getEntry(e,h).next((v=>{m=m.insert(h,v)}))))).next((()=>this.populateOverlays(e,s,i))).next((()=>this.computeViews(e,m,s,__PRIVATE_documentKeySet()))).next((h=>({batchId:p,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new DocumentKey(n)).next((r=>{let a=documentMap();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,a){const i=n.collectionGroup;let l=documentMap();return this.indexManager.getCollectionParents(e,i).next((p=>PersistencePromise.forEach(p,(m=>{const s=(function(f,v){return new __PRIVATE_QueryImpl(v,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(n,m.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,r,a).next((h=>{h.forEach(((f,v)=>{l=l.insert(f,v)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,r,a){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((l=>(i=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,a)))).next((l=>{i.forEach(((m,s)=>{const h=s.getKey();l.get(h)===null&&(l=l.insert(h,MutableDocument.newInvalidDocument(h)))}));let p=documentMap();return l.forEach(((m,s)=>{const h=i.get(m);h!==void 0&&__PRIVATE_mutationApplyToLocalView(h.mutation,s,FieldMask.empty(),Timestamp.now()),__PRIVATE_queryMatches(n,s)&&(p=p.insert(m,s))})),p}))}}class __PRIVATE_MemoryBundleCache{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return PersistencePromise.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:__PRIVATE_fromVersion(a.createTime)}})(n)),PersistencePromise.resolve()}getNamedQuery(e,n){return PersistencePromise.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(a){return{name:a.name,query:__PRIVATE_fromBundledQuery(a.bundledQuery),readTime:__PRIVATE_fromVersion(a.readTime)}})(n)),PersistencePromise.resolve()}}class __PRIVATE_MemoryDocumentOverlayCache{constructor(){this.overlays=new SortedMap(DocumentKey.comparator),this.qr=new Map}getOverlay(e,n){return PersistencePromise.resolve(this.overlays.get(n))}getOverlays(e,n){const r=__PRIVATE_newOverlayMap();return PersistencePromise.forEach(n,(a=>this.getOverlay(e,a).next((i=>{i!==null&&r.set(a,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((a,i)=>{this.St(e,n,i)})),PersistencePromise.resolve()}removeOverlaysForBatchId(e,n,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),PersistencePromise.resolve()}getOverlaysForCollection(e,n,r){const a=__PRIVATE_newOverlayMap(),i=n.length+1,l=new DocumentKey(n.child("")),p=this.overlays.getIteratorFrom(l);for(;p.hasNext();){const m=p.getNext().value,s=m.getKey();if(!n.isPrefixOf(s.path))break;s.path.length===i&&m.largestBatchId>r&&a.set(m.getKey(),m)}return PersistencePromise.resolve(a)}getOverlaysForCollectionGroup(e,n,r,a){let i=new SortedMap(((s,h)=>s-h));const l=this.overlays.getIterator();for(;l.hasNext();){const s=l.getNext().value;if(s.getKey().getCollectionGroup()===n&&s.largestBatchId>r){let h=i.get(s.largestBatchId);h===null&&(h=__PRIVATE_newOverlayMap(),i=i.insert(s.largestBatchId,h)),h.set(s.getKey(),s)}}const p=__PRIVATE_newOverlayMap(),m=i.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((s,h)=>p.set(s,h))),!(p.size()>=a)););return PersistencePromise.resolve(p)}St(e,n,r){const a=this.overlays.get(r.key);if(a!==null){const l=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Overlay(n,r));let i=this.qr.get(n);i===void 0&&(i=__PRIVATE_documentKeySet(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}class __PRIVATE_MemoryGlobalsCache{constructor(){this.sessionToken=ByteString.EMPTY_BYTE_STRING}getSessionToken(e){return PersistencePromise.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,PersistencePromise.resolve()}}class __PRIVATE_ReferenceSet{constructor(){this.Qr=new SortedSet(__PRIVATE_DocReference.$r),this.Ur=new SortedSet(__PRIVATE_DocReference.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new __PRIVATE_DocReference(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new __PRIVATE_DocReference(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new DocumentKey(new ResourcePath([])),r=new __PRIVATE_DocReference(n,e),a=new __PRIVATE_DocReference(n,e+1),i=[];return this.Ur.forEachInRange([r,a],(l=>{this.Gr(l),i.push(l.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new DocumentKey(new ResourcePath([])),r=new __PRIVATE_DocReference(n,e),a=new __PRIVATE_DocReference(n,e+1);let i=__PRIVATE_documentKeySet();return this.Ur.forEachInRange([r,a],(l=>{i=i.add(l.key)})),i}containsKey(e){const n=new __PRIVATE_DocReference(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class __PRIVATE_DocReference{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return DocumentKey.comparator(e.key,n.key)||__PRIVATE_primitiveComparator(e.Yr,n.Yr)}static Kr(e,n){return __PRIVATE_primitiveComparator(e.Yr,n.Yr)||DocumentKey.comparator(e.key,n.key)}}class __PRIVATE_MemoryMutationQueue{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new SortedSet(__PRIVATE_DocReference.$r)}checkEmpty(e){return PersistencePromise.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,a){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new MutationBatch(i,n,r,a);this.mutationQueue.push(l);for(const p of a)this.Zr=this.Zr.add(new __PRIVATE_DocReference(p.key,i)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return PersistencePromise.resolve(l)}lookupMutationBatch(e,n){return PersistencePromise.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,a=this.ei(r),i=a<0?0:a;return PersistencePromise.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return PersistencePromise.resolve(this.mutationQueue.length===0?j:this.tr-1)}getAllMutationBatches(e){return PersistencePromise.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new __PRIVATE_DocReference(n,0),a=new __PRIVATE_DocReference(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,a],(l=>{const p=this.Xr(l.Yr);i.push(p)})),PersistencePromise.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new SortedSet(__PRIVATE_primitiveComparator);return n.forEach((a=>{const i=new __PRIVATE_DocReference(a,0),l=new __PRIVATE_DocReference(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,l],(p=>{r=r.add(p.Yr)}))})),PersistencePromise.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,a=r.length+1;let i=r;DocumentKey.isDocumentKey(i)||(i=i.child(""));const l=new __PRIVATE_DocReference(new DocumentKey(i),0);let p=new SortedSet(__PRIVATE_primitiveComparator);return this.Zr.forEachWhile((m=>{const s=m.key.path;return!!r.isPrefixOf(s)&&(s.length===a&&(p=p.add(m.Yr)),!0)}),l),PersistencePromise.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((r=>{const a=this.Xr(r);a!==null&&n.push(a)})),n}removeMutationBatch(e,n){__PRIVATE_hardAssert(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return PersistencePromise.forEach(n.mutations,(a=>{const i=new __PRIVATE_DocReference(a.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new __PRIVATE_DocReference(n,0),a=this.Zr.firstAfterOrEqual(r);return PersistencePromise.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,PersistencePromise.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class __PRIVATE_MemoryRemoteDocumentCacheImpl{constructor(e){this.ri=e,this.docs=(function(){return new SortedMap(DocumentKey.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,a=this.docs.get(r),i=a?a.size:0,l=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return PersistencePromise.resolve(r?r.document.mutableCopy():MutableDocument.newInvalidDocument(n))}getEntries(e,n){let r=__PRIVATE_mutableDocumentMap();return n.forEach((a=>{const i=this.docs.get(a);r=r.insert(a,i?i.document.mutableCopy():MutableDocument.newInvalidDocument(a))})),PersistencePromise.resolve(r)}getDocumentsMatchingQuery(e,n,r,a){let i=__PRIVATE_mutableDocumentMap();const l=n.path,p=new DocumentKey(l.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(p);for(;m.hasNext();){const{key:s,value:{document:h}}=m.getNext();if(!l.isPrefixOf(s.path))break;s.path.length>l.length+1||__PRIVATE_indexOffsetComparator(__PRIVATE_newIndexOffsetFromDocument(h),r)<=0||(a.has(h.key)||__PRIVATE_queryMatches(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return PersistencePromise.resolve(i)}getAllFromCollectionGroup(e,n,r,a){fail(9500)}ii(e,n){return PersistencePromise.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new __PRIVATE_MemoryRemoteDocumentChangeBuffer(this)}getSize(e){return PersistencePromise.resolve(this.size)}}class __PRIVATE_MemoryRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?n.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(r)})),PersistencePromise.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class __PRIVATE_MemoryTargetCache{constructor(e){this.persistence=e,this.si=new ObjectMap((n=>__PRIVATE_canonifyTarget(n)),__PRIVATE_targetEquals),this.lastRemoteSnapshotVersion=SnapshotVersion.min(),this.highestTargetId=0,this.oi=0,this._i=new __PRIVATE_ReferenceSet,this.targetCount=0,this.ai=__PRIVATE_TargetIdGenerator.ur()}forEachTarget(e,n){return this.si.forEach(((r,a)=>n(a))),PersistencePromise.resolve()}getLastRemoteSnapshotVersion(e){return PersistencePromise.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return PersistencePromise.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),PersistencePromise.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),PersistencePromise.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new __PRIVATE_TargetIdGenerator(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,PersistencePromise.resolve()}updateTargetData(e,n){return this.Pr(n),PersistencePromise.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,PersistencePromise.resolve()}removeTargets(e,n,r){let a=0;const i=[];return this.si.forEach(((l,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.si.delete(l),i.push(this.removeMatchingKeysForTargetId(e,p.targetId)),a++)})),PersistencePromise.waitFor(i).next((()=>a))}getTargetCount(e){return PersistencePromise.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return PersistencePromise.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),PersistencePromise.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const a=this.persistence.referenceDelegate,i=[];return a&&n.forEach((l=>{i.push(a.markPotentiallyOrphaned(e,l))})),PersistencePromise.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),PersistencePromise.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return PersistencePromise.resolve(r)}containsKey(e,n){return PersistencePromise.resolve(this._i.containsKey(n))}}class __PRIVATE_MemoryPersistence{constructor(e,n){this.ui={},this.overlays={},this.ci=new __PRIVATE_ListenSequence(0),this.li=!1,this.li=!0,this.hi=new __PRIVATE_MemoryGlobalsCache,this.referenceDelegate=e(this),this.Pi=new __PRIVATE_MemoryTargetCache(this),this.indexManager=new __PRIVATE_MemoryIndexManager,this.remoteDocumentCache=(function(a){return new __PRIVATE_MemoryRemoteDocumentCacheImpl(a)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new __PRIVATE_LocalSerializer(n),this.Ii=new __PRIVATE_MemoryBundleCache(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new __PRIVATE_MemoryDocumentOverlayCache,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new __PRIVATE_MemoryMutationQueue(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){__PRIVATE_logDebug("MemoryPersistence","Starting transaction:",e);const a=new __PRIVATE_MemoryTransaction(this.ci.next());return this.referenceDelegate.Ei(),r(a).next((i=>this.referenceDelegate.di(a).next((()=>i)))).toPromise().then((i=>(a.raiseOnCommittedEvent(),i)))}Ai(e,n){return PersistencePromise.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class __PRIVATE_MemoryTransaction extends PersistenceTransaction{constructor(e){super(),this.currentSequenceNumber=e}}class __PRIVATE_MemoryEagerDelegate{constructor(e){this.persistence=e,this.Ri=new __PRIVATE_ReferenceSet,this.Vi=null}static mi(e){return new __PRIVATE_MemoryEagerDelegate(e)}get fi(){if(this.Vi)return this.Vi;throw fail(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),PersistencePromise.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),PersistencePromise.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),PersistencePromise.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((a=>this.fi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((a=>{a.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PersistencePromise.forEach(this.fi,(r=>{const a=DocumentKey.fromPath(r);return this.gi(e,a).next((i=>{i||n.removeEntry(a,SnapshotVersion.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return PersistencePromise.or([()=>PersistencePromise.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class __PRIVATE_MemoryLruDelegate{constructor(e,n){this.persistence=e,this.pi=new ObjectMap((r=>__PRIVATE_encodeResourcePath(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=__PRIVATE_newLruGarbageCollector(this,n)}static mi(e,n){return new __PRIVATE_MemoryLruDelegate(e,n)}Ei(){}di(e){return PersistencePromise.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((a=>r+a))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return PersistencePromise.forEach(this.pi,((r,a)=>this.br(e,r,a).next((i=>i?PersistencePromise.resolve():n(a)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const a=this.persistence.getRemoteDocumentCache(),i=a.newChangeBuffer();return a.ii(e,(l=>this.br(e,l,n).next((p=>{p||(r++,i.removeEntry(l,SnapshotVersion.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),PersistencePromise.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),PersistencePromise.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),PersistencePromise.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),PersistencePromise.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=__PRIVATE_estimateByteSize(e.data.value)),n}br(e,n,r){return PersistencePromise.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.pi.get(n);return PersistencePromise.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class __PRIVATE_LocalViewChanges{constructor(e,n,r,a){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=a}static As(e,n){let r=__PRIVATE_documentKeySet(),a=__PRIVATE_documentKeySet();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:a=a.add(i.doc.key)}return new __PRIVATE_LocalViewChanges(e,n.fromCache,r,a)}}class QueryContext{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class __PRIVATE_QueryEngine{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return isSafari()?8:__PRIVATE_getAndroidVersion(getUA())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,a){const i={result:null};return this.ys(e,n).next((l=>{i.result=l})).next((()=>{if(!i.result)return this.ws(e,n,a,r).next((l=>{i.result=l}))})).next((()=>{if(i.result)return;const l=new QueryContext;return this.Ss(e,n,l).next((p=>{if(i.result=p,this.Vs)return this.bs(e,n,l,p.size)}))})).next((()=>i.result))}bs(e,n,r,a){return r.documentReadCount<this.fs?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","SDK will not create cache indexes for query:",__PRIVATE_stringifyQuery(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),PersistencePromise.resolve()):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Query:",__PRIVATE_stringifyQuery(n),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","The SDK decides to create cache indexes for query:",__PRIVATE_stringifyQuery(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,__PRIVATE_queryToTarget(n))):PersistencePromise.resolve())}ys(e,n){if(__PRIVATE_queryMatchesAllDocuments(n))return PersistencePromise.resolve(null);let r=__PRIVATE_queryToTarget(n);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=__PRIVATE_queryWithLimit(n,null,"F"),r=__PRIVATE_queryToTarget(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const l=__PRIVATE_documentKeySet(...i);return this.ps.getDocuments(e,l).next((p=>this.indexManager.getMinOffset(e,r).next((m=>{const s=this.Ds(n,p);return this.Cs(n,s,l,m.readTime)?this.ys(e,__PRIVATE_queryWithLimit(n,null,"F")):this.vs(e,s,n,m)}))))})))))}ws(e,n,r,a){return __PRIVATE_queryMatchesAllDocuments(n)||a.isEqual(SnapshotVersion.min())?PersistencePromise.resolve(null):this.ps.getDocuments(e,r).next((i=>{const l=this.Ds(n,i);return this.Cs(n,l,r,a)?PersistencePromise.resolve(null):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),__PRIVATE_stringifyQuery(n)),this.vs(e,l,n,__PRIVATE_newIndexOffsetSuccessorFromReadTime(a,U$1)).next((p=>p)))}))}Ds(e,n){let r=new SortedSet(__PRIVATE_newQueryComparator(e));return n.forEach(((a,i)=>{__PRIVATE_queryMatches(e,i)&&(r=r.add(i))})),r}Cs(e,n,r,a){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(a)>0)}Ss(e,n,r){return __PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Using full collection scan to execute query:",__PRIVATE_stringifyQuery(n)),this.ps.getDocumentsMatchingQuery(e,n,IndexOffset.min(),r)}vs(e,n,r,a){return this.ps.getDocumentsMatchingQuery(e,r,a).next((i=>(n.forEach((l=>{i=i.insert(l.key,l)})),i)))}}const Ut="LocalStore",Kt=3e8;class __PRIVATE_LocalStoreImpl{constructor(e,n,r,a){this.persistence=e,this.Fs=n,this.serializer=a,this.Ms=new SortedMap(__PRIVATE_primitiveComparator),this.xs=new ObjectMap((i=>__PRIVATE_canonifyTarget(i)),__PRIVATE_targetEquals),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LocalDocumentsView(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function __PRIVATE_newLocalStore(t,e,n,r){return new __PRIVATE_LocalStoreImpl(t,e,n,r)}async function __PRIVATE_localStoreHandleUserChange(t,e){const n=__PRIVATE_debugCast(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return n.mutationQueue.getAllMutationBatches(r).next((i=>(a=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const l=[],p=[];let m=__PRIVATE_documentKeySet();for(const s of a){l.push(s.batchId);for(const h of s.mutations)m=m.add(h.key)}for(const s of i){p.push(s.batchId);for(const h of s.mutations)m=m.add(h.key)}return n.localDocuments.getDocuments(r,m).next((s=>({Ls:s,removedBatchIds:l,addedBatchIds:p})))}))}))}function __PRIVATE_localStoreAcknowledgeBatch(t,e){const n=__PRIVATE_debugCast(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,m,s,h){const f=s.batch,v=f.keys();let I=PersistencePromise.resolve();return v.forEach((G=>{I=I.next((()=>h.getEntry(m,G))).next((W=>{const X=s.docVersions.get(G);__PRIVATE_hardAssert(X!==null,48541),W.version.compareTo(X)<0&&(f.applyToRemoteDocument(W,s),W.isValidDocument()&&(W.setReadTime(s.commitVersion),h.addEntry(W)))}))})),I.next((()=>p.mutationQueue.removeMutationBatch(m,f)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let m=__PRIVATE_documentKeySet();for(let s=0;s<p.mutationResults.length;++s)p.mutationResults[s].transformResults.length>0&&(m=m.add(p.batch.mutations[s].key));return m})(e)))).next((()=>n.localDocuments.getDocuments(r,a)))}))}function __PRIVATE_localStoreGetLastRemoteSnapshotVersion(t){const e=__PRIVATE_debugCast(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function __PRIVATE_localStoreApplyRemoteEventToLocalCache(t,e){const n=__PRIVATE_debugCast(t),r=e.snapshotVersion;let a=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});a=n.Ms;const p=[];e.targetChanges.forEach(((h,f)=>{const v=a.get(f);if(!v)return;p.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next((()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f))));let I=v.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?I=I.withResumeToken(ByteString.EMPTY_BYTE_STRING,SnapshotVersion.min()).withLastLimboFreeSnapshotVersion(SnapshotVersion.min()):h.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(h.resumeToken,r)),a=a.insert(f,I),(function(W,X,ge){return W.resumeToken.approximateByteSize()===0||X.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=Kt?!0:ge.addedDocuments.size+ge.modifiedDocuments.size+ge.removedDocuments.size>0})(v,I,h)&&p.push(n.Pi.updateTargetData(i,I))}));let m=__PRIVATE_mutableDocumentMap(),s=__PRIVATE_documentKeySet();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))})),p.push(__PRIVATE_populateDocumentChangeBuffer(i,l,e.documentUpdates).next((h=>{m=h.ks,s=h.qs}))),!r.isEqual(SnapshotVersion.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next((f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));p.push(h)}return PersistencePromise.waitFor(p).next((()=>l.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,m,s))).next((()=>m))})).then((i=>(n.Ms=a,i)))}function __PRIVATE_populateDocumentChangeBuffer(t,e,n){let r=__PRIVATE_documentKeySet(),a=__PRIVATE_documentKeySet();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let l=__PRIVATE_mutableDocumentMap();return n.forEach(((p,m)=>{const s=i.get(p);m.isFoundDocument()!==s.isFoundDocument()&&(a=a.add(p)),m.isNoDocument()&&m.version.isEqual(SnapshotVersion.min())?(e.removeEntry(p,m.readTime),l=l.insert(p,m)):!s.isValidDocument()||m.version.compareTo(s.version)>0||m.version.compareTo(s.version)===0&&s.hasPendingWrites?(e.addEntry(m),l=l.insert(p,m)):__PRIVATE_logDebug(Ut,"Ignoring outdated watch update for ",p,". Current version:",s.version," Watch version:",m.version)})),{ks:l,qs:a}}))}function __PRIVATE_localStoreGetNextMutationBatch(t,e){const n=__PRIVATE_debugCast(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=j),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function __PRIVATE_localStoreAllocateTarget(t,e){const n=__PRIVATE_debugCast(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return n.Pi.getTargetData(r,e).next((i=>i?(a=i,PersistencePromise.resolve(a)):n.Pi.allocateTargetId(r).next((l=>(a=new TargetData(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=n.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function __PRIVATE_localStoreReleaseTarget(t,e,n){const r=__PRIVATE_debugCast(t),a=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(l=>r.persistence.referenceDelegate.removeTarget(l,a)))}catch(l){if(!__PRIVATE_isIndexedDbTransactionError(l))throw l;__PRIVATE_logDebug(Ut,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(a.target)}function __PRIVATE_localStoreExecuteQuery(t,e,n){const r=__PRIVATE_debugCast(t);let a=SnapshotVersion.min(),i=__PRIVATE_documentKeySet();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(m,s,h){const f=__PRIVATE_debugCast(m),v=f.xs.get(h);return v!==void 0?PersistencePromise.resolve(f.Ms.get(v)):f.Pi.getTargetData(s,h)})(r,l,__PRIVATE_queryToTarget(e)).next((p=>{if(p)return a=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,p.targetId).next((m=>{i=m}))})).next((()=>r.Fs.getDocumentsMatchingQuery(l,e,n?a:SnapshotVersion.min(),n?i:__PRIVATE_documentKeySet()))).next((p=>(__PRIVATE_setMaxReadTime(r,__PRIVATE_queryCollectionGroup(e),p),{documents:p,Qs:i})))))}function __PRIVATE_setMaxReadTime(t,e,n){let r=t.Os.get(e)||SnapshotVersion.min();n.forEach(((a,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.Os.set(e,r)}class __PRIVATE_LocalClientState{constructor(){this.activeTargetIds=__PRIVATE_targetIdSet()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class __PRIVATE_MemorySharedClientState{constructor(){this.Mo=new __PRIVATE_LocalClientState,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new __PRIVATE_LocalClientState,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class __PRIVATE_NoopConnectivityMonitor{Oo(e){}shutdown(){}}const Jt$1="ConnectivityMonitor";class __PRIVATE_BrowserConnectivityMonitor{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){__PRIVATE_logDebug(Jt$1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){__PRIVATE_logDebug(Jt$1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Ht=null;function __PRIVATE_generateUniqueDebugId(){return Ht===null?Ht=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ht++,"0x"+Ht.toString(16)}const Yt="RestConnection",Zt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class __PRIVATE_RestConnection{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===lt$1?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(e,n,r,a,i){const l=__PRIVATE_generateUniqueDebugId(),p=this.zo(e,n.toUriEncodedString());__PRIVATE_logDebug(Yt,`Sending RPC '${e}' ${l}:`,p,r);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,i);const{host:s}=new URL(p),h=isCloudWorkstation(s);return this.Jo(e,p,m,r,h).then((f=>(__PRIVATE_logDebug(Yt,`Received RPC '${e}' ${l}: `,f),f)),(f=>{throw __PRIVATE_logWarn(Yt,`RPC '${e}' ${l} failed with error: `,f,"url: ",p,"request:",r),f}))}Ho(e,n,r,a,i,l){return this.Go(e,n,r,a,i)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+x})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,i)=>e[i]=a)),r&&r.headers.forEach(((a,i)=>e[i]=a))}zo(e,n){const r=Zt[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class __PRIVATE_StreamBridge{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Xt$1="WebChannelConnection";class __PRIVATE_WebChannelConnection extends __PRIVATE_RestConnection{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,a,i){const l=__PRIVATE_generateUniqueDebugId();return new Promise(((p,m)=>{const s=new XhrIo;s.setWithCredentials(!0),s.listenOnce(EventType.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case ErrorCode$1.NO_ERROR:const f=s.getResponseJson();__PRIVATE_logDebug(Xt$1,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(f)),p(f);break;case ErrorCode$1.TIMEOUT:__PRIVATE_logDebug(Xt$1,`RPC '${e}' ${l} timed out`),m(new FirestoreError(N.DEADLINE_EXCEEDED,"Request time out"));break;case ErrorCode$1.HTTP_ERROR:const v=s.getStatus();if(__PRIVATE_logDebug(Xt$1,`RPC '${e}' ${l} failed with status:`,v,"response text:",s.getResponseText()),v>0){let I=s.getResponseJson();Array.isArray(I)&&(I=I[0]);const G=I?.error;if(G&&G.status&&G.message){const W=(function(ge){const ie=ge.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(ie)>=0?ie:N.UNKNOWN})(G.status);m(new FirestoreError(W,G.message))}else m(new FirestoreError(N.UNKNOWN,"Server responded with status "+s.getStatus()))}else m(new FirestoreError(N.UNAVAILABLE,"Connection failed."));break;default:fail(9055,{l_:e,streamId:l,h_:s.getLastErrorCode(),P_:s.getLastError()})}}finally{__PRIVATE_logDebug(Xt$1,`RPC '${e}' ${l} completed.`)}}));const h=JSON.stringify(a);__PRIVATE_logDebug(Xt$1,`RPC '${e}' ${l} sending request:`,a),s.send(n,"POST",h,r,15)}))}T_(e,n,r){const a=__PRIVATE_generateUniqueDebugId(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=createWebChannelTransport(),p=getStatEventTarget(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;s!==void 0&&(m.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,n,r),m.encodeInitMessageHeaders=!0;const h=i.join("");__PRIVATE_logDebug(Xt$1,`Creating RPC '${e}' stream ${a}: ${h}`,m);const f=l.createWebChannel(h,m);this.I_(f);let v=!1,I=!1;const G=new __PRIVATE_StreamBridge({Yo:X=>{I?__PRIVATE_logDebug(Xt$1,`Not sending because RPC '${e}' stream ${a} is closed:`,X):(v||(__PRIVATE_logDebug(Xt$1,`Opening RPC '${e}' stream ${a} transport.`),f.open(),v=!0),__PRIVATE_logDebug(Xt$1,`RPC '${e}' stream ${a} sending:`,X),f.send(X))},Zo:()=>f.close()}),W=(X,ge,ie)=>{X.listen(ge,(Pe=>{try{ie(Pe)}catch(je){setTimeout((()=>{throw je}),0)}}))};return W(f,WebChannel.EventType.OPEN,(()=>{I||(__PRIVATE_logDebug(Xt$1,`RPC '${e}' stream ${a} transport opened.`),G.o_())})),W(f,WebChannel.EventType.CLOSE,(()=>{I||(I=!0,__PRIVATE_logDebug(Xt$1,`RPC '${e}' stream ${a} transport closed`),G.a_(),this.E_(f))})),W(f,WebChannel.EventType.ERROR,(X=>{I||(I=!0,__PRIVATE_logWarn(Xt$1,`RPC '${e}' stream ${a} transport errored. Name:`,X.name,"Message:",X.message),G.a_(new FirestoreError(N.UNAVAILABLE,"The operation could not be completed")))})),W(f,WebChannel.EventType.MESSAGE,(X=>{if(!I){const ge=X.data[0];__PRIVATE_hardAssert(!!ge,16349);const ie=ge,Pe=ie?.error||ie[0]?.error;if(Pe){__PRIVATE_logDebug(Xt$1,`RPC '${e}' stream ${a} received error:`,Pe);const je=Pe.status;let rt=(function(se){const he=pt[se];if(he!==void 0)return __PRIVATE_mapCodeFromRpcCode(he)})(je),qt=Pe.message;rt===void 0&&(rt=N.INTERNAL,qt="Unknown error status: "+je+" with message "+Pe.message),I=!0,G.a_(new FirestoreError(rt,qt)),f.close()}else __PRIVATE_logDebug(Xt$1,`RPC '${e}' stream ${a} received:`,ge),G.u_(ge)}})),W(p,Event.STAT_EVENT,(X=>{X.stat===Stat.PROXY?__PRIVATE_logDebug(Xt$1,`RPC '${e}' stream ${a} detected buffering proxy`):X.stat===Stat.NOPROXY&&__PRIVATE_logDebug(Xt$1,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{G.__()}),0),G}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function getDocument(){return typeof document<"u"?document:null}function __PRIVATE_newSerializer(t){return new JsonProtoSerializer(t,!0)}class __PRIVATE_ExponentialBackoff{constructor(e,n,r=1e3,a=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=a,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,n-r);a>0&&__PRIVATE_logDebug("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const en$1="PersistentStream";class __PRIVATE_PersistentStream{constructor(e,n,r,a,i,l,p,m){this.Mi=e,this.S_=r,this.b_=a,this.connection=i,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=p,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new __PRIVATE_ExponentialBackoff(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(__PRIVATE_logError(n.toString()),__PRIVATE_logError("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===n&&this.G_(r,a)}),(r=>{e((()=>{const a=new FirestoreError(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return __PRIVATE_logDebug(en$1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(__PRIVATE_logDebug(en$1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class __PRIVATE_PersistentListenStream extends __PRIVATE_PersistentStream{constructor(e,n,r,a,i,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,a,l),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=__PRIVATE_fromWatchChange(this.serializer,e),r=(function(i){if(!("targetChange"in i))return SnapshotVersion.min();const l=i.targetChange;return l.targetIds&&l.targetIds.length?SnapshotVersion.min():l.readTime?__PRIVATE_fromVersion(l.readTime):SnapshotVersion.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=__PRIVATE_getEncodedDatabaseId(this.serializer),n.addTarget=(function(i,l){let p;const m=l.target;if(p=__PRIVATE_targetIsDocumentTarget(m)?{documents:__PRIVATE_toDocumentsTarget(i,m)}:{query:__PRIVATE_toQueryTarget(i,m).ft},p.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){p.resumeToken=__PRIVATE_toBytes(i,l.resumeToken);const s=__PRIVATE_toInt32Proto(i,l.expectedCount);s!==null&&(p.expectedCount=s)}else if(l.snapshotVersion.compareTo(SnapshotVersion.min())>0){p.readTime=toTimestamp(i,l.snapshotVersion.toTimestamp());const s=__PRIVATE_toInt32Proto(i,l.expectedCount);s!==null&&(p.expectedCount=s)}return p})(this.serializer,e);const r=__PRIVATE_toListenRequestLabels(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=__PRIVATE_getEncodedDatabaseId(this.serializer),n.removeTarget=e,this.q_(n)}}class __PRIVATE_PersistentWriteStream extends __PRIVATE_PersistentStream{constructor(e,n,r,a,i,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,a,l),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return __PRIVATE_hardAssert(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,__PRIVATE_hardAssert(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){__PRIVATE_hardAssert(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=__PRIVATE_fromWriteResults(e.writeResults,e.commitTime),r=__PRIVATE_fromVersion(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=__PRIVATE_getEncodedDatabaseId(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>toMutation(this.serializer,r)))};this.q_(n)}}class Datastore{}class __PRIVATE_DatastoreImpl extends Datastore{constructor(e,n,r,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new FirestoreError(N.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,l])=>this.connection.Go(e,__PRIVATE_toResourcePath(n,r),a,i,l))).catch((i=>{throw i.name==="FirebaseError"?(i.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new FirestoreError(N.UNKNOWN,i.toString())}))}Ho(e,n,r,a,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,p])=>this.connection.Ho(e,__PRIVATE_toResourcePath(n,r),a,l,p,i))).catch((l=>{throw l.name==="FirebaseError"?(l.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new FirestoreError(N.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class __PRIVATE_OnlineStateTracker{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(__PRIVATE_logError(n),this.aa=!1):__PRIVATE_logDebug("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const tn$1="RemoteStore";class __PRIVATE_RemoteStoreImpl{constructor(e,n,r,a,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((l=>{r.enqueueAndForget((async()=>{__PRIVATE_canUseNetwork(this)&&(__PRIVATE_logDebug(tn$1,"Restarting streams for network reachability change."),await(async function(m){const s=__PRIVATE_debugCast(m);s.Ea.add(4),await __PRIVATE_disableNetworkInternal(s),s.Ra.set("Unknown"),s.Ea.delete(4),await __PRIVATE_enableNetworkInternal(s)})(this))}))})),this.Ra=new __PRIVATE_OnlineStateTracker(r,a)}}async function __PRIVATE_enableNetworkInternal(t){if(__PRIVATE_canUseNetwork(t))for(const e of t.da)await e(!0)}async function __PRIVATE_disableNetworkInternal(t){for(const e of t.da)await e(!1)}function __PRIVATE_remoteStoreListen(t,e){const n=__PRIVATE_debugCast(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),__PRIVATE_shouldStartWatchStream(n)?__PRIVATE_startWatchStream(n):__PRIVATE_ensureWatchStream(n).O_()&&__PRIVATE_sendWatchRequest(n,e))}function __PRIVATE_remoteStoreUnlisten(t,e){const n=__PRIVATE_debugCast(t),r=__PRIVATE_ensureWatchStream(n);n.Ia.delete(e),r.O_()&&__PRIVATE_sendUnwatchRequest(n,e),n.Ia.size===0&&(r.O_()?r.L_():__PRIVATE_canUseNetwork(n)&&n.Ra.set("Unknown"))}function __PRIVATE_sendWatchRequest(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(SnapshotVersion.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}__PRIVATE_ensureWatchStream(t).Y_(e)}function __PRIVATE_sendUnwatchRequest(t,e){t.Va.Ue(e),__PRIVATE_ensureWatchStream(t).Z_(e)}function __PRIVATE_startWatchStream(t){t.Va=new __PRIVATE_WatchChangeAggregator({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),__PRIVATE_ensureWatchStream(t).start(),t.Ra.ua()}function __PRIVATE_shouldStartWatchStream(t){return __PRIVATE_canUseNetwork(t)&&!__PRIVATE_ensureWatchStream(t).x_()&&t.Ia.size>0}function __PRIVATE_canUseNetwork(t){return __PRIVATE_debugCast(t).Ea.size===0}function __PRIVATE_cleanUpWatchStreamState(t){t.Va=void 0}async function __PRIVATE_onWatchStreamConnected(t){t.Ra.set("Online")}async function __PRIVATE_onWatchStreamOpen(t){t.Ia.forEach(((e,n)=>{__PRIVATE_sendWatchRequest(t,e)}))}async function __PRIVATE_onWatchStreamClose(t,e){__PRIVATE_cleanUpWatchStreamState(t),__PRIVATE_shouldStartWatchStream(t)?(t.Ra.ha(e),__PRIVATE_startWatchStream(t)):t.Ra.set("Unknown")}async function __PRIVATE_onWatchStreamChange(t,e,n){if(t.Ra.set("Online"),e instanceof __PRIVATE_WatchTargetChange&&e.state===2&&e.cause)try{await(async function(a,i){const l=i.cause;for(const p of i.targetIds)a.Ia.has(p)&&(await a.remoteSyncer.rejectListen(p,l),a.Ia.delete(p),a.Va.removeTarget(p))})(t,e)}catch(r){__PRIVATE_logDebug(tn$1,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await __PRIVATE_disableNetworkUntilRecovery(t,r)}else if(e instanceof __PRIVATE_DocumentWatchChange?t.Va.Ze(e):e instanceof __PRIVATE_ExistenceFilterChange?t.Va.st(e):t.Va.tt(e),!n.isEqual(SnapshotVersion.min()))try{const r=await __PRIVATE_localStoreGetLastRemoteSnapshotVersion(t.localStore);n.compareTo(r)>=0&&await(function(i,l){const p=i.Va.Tt(l);return p.targetChanges.forEach(((m,s)=>{if(m.resumeToken.approximateByteSize()>0){const h=i.Ia.get(s);h&&i.Ia.set(s,h.withResumeToken(m.resumeToken,l))}})),p.targetMismatches.forEach(((m,s)=>{const h=i.Ia.get(m);if(!h)return;i.Ia.set(m,h.withResumeToken(ByteString.EMPTY_BYTE_STRING,h.snapshotVersion)),__PRIVATE_sendUnwatchRequest(i,m);const f=new TargetData(h.target,m,s,h.sequenceNumber);__PRIVATE_sendWatchRequest(i,f)})),i.remoteSyncer.applyRemoteEvent(p)})(t,n)}catch(r){__PRIVATE_logDebug(tn$1,"Failed to raise snapshot:",r),await __PRIVATE_disableNetworkUntilRecovery(t,r)}}async function __PRIVATE_disableNetworkUntilRecovery(t,e,n){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;t.Ea.add(1),await __PRIVATE_disableNetworkInternal(t),t.Ra.set("Offline"),n||(n=()=>__PRIVATE_localStoreGetLastRemoteSnapshotVersion(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{__PRIVATE_logDebug(tn$1,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await __PRIVATE_enableNetworkInternal(t)}))}function __PRIVATE_executeWithRecovery(t,e){return e().catch((n=>__PRIVATE_disableNetworkUntilRecovery(t,n,e)))}async function __PRIVATE_fillWritePipeline(t){const e=__PRIVATE_debugCast(t),n=__PRIVATE_ensureWriteStream(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:j;for(;__PRIVATE_canAddToWritePipeline(e);)try{const a=await __PRIVATE_localStoreGetNextMutationBatch(e.localStore,r);if(a===null){e.Ta.length===0&&n.L_();break}r=a.batchId,__PRIVATE_addToWritePipeline(e,a)}catch(a){await __PRIVATE_disableNetworkUntilRecovery(e,a)}__PRIVATE_shouldStartWriteStream(e)&&__PRIVATE_startWriteStream(e)}function __PRIVATE_canAddToWritePipeline(t){return __PRIVATE_canUseNetwork(t)&&t.Ta.length<10}function __PRIVATE_addToWritePipeline(t,e){t.Ta.push(e);const n=__PRIVATE_ensureWriteStream(t);n.O_()&&n.X_&&n.ea(e.mutations)}function __PRIVATE_shouldStartWriteStream(t){return __PRIVATE_canUseNetwork(t)&&!__PRIVATE_ensureWriteStream(t).x_()&&t.Ta.length>0}function __PRIVATE_startWriteStream(t){__PRIVATE_ensureWriteStream(t).start()}async function __PRIVATE_onWriteStreamOpen(t){__PRIVATE_ensureWriteStream(t).ra()}async function __PRIVATE_onWriteHandshakeComplete(t){const e=__PRIVATE_ensureWriteStream(t);for(const n of t.Ta)e.ea(n.mutations)}async function __PRIVATE_onMutationResult(t,e,n){const r=t.Ta.shift(),a=MutationBatchResult.from(r,e,n);await __PRIVATE_executeWithRecovery(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await __PRIVATE_fillWritePipeline(t)}async function __PRIVATE_onWriteStreamClose(t,e){e&&__PRIVATE_ensureWriteStream(t).X_&&await(async function(r,a){if((function(l){return __PRIVATE_isPermanentError(l)&&l!==N.ABORTED})(a.code)){const i=r.Ta.shift();__PRIVATE_ensureWriteStream(r).B_(),await __PRIVATE_executeWithRecovery(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,a))),await __PRIVATE_fillWritePipeline(r)}})(t,e),__PRIVATE_shouldStartWriteStream(t)&&__PRIVATE_startWriteStream(t)}async function __PRIVATE_remoteStoreHandleCredentialChange(t,e){const n=__PRIVATE_debugCast(t);n.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(tn$1,"RemoteStore received new credentials");const r=__PRIVATE_canUseNetwork(n);n.Ea.add(3),await __PRIVATE_disableNetworkInternal(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await __PRIVATE_enableNetworkInternal(n)}async function __PRIVATE_remoteStoreApplyPrimaryState(t,e){const n=__PRIVATE_debugCast(t);e?(n.Ea.delete(2),await __PRIVATE_enableNetworkInternal(n)):e||(n.Ea.add(2),await __PRIVATE_disableNetworkInternal(n),n.Ra.set("Unknown"))}function __PRIVATE_ensureWatchStream(t){return t.ma||(t.ma=(function(n,r,a){const i=__PRIVATE_debugCast(n);return i.sa(),new __PRIVATE_PersistentListenStream(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)})(t.datastore,t.asyncQueue,{Xo:__PRIVATE_onWatchStreamConnected.bind(null,t),t_:__PRIVATE_onWatchStreamOpen.bind(null,t),r_:__PRIVATE_onWatchStreamClose.bind(null,t),H_:__PRIVATE_onWatchStreamChange.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),__PRIVATE_shouldStartWatchStream(t)?__PRIVATE_startWatchStream(t):t.Ra.set("Unknown")):(await t.ma.stop(),__PRIVATE_cleanUpWatchStreamState(t))}))),t.ma}function __PRIVATE_ensureWriteStream(t){return t.fa||(t.fa=(function(n,r,a){const i=__PRIVATE_debugCast(n);return i.sa(),new __PRIVATE_PersistentWriteStream(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:__PRIVATE_onWriteStreamOpen.bind(null,t),r_:__PRIVATE_onWriteStreamClose.bind(null,t),ta:__PRIVATE_onWriteHandshakeComplete.bind(null,t),na:__PRIVATE_onMutationResult.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await __PRIVATE_fillWritePipeline(t)):(await t.fa.stop(),t.Ta.length>0&&(__PRIVATE_logDebug(tn$1,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class DelayedOperation{constructor(e,n,r,a,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=i,this.deferred=new __PRIVATE_Deferred,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,a,i){const l=Date.now()+r,p=new DelayedOperation(e,n,l,a,i);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new FirestoreError(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __PRIVATE_wrapInUserErrorIfRecoverable(t,e){if(__PRIVATE_logError("AsyncQueue",`${e}: ${t}`),__PRIVATE_isIndexedDbTransactionError(t))return new FirestoreError(N.UNAVAILABLE,`${e}: ${t}`);throw t}class DocumentSet{static emptySet(e){return new DocumentSet(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||DocumentKey.comparator(n.key,r.key):(n,r)=>DocumentKey.comparator(n.key,r.key),this.keyedMap=documentMap(),this.sortedSet=new SortedMap(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof DocumentSet)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,i=r.getNext().key;if(!a.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new DocumentSet;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class __PRIVATE_DocumentChangeSet{constructor(){this.ga=new SortedMap(DocumentKey.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):fail(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class ViewSnapshot{constructor(e,n,r,a,i,l,p,m,s){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=i,this.fromCache=l,this.syncStateChanged=p,this.excludesMetadataChanges=m,this.hasCachedResults=s}static fromInitialDocuments(e,n,r,a,i){const l=[];return n.forEach((p=>{l.push({type:0,doc:p})})),new ViewSnapshot(e,n,DocumentSet.emptySet(n),l,r,a,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&__PRIVATE_queryEquals(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==r[a].type||!n[a].doc.isEqual(r[a].doc))return!1;return!0}}class __PRIVATE_QueryListenersInfo{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class __PRIVATE_EventManagerImpl{constructor(){this.queries=__PRIVATE_newQueriesObjectMap(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const a=__PRIVATE_debugCast(n),i=a.queries;a.queries=__PRIVATE_newQueriesObjectMap(),i.forEach(((l,p)=>{for(const m of p.Sa)m.onError(r)}))})(this,new FirestoreError(N.ABORTED,"Firestore shutting down"))}}function __PRIVATE_newQueriesObjectMap(){return new ObjectMap((t=>__PRIVATE_canonifyQuery(t)),__PRIVATE_queryEquals)}async function __PRIVATE_eventManagerListen(t,e){const n=__PRIVATE_debugCast(t);let r=3;const a=e.query;let i=n.queries.get(a);i?!i.ba()&&e.Da()&&(r=2):(i=new __PRIVATE_QueryListenersInfo,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(a,!0);break;case 1:i.wa=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(l){const p=__PRIVATE_wrapInUserErrorIfRecoverable(l,`Initialization of query '${__PRIVATE_stringifyQuery(e.query)}' failed`);return void e.onError(p)}n.queries.set(a,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&__PRIVATE_raiseSnapshotsInSyncEvent(n)}async function __PRIVATE_eventManagerUnlisten(t,e){const n=__PRIVATE_debugCast(t),r=e.query;let a=3;const i=n.queries.get(r);if(i){const l=i.Sa.indexOf(e);l>=0&&(i.Sa.splice(l,1),i.Sa.length===0?a=e.Da()?0:1:!i.ba()&&e.Da()&&(a=2))}switch(a){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function __PRIVATE_eventManagerOnWatchChange(t,e){const n=__PRIVATE_debugCast(t);let r=!1;for(const a of e){const i=a.query,l=n.queries.get(i);if(l){for(const p of l.Sa)p.Fa(a)&&(r=!0);l.wa=a}}r&&__PRIVATE_raiseSnapshotsInSyncEvent(n)}function __PRIVATE_eventManagerOnWatchError(t,e,n){const r=__PRIVATE_debugCast(t),a=r.queries.get(e);if(a)for(const i of a.Sa)i.onError(n);r.queries.delete(e)}function __PRIVATE_raiseSnapshotsInSyncEvent(t){t.Ca.forEach((e=>{e.next()}))}var nn,rn;(rn=nn||(nn={})).Ma="default",rn.Cache="cache";class __PRIVATE_QueryListener{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new ViewSnapshot(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ViewSnapshot.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==nn.Cache}}class __PRIVATE_AddedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_RemovedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_View{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=__PRIVATE_documentKeySet(),this.mutatedKeys=__PRIVATE_documentKeySet(),this.eu=__PRIVATE_newQueryComparator(e),this.tu=new DocumentSet(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new __PRIVATE_DocumentChangeSet,a=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,l=a,p=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,s=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((h,f)=>{const v=a.get(h),I=__PRIVATE_queryMatches(this.query,f)?f:null,G=!!v&&this.mutatedKeys.has(v.key),W=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let X=!1;v&&I?v.data.isEqual(I.data)?G!==W&&(r.track({type:3,doc:I}),X=!0):this.su(v,I)||(r.track({type:2,doc:I}),X=!0,(m&&this.eu(I,m)>0||s&&this.eu(I,s)<0)&&(p=!0)):!v&&I?(r.track({type:0,doc:I}),X=!0):v&&!I&&(r.track({type:1,doc:v}),X=!0,(m||s)&&(p=!0)),X&&(I?(l=l.add(I),i=W?i.add(h):i.delete(h)):(l=l.delete(h),i=i.delete(h)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const h=this.query.limitType==="F"?l.last():l.first();l=l.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:l,iu:r,Cs:p,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,a){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((h,f)=>(function(I,G){const W=X=>{switch(X){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fail(20277,{Rt:X})}};return W(I)-W(G)})(h.type,f.type)||this.eu(h.doc,f.doc))),this.ou(r),a=a??!1;const p=n&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,s=m!==this.Za;return this.Za=m,l.length!==0||s?{snapshot:new ViewSnapshot(this.query,e.tu,i,l,e.mutatedKeys,m===0,s,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new __PRIVATE_DocumentChangeSet,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=__PRIVATE_documentKeySet(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new __PRIVATE_RemovedLimboDocument(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new __PRIVATE_AddedLimboDocument(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=__PRIVATE_documentKeySet();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ViewSnapshot.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sn$1="SyncEngine";class __PRIVATE_QueryView{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class LimboResolution{constructor(e){this.key=e,this.hu=!1}}class __PRIVATE_SyncEngineImpl{constructor(e,n,r,a,i,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new ObjectMap((p=>__PRIVATE_canonifyQuery(p)),__PRIVATE_queryEquals),this.Iu=new Map,this.Eu=new Set,this.du=new SortedMap(DocumentKey.comparator),this.Au=new Map,this.Ru=new __PRIVATE_ReferenceSet,this.Vu={},this.mu=new Map,this.fu=__PRIVATE_TargetIdGenerator.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function __PRIVATE_syncEngineListen(t,e,n=!0){const r=__PRIVATE_ensureWatchCallbacks(t);let a;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),a=i.view.lu()):a=await __PRIVATE_allocateTargetAndMaybeListen(r,e,n,!0),a}async function __PRIVATE_triggerRemoteStoreListen(t,e){const n=__PRIVATE_ensureWatchCallbacks(t);await __PRIVATE_allocateTargetAndMaybeListen(n,e,!0,!1)}async function __PRIVATE_allocateTargetAndMaybeListen(t,e,n,r){const a=await __PRIVATE_localStoreAllocateTarget(t.localStore,__PRIVATE_queryToTarget(e)),i=a.targetId,l=t.sharedClientState.addLocalQueryTarget(i,n);let p;return r&&(p=await __PRIVATE_initializeViewAndComputeSnapshot(t,e,i,l==="current",a.resumeToken)),t.isPrimaryClient&&n&&__PRIVATE_remoteStoreListen(t.remoteStore,a),p}async function __PRIVATE_initializeViewAndComputeSnapshot(t,e,n,r,a){t.pu=(f,v,I)=>(async function(W,X,ge,ie){let Pe=X.view.ru(ge);Pe.Cs&&(Pe=await __PRIVATE_localStoreExecuteQuery(W.localStore,X.query,!1).then((({documents:de})=>X.view.ru(de,Pe))));const je=ie&&ie.targetChanges.get(X.targetId),rt=ie&&ie.targetMismatches.get(X.targetId)!=null,qt=X.view.applyChanges(Pe,W.isPrimaryClient,je,rt);return __PRIVATE_updateTrackedLimbos(W,X.targetId,qt.au),qt.snapshot})(t,f,v,I);const i=await __PRIVATE_localStoreExecuteQuery(t.localStore,e,!0),l=new __PRIVATE_View(e,i.Qs),p=l.ru(i.documents),m=TargetChange.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",a),s=l.applyChanges(p,t.isPrimaryClient,m);__PRIVATE_updateTrackedLimbos(t,n,s.au);const h=new __PRIVATE_QueryView(e,n,l);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),s.snapshot}async function __PRIVATE_syncEngineUnlisten(t,e,n){const r=__PRIVATE_debugCast(t),a=r.Tu.get(e),i=r.Iu.get(a.targetId);if(i.length>1)return r.Iu.set(a.targetId,i.filter((l=>!__PRIVATE_queryEquals(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await __PRIVATE_localStoreReleaseTarget(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),n&&__PRIVATE_remoteStoreUnlisten(r.remoteStore,a.targetId),__PRIVATE_removeAndCleanupTarget(r,a.targetId)})).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)):(__PRIVATE_removeAndCleanupTarget(r,a.targetId),await __PRIVATE_localStoreReleaseTarget(r.localStore,a.targetId,!0))}async function __PRIVATE_triggerRemoteStoreUnlisten(t,e){const n=__PRIVATE_debugCast(t),r=n.Tu.get(e),a=n.Iu.get(r.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),__PRIVATE_remoteStoreUnlisten(n.remoteStore,r.targetId))}async function __PRIVATE_syncEngineWrite(t,e,n){const r=__PRIVATE_syncEngineEnsureWriteCallbacks(t);try{const a=await(function(l,p){const m=__PRIVATE_debugCast(l),s=Timestamp.now(),h=p.reduce(((I,G)=>I.add(G.key)),__PRIVATE_documentKeySet());let f,v;return m.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let G=__PRIVATE_mutableDocumentMap(),W=__PRIVATE_documentKeySet();return m.Ns.getEntries(I,h).next((X=>{G=X,G.forEach(((ge,ie)=>{ie.isValidDocument()||(W=W.add(ge))}))})).next((()=>m.localDocuments.getOverlayedDocuments(I,G))).next((X=>{f=X;const ge=[];for(const ie of p){const Pe=__PRIVATE_mutationExtractBaseValue(ie,f.get(ie.key).overlayedDocument);Pe!=null&&ge.push(new __PRIVATE_PatchMutation(ie.key,Pe,__PRIVATE_extractFieldMask(Pe.value.mapValue),Precondition.exists(!0)))}return m.mutationQueue.addMutationBatch(I,s,ge,p)})).next((X=>{v=X;const ge=X.applyToLocalDocumentSet(f,W);return m.documentOverlayCache.saveOverlays(I,X.batchId,ge)}))})).then((()=>({batchId:v.batchId,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(f)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(l,p,m){let s=l.Vu[l.currentUser.toKey()];s||(s=new SortedMap(__PRIVATE_primitiveComparator)),s=s.insert(p,m),l.Vu[l.currentUser.toKey()]=s})(r,a.batchId,n),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(r,a.changes),await __PRIVATE_fillWritePipeline(r.remoteStore)}catch(a){const i=__PRIVATE_wrapInUserErrorIfRecoverable(a,"Failed to persist write");n.reject(i)}}async function __PRIVATE_syncEngineApplyRemoteEvent(t,e){const n=__PRIVATE_debugCast(t);try{const r=await __PRIVATE_localStoreApplyRemoteEventToLocalCache(n.localStore,e);e.targetChanges.forEach(((a,i)=>{const l=n.Au.get(i);l&&(__PRIVATE_hardAssert(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?l.hu=!0:a.modifiedDocuments.size>0?__PRIVATE_hardAssert(l.hu,14607):a.removedDocuments.size>0&&(__PRIVATE_hardAssert(l.hu,42227),l.hu=!1))})),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(n,r,e)}catch(r){await __PRIVATE_ignoreIfPrimaryLeaseLoss(r)}}function __PRIVATE_syncEngineApplyOnlineStateChange(t,e,n){const r=__PRIVATE_debugCast(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const a=[];r.Tu.forEach(((i,l)=>{const p=l.view.va(e);p.snapshot&&a.push(p.snapshot)})),(function(l,p){const m=__PRIVATE_debugCast(l);m.onlineState=p;let s=!1;m.queries.forEach(((h,f)=>{for(const v of f.Sa)v.va(p)&&(s=!0)})),s&&__PRIVATE_raiseSnapshotsInSyncEvent(m)})(r.eventManager,e),a.length&&r.Pu.H_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function __PRIVATE_syncEngineRejectListen(t,e,n){const r=__PRIVATE_debugCast(t);r.sharedClientState.updateQueryState(e,"rejected",n);const a=r.Au.get(e),i=a&&a.key;if(i){let l=new SortedMap(DocumentKey.comparator);l=l.insert(i,MutableDocument.newNoDocument(i,SnapshotVersion.min()));const p=__PRIVATE_documentKeySet().add(i),m=new RemoteEvent(SnapshotVersion.min(),new Map,new SortedMap(__PRIVATE_primitiveComparator),l,p);await __PRIVATE_syncEngineApplyRemoteEvent(r,m),r.du=r.du.remove(i),r.Au.delete(e),__PRIVATE_pumpEnqueuedLimboResolutions(r)}else await __PRIVATE_localStoreReleaseTarget(r.localStore,e,!1).then((()=>__PRIVATE_removeAndCleanupTarget(r,e,n))).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)}async function __PRIVATE_syncEngineApplySuccessfulWrite(t,e){const n=__PRIVATE_debugCast(t),r=e.batch.batchId;try{const a=await __PRIVATE_localStoreAcknowledgeBatch(n.localStore,e);__PRIVATE_processUserCallback(n,r,null),__PRIVATE_triggerPendingWritesCallbacks(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(n,a)}catch(a){await __PRIVATE_ignoreIfPrimaryLeaseLoss(a)}}async function __PRIVATE_syncEngineRejectFailedWrite(t,e,n){const r=__PRIVATE_debugCast(t);try{const a=await(function(l,p){const m=__PRIVATE_debugCast(l);return m.persistence.runTransaction("Reject batch","readwrite-primary",(s=>{let h;return m.mutationQueue.lookupMutationBatch(s,p).next((f=>(__PRIVATE_hardAssert(f!==null,37113),h=f.keys(),m.mutationQueue.removeMutationBatch(s,f)))).next((()=>m.mutationQueue.performConsistencyCheck(s))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(s,h,p))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,h))).next((()=>m.localDocuments.getDocuments(s,h)))}))})(r.localStore,e);__PRIVATE_processUserCallback(r,e,n),__PRIVATE_triggerPendingWritesCallbacks(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(r,a)}catch(a){await __PRIVATE_ignoreIfPrimaryLeaseLoss(a)}}function __PRIVATE_triggerPendingWritesCallbacks(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function __PRIVATE_processUserCallback(t,e,n){const r=__PRIVATE_debugCast(t);let a=r.Vu[r.currentUser.toKey()];if(a){const i=a.get(e);i&&(n?i.reject(n):i.resolve(),a=a.remove(e)),r.Vu[r.currentUser.toKey()]=a}}function __PRIVATE_removeAndCleanupTarget(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||__PRIVATE_removeLimboTarget(t,r)}))}function __PRIVATE_removeLimboTarget(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(__PRIVATE_remoteStoreUnlisten(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),__PRIVATE_pumpEnqueuedLimboResolutions(t))}function __PRIVATE_updateTrackedLimbos(t,e,n){for(const r of n)r instanceof __PRIVATE_AddedLimboDocument?(t.Ru.addReference(r.key,e),__PRIVATE_trackLimboChange(t,r)):r instanceof __PRIVATE_RemovedLimboDocument?(__PRIVATE_logDebug(sn$1,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||__PRIVATE_removeLimboTarget(t,r.key)):fail(19791,{wu:r})}function __PRIVATE_trackLimboChange(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(__PRIVATE_logDebug(sn$1,"New document in limbo: "+n),t.Eu.add(r),__PRIVATE_pumpEnqueuedLimboResolutions(t))}function __PRIVATE_pumpEnqueuedLimboResolutions(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new DocumentKey(ResourcePath.fromString(e)),r=t.fu.next();t.Au.set(r,new LimboResolution(n)),t.du=t.du.insert(n,r),__PRIVATE_remoteStoreListen(t.remoteStore,new TargetData(__PRIVATE_queryToTarget(__PRIVATE_newQueryForPath(n.path)),r,"TargetPurposeLimboResolution",__PRIVATE_ListenSequence.ce))}}async function __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(t,e,n){const r=__PRIVATE_debugCast(t),a=[],i=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,m)=>{l.push(r.pu(m,e,n).then((s=>{if((s||n)&&r.isPrimaryClient){const h=s?!s.fromCache:n?.targetChanges.get(m.targetId)?.current;r.sharedClientState.updateQueryState(m.targetId,h?"current":"not-current")}if(s){a.push(s);const h=__PRIVATE_LocalViewChanges.As(m.targetId,s);i.push(h)}})))})),await Promise.all(l),r.Pu.H_(a),await(async function(m,s){const h=__PRIVATE_debugCast(m);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(f=>PersistencePromise.forEach(s,(v=>PersistencePromise.forEach(v.Es,(I=>h.persistence.referenceDelegate.addReference(f,v.targetId,I))).next((()=>PersistencePromise.forEach(v.ds,(I=>h.persistence.referenceDelegate.removeReference(f,v.targetId,I)))))))))}catch(f){if(!__PRIVATE_isIndexedDbTransactionError(f))throw f;__PRIVATE_logDebug(Ut,"Failed to update sequence numbers: "+f)}for(const f of s){const v=f.targetId;if(!f.fromCache){const I=h.Ms.get(v),G=I.snapshotVersion,W=I.withLastLimboFreeSnapshotVersion(G);h.Ms=h.Ms.insert(v,W)}}})(r.localStore,i))}async function __PRIVATE_syncEngineHandleCredentialChange(t,e){const n=__PRIVATE_debugCast(t);if(!n.currentUser.isEqual(e)){__PRIVATE_logDebug(sn$1,"User change. New user:",e.toKey());const r=await __PRIVATE_localStoreHandleUserChange(n.localStore,e);n.currentUser=e,(function(i,l){i.mu.forEach((p=>{p.forEach((m=>{m.reject(new FirestoreError(N.CANCELLED,l))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(n,r.Ls)}}function __PRIVATE_syncEngineGetRemoteKeysForTarget(t,e){const n=__PRIVATE_debugCast(t),r=n.Au.get(e);if(r&&r.hu)return __PRIVATE_documentKeySet().add(r.key);{let a=__PRIVATE_documentKeySet();const i=n.Iu.get(e);if(!i)return a;for(const l of i){const p=n.Tu.get(l);a=a.unionWith(p.view.nu)}return a}}function __PRIVATE_ensureWatchCallbacks(t){const e=__PRIVATE_debugCast(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=__PRIVATE_syncEngineApplyRemoteEvent.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=__PRIVATE_syncEngineGetRemoteKeysForTarget.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=__PRIVATE_syncEngineRejectListen.bind(null,e),e.Pu.H_=__PRIVATE_eventManagerOnWatchChange.bind(null,e.eventManager),e.Pu.yu=__PRIVATE_eventManagerOnWatchError.bind(null,e.eventManager),e}function __PRIVATE_syncEngineEnsureWriteCallbacks(t){const e=__PRIVATE_debugCast(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=__PRIVATE_syncEngineApplySuccessfulWrite.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=__PRIVATE_syncEngineRejectFailedWrite.bind(null,e),e}class __PRIVATE_MemoryOfflineComponentProvider{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=__PRIVATE_newSerializer(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return __PRIVATE_newLocalStore(this.persistence,new __PRIVATE_QueryEngine,e.initialUser,this.serializer)}Cu(e){return new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.mi,this.serializer)}Du(e){return new __PRIVATE_MemorySharedClientState}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}__PRIVATE_MemoryOfflineComponentProvider.provider={build:()=>new __PRIVATE_MemoryOfflineComponentProvider};class __PRIVATE_LruGcMemoryOfflineComponentProvider extends __PRIVATE_MemoryOfflineComponentProvider{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){__PRIVATE_hardAssert(this.persistence.referenceDelegate instanceof __PRIVATE_MemoryLruDelegate,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new __PRIVATE_LruScheduler(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?LruParams.withCacheSize(this.cacheSizeBytes):LruParams.DEFAULT;return new __PRIVATE_MemoryPersistence((r=>__PRIVATE_MemoryLruDelegate.mi(r,n)),this.serializer)}}class OnlineComponentProvider{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=__PRIVATE_syncEngineHandleCredentialChange.bind(null,this.syncEngine),await __PRIVATE_remoteStoreApplyPrimaryState(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new __PRIVATE_EventManagerImpl})()}createDatastore(e){const n=__PRIVATE_newSerializer(e.databaseInfo.databaseId),r=(function(i){return new __PRIVATE_WebChannelConnection(i)})(e.databaseInfo);return(function(i,l,p,m){return new __PRIVATE_DatastoreImpl(i,l,p,m)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,a,i,l,p){return new __PRIVATE_RemoteStoreImpl(r,a,i,l,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,n,0)),(function(){return __PRIVATE_BrowserConnectivityMonitor.v()?new __PRIVATE_BrowserConnectivityMonitor:new __PRIVATE_NoopConnectivityMonitor})())}createSyncEngine(e,n){return(function(a,i,l,p,m,s,h){const f=new __PRIVATE_SyncEngineImpl(a,i,l,p,m,s);return h&&(f.gu=!0),f})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=__PRIVATE_debugCast(n);__PRIVATE_logDebug(tn$1,"RemoteStore shutting down."),r.Ea.add(5),await __PRIVATE_disableNetworkInternal(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}OnlineComponentProvider.provider={build:()=>new OnlineComponentProvider};class __PRIVATE_AsyncObserver{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):__PRIVATE_logError("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const on="FirestoreClient";class FirestoreClient{constructor(e,n,r,a,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=User.UNAUTHENTICATED,this.clientId=__PRIVATE_AutoId.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async l=>{__PRIVATE_logDebug(on,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(__PRIVATE_logDebug(on,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new __PRIVATE_Deferred;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=__PRIVATE_wrapInUserErrorIfRecoverable(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function __PRIVATE_setOfflineComponentProvider(t,e){t.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(on,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async a=>{r.isEqual(a)||(await __PRIVATE_localStoreHandleUserChange(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function __PRIVATE_setOnlineComponentProvider(t,e){t.asyncQueue.verifyOperationInProgress();const n=await __PRIVATE_ensureOfflineComponents(t);__PRIVATE_logDebug(on,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,a)=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,a))),t._onlineComponents=e}async function __PRIVATE_ensureOfflineComponents(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){__PRIVATE_logDebug(on,"Using user provided OfflineComponentProvider");try{await __PRIVATE_setOfflineComponentProvider(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(a){return a.name==="FirebaseError"?a.code===N.FAILED_PRECONDITION||a.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;__PRIVATE_logWarn("Error using user provided cache. Falling back to memory cache: "+n),await __PRIVATE_setOfflineComponentProvider(t,new __PRIVATE_MemoryOfflineComponentProvider)}}else __PRIVATE_logDebug(on,"Using default OfflineComponentProvider"),await __PRIVATE_setOfflineComponentProvider(t,new __PRIVATE_LruGcMemoryOfflineComponentProvider(void 0));return t._offlineComponents}async function __PRIVATE_ensureOnlineComponents(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(__PRIVATE_logDebug(on,"Using user provided OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(t,t._uninitializedComponentsProvider._online)):(__PRIVATE_logDebug(on,"Using default OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(t,new OnlineComponentProvider))),t._onlineComponents}function __PRIVATE_getSyncEngine(t){return __PRIVATE_ensureOnlineComponents(t).then((e=>e.syncEngine))}async function __PRIVATE_getEventManager(t){const e=await __PRIVATE_ensureOnlineComponents(t),n=e.eventManager;return n.onListen=__PRIVATE_syncEngineListen.bind(null,e.syncEngine),n.onUnlisten=__PRIVATE_syncEngineUnlisten.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=__PRIVATE_triggerRemoteStoreListen.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=__PRIVATE_triggerRemoteStoreUnlisten.bind(null,e.syncEngine),n}function __PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(t,e,n={}){const r=new __PRIVATE_Deferred;return t.asyncQueue.enqueueAndForget((async()=>(function(i,l,p,m,s){const h=new __PRIVATE_AsyncObserver({next:v=>{h.Nu(),l.enqueueAndForget((()=>__PRIVATE_eventManagerUnlisten(i,f))),v.fromCache&&m.source==="server"?s.reject(new FirestoreError(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(v)},error:v=>s.reject(v)}),f=new __PRIVATE_QueryListener(p,h,{includeMetadataChanges:!0,qa:!0});return __PRIVATE_eventManagerListen(i,f)})(await __PRIVATE_getEventManager(t),t.asyncQueue,e,n,r))),r.promise}function __PRIVATE_cloneLongPollingOptions(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const _n=new Map;const an$1="firestore.googleapis.com",un$1=!0;class FirestoreSettingsImpl{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new FirestoreError(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=an$1,this.ssl=un$1}else this.host=e.host,this.ssl=e.ssl??un$1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ot$1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Bt$1)throw new FirestoreError(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}__PRIVATE_validateIsNotUsedTogether("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__PRIVATE_cloneLongPollingOptions(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new FirestoreError(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new FirestoreError(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new FirestoreError(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Firestore$1{constructor(e,n,r,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FirestoreSettingsImpl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new FirestoreError(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new FirestoreError(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FirestoreSettingsImpl(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new __PRIVATE_EmptyAuthCredentialsProvider;switch(r.type){case"firstParty":return new __PRIVATE_FirstPartyAuthCredentialsProvider(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new FirestoreError(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=_n.get(n);r&&(__PRIVATE_logDebug("ComponentProvider","Removing Datastore"),_n.delete(n),r.terminate())})(this),Promise.resolve()}}function connectFirestoreEmulator(t,e,n,r={}){t=__PRIVATE_cast(t,Firestore$1);const a=isCloudWorkstation(e),i=t._getSettings(),l={...i,emulatorOptions:t._getEmulatorOptions()},p=`${e}:${n}`;a&&(pingServer(`https://${p}`),updateEmulatorBanner("Firestore",!0)),i.host!==an$1&&i.host!==p&&__PRIVATE_logWarn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...i,host:p,ssl:a,emulatorOptions:r};if(!deepEqual(m,l)&&(t._setSettings(m),r.mockUserToken)){let s,h;if(typeof r.mockUserToken=="string")s=r.mockUserToken,h=User.MOCK_USER;else{s=createMockUserToken(r.mockUserToken,t._app?.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new FirestoreError(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new User(f)}t._authCredentials=new __PRIVATE_EmulatorAuthCredentialsProvider(new __PRIVATE_OAuthToken(s,h))}}class Query{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Query(this.firestore,e,this._query)}}class DocumentReference{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new CollectionReference(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new DocumentReference(this.firestore,e,this._key)}toJSON(){return{type:DocumentReference._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(__PRIVATE_validateJSON(n,DocumentReference._jsonSchema))return new DocumentReference(e,r||null,new DocumentKey(ResourcePath.fromString(n.referencePath)))}}DocumentReference._jsonSchemaVersion="firestore/documentReference/1.0",DocumentReference._jsonSchema={type:property("string",DocumentReference._jsonSchemaVersion),referencePath:property("string")};class CollectionReference extends Query{constructor(e,n,r){super(e,n,__PRIVATE_newQueryForPath(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new DocumentReference(this.firestore,null,new DocumentKey(e))}withConverter(e){return new CollectionReference(this.firestore,e,this._path)}}function collection(t,e,...n){if(t=getModularInstance(t),__PRIVATE_validateNonEmptyArgument("collection","path",e),t instanceof Firestore$1){const r=ResourcePath.fromString(e,...n);return __PRIVATE_validateCollectionPath(r),new CollectionReference(t,null,r)}{if(!(t instanceof DocumentReference||t instanceof CollectionReference))throw new FirestoreError(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ResourcePath.fromString(e,...n));return __PRIVATE_validateCollectionPath(r),new CollectionReference(t.firestore,null,r)}}function doc(t,e,...n){if(t=getModularInstance(t),arguments.length===1&&(e=__PRIVATE_AutoId.newId()),__PRIVATE_validateNonEmptyArgument("doc","path",e),t instanceof Firestore$1){const r=ResourcePath.fromString(e,...n);return __PRIVATE_validateDocumentPath(r),new DocumentReference(t,null,new DocumentKey(r))}{if(!(t instanceof DocumentReference||t instanceof CollectionReference))throw new FirestoreError(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ResourcePath.fromString(e,...n));return __PRIVATE_validateDocumentPath(r),new DocumentReference(t.firestore,t instanceof CollectionReference?t.converter:null,new DocumentKey(r))}}const cn$1="AsyncQueue";class __PRIVATE_AsyncQueueImpl{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new __PRIVATE_ExponentialBackoff(this,"async_queue_retry"),this._c=()=>{const r=getDocument();r&&__PRIVATE_logDebug(cn$1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=getDocument();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=getDocument();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new __PRIVATE_Deferred;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;__PRIVATE_logDebug(cn$1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,__PRIVATE_logError("INTERNAL UNHANDLED ERROR: ",__PRIVATE_getMessageOrStack(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const a=DelayedOperation.createAndSchedule(this,e,n,r,(i=>this.hc(i)));return this.tc.push(a),a}uc(){this.nc&&fail(47125,{Pc:__PRIVATE_getMessageOrStack(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function __PRIVATE_getMessageOrStack(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function __PRIVATE_isPartialObserver(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const a=n;for(const i of r)if(i in a&&typeof a[i]=="function")return!0;return!1})(t,["next","error","complete"])}class Firestore extends Firestore$1{constructor(e,n,r,a){super(e,n,r,a),this.type="firestore",this._queue=new __PRIVATE_AsyncQueueImpl,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new __PRIVATE_AsyncQueueImpl(e),this._firestoreClient=void 0,await e}}}function getFirestore(t,e){const n=typeof t=="object"?t:getApp(),r=typeof t=="string"?t:lt$1,a=_getProvider(n,"firestore").getImmediate({identifier:r});if(!a._initialized){const i=getDefaultEmulatorHostnameAndPort("firestore");i&&connectFirestoreEmulator(a,...i)}return a}function ensureFirestoreConfigured(t){if(t._terminated)throw new FirestoreError(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||__PRIVATE_configureFirestore(t),t._firestoreClient}function __PRIVATE_configureFirestore(t){const e=t._freezeSettings(),n=(function(a,i,l,p){return new DatabaseInfo(a,i,l,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,__PRIVATE_cloneLongPollingOptions(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new FirestoreClient(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(a){const i=a?._online.build();return{_offline:a?._offline.build(i),_online:i}})(t._componentsProvider))}class Bytes{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bytes(ByteString.fromBase64String(e))}catch(n){throw new FirestoreError(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bytes(ByteString.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bytes._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(__PRIVATE_validateJSON(e,Bytes._jsonSchema))return Bytes.fromBase64String(e.bytes)}}Bytes._jsonSchemaVersion="firestore/bytes/1.0",Bytes._jsonSchema={type:property("string",Bytes._jsonSchemaVersion),bytes:property("string")};class FieldPath{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new FirestoreError(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new FieldPath$1(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class FieldValue{constructor(e){this._methodName=e}}class GeoPoint{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new FirestoreError(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new FirestoreError(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return __PRIVATE_primitiveComparator(this._lat,e._lat)||__PRIVATE_primitiveComparator(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:GeoPoint._jsonSchemaVersion}}static fromJSON(e){if(__PRIVATE_validateJSON(e,GeoPoint._jsonSchema))return new GeoPoint(e.latitude,e.longitude)}}GeoPoint._jsonSchemaVersion="firestore/geoPoint/1.0",GeoPoint._jsonSchema={type:property("string",GeoPoint._jsonSchemaVersion),latitude:property("number"),longitude:property("number")};class VectorValue{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==a[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:VectorValue._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(__PRIVATE_validateJSON(e,VectorValue._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new VectorValue(e.vectorValues);throw new FirestoreError(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}VectorValue._jsonSchemaVersion="firestore/vectorValue/1.0",VectorValue._jsonSchema={type:property("string",VectorValue._jsonSchemaVersion),vectorValues:property("object")};const hn$1=/^__.*__$/;class ParsedSetData{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,n,this.fieldTransforms):new __PRIVATE_SetMutation(e,this.data,n,this.fieldTransforms)}}function __PRIVATE_isWrite(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fail(40011,{Ac:t})}}class __PRIVATE_ParseContextImpl{constructor(e,n,r,a,i,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=a,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new __PRIVATE_ParseContextImpl({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return __PRIVATE_createError(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(__PRIVATE_isWrite(this.Ac)&&hn$1.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class __PRIVATE_UserDataReader{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||__PRIVATE_newSerializer(e)}Cc(e,n,r,a=!1){return new __PRIVATE_ParseContextImpl({Ac:e,methodName:n,Dc:r,path:FieldPath$1.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function __PRIVATE_newUserDataReader(t){const e=t._freezeSettings(),n=__PRIVATE_newSerializer(t._databaseId);return new __PRIVATE_UserDataReader(t._databaseId,!!e.ignoreUndefinedProperties,n)}function __PRIVATE_parseSetData(t,e,n,r,a,i={}){const l=t.Cc(i.merge||i.mergeFields?2:0,e,n,a);__PRIVATE_validatePlainObject("Data must be an object, but it was:",l,r);const p=__PRIVATE_parseObject(r,l);let m,s;if(i.merge)m=new FieldMask(l.fieldMask),s=l.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const v=__PRIVATE_fieldPathFromArgument$1(e,f,n);if(!l.contains(v))throw new FirestoreError(N.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);__PRIVATE_fieldMaskContains(h,v)||h.push(v)}m=new FieldMask(h),s=l.fieldTransforms.filter((f=>m.covers(f.field)))}else m=null,s=l.fieldTransforms;return new ParsedSetData(new ObjectValue(p),m,s)}function __PRIVATE_parseQueryValue(t,e,n,r=!1){return __PRIVATE_parseData(n,t.Cc(r?4:3,e))}function __PRIVATE_parseData(t,e){if(__PRIVATE_looksLikeJsonObject(t=getModularInstance(t)))return __PRIVATE_validatePlainObject("Unsupported field value:",e,t),__PRIVATE_parseObject(t,e);if(t instanceof FieldValue)return(function(r,a){if(!__PRIVATE_isWrite(a.Ac))throw a.Sc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(a);i&&a.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,a){const i=[];let l=0;for(const p of r){let m=__PRIVATE_parseData(p,a.wc(l));m==null&&(m={nullValue:"NULL_VALUE"}),i.push(m),l++}return{arrayValue:{values:i}}})(t,e)}return(function(r,a){if((r=getModularInstance(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return toNumber(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Timestamp.fromDate(r);return{timestampValue:toTimestamp(a.serializer,i)}}if(r instanceof Timestamp){const i=new Timestamp(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:toTimestamp(a.serializer,i)}}if(r instanceof GeoPoint)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Bytes)return{bytesValue:__PRIVATE_toBytes(a.serializer,r._byteString)};if(r instanceof DocumentReference){const i=a.databaseId,l=r.firestore._databaseId;if(!l.isEqual(i))throw a.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:__PRIVATE_toResourceName(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof VectorValue)return(function(l,p){return{mapValue:{fields:{[ht$1]:{stringValue:It$1},[Et]:{arrayValue:{values:l.toArray().map((s=>{if(typeof s!="number")throw p.Sc("VectorValues must only contain numeric values.");return __PRIVATE_toDouble(p.serializer,s)}))}}}}}})(r,a);throw a.Sc(`Unsupported field value: ${__PRIVATE_valueDescription(r)}`)})(t,e)}function __PRIVATE_parseObject(t,e){const n={};return isEmpty(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):forEach(t,((r,a)=>{const i=__PRIVATE_parseData(a,e.mc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function __PRIVATE_looksLikeJsonObject(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Timestamp||t instanceof GeoPoint||t instanceof Bytes||t instanceof DocumentReference||t instanceof FieldValue||t instanceof VectorValue)}function __PRIVATE_validatePlainObject(t,e,n){if(!__PRIVATE_looksLikeJsonObject(n)||!__PRIVATE_isPlainObject(n)){const r=__PRIVATE_valueDescription(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function __PRIVATE_fieldPathFromArgument$1(t,e,n){if((e=getModularInstance(e))instanceof FieldPath)return e._internalPath;if(typeof e=="string")return __PRIVATE_fieldPathFromDotSeparatedString(t,e);throw __PRIVATE_createError("Field path arguments must be of type string or ",t,!1,void 0,n)}const Pn$1=new RegExp("[~\\*/\\[\\]]");function __PRIVATE_fieldPathFromDotSeparatedString(t,e,n){if(e.search(Pn$1)>=0)throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new FieldPath(...e.split("."))._internalPath}catch{throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function __PRIVATE_createError(t,e,n,r,a){const i=r&&!r.isEmpty(),l=a!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let m="";return(i||l)&&(m+=" (found",i&&(m+=` in field ${r}`),l&&(m+=` in document ${a}`),m+=")"),new FirestoreError(N.INVALID_ARGUMENT,p+t+m)}function __PRIVATE_fieldMaskContains(t,e){return t.some((n=>n.isEqual(e)))}class DocumentSnapshot$1{constructor(e,n,r,a,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=a,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new DocumentReference(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QueryDocumentSnapshot$1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class QueryDocumentSnapshot$1 extends DocumentSnapshot$1{data(){return super.data()}}function __PRIVATE_fieldPathFromArgument(t,e){return typeof e=="string"?__PRIVATE_fieldPathFromDotSeparatedString(t,e):e instanceof FieldPath?e._internalPath:e._delegate._internalPath}function __PRIVATE_validateHasExplicitOrderByForLimitToLast(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new FirestoreError(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AppliableConstraint{}class QueryConstraint extends AppliableConstraint{}function query(t,e,...n){let r=[];e instanceof AppliableConstraint&&r.push(e),r=r.concat(n),(function(i){const l=i.filter((m=>m instanceof QueryCompositeFilterConstraint)).length,p=i.filter((m=>m instanceof QueryFieldFilterConstraint)).length;if(l>1||l>0&&p>0)throw new FirestoreError(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)t=a._apply(t);return t}class QueryFieldFilterConstraint extends QueryConstraint{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new QueryFieldFilterConstraint(e,n,r)}_apply(e){const n=this._parse(e);return __PRIVATE_validateNewFieldFilter(e._query,n),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,n))}_parse(e){const n=__PRIVATE_newUserDataReader(e.firestore);return(function(i,l,p,m,s,h,f){let v;if(s.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){__PRIVATE_validateDisjunctiveFilterElements(f,h);const G=[];for(const W of f)G.push(__PRIVATE_parseDocumentIdValue(m,i,W));v={arrayValue:{values:G}}}else v=__PRIVATE_parseDocumentIdValue(m,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||__PRIVATE_validateDisjunctiveFilterElements(f,h),v=__PRIVATE_parseQueryValue(p,l,f,h==="in"||h==="not-in");return FieldFilter.create(s,h,v)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function where(t,e,n){const r=e,a=__PRIVATE_fieldPathFromArgument("where",t);return QueryFieldFilterConstraint._create(a,r,n)}class QueryCompositeFilterConstraint extends AppliableConstraint{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new QueryCompositeFilterConstraint(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:CompositeFilter.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(a,i){let l=a;const p=i.getFlattenedFilters();for(const m of p)__PRIVATE_validateNewFieldFilter(l,m),l=__PRIVATE_queryWithAddedFilter(l,m)})(e._query,n),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class QueryOrderByConstraint extends QueryConstraint{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new QueryOrderByConstraint(e,n)}_apply(e){const n=(function(a,i,l){if(a.startAt!==null)throw new FirestoreError(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new FirestoreError(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new OrderBy(i,l)})(e._query,this._field,this._direction);return new Query(e.firestore,e.converter,(function(a,i){const l=a.explicitOrderBy.concat([i]);return new __PRIVATE_QueryImpl(a.path,a.collectionGroup,l,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,n))}}function orderBy(t,e="asc"){const n=e,r=__PRIVATE_fieldPathFromArgument("orderBy",t);return QueryOrderByConstraint._create(r,n)}class QueryLimitConstraint extends QueryConstraint{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new QueryLimitConstraint(e,n,r)}_apply(e){return new Query(e.firestore,e.converter,__PRIVATE_queryWithLimit(e._query,this._limit,this._limitType))}}function limit(t){return QueryLimitConstraint._create("limit",t,"F")}function __PRIVATE_parseDocumentIdValue(t,e,n){if(typeof(n=getModularInstance(n))=="string"){if(n==="")throw new FirestoreError(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!__PRIVATE_isCollectionGroupQuery(e)&&n.indexOf("/")!==-1)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ResourcePath.fromString(n));if(!DocumentKey.isDocumentKey(r))throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return __PRIVATE_refValue(t,new DocumentKey(r))}if(n instanceof DocumentReference)return __PRIVATE_refValue(t,n._key);throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${__PRIVATE_valueDescription(n)}.`)}function __PRIVATE_validateDisjunctiveFilterElements(t,e){if(!Array.isArray(t)||t.length===0)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function __PRIVATE_validateNewFieldFilter(t,e){const n=(function(a,i){for(const l of a)for(const p of l.getFlattenedFilters())if(i.indexOf(p.op)>=0)return p.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class AbstractUserDataWriter{convertValue(e,n="none"){switch(__PRIVATE_typeOrder(e)){case 0:return null;case 1:return e.booleanValue;case 2:return __PRIVATE_normalizeNumber(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(__PRIVATE_normalizeByteString(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fail(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return forEach(e,((a,i)=>{r[a]=this.convertValue(i,n)})),r}convertVectorValue(e){const n=e.fields?.[Et].arrayValue?.values?.map((r=>__PRIVATE_normalizeNumber(r.doubleValue)));return new VectorValue(n)}convertGeoPoint(e){return new GeoPoint(__PRIVATE_normalizeNumber(e.latitude),__PRIVATE_normalizeNumber(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=__PRIVATE_getPreviousValue(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(__PRIVATE_getLocalWriteTime(e));default:return null}}convertTimestamp(e){const n=__PRIVATE_normalizeTimestamp(e);return new Timestamp(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ResourcePath.fromString(e);__PRIVATE_hardAssert(__PRIVATE_isValidResourceName(r),9688,{name:e});const a=new DatabaseId(r.get(1),r.get(3)),i=new DocumentKey(r.popFirst(5));return a.isEqual(n)||__PRIVATE_logError(`Document ${i} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function __PRIVATE_applyFirestoreDataConverter(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class SnapshotMetadata{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DocumentSnapshot extends DocumentSnapshot$1{constructor(e,n,r,a,i,l){super(e,n,r,a,l),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new QueryDocumentSnapshot(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new FirestoreError(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=DocumentSnapshot._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}DocumentSnapshot._jsonSchemaVersion="firestore/documentSnapshot/1.0",DocumentSnapshot._jsonSchema={type:property("string",DocumentSnapshot._jsonSchemaVersion),bundleSource:property("string","DocumentSnapshot"),bundleName:property("string"),bundle:property("string")};class QueryDocumentSnapshot extends DocumentSnapshot{data(e={}){return super.data(e)}}class QuerySnapshot{constructor(e,n,r,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new SnapshotMetadata(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new QueryDocumentSnapshot(this._firestore,this._userDataWriter,r.key,r,new SnapshotMetadata(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new FirestoreError(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,i){if(a._snapshot.oldDocs.isEmpty()){let l=0;return a._snapshot.docChanges.map((p=>{const m=new QueryDocumentSnapshot(a._firestore,a._userDataWriter,p.doc.key,p.doc,new SnapshotMetadata(a._snapshot.mutatedKeys.has(p.doc.key),a._snapshot.fromCache),a.query.converter);return p.doc,{type:"added",doc:m,oldIndex:-1,newIndex:l++}}))}{let l=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((p=>i||p.type!==3)).map((p=>{const m=new QueryDocumentSnapshot(a._firestore,a._userDataWriter,p.doc.key,p.doc,new SnapshotMetadata(a._snapshot.mutatedKeys.has(p.doc.key),a._snapshot.fromCache),a.query.converter);let s=-1,h=-1;return p.type!==0&&(s=l.indexOf(p.doc.key),l=l.delete(p.doc.key)),p.type!==1&&(l=l.add(p.doc),h=l.indexOf(p.doc.key)),{type:__PRIVATE_resultChangeType(p.type),doc:m,oldIndex:s,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new FirestoreError(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=QuerySnapshot._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=__PRIVATE_AutoId.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],a=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),a.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function __PRIVATE_resultChangeType(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fail(61501,{type:t})}}QuerySnapshot._jsonSchemaVersion="firestore/querySnapshot/1.0",QuerySnapshot._jsonSchema={type:property("string",QuerySnapshot._jsonSchemaVersion),bundleSource:property("string","QuerySnapshot"),bundleName:property("string"),bundle:property("string")};class __PRIVATE_ExpUserDataWriter extends AbstractUserDataWriter{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bytes(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new DocumentReference(this.firestore,null,n)}}function getDocs(t){t=__PRIVATE_cast(t,Query);const e=__PRIVATE_cast(t.firestore,Firestore),n=ensureFirestoreConfigured(e),r=new __PRIVATE_ExpUserDataWriter(e);return __PRIVATE_validateHasExplicitOrderByForLimitToLast(t._query),__PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(n,t._query).then((a=>new QuerySnapshot(e,r,t,a)))}function deleteDoc(t){return executeWrite(__PRIVATE_cast(t.firestore,Firestore),[new __PRIVATE_DeleteMutation(t._key,Precondition.none())])}function addDoc(t,e){const n=__PRIVATE_cast(t.firestore,Firestore),r=doc(t),a=__PRIVATE_applyFirestoreDataConverter(t.converter,e);return executeWrite(n,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(t.firestore),"addDoc",r._key,a,t.converter!==null,{}).toMutation(r._key,Precondition.exists(!1))]).then((()=>r))}function onSnapshot(t,...e){t=getModularInstance(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||__PRIVATE_isPartialObserver(e[r])||(n=e[r++]);const a={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(__PRIVATE_isPartialObserver(e[r])){const m=e[r];e[r]=m.next?.bind(m),e[r+1]=m.error?.bind(m),e[r+2]=m.complete?.bind(m)}let i,l,p;if(t instanceof DocumentReference)l=__PRIVATE_cast(t.firestore,Firestore),p=__PRIVATE_newQueryForPath(t._key.path),i={next:m=>{e[r]&&e[r](__PRIVATE_convertToDocSnapshot(l,t,m))},error:e[r+1],complete:e[r+2]};else{const m=__PRIVATE_cast(t,Query);l=__PRIVATE_cast(m.firestore,Firestore),p=m._query;const s=new __PRIVATE_ExpUserDataWriter(l);i={next:h=>{e[r]&&e[r](new QuerySnapshot(l,s,m,h))},error:e[r+1],complete:e[r+2]},__PRIVATE_validateHasExplicitOrderByForLimitToLast(t._query)}return(function(s,h,f,v){const I=new __PRIVATE_AsyncObserver(v),G=new __PRIVATE_QueryListener(h,I,f);return s.asyncQueue.enqueueAndForget((async()=>__PRIVATE_eventManagerListen(await __PRIVATE_getEventManager(s),G))),()=>{I.Nu(),s.asyncQueue.enqueueAndForget((async()=>__PRIVATE_eventManagerUnlisten(await __PRIVATE_getEventManager(s),G)))}})(ensureFirestoreConfigured(l),p,a,i)}function executeWrite(t,e){return(function(r,a){const i=new __PRIVATE_Deferred;return r.asyncQueue.enqueueAndForget((async()=>__PRIVATE_syncEngineWrite(await __PRIVATE_getSyncEngine(r),a,i))),i.promise})(ensureFirestoreConfigured(t),e)}function __PRIVATE_convertToDocSnapshot(t,e,n){const r=n.docs.get(e._key),a=new __PRIVATE_ExpUserDataWriter(t);return new DocumentSnapshot(t,a,e._key,r,new SnapshotMetadata(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(a){x=a})(SDK_VERSION),_registerComponent(new Component("firestore",((r,{instanceIdentifier:a,options:i})=>{const l=r.getProvider("app").getImmediate(),p=new Firestore(new __PRIVATE_FirebaseAuthCredentialsProvider(r.getProvider("auth-internal")),new __PRIVATE_FirebaseAppCheckTokenProvider(l,r.getProvider("app-check-internal")),(function(s,h){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new FirestoreError(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DatabaseId(s.options.projectId,h)})(l,a),l);return i={useFetchStreams:n,...i},p._setSettings(i),p}),"PUBLIC").setMultipleInstances(!0)),registerVersion(F,M,e),registerVersion(F,M,"esm2020")})();const DEFAULT_HOST="firebasestorage.googleapis.com",CONFIG_STORAGE_BUCKET_KEY="storageBucket",DEFAULT_MAX_OPERATION_RETRY_TIME=120*1e3,DEFAULT_MAX_UPLOAD_RETRY_TIME=600*1e3;class StorageError extends FirebaseError{constructor(e,n,r=0){super(prependCode(e),`Firebase Storage: ${n} (${prependCode(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,StorageError.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return prependCode(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var StorageErrorCode;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(StorageErrorCode||(StorageErrorCode={}));function prependCode(t){return"storage/"+t}function unknown(){const t="An unknown error occurred, please check the error payload for server response.";return new StorageError(StorageErrorCode.UNKNOWN,t)}function retryLimitExceeded(){return new StorageError(StorageErrorCode.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function canceled(){return new StorageError(StorageErrorCode.CANCELED,"User canceled the upload/download.")}function invalidUrl(t){return new StorageError(StorageErrorCode.INVALID_URL,"Invalid URL '"+t+"'.")}function invalidDefaultBucket(t){return new StorageError(StorageErrorCode.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function invalidArgument(t){return new StorageError(StorageErrorCode.INVALID_ARGUMENT,t)}function appDeleted(){return new StorageError(StorageErrorCode.APP_DELETED,"The Firebase app was deleted.")}function invalidRootOperation(t){return new StorageError(StorageErrorCode.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class Location{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Location.makeFromUrl(e,n)}catch{return new Location(e,"")}if(r.path==="")return r;throw invalidDefaultBucket(e)}static makeFromUrl(e,n){let r=null;const a="([A-Za-z0-9.\\-_]+)";function i(je){je.path.charAt(je.path.length-1)==="/"&&(je.path_=je.path_.slice(0,-1))}const l="(/(.*))?$",p=new RegExp("^gs://"+a+l,"i"),m={bucket:1,path:3};function s(je){je.path_=decodeURIComponent(je.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",I=new RegExp(`^https?://${f}/${h}/b/${a}/o${v}`,"i"),G={bucket:1,path:3},W=n===DEFAULT_HOST?"(?:storage.googleapis.com|storage.cloud.google.com)":n,X="([^?#]*)",ge=new RegExp(`^https?://${W}/${a}/${X}`,"i"),Pe=[{regex:p,indices:m,postModify:i},{regex:I,indices:G,postModify:s},{regex:ge,indices:{bucket:1,path:2},postModify:s}];for(let je=0;je<Pe.length;je++){const rt=Pe[je],qt=rt.regex.exec(e);if(qt){const de=qt[rt.indices.bucket];let se=qt[rt.indices.path];se||(se=""),r=new Location(de,se),rt.postModify(r);break}}if(r==null)throw invalidUrl(e);return r}}class FailRequest{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function start(t,e,n){let r=1,a=null,i=null,l=!1,p=0;function m(){return p===2}let s=!1;function h(...X){s||(s=!0,e.apply(null,X))}function f(X){a=setTimeout(()=>{a=null,t(I,m())},X)}function v(){i&&clearTimeout(i)}function I(X,...ge){if(s){v();return}if(X){v(),h.call(null,X,...ge);return}if(m()||l){v(),h.call(null,X,...ge);return}r<64&&(r*=2);let Pe;p===1?(p=2,Pe=0):Pe=(r+Math.random())*1e3,f(Pe)}let G=!1;function W(X){G||(G=!0,v(),!s&&(a!==null?(X||(p=2),clearTimeout(a),f(0)):X||(p=1)))}return f(0),i=setTimeout(()=>{l=!0,W(!0)},n),W}function stop(t){t(!1)}function isJustDef(t){return t!==void 0}function validateNumber(t,e,n,r){if(r<e)throw invalidArgument(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw invalidArgument(`Invalid value for '${t}'. Expected ${n} or less.`)}function makeQueryString(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const a=e(r)+"="+e(t[r]);n=n+a+"&"}return n=n.slice(0,-1),n}var ErrorCode;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ErrorCode||(ErrorCode={}));function isRetryStatusCode(t,e){const n=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||a||i}class NetworkRequest{constructor(e,n,r,a,i,l,p,m,s,h,f,v=!0,I=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=a,this.successCodes_=i,this.additionalRetryCodes_=l,this.callback_=p,this.errorCallback_=m,this.timeout_=s,this.progressCallback_=h,this.connectionFactory_=f,this.retry=v,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((G,W)=>{this.resolve_=G,this.reject_=W,this.start_()})}start_(){const e=(r,a)=>{if(a){r(!1,new RequestEndStatus(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const l=p=>{const m=p.loaded,s=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,s)};this.progressCallback_!==null&&i.addUploadProgressListener(l),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(l),this.pendingConnection_=null;const p=i.getErrorCode()===ErrorCode.NO_ERROR,m=i.getStatus();if(!p||isRetryStatusCode(m,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===ErrorCode.ABORT;r(!1,new RequestEndStatus(!1,null,h));return}const s=this.successCodes_.indexOf(m)!==-1;r(!0,new RequestEndStatus(s,i))})},n=(r,a)=>{const i=this.resolve_,l=this.reject_,p=a.connection;if(a.wasSuccessCode)try{const m=this.callback_(p,p.getResponse());isJustDef(m)?i(m):i()}catch(m){l(m)}else if(p!==null){const m=unknown();m.serverResponse=p.getErrorText(),this.errorCallback_?l(this.errorCallback_(p,m)):l(m)}else if(a.canceled){const m=this.appDelete_?appDeleted():canceled();l(m)}else{const m=retryLimitExceeded();l(m)}};this.canceled_?n(!1,new RequestEndStatus(!1,null,!0)):this.backoffId_=start(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&stop(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class RequestEndStatus{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function addAuthHeader_(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function addVersionHeader_(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function addGmpidHeader_(t,e){e&&(t["X-Firebase-GMPID"]=e)}function addAppCheckHeader_(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function makeRequest(t,e,n,r,a,i,l=!0,p=!1){const m=makeQueryString(t.urlParams),s=t.url+m,h=Object.assign({},t.headers);return addGmpidHeader_(h,e),addAuthHeader_(h,n),addVersionHeader_(h,i),addAppCheckHeader_(h,r),new NetworkRequest(s,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,l,p)}function parent(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function lastComponent(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}class Reference{constructor(e,n){this._service=e,n instanceof Location?this._location=n:this._location=Location.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Reference(e,n)}get root(){const e=new Location(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lastComponent(this._location.path)}get storage(){return this._service}get parent(){const e=parent(this._location.path);if(e===null)return null;const n=new Location(this._location.bucket,e);return new Reference(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw invalidRootOperation(e)}}function extractBucket(t,e){const n=e?.[CONFIG_STORAGE_BUCKET_KEY];return n==null?null:Location.makeFromBucketSpec(n,t)}function connectStorageEmulator$1(t,e,n,r={}){t.host=`${e}:${n}`;const a=isCloudWorkstation(e);a&&(pingServer(`https://${t.host}/b`),updateEmulatorBanner("Storage",!0)),t._isUsingEmulator=!0,t._protocol=a?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:createMockUserToken(i,t.app.options.projectId))}class FirebaseStorageImpl{constructor(e,n,r,a,i,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=a,this._firebaseVersion=i,this._isUsingEmulator=l,this._bucket=null,this._host=DEFAULT_HOST,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=DEFAULT_MAX_OPERATION_RETRY_TIME,this._maxUploadRetryTime=DEFAULT_MAX_UPLOAD_RETRY_TIME,this._requests=new Set,a!=null?this._bucket=Location.makeFromBucketSpec(a,this._host):this._bucket=extractBucket(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Location.makeFromBucketSpec(this._url,e):this._bucket=extractBucket(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){validateNumber("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){validateNumber("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(_isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Reference(this,e)}_makeRequest(e,n,r,a,i=!0){if(this._deleted)return new FailRequest(appDeleted());{const l=makeRequest(e,this._appId,r,a,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[r,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,a).getPromise()}}const name$1="@firebase/storage",version="0.14.0";const STORAGE_TYPE="storage";function getStorage(t=getApp(),e){t=getModularInstance(t);const r=_getProvider(t,STORAGE_TYPE).getImmediate({identifier:e}),a=getDefaultEmulatorHostnameAndPort("storage");return a&&connectStorageEmulator(r,...a),r}function connectStorageEmulator(t,e,n,r={}){connectStorageEmulator$1(t,e,n,r)}function factory(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new FirebaseStorageImpl(n,r,a,e,SDK_VERSION)}function registerStorage(){_registerComponent(new Component(STORAGE_TYPE,factory,"PUBLIC").setMultipleInstances(!0)),registerVersion(name$1,version,""),registerVersion(name$1,version,"esm2020")}registerStorage();const firebaseConfig={apiKey:"AIzaSyAlIId917avJwPkjddIBEefwTnIUstovR0",authDomain:"emergency-app-807e2.firebaseapp.com",projectId:"emergency-app-807e2",storageBucket:"emergency-app-807e2.appspot.com",messagingSenderId:"367668944105",appId:"1:367668944105:web:6d88afce5953287cf4a478",measurementId:"G-5MJ0JBRE99"},app=initializeApp(firebaseConfig);getAnalytics(app);getAuth(app);const db$2=getFirestore(app);getStorage(app);const rescueImg="/Lifeline/assets/Rescue-C7yq8fON.png",eyeIcon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAQCAMAAAA7+k+nAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJcEhZcwAACxMAAAsTAQCanBgAAABdUExURUdwTExMTE1NTUxMTFBQUExMTExMTE1NTVBQUE1NTU5OTkxMTE1NTUBAQE1NTUxMTE5OTk5OTkpKSk1NTU1NTU5OTk5OTk1NTUxMTEtLS01NTVBQUExMTEpKSk1NTdF0x6QAAAAedFJOUwC/n88QkEDfIO9fgL8QYFCAzzBwr29/j39wTzCgYM/fQCYAAACnSURBVBgZVcEHcsMwDEXBR4kkSFW39OTf/5gB3Ga8y02ug3VpvEy8eOt6sHee2iLX05C6nDVumsmVDLRZrp8IzeQOkGuDWa433CJn8CnpA5LcCGwKX+wKE2eFA5jCN0VhoCr0laSwURQGqoJBVSj8dLkTZ4UJKHJ9ZR9lO9nkBsJRbly5GuQsE/JRziagLnJj427WlXWFknlqv3pIlRdtKyldyl/m7h8Z8RWueqQSAwAAAABJRU5ErkJggg==",googleIcon="/Lifeline/assets/google-icon-DxHUL1Mf.png";function Login(){const[t,e]=reactExports.useState(""),[n,r]=reactExports.useState(""),[a,i]=reactExports.useState(""),[l,p]=reactExports.useState(!1),[m,s]=reactExports.useState(!1),[h,f]=reactExports.useState(null),[v,I]=reactExports.useState(!0),G=useNavigate(),W=getAuth(app),X=()=>{try{const rt=localStorage.getItem("anonUser");return rt?JSON.parse(rt):null}catch{return null}};reactExports.useEffect(()=>{const rt=X();navigator.onLine&&!rt&&signInAnonymously(W).then(qt=>{localStorage.setItem("anonUser",JSON.stringify({uid:qt.user.uid,createdAt:Date.now()}))}).catch(()=>{})},[]);const ge=async()=>{f(null);try{const rt=new GoogleAuthProvider;rt.setCustomParameters({prompt:"select_account"}),await signInWithPopup(W,rt),G("/home")}catch(rt){rt?.code!=="auth/popup-closed-by-user"&&f(rt.message)}},ie=async rt=>{rt.preventDefault();try{await signInWithEmailAndPassword(W,t,n),G("/home")}catch(qt){f(qt.message)}},Pe=async rt=>{if(rt.preventDefault(),n!==a){f("Passwords do not match.");return}try{await createUserWithEmailAndPassword(W,t,n),alert("Account created successfully!"),G("/home")}catch(qt){f(qt.message)}},je=async()=>{f(null);const rt=X();if(!navigator.onLine)if(rt){console.log("Offline login using saved anonymous uid:",rt.uid),G("/home");return}else{f("Guest mode requires one initial online setup.");return}try{const qt=await signInAnonymously(W);localStorage.setItem("anonUser",JSON.stringify({uid:qt.user.uid,createdAt:Date.now()})),G("/home")}catch(qt){f("Guest login failed: "+qt.message)}};return jsxRuntimeExports.jsxs("div",{className:"login-page",children:[jsxRuntimeExports.jsxs("div",{className:"logo",children:[jsxRuntimeExports.jsxs("h1",{children:[jsxRuntimeExports.jsx("span",{className:"life",children:"Life"}),jsxRuntimeExports.jsx("span",{className:"line",children:"Line"})]}),jsxRuntimeExports.jsxs("p",{children:["Be safer todaywith",jsxRuntimeExports.jsx("br",{}),"reliable Lifeline"]})]}),jsxRuntimeExports.jsx("div",{className:"hero-section",children:jsxRuntimeExports.jsx("img",{src:rescueImg,alt:"Rescue"})}),jsxRuntimeExports.jsxs("div",{className:"login-panel",children:[jsxRuntimeExports.jsx("h1",{children:v?"Nice to see you again!":"Create your Lifeline account"}),h&&jsxRuntimeExports.jsx("p",{className:"error",children:h}),jsxRuntimeExports.jsxs("form",{onSubmit:v?ie:Pe,children:[jsxRuntimeExports.jsx("label",{className:"input-label",children:"Email"}),jsxRuntimeExports.jsx("input",{type:"email",placeholder:"Email or phone number",value:t,onChange:rt=>e(rt.target.value),required:!0}),jsxRuntimeExports.jsx("label",{className:"input-label",children:"Password"}),jsxRuntimeExports.jsxs("div",{className:"password-input-container",children:[jsxRuntimeExports.jsx("input",{type:m?"text":"password",placeholder:v?"Enter password":"Password (min. 6 characters)",value:n,onChange:rt=>r(rt.target.value),required:!0}),jsxRuntimeExports.jsx("img",{src:eyeIcon,alt:"Toggle password",className:"password-toggle",onClick:()=>s(!m)})]}),!v&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:"input-label",children:"Confirm Password"}),jsxRuntimeExports.jsx("input",{type:"password",placeholder:"Confirm password",value:a,onChange:rt=>i(rt.target.value),required:!0})]}),v&&jsxRuntimeExports.jsxs("div",{className:"form-options",children:[jsxRuntimeExports.jsxs("label",{className:"switch-label",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:l,onChange:rt=>p(rt.target.checked)}),jsxRuntimeExports.jsx("span",{className:"slider"}),"Remember me"]}),jsxRuntimeExports.jsx("a",{href:"#",className:"forgot-password",children:"Forgot password?"})]}),jsxRuntimeExports.jsx("button",{type:"submit",className:"sign-in-btn",children:v?"Sign in":"Sign up"}),v&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{type:"button",className:"guest-btn",onClick:je,children:"Continue as Guest"}),jsxRuntimeExports.jsxs("button",{type:"button",className:"google-btn",onClick:ge,children:[jsxRuntimeExports.jsx("img",{src:googleIcon,alt:"Google"}),"Sign in with Google"]})]})]}),jsxRuntimeExports.jsxs("p",{className:"signup-link",children:[v?"Dont have an account?":"Already have an account?"," ",jsxRuntimeExports.jsx("a",{href:"#",onClick:()=>I(!v),children:v?"Sign up now":"Sign in now"})]})]})]})}function Entry(){return jsxRuntimeExports.jsx("div",{className:"area",children:jsxRuntimeExports.jsx("div",{className:"area-box",children:jsxRuntimeExports.jsx(Login,{})})})}var vd=Object.create,Pn=Object.defineProperty,_d=Object.getOwnPropertyDescriptor,Od=Object.getOwnPropertyNames,Id=Object.getPrototypeOf,Sd=Object.prototype.hasOwnProperty,L$2=(t,e)=>()=>(t&&(e=t(t=0)),e),me=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Sr=(t,e)=>{for(var n in e)Pn(t,n,{get:e[n],enumerable:!0})},Va=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of Od(e))!Sd.call(t,a)&&a!==n&&Pn(t,a,{get:()=>e[a],enumerable:!(r=_d(e,a))||r.enumerable});return t},Ar=(t,e,n)=>(n=t!=null?vd(Id(t)):{},Va(!t||!t.__esModule?Pn(n,"default",{value:t,enumerable:!0}):n,t)),ar=t=>Va(Pn({},"__esModule",{value:!0}),t),En,sr,Pr,Ad,Dn,Ln=L$2(()=>{En=new Map,sr=[],Pr=(t,e,n)=>{if(e&&typeof e.init=="function"&&typeof e.createInferenceSessionHandler=="function"){let r=En.get(t);if(r===void 0)En.set(t,{backend:e,priority:n});else{if(r.priority>n)return;if(r.priority===n&&r.backend!==e)throw new Error(`cannot register backend "${t}" using priority ${n}`)}if(n>=0){let a=sr.indexOf(t);a!==-1&&sr.splice(a,1);for(let i=0;i<sr.length;i++)if(En.get(sr[i]).priority<=n){sr.splice(i,0,t);return}sr.push(t)}return}throw new TypeError("not a valid backend")},Ad=async t=>{let e=En.get(t);if(!e)return"backend not found.";if(e.initialized)return e.backend;if(e.aborted)return e.error;{let n=!!e.initPromise;try{return n||(e.initPromise=e.backend.init(t)),await e.initPromise,e.initialized=!0,e.backend}catch(r){return n||(e.error=`${r}`,e.aborted=!0),e.error}finally{delete e.initPromise}}},Dn=async t=>{let e=t.executionProviders||[],n=e.map(m=>typeof m=="string"?m:m.name),r=n.length===0?sr:n,a,i=[],l=new Set;for(let m of r){let s=await Ad(m);typeof s=="string"?i.push({name:m,err:s}):(a||(a=s),a===s&&l.add(m))}if(!a)throw new Error(`no available backend found. ERR: ${i.map(m=>`[${m.name}] ${m.err}`).join(", ")}`);for(let{name:m,err:s}of i)n.includes(m)&&console.warn(`removing requested execution provider "${m}" from session options because it is not available: ${s}`);let p=e.filter(m=>l.has(typeof m=="string"?m:m.name));return[a,new Proxy(t,{get:(m,s)=>s==="executionProviders"?p:Reflect.get(m,s)})]}}),Wa=L$2(()=>{Ln()}),Ha,qa=L$2(()=>{Ha="1.18.0"}),ja,ut,Vo=L$2(()=>{qa(),ja="warning",ut={wasm:{},webgl:{},webgpu:{},versions:{common:Ha},set logLevel(t){if(t!==void 0){if(typeof t!="string"||["verbose","info","warning","error","fatal"].indexOf(t)===-1)throw new Error(`Unsupported logging level: ${t}`);ja=t}},get logLevel(){return ja}},Object.defineProperty(ut,"logLevel",{enumerable:!0})}),Z,Ya=L$2(()=>{Vo(),Z=ut}),Xa,Ka,Ja=L$2(()=>{Xa=(t,e)=>{let n=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);n.width=t.dims[3],n.height=t.dims[2];let r=n.getContext("2d");if(r!=null){let a,i;e?.tensorLayout!==void 0&&e.tensorLayout==="NHWC"?(a=t.dims[2],i=t.dims[3]):(a=t.dims[3],i=t.dims[2]);let l=e?.format!==void 0?e.format:"RGB",p=e?.norm,m,s;p===void 0||p.mean===void 0?m=[255,255,255,255]:typeof p.mean=="number"?m=[p.mean,p.mean,p.mean,p.mean]:(m=[p.mean[0],p.mean[1],p.mean[2],0],p.mean[3]!==void 0&&(m[3]=p.mean[3])),p===void 0||p.bias===void 0?s=[0,0,0,0]:typeof p.bias=="number"?s=[p.bias,p.bias,p.bias,p.bias]:(s=[p.bias[0],p.bias[1],p.bias[2],0],p.bias[3]!==void 0&&(s[3]=p.bias[3]));let h=i*a,f=0,v=h,I=h*2,G=-1;l==="RGBA"?(f=0,v=h,I=h*2,G=h*3):l==="RGB"?(f=0,v=h,I=h*2):l==="RBG"&&(f=0,I=h,v=h*2);for(let W=0;W<i;W++)for(let X=0;X<a;X++){let ge=(t.data[f++]-s[0])*m[0],ie=(t.data[v++]-s[1])*m[1],Pe=(t.data[I++]-s[2])*m[2],je=G===-1?255:(t.data[G++]-s[3])*m[3];r.fillStyle="rgba("+ge+","+ie+","+Pe+","+je+")",r.fillRect(X,W,1,1)}if("toDataURL"in n)return n.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},Ka=(t,e)=>{let n=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),r;if(n!=null){let a,i,l;e?.tensorLayout!==void 0&&e.tensorLayout==="NHWC"?(a=t.dims[2],i=t.dims[1],l=t.dims[3]):(a=t.dims[3],i=t.dims[2],l=t.dims[1]);let p=e!==void 0&&e.format!==void 0?e.format:"RGB",m=e?.norm,s,h;m===void 0||m.mean===void 0?s=[255,255,255,255]:typeof m.mean=="number"?s=[m.mean,m.mean,m.mean,m.mean]:(s=[m.mean[0],m.mean[1],m.mean[2],255],m.mean[3]!==void 0&&(s[3]=m.mean[3])),m===void 0||m.bias===void 0?h=[0,0,0,0]:typeof m.bias=="number"?h=[m.bias,m.bias,m.bias,m.bias]:(h=[m.bias[0],m.bias[1],m.bias[2],0],m.bias[3]!==void 0&&(h[3]=m.bias[3]));let f=i*a;if(e!==void 0&&(e.format!==void 0&&l===4&&e.format!=="RGBA"||l===3&&e.format!=="RGB"&&e.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let v=4,I=0,G=1,W=2,X=3,ge=0,ie=f,Pe=f*2,je=-1;p==="RGBA"?(ge=0,ie=f,Pe=f*2,je=f*3):p==="RGB"?(ge=0,ie=f,Pe=f*2):p==="RBG"&&(ge=0,Pe=f,ie=f*2),r=n.createImageData(a,i);for(let rt=0;rt<i*a;I+=v,G+=v,W+=v,X+=v,rt++)r.data[I]=(t.data[ge++]-h[0])*s[0],r.data[G]=(t.data[ie++]-h[1])*s[1],r.data[W]=(t.data[Pe++]-h[2])*s[2],r.data[X]=je===-1?255:(t.data[je++]-h[3])*s[3]}else throw new Error("Can not access image data");return r}}),Wo,Za,Qa,es,ts,rs=L$2(()=>{Cn(),Wo=(t,e)=>{if(t===void 0)throw new Error("Image buffer must be defined");if(e.height===void 0||e.width===void 0)throw new Error("Image height and width must be defined");if(e.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:n,width:r}=e,a=e.norm??{mean:255,bias:0},i,l;typeof a.mean=="number"?i=[a.mean,a.mean,a.mean,a.mean]:i=[a.mean[0],a.mean[1],a.mean[2],a.mean[3]??255],typeof a.bias=="number"?l=[a.bias,a.bias,a.bias,a.bias]:l=[a.bias[0],a.bias[1],a.bias[2],a.bias[3]??0];let p=e.format!==void 0?e.format:"RGBA",m=e.tensorFormat!==void 0&&e.tensorFormat!==void 0?e.tensorFormat:"RGB",s=n*r,h=m==="RGBA"?new Float32Array(s*4):new Float32Array(s*3),f=4,v=0,I=1,G=2,W=3,X=0,ge=s,ie=s*2,Pe=-1;p==="RGB"&&(f=3,v=0,I=1,G=2,W=-1),m==="RGBA"?Pe=s*3:m==="RBG"?(X=0,ie=s,ge=s*2):m==="BGR"&&(ie=0,ge=s,X=s*2);for(let je=0;je<s;je++,v+=f,G+=f,I+=f,W+=f)h[X++]=(t[v]+l[0])/i[0],h[ge++]=(t[I]+l[1])/i[1],h[ie++]=(t[G]+l[2])/i[2],Pe!==-1&&W!==-1&&(h[Pe++]=(t[W]+l[3])/i[3]);return m==="RGBA"?new Je("float32",h,[1,4,n,r]):new Je("float32",h,[1,3,n,r])},Za=async(t,e)=>{let n=typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement,r=typeof ImageData<"u"&&t instanceof ImageData,a=typeof ImageBitmap<"u"&&t instanceof ImageBitmap,i=typeof t=="string",l,p=e??{},m=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},s=h=>h instanceof HTMLCanvasElement||h instanceof OffscreenCanvas?h.getContext("2d"):null;if(n){let h=m();h.width=t.width,h.height=t.height;let f=s(h);if(f!=null){let v=t.height,I=t.width;if(e!==void 0&&e.resizedHeight!==void 0&&e.resizedWidth!==void 0&&(v=e.resizedHeight,I=e.resizedWidth),e!==void 0){if(p=e,e.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");p.tensorFormat="RGBA",p.height=v,p.width=I}else p.tensorFormat="RGBA",p.height=v,p.width=I;f.drawImage(t,0,0),l=f.getImageData(0,0,I,v).data}else throw new Error("Can not access image data")}else if(r){let h,f;if(e!==void 0&&e.resizedWidth!==void 0&&e.resizedHeight!==void 0?(h=e.resizedHeight,f=e.resizedWidth):(h=t.height,f=t.width),e!==void 0&&(p=e),p.format="RGBA",p.height=h,p.width=f,e!==void 0){let v=m();v.width=f,v.height=h;let I=s(v);if(I!=null)I.putImageData(t,0,0),l=I.getImageData(0,0,f,h).data;else throw new Error("Can not access image data")}else l=t.data}else if(a){if(e===void 0)throw new Error("Please provide image config with format for Imagebitmap");let h=m();h.width=t.width,h.height=t.height;let f=s(h);if(f!=null){let v=t.height,I=t.width;return f.drawImage(t,0,0,I,v),l=f.getImageData(0,0,I,v).data,p.height=v,p.width=I,Wo(l,p)}else throw new Error("Can not access image data")}else{if(i)return new Promise((h,f)=>{let v=m(),I=s(v);if(!t||!I)return f();let G=new Image;G.crossOrigin="Anonymous",G.src=t,G.onload=()=>{v.width=G.width,v.height=G.height,I.drawImage(G,0,0,v.width,v.height);let W=I.getImageData(0,0,v.width,v.height);p.height=v.height,p.width=v.width,h(Wo(W.data,p))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(l!==void 0)return Wo(l,p);throw new Error("Input data provided is not supported - aborted tensor creation")},Qa=(t,e)=>{let{width:n,height:r,download:a,dispose:i}=e,l=[1,r,n,4];return new Je({location:"texture",type:"float32",texture:t,dims:l,download:a,dispose:i})},es=(t,e)=>{let{dataType:n,dims:r,download:a,dispose:i}=e;return new Je({location:"gpu-buffer",type:n??"float32",gpuBuffer:t,dims:r,download:a,dispose:i})},ts=(t,e,n)=>new Je({location:"cpu-pinned",type:t,data:e,dims:n??[e.length]})}),ur,Qr,ns,os,is=L$2(()=>{ur=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),Qr=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),ns=!1,os=()=>{if(!ns){ns=!0;let t=typeof BigInt64Array<"u"&&BigInt64Array.from,e=typeof BigUint64Array<"u"&&BigUint64Array.from,n=typeof Float16Array<"u"&&Float16Array.from;t&&(ur.set("int64",BigInt64Array),Qr.set(BigInt64Array,"int64")),e&&(ur.set("uint64",BigUint64Array),Qr.set(BigUint64Array,"uint64")),n?(ur.set("float16",Float16Array),Qr.set(Float16Array,"float16")):ur.set("float16",Uint16Array)}}}),as,ss,us=L$2(()=>{Cn(),as=t=>{let e=1;for(let n=0;n<t.length;n++){let r=t[n];if(typeof r!="number"||!Number.isSafeInteger(r))throw new TypeError(`dims[${n}] must be an integer, got: ${r}`);if(r<0)throw new RangeError(`dims[${n}] must be a non-negative integer, got: ${r}`);e*=r}return e},ss=(t,e)=>{switch(t.location){case"cpu":return new Je(t.type,t.data,e);case"cpu-pinned":return new Je({location:"cpu-pinned",data:t.data,type:t.type,dims:e});case"texture":return new Je({location:"texture",texture:t.texture,type:t.type,dims:e});case"gpu-buffer":return new Je({location:"gpu-buffer",gpuBuffer:t.gpuBuffer,type:t.type,dims:e});default:throw new Error(`tensorReshape: tensor location ${t.location} is not supported`)}}}),Je,Cn=L$2(()=>{Ja(),rs(),is(),us(),Je=class{constructor(t,e,n){os();let r,a;if(typeof t=="object"&&"location"in t)switch(this.dataLocation=t.location,r=t.type,a=t.dims,t.location){case"cpu-pinned":{let l=ur.get(r);if(!l)throw new TypeError(`unsupported type "${r}" to create tensor from pinned buffer`);if(!(t.data instanceof l))throw new TypeError(`buffer should be of type ${l.name}`);this.cpuData=t.data;break}case"texture":{if(r!=="float32")throw new TypeError(`unsupported type "${r}" to create tensor from texture`);this.gpuTextureData=t.texture,this.downloader=t.download,this.disposer=t.dispose;break}case"gpu-buffer":{if(r!=="float32"&&r!=="float16"&&r!=="int32"&&r!=="int64"&&r!=="uint32"&&r!=="uint8"&&r!=="bool")throw new TypeError(`unsupported type "${r}" to create tensor from gpu buffer`);this.gpuBufferData=t.gpuBuffer,this.downloader=t.download,this.disposer=t.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let l,p;if(typeof t=="string")if(r=t,p=n,t==="string"){if(!Array.isArray(e))throw new TypeError("A string tensor's data must be a string array.");l=e}else{let m=ur.get(t);if(m===void 0)throw new TypeError(`Unsupported tensor type: ${t}.`);if(Array.isArray(e)){if(t==="float16"&&m===Uint16Array)throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");t==="uint64"||t==="int64"?l=m.from(e,BigInt):l=m.from(e)}else if(e instanceof m)l=e;else throw new TypeError(`A ${r} tensor's data must be type of ${m}`)}else if(p=e,Array.isArray(t)){if(t.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let m=typeof t[0];if(m==="string")r="string",l=t;else if(m==="boolean")r="bool",l=Uint8Array.from(t);else throw new TypeError(`Invalid element type of data array: ${m}.`)}else{let m=Qr.get(t.constructor);if(m===void 0)throw new TypeError(`Unsupported type for tensor data: ${t.constructor}.`);r=m,l=t}if(p===void 0)p=[l.length];else if(!Array.isArray(p))throw new TypeError("A tensor's dims must be a number array");a=p,this.cpuData=l,this.dataLocation="cpu"}let i=as(a);if(this.cpuData&&i!==this.cpuData.length)throw new Error(`Tensor's size(${i}) does not match data length(${this.cpuData.length}).`);this.type=r,this.dims=a,this.size=i}static async fromImage(t,e){return Za(t,e)}static fromTexture(t,e){return Qa(t,e)}static fromGpuBuffer(t,e){return es(t,e)}static fromPinnedBuffer(t,e,n){return ts(t,e,n)}toDataURL(t){return Xa(this,t)}toImageData(t){return Ka(this,t)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(t){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let e=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=e,t&&this.disposer&&(this.disposer(),this.disposer=void 0),e}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(t){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return ss(this,t)}}}),Me,Fn=L$2(()=>{Cn(),Me=Je}),ls,fs,lr,fr,Ho=L$2(()=>{Vo(),ls=(t,e)=>{(typeof ut.trace>"u"?!ut.wasm.trace:!ut.trace)||console.timeStamp(`${t}::ORT::${e}`)},fs=(t,e)=>{let n=new Error().stack?.split(/\r\n|\r|\n/g)||[],r=!1;for(let a=0;a<n.length;a++){if(r&&!n[a].includes("TRACE_FUNC")){let i=`FUNC_${t}::${n[a].trim().split(" ")[1]}`;e&&(i+=`::${e}`),ls("CPU",i);return}n[a].includes("TRACE_FUNC")&&(r=!0)}},lr=t=>{(typeof ut.trace>"u"?!ut.wasm.trace:!ut.trace)||fs("BEGIN",t)},fr=t=>{(typeof ut.trace>"u"?!ut.wasm.trace:!ut.trace)||fs("END",t)}}),$n,cs=L$2(()=>{Ln(),Fn(),Ho(),$n=class EI{constructor(e){this.handler=e}async run(e,n,r){lr();let a={},i={};if(typeof e!="object"||e===null||e instanceof Me||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let l=!0;if(typeof n=="object"){if(n===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(n instanceof Me)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(n)){if(n.length===0)throw new TypeError("'fetches' cannot be an empty array.");l=!1;for(let s of n){if(typeof s!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(s)===-1)throw new RangeError(`'fetches' contains invalid output name: ${s}.`);a[s]=null}if(typeof r=="object"&&r!==null)i=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else{let s=!1,h=Object.getOwnPropertyNames(n);for(let f of this.outputNames)if(h.indexOf(f)!==-1){let v=n[f];(v===null||v instanceof Me)&&(s=!0,l=!1,a[f]=v)}if(s){if(typeof r=="object"&&r!==null)i=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else i=n}}else if(typeof n<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let s of this.inputNames)if(typeof e[s]>"u")throw new Error(`input '${s}' is missing in 'feeds'.`);if(l)for(let s of this.outputNames)a[s]=null;let p=await this.handler.run(e,a,i),m={};for(let s in p)if(Object.hasOwnProperty.call(p,s)){let h=p[s];h instanceof Me?m[s]=h:m[s]=new Me(h.type,h.data,h.dims)}return fr(),m}async release(){return this.handler.dispose()}static async create(e,n,r,a){lr();let i,l={};if(typeof e=="string"){if(i=e,typeof n=="object"&&n!==null)l=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof Uint8Array){if(i=e,typeof n=="object"&&n!==null)l=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer){let h=e,f=0,v=e.byteLength;if(typeof n=="object"&&n!==null)l=n;else if(typeof n=="number"){if(f=n,!Number.isSafeInteger(f))throw new RangeError("'byteOffset' must be an integer.");if(f<0||f>=h.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${h.byteLength}).`);if(v=e.byteLength-f,typeof r=="number"){if(v=r,!Number.isSafeInteger(v))throw new RangeError("'byteLength' must be an integer.");if(v<=0||f+v>h.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${h.byteLength-f}].`);if(typeof a=="object"&&a!==null)l=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else if(typeof r<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof n<"u")throw new TypeError("'options' must be an object.");i=new Uint8Array(h,f,v)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[p,m]=await Dn(l),s=await p.createInferenceSessionHandler(i,m);return fr(),new EI(s)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}}),Pd,ps=L$2(()=>{cs(),Pd=$n}),ds=L$2(()=>{}),hs=L$2(()=>{}),ms=L$2(()=>{}),bs=L$2(()=>{}),Ed,kn,gs=L$2(()=>{Ln(),Fn(),Ed="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",kn=class wI{constructor(e,n,r){this.handler=e,this.hasOptimizerModel=n,this.hasEvalModel=r}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static async create(e,n){let r=e.evalModel||"",a=e.optimizerModel||"",i=n||{},[l,p]=await Dn(i);if(l.createTrainingSessionHandler){let m=await l.createTrainingSessionHandler(e.checkpointState,e.trainModel,r,a,p);return new wI(m,!!e.optimizerModel,!!e.evalModel)}else throw new Error(Ed)}typeNarrowingForRunStep(e,n,r,a,i){let l={},p={};if(typeof r!="object"||r===null||r instanceof Me||Array.isArray(r))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let m=!0;if(typeof a=="object"){if(a===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(a instanceof Me)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(a)){if(a.length===0)throw new TypeError("'fetches' cannot be an empty array.");m=!1;for(let s of a){if(typeof s!="string")throw new TypeError("'fetches' must be a string array or an object.");if(n.indexOf(s)===-1)throw new RangeError(`'fetches' contains invalid output name: ${s}.`);l[s]=null}if(typeof i=="object"&&i!==null)p=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else{let s=!1,h=Object.getOwnPropertyNames(a);for(let f of n)if(h.indexOf(f)!==-1){let v=a[f];(v===null||v instanceof Me)&&(s=!0,m=!1,l[f]=v)}if(s){if(typeof i=="object"&&i!==null)p=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else p=a}}else if(typeof a<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let s of e)if(typeof r[s]>"u")throw new Error(`input '${s}' is missing in 'feeds'.`);if(m)for(let s of n)l[s]=null;return[l,p]}convertHandlerReturnTypeToMapOfTensors(e){let n={};for(let r in e)if(Object.hasOwnProperty.call(e,r)){let a=e[r];a instanceof Me?n[r]=a:n[r]=new Me(a.type,a.data,a.dims)}return n}async lazyResetGrad(){await this.handler.lazyResetGrad()}async runTrainStep(e,n,r){let[a,i]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,e,n,r),l=await this.handler.runTrainStep(e,a,i);return this.convertHandlerReturnTypeToMapOfTensors(l)}async runOptimizerStep(e){if(this.hasOptimizerModel)await this.handler.runOptimizerStep(e||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")}async runEvalStep(e,n,r){if(this.hasEvalModel){let[a,i]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,e,n,r),l=await this.handler.runEvalStep(e,a,i);return this.convertHandlerReturnTypeToMapOfTensors(l)}else throw new Error("This TrainingSession has no EvalModel loaded.")}async getParametersSize(e=!0){return this.handler.getParametersSize(e)}async loadParametersBuffer(e,n=!0){let r=await this.getParametersSize(n);if(e.length!==4*r)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(e,n)}async getContiguousParameters(e=!0){return this.handler.getContiguousParameters(e)}async release(){return this.handler.dispose()}}}),Dd,ys=L$2(()=>{gs(),Dd=kn}),qo={};Sr(qo,{InferenceSession:()=>Pd,TRACE:()=>ls,TRACE_FUNC_BEGIN:()=>lr,TRACE_FUNC_END:()=>fr,Tensor:()=>Me,TrainingSession:()=>Dd,env:()=>Z,registerBackend:()=>Pr});var Ot=L$2(()=>{Wa(),Ya(),ps(),Fn(),ds(),hs(),Ho(),ms(),bs(),ys()});function Xt(t,e,n,r){if(e===void 0)return Cd(t);if(n===void 0)Bn(t,e);else if(typeof n=="number"&&r===void 0)Bn(t,e);else if(typeof n=="string"&&r===void 0)Bn(t,n,1,e);else if(typeof n=="string"&&typeof r=="number")Bn(t,n,r,e);else throw new TypeError("input is valid")}function Cd(t){return{verbose:Xt.verbose.bind(null,t),info:Xt.info.bind(null,t),warning:Xt.warning.bind(null,t),error:Xt.error.bind(null,t),fatal:Xt.fatal.bind(null,t)}}function Bn(t,e,n,r){let a=en[r||""]||en[""];xs[t]<xs[a.minimalSeverity]||(a.logDateTime&&(e=`${new Date().toISOString()}|${e}`),a.logSourceLocation,Ld[a.provider].log(t,e,r))}var jo,Yo,xs,Ld,ws,en,ce,Rn,Mn,Gn,Nn,lt=L$2(()=>{jo=class{log(t,e,n){}},Yo=class{log(t,e,n){console.log(`${this.color(t)} ${n?"\x1B[35m"+n+"\x1B[0m ":""}${e}`)}color(t){switch(t){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${t}`)}}},xs={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},Ld={none:new jo,console:new Yo},ws={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1},en={"":ws},(t=>{function e(s,h){t("verbose",s,h)}t.verbose=e;function n(s,h){t("info",s,h)}t.info=n;function r(s,h){t("warning",s,h)}t.warning=r;function a(s,h){t("error",s,h)}t.error=a;function i(s,h){t("fatal",s,h)}t.fatal=i;function l(s){en={},p("",s||{})}t.reset=l;function p(s,h){if(s==="*")l(h);else{let f=en[s]||ws;en[s]={provider:h.provider||f.provider,minimalSeverity:h.minimalSeverity||f.minimalSeverity,logDateTime:h.logDateTime===void 0?f.logDateTime:h.logDateTime,logSourceLocation:h.logSourceLocation===void 0?f.logSourceLocation:h.logSourceLocation}}}t.set=p;function m(s){let h={};s.logLevel&&(h.minimalSeverity=s.logLevel),p("",h)}t.setWithEnv=m})(Xt||={}),ce=Xt,Rn=class{constructor(t,e,n,r,a,i){this.category=t,this.name=e,this.startTime=n,this.endCallback=r,this.timer=a,this.ctx=i}async end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}},Mn=class{constructor(t,e,n,r){this.category=t,this.name=e,this.startTime=n,this.endTime=r}},Gn=class{constructor(t,e,n){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=t===void 0?1e4:t,this._flushBatchSize=e===void 0?10:e,this._flushIntervalInMilliseconds=n===void 0?5e3:n}static create(t){return t===void 0?new this:new this(t.maxNumberEvents,t.flushBatchSize,t.flushIntervalInMilliseconds)}start(){this._started=!0,this._timingEvents=[],this._flushTime=Nn(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(t,e,n,r){let a=this._started?this.begin(t,e,r):void 0,i=!1,l=n();if(l&&typeof l.then=="function")return i=!0,new Promise((p,m)=>{l.then(async s=>{a&&await a.end(),p(s)},async s=>{a&&await a.end(),m(s)})});if(!i&&a){let p=a.end();if(p&&typeof p.then=="function")return new Promise((m,s)=>{p.then(()=>{m(l)},h=>{s(h)})})}return l}begin(t,e,n){if(!this._started)throw new Error("profiler is not started yet");if(n===void 0){let r=Nn();return this.flush(r),new Rn(t,e,r,a=>this.endSync(a))}else{let r=n.beginTimer();return new Rn(t,e,0,async a=>this.end(a),r,n)}}async end(t){let e=await t.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Mn(t.category,t.name,t.startTime,e)),this.flush(e))}endSync(t){let e=Nn();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Mn(t.category,t.name,t.startTime,e)),this.flush(e))}logOneEvent(t){ce.verbose(`Profiler.${t.category}`,`${(t.endTime-t.startTime).toFixed(2)}ms on event '${t.name}' at ${t.endTime.toFixed(2)}`)}flush(t){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||t-this._flushTime>=this._flushIntervalInMilliseconds){for(let e=this._flushPointer;this._flushPointer<e+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=Nn()}}get started(){return this._started}},Nn=typeof performance<"u"&&performance.now?()=>performance.now():Date.now});function vs(t,e,n){for(let r of n){let a=r[0],i=r[1],l=r[2],p=r[3],m=r[4];if(t.opType===a){for(let s of e)if((s.domain===i||s.domain==="ai.onnx"&&i==="")&&Fd(s.version,l))return{opImpl:p,opInit:m}}}throw new TypeError(`cannot resolve operator '${t.opType}' with opsets: ${e.map(r=>`${r.domain||"ai.onnx"} v${r.version}`).join(", ")}`)}function Fd(t,e){if(e.endsWith("+")){let n=Number.parseInt(e.substring(0,e.length-1),10);return!isNaN(n)&&n<=t}else if(e.split("-").length===2){let n=e.split("-"),r=Number.parseInt(n[0],10),a=Number.parseInt(n[1],10);return!isNaN(r)&&!isNaN(a)&&r<=t&&t<=a}else return Number.parseInt(e,10)===t}var _s=L$2(()=>{}),Os=me(t=>{t.__esModule=!0;var e=(function(){function n(r){if(!r)throw new TypeError("Invalid argument; `value` has no value.");this.value=n.EMPTY,r&&n.isGuid(r)&&(this.value=r)}return n.isGuid=function(r){var a=r.toString();return r&&(r instanceof n||n.validator.test(a))},n.create=function(){return new n([n.gen(2),n.gen(1),n.gen(1),n.gen(1),n.gen(3)].join("-"))},n.createEmpty=function(){return new n("emptyguid")},n.parse=function(r){return new n(r)},n.raw=function(){return[n.gen(2),n.gen(1),n.gen(1),n.gen(1),n.gen(3)].join("-")},n.gen=function(r){for(var a="",i=0;i<r;i++)a+=((1+Math.random())*65536|0).toString(16).substring(1);return a},n.prototype.equals=function(r){return n.isGuid(r)&&this.value===r.toString()},n.prototype.isEmpty=function(){return this.value===n.EMPTY},n.prototype.toString=function(){return this.value},n.prototype.toJSON=function(){return{value:this.value}},n.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),n.EMPTY="00000000-0000-0000-0000-000000000000",n})();t.Guid=e});function be(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}function Xe(t){return(t&&t.__isLong__)===!0}function Is(t){var e=Math.clz32(t&-t);return t?31-e:e}function cr(t,e){var n,r,a;return e?(t>>>=0,(a=0<=t&&t<256)&&(r=As[t],r)?r:(n=le(t,0,!0),a&&(As[t]=n),n)):(t|=0,(a=-128<=t&&t<128)&&(r=Ss[t],r)?r:(n=le(t,t<0?-1:0,!1),a&&(Ss[t]=n),n))}function ct(t,e){if(isNaN(t))return e?zt:It;if(e){if(t<0)return zt;if(t>=Ls)return $s}else{if(t<=-Es)return nt;if(t+1>=Es)return Fs}return t<0?ct(-t,e).neg():le(t%Dr|0,t/Dr|0,e)}function le(t,e,n){return new be(t,e,n)}function Jo(t,e,n){if(t.length===0)throw Error("empty string");if(typeof e=="number"?(n=e,e=!1):e=!!e,t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return e?zt:It;if(n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return Jo(t.substring(1),e,n).neg();for(var a=ct(Un(n,8)),i=It,l=0;l<t.length;l+=8){var p=Math.min(8,t.length-l),m=parseInt(t.substring(l,l+p),n);if(p<8){var s=ct(Un(n,p));i=i.mul(s).add(ct(m))}else i=i.mul(a),i=i.add(ct(m))}return i.unsigned=e,i}function St(t,e){return typeof t=="number"?ct(t,e):typeof t=="string"?Jo(t,e):le(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}var ft,Ss,As,Un,Ps,kd,Dr,Ls,Es,Ds,It,zt,Er,Cs,Ko,Fs,$s,nt,B,Vt,Zo=L$2(()=>{ft=null;try{ft=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}be.prototype.__isLong__,Object.defineProperty(be.prototype,"__isLong__",{value:!0}),be.isLong=Xe,Ss={},As={},be.fromInt=cr,be.fromNumber=ct,be.fromBits=le,Un=Math.pow,be.fromString=Jo,be.fromValue=St,Ps=65536,kd=1<<24,Dr=Ps*Ps,Ls=Dr*Dr,Es=Ls/2,Ds=cr(kd),It=cr(0),be.ZERO=It,zt=cr(0,!0),be.UZERO=zt,Er=cr(1),be.ONE=Er,Cs=cr(1,!0),be.UONE=Cs,Ko=cr(-1),be.NEG_ONE=Ko,Fs=le(-1,2147483647,!1),be.MAX_VALUE=Fs,$s=le(-1,-1,!0),be.MAX_UNSIGNED_VALUE=$s,nt=le(0,-2147483648,!1),be.MIN_VALUE=nt,B=be.prototype,B.toInt=function(){return this.unsigned?this.low>>>0:this.low},B.toNumber=function(){return this.unsigned?(this.high>>>0)*Dr+(this.low>>>0):this.high*Dr+(this.low>>>0)},B.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(nt)){var e=ct(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var a=ct(Un(t,6),this.unsigned),i=this,l="";;){var p=i.div(a),m=i.sub(p.mul(a)).toInt()>>>0,s=m.toString(t);if(i=p,i.isZero())return s+l;for(;s.length<6;)s="0"+s;l=""+s+l}},B.getHighBits=function(){return this.high},B.getHighBitsUnsigned=function(){return this.high>>>0},B.getLowBits=function(){return this.low},B.getLowBitsUnsigned=function(){return this.low>>>0},B.getNumBitsAbs=function(){if(this.isNegative())return this.eq(nt)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,e=31;e>0&&!(t&1<<e);e--);return this.high!=0?e+33:e+1},B.isZero=function(){return this.high===0&&this.low===0},B.eqz=B.isZero,B.isNegative=function(){return!this.unsigned&&this.high<0},B.isPositive=function(){return this.unsigned||this.high>=0},B.isOdd=function(){return(this.low&1)===1},B.isEven=function(){return(this.low&1)===0},B.equals=function(t){return Xe(t)||(t=St(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low},B.eq=B.equals,B.notEquals=function(t){return!this.eq(t)},B.neq=B.notEquals,B.ne=B.notEquals,B.lessThan=function(t){return this.comp(t)<0},B.lt=B.lessThan,B.lessThanOrEqual=function(t){return this.comp(t)<=0},B.lte=B.lessThanOrEqual,B.le=B.lessThanOrEqual,B.greaterThan=function(t){return this.comp(t)>0},B.gt=B.greaterThan,B.greaterThanOrEqual=function(t){return this.comp(t)>=0},B.gte=B.greaterThanOrEqual,B.ge=B.greaterThanOrEqual,B.compare=function(t){if(Xe(t)||(t=St(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},B.comp=B.compare,B.negate=function(){return!this.unsigned&&this.eq(nt)?nt:this.not().add(Er)},B.neg=B.negate,B.add=function(t){Xe(t)||(t=St(t));var e=this.high>>>16,n=this.high&65535,r=this.low>>>16,a=this.low&65535,i=t.high>>>16,l=t.high&65535,p=t.low>>>16,m=t.low&65535,s=0,h=0,f=0,v=0;return v+=a+m,f+=v>>>16,v&=65535,f+=r+p,h+=f>>>16,f&=65535,h+=n+l,s+=h>>>16,h&=65535,s+=e+i,s&=65535,le(f<<16|v,s<<16|h,this.unsigned)},B.subtract=function(t){return Xe(t)||(t=St(t)),this.add(t.neg())},B.sub=B.subtract,B.multiply=function(t){if(this.isZero())return this;if(Xe(t)||(t=St(t)),ft){var e=ft.mul(this.low,this.high,t.low,t.high);return le(e,ft.get_high(),this.unsigned)}if(t.isZero())return this.unsigned?zt:It;if(this.eq(nt))return t.isOdd()?nt:It;if(t.eq(nt))return this.isOdd()?nt:It;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(Ds)&&t.lt(Ds))return ct(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,r=this.high&65535,a=this.low>>>16,i=this.low&65535,l=t.high>>>16,p=t.high&65535,m=t.low>>>16,s=t.low&65535,h=0,f=0,v=0,I=0;return I+=i*s,v+=I>>>16,I&=65535,v+=a*s,f+=v>>>16,v&=65535,v+=i*m,f+=v>>>16,v&=65535,f+=r*s,h+=f>>>16,f&=65535,f+=a*m,h+=f>>>16,f&=65535,f+=i*p,h+=f>>>16,f&=65535,h+=n*s+r*m+a*p+i*l,h&=65535,le(v<<16|I,h<<16|f,this.unsigned)},B.mul=B.multiply,B.divide=function(t){if(Xe(t)||(t=St(t)),t.isZero())throw Error("division by zero");if(ft){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var e=(this.unsigned?ft.div_u:ft.div_s)(this.low,this.high,t.low,t.high);return le(e,ft.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?zt:It;var n,r,a;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return zt;if(t.gt(this.shru(1)))return Cs;a=zt}else{if(this.eq(nt)){if(t.eq(Er)||t.eq(Ko))return nt;if(t.eq(nt))return Er;var i=this.shr(1);return n=i.div(t).shl(1),n.eq(It)?t.isNegative()?Er:Ko:(r=this.sub(t.mul(n)),a=n.add(r.div(t)),a)}else if(t.eq(nt))return this.unsigned?zt:It;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();a=It}for(r=this;r.gte(t);){n=Math.max(1,Math.floor(r.toNumber()/t.toNumber()));for(var l=Math.ceil(Math.log(n)/Math.LN2),p=l<=48?1:Un(2,l-48),m=ct(n),s=m.mul(t);s.isNegative()||s.gt(r);)n-=p,m=ct(n,this.unsigned),s=m.mul(t);m.isZero()&&(m=Er),a=a.add(m),r=r.sub(s)}return a},B.div=B.divide,B.modulo=function(t){if(Xe(t)||(t=St(t)),ft){var e=(this.unsigned?ft.rem_u:ft.rem_s)(this.low,this.high,t.low,t.high);return le(e,ft.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))},B.mod=B.modulo,B.rem=B.modulo,B.not=function(){return le(~this.low,~this.high,this.unsigned)},B.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},B.clz=B.countLeadingZeros,B.countTrailingZeros=function(){return this.low?Is(this.low):Is(this.high)+32},B.ctz=B.countTrailingZeros,B.and=function(t){return Xe(t)||(t=St(t)),le(this.low&t.low,this.high&t.high,this.unsigned)},B.or=function(t){return Xe(t)||(t=St(t)),le(this.low|t.low,this.high|t.high,this.unsigned)},B.xor=function(t){return Xe(t)||(t=St(t)),le(this.low^t.low,this.high^t.high,this.unsigned)},B.shiftLeft=function(t){return Xe(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?le(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):le(0,this.low<<t-32,this.unsigned)},B.shl=B.shiftLeft,B.shiftRight=function(t){return Xe(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?le(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):le(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},B.shr=B.shiftRight,B.shiftRightUnsigned=function(t){return Xe(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?le(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):t===32?le(this.high,0,this.unsigned):le(this.high>>>t-32,0,this.unsigned)},B.shru=B.shiftRightUnsigned,B.shr_u=B.shiftRightUnsigned,B.rotateLeft=function(t){var e;return Xe(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?le(this.high,this.low,this.unsigned):t<32?(e=32-t,le(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(t-=32,e=32-t,le(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))},B.rotl=B.rotateLeft,B.rotateRight=function(t){var e;return Xe(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?le(this.high,this.low,this.unsigned):t<32?(e=32-t,le(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(t-=32,e=32-t,le(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))},B.rotr=B.rotateRight,B.toSigned=function(){return this.unsigned?le(this.low,this.high,!1):this},B.toUnsigned=function(){return this.unsigned?this:le(this.low,this.high,!0)},B.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},B.toBytesLE=function(){var t=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]},B.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,e>>>24,e>>>16&255,e>>>8&255,e&255]},be.fromBytes=function(t,e,n){return n?be.fromBytesLE(t,e):be.fromBytesBE(t,e)},be.fromBytesLE=function(t,e){return new be(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},be.fromBytesBE=function(t,e){return new be(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)},Vt=be}),_,zn=L$2(()=>{_={},_.Offset,_.Table,_.SIZEOF_SHORT=2,_.SIZEOF_INT=4,_.FILE_IDENTIFIER_LENGTH=4,_.SIZE_PREFIX_LENGTH=4,_.Encoding={UTF8_BYTES:1,UTF16_STRING:2},_.int32=new Int32Array(2),_.float32=new Float32Array(_.int32.buffer),_.float64=new Float64Array(_.int32.buffer),_.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,_.Long=function(t,e){this.low=t|0,this.high=e|0},_.Long.create=function(t,e){return t==0&&e==0?_.Long.ZERO:new _.Long(t,e)},_.Long.prototype.toFloat64=function(){return(this.low>>>0)+this.high*4294967296},_.Long.prototype.equals=function(t){return this.low==t.low&&this.high==t.high},_.Long.ZERO=new _.Long(0,0),_.Builder=function(t){if(t)var e=t;else var e=1024;this.bb=_.ByteBuffer.allocate(e),this.space=e,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},_.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},_.Builder.prototype.forceDefaults=function(t){this.force_defaults=t},_.Builder.prototype.dataBuffer=function(){return this.bb},_.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},_.Builder.prototype.prep=function(t,e){t>this.minalign&&(this.minalign=t);for(var n=~(this.bb.capacity()-this.space+e)+1&t-1;this.space<n+t+e;){var r=this.bb.capacity();this.bb=_.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r}this.pad(n)},_.Builder.prototype.pad=function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)},_.Builder.prototype.writeInt8=function(t){this.bb.writeInt8(this.space-=1,t)},_.Builder.prototype.writeInt16=function(t){this.bb.writeInt16(this.space-=2,t)},_.Builder.prototype.writeInt32=function(t){this.bb.writeInt32(this.space-=4,t)},_.Builder.prototype.writeInt64=function(t){this.bb.writeInt64(this.space-=8,t)},_.Builder.prototype.writeFloat32=function(t){this.bb.writeFloat32(this.space-=4,t)},_.Builder.prototype.writeFloat64=function(t){this.bb.writeFloat64(this.space-=8,t)},_.Builder.prototype.addInt8=function(t){this.prep(1,0),this.writeInt8(t)},_.Builder.prototype.addInt16=function(t){this.prep(2,0),this.writeInt16(t)},_.Builder.prototype.addInt32=function(t){this.prep(4,0),this.writeInt32(t)},_.Builder.prototype.addInt64=function(t){this.prep(8,0),this.writeInt64(t)},_.Builder.prototype.addFloat32=function(t){this.prep(4,0),this.writeFloat32(t)},_.Builder.prototype.addFloat64=function(t){this.prep(8,0),this.writeFloat64(t)},_.Builder.prototype.addFieldInt8=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))},_.Builder.prototype.addFieldInt16=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))},_.Builder.prototype.addFieldInt32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))},_.Builder.prototype.addFieldInt64=function(t,e,n){(this.force_defaults||!e.equals(n))&&(this.addInt64(e),this.slot(t))},_.Builder.prototype.addFieldFloat32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))},_.Builder.prototype.addFieldFloat64=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))},_.Builder.prototype.addFieldOffset=function(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))},_.Builder.prototype.addFieldStruct=function(t,e,n){e!=n&&(this.nested(e),this.slot(t))},_.Builder.prototype.nested=function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},_.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},_.Builder.prototype.slot=function(t){this.vtable[t]=this.offset()},_.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},_.Builder.growByteBuffer=function(t){var e=t.capacity();if(e&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var n=e<<1,r=_.ByteBuffer.allocate(n);return r.setPosition(n-e),r.bytes().set(t.bytes(),n-e),r},_.Builder.prototype.addOffset=function(t){this.prep(_.SIZEOF_INT,0),this.writeInt32(this.offset()-t+_.SIZEOF_INT)},_.Builder.prototype.startObject=function(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()},_.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&this.vtable[e]==0;e--);for(var n=e+1;e>=0;e--)this.addInt16(this.vtable[e]!=0?t-this.vtable[e]:0);var r=2;this.addInt16(t-this.object_start);var a=(n+r)*_.SIZEOF_SHORT;this.addInt16(a);var i=0,l=this.space;e:for(e=0;e<this.vtables.length;e++){var p=this.bb.capacity()-this.vtables[e];if(a==this.bb.readInt16(p)){for(var m=_.SIZEOF_SHORT;m<a;m+=_.SIZEOF_SHORT)if(this.bb.readInt16(l+m)!=this.bb.readInt16(p+m))continue e;i=this.vtables[e];break}}return i?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,i-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t},_.Builder.prototype.finish=function(t,e,n){var r=n?_.SIZE_PREFIX_LENGTH:0;if(e){var a=e;if(this.prep(this.minalign,_.SIZEOF_INT+_.FILE_IDENTIFIER_LENGTH+r),a.length!=_.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+_.FILE_IDENTIFIER_LENGTH);for(var i=_.FILE_IDENTIFIER_LENGTH-1;i>=0;i--)this.writeInt8(a.charCodeAt(i))}this.prep(this.minalign,_.SIZEOF_INT+r),this.addOffset(t),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},_.Builder.prototype.finishSizePrefixed=function(t,e){this.finish(t,e,!0)},_.Builder.prototype.requiredField=function(t,e){var n=this.bb.capacity()-t,r=n-this.bb.readInt32(n),a=this.bb.readInt16(r+e)!=0;if(!a)throw new Error("FlatBuffers: field "+e+" must be set")},_.Builder.prototype.startVector=function(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(_.SIZEOF_INT,t*e),this.prep(n,t*e)},_.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},_.Builder.prototype.createString=function(t){if(t instanceof Uint8Array)var e=t;else for(var e=[],n=0;n<t.length;){var r,a=t.charCodeAt(n++);if(a<55296||a>=56320)r=a;else{var i=t.charCodeAt(n++);r=(a<<10)+i+-56613888}r<128?e.push(r):(r<2048?e.push(r>>6&31|192):(r<65536?e.push(r>>12&15|224):e.push(r>>18&7|240,r>>12&63|128),e.push(r>>6&63|128)),e.push(r&63|128))}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);for(var n=0,l=this.space,p=this.bb.bytes();n<e.length;n++)p[l++]=e[n];return this.endVector()},_.Builder.prototype.createLong=function(t,e){return _.Long.create(t,e)},_.ByteBuffer=function(t){this.bytes_=t,this.position_=0},_.ByteBuffer.allocate=function(t){return new _.ByteBuffer(new Uint8Array(t))},_.ByteBuffer.prototype.clear=function(){this.position_=0},_.ByteBuffer.prototype.bytes=function(){return this.bytes_},_.ByteBuffer.prototype.position=function(){return this.position_},_.ByteBuffer.prototype.setPosition=function(t){this.position_=t},_.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},_.ByteBuffer.prototype.readInt8=function(t){return this.readUint8(t)<<24>>24},_.ByteBuffer.prototype.readUint8=function(t){return this.bytes_[t]},_.ByteBuffer.prototype.readInt16=function(t){return this.readUint16(t)<<16>>16},_.ByteBuffer.prototype.readUint16=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8},_.ByteBuffer.prototype.readInt32=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24},_.ByteBuffer.prototype.readUint32=function(t){return this.readInt32(t)>>>0},_.ByteBuffer.prototype.readInt64=function(t){return new _.Long(this.readInt32(t),this.readInt32(t+4))},_.ByteBuffer.prototype.readUint64=function(t){return new _.Long(this.readUint32(t),this.readUint32(t+4))},_.ByteBuffer.prototype.readFloat32=function(t){return _.int32[0]=this.readInt32(t),_.float32[0]},_.ByteBuffer.prototype.readFloat64=function(t){return _.int32[_.isLittleEndian?0:1]=this.readInt32(t),_.int32[_.isLittleEndian?1:0]=this.readInt32(t+4),_.float64[0]},_.ByteBuffer.prototype.writeInt8=function(t,e){this.bytes_[t]=e},_.ByteBuffer.prototype.writeUint8=function(t,e){this.bytes_[t]=e},_.ByteBuffer.prototype.writeInt16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},_.ByteBuffer.prototype.writeUint16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},_.ByteBuffer.prototype.writeInt32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},_.ByteBuffer.prototype.writeUint32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},_.ByteBuffer.prototype.writeInt64=function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)},_.ByteBuffer.prototype.writeUint64=function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)},_.ByteBuffer.prototype.writeFloat32=function(t,e){_.float32[0]=e,this.writeInt32(t,_.int32[0])},_.ByteBuffer.prototype.writeFloat64=function(t,e){_.float64[0]=e,this.writeInt32(t,_.int32[_.isLittleEndian?0:1]),this.writeInt32(t+4,_.int32[_.isLittleEndian?1:0])},_.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+_.SIZEOF_INT+_.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<_.FILE_IDENTIFIER_LENGTH;e++)t+=String.fromCharCode(this.readInt8(this.position_+_.SIZEOF_INT+e));return t},_.ByteBuffer.prototype.__offset=function(t,e){var n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0},_.ByteBuffer.prototype.__union=function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t},_.ByteBuffer.prototype.__string=function(t,e){t+=this.readInt32(t);var n=this.readInt32(t),r="",a=0;if(t+=_.SIZEOF_INT,e===_.Encoding.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;a<n;){var i,l=this.readUint8(t+a++);if(l<192)i=l;else{var p=this.readUint8(t+a++);if(l<224)i=(l&31)<<6|p&63;else{var m=this.readUint8(t+a++);if(l<240)i=(l&15)<<12|(p&63)<<6|m&63;else{var s=this.readUint8(t+a++);i=(l&7)<<18|(p&63)<<12|(m&63)<<6|s&63}}}i<65536?r+=String.fromCharCode(i):(i-=65536,r+=String.fromCharCode((i>>10)+55296,(i&1023)+56320))}return r},_.ByteBuffer.prototype.__indirect=function(t){return t+this.readInt32(t)},_.ByteBuffer.prototype.__vector=function(t){return t+this.readInt32(t)+_.SIZEOF_INT},_.ByteBuffer.prototype.__vector_len=function(t){return this.readInt32(t+this.readInt32(t))},_.ByteBuffer.prototype.__has_identifier=function(t){if(t.length!=_.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+_.FILE_IDENTIFIER_LENGTH);for(var e=0;e<_.FILE_IDENTIFIER_LENGTH;e++)if(t.charCodeAt(e)!=this.readInt8(this.position_+_.SIZEOF_INT+e))return!1;return!0},_.ByteBuffer.prototype.createLong=function(t,e){return _.Long.create(t,e)}}),V,tn=L$2(()=>{zn(),(t=>{(e=>{(n=>{(r=>(r[r.UNDEFINED=0]="UNDEFINED",r[r.FLOAT=1]="FLOAT",r[r.INT=2]="INT",r[r.STRING=3]="STRING",r[r.TENSOR=4]="TENSOR",r[r.GRAPH=5]="GRAPH",r[r.FLOATS=6]="FLOATS",r[r.INTS=7]="INTS",r[r.STRINGS=8]="STRINGS",r[r.TENSORS=9]="TENSORS",r[r.GRAPHS=10]="GRAPHS",r[r.SPARSE_TENSOR=11]="SPARSE_TENSOR",r[r.SPARSE_TENSORS=12]="SPARSE_TENSORS"))(n.AttributeType||={})})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{(r=>(r[r.UNKNOWN=0]="UNKNOWN",r[r.VALUE=1]="VALUE",r[r.PARAM=2]="PARAM"))(n.DimensionValueType||={})})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{(r=>(r[r.UNDEFINED=0]="UNDEFINED",r[r.FLOAT=1]="FLOAT",r[r.UINT8=2]="UINT8",r[r.INT8=3]="INT8",r[r.UINT16=4]="UINT16",r[r.INT16=5]="INT16",r[r.INT32=6]="INT32",r[r.INT64=7]="INT64",r[r.STRING=8]="STRING",r[r.BOOL=9]="BOOL",r[r.FLOAT16=10]="FLOAT16",r[r.DOUBLE=11]="DOUBLE",r[r.UINT32=12]="UINT32",r[r.UINT64=13]="UINT64",r[r.COMPLEX64=14]="COMPLEX64",r[r.COMPLEX128=15]="COMPLEX128",r[r.BFLOAT16=16]="BFLOAT16",r[r.FLOAT8E4M3FN=17]="FLOAT8E4M3FN",r[r.FLOAT8E4M3FNUZ=18]="FLOAT8E4M3FNUZ",r[r.FLOAT8E5M2=19]="FLOAT8E5M2",r[r.FLOAT8E5M2FNUZ=20]="FLOAT8E5M2FNUZ"))(n.TensorDataType||={})})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{(r=>(r[r.Primitive=0]="Primitive",r[r.Fused=1]="Fused"))(n.NodeType||={})})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{(r=>(r[r.NONE=0]="NONE",r[r.tensor_type=1]="tensor_type",r[r.sequence_type=2]="sequence_type",r[r.map_type=3]="map_type"))(n.TypeInfoValue||={})})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(i,l){return this.bb_pos=i,this.bb=l,this}static getRootAsShape(i,l){return(l||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsShape(i,l){return i.setPosition(i.position()+_.SIZE_PREFIX_LENGTH),(l||new r).__init(i.readInt32(i.position())+i.position(),i)}dim(i,l){let p=this.bb.__offset(this.bb_pos,4);return p?(l||new t.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+p)+i*4),this.bb):null}dimLength(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__vector_len(this.bb_pos+i):0}static startShape(i){i.startObject(1)}static addDim(i,l){i.addFieldOffset(0,l,0)}static createDimVector(i,l){i.startVector(4,l.length,4);for(let p=l.length-1;p>=0;p--)i.addOffset(l[p]);return i.endVector()}static startDimVector(i,l){i.startVector(4,l,4)}static endShape(i){return i.endObject()}static createShape(i,l){return r.startShape(i),r.addDim(i,l),r.endShape(i)}}n.Shape=r})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(i,l){return this.bb_pos=i,this.bb=l,this}static getRootAsDimension(i,l){return(l||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsDimension(i,l){return i.setPosition(i.position()+_.SIZE_PREFIX_LENGTH),(l||new r).__init(i.readInt32(i.position())+i.position(),i)}value(i){let l=this.bb.__offset(this.bb_pos,4);return l?(i||new t.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}denotation(i){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,i):null}static startDimension(i){i.startObject(2)}static addValue(i,l){i.addFieldOffset(0,l,0)}static addDenotation(i,l){i.addFieldOffset(1,l,0)}static endDimension(i){return i.endObject()}static createDimension(i,l,p){return r.startDimension(i),r.addValue(i,l),r.addDenotation(i,p),r.endDimension(i)}}n.Dimension=r})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(i,l){return this.bb_pos=i,this.bb=l,this}static getRootAsDimensionValue(i,l){return(l||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsDimensionValue(i,l){return i.setPosition(i.position()+_.SIZE_PREFIX_LENGTH),(l||new r).__init(i.readInt32(i.position())+i.position(),i)}dimType(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt8(this.bb_pos+i):0}dimValue(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.readInt64(this.bb_pos+i):this.bb.createLong(0,0)}dimParam(i){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__string(this.bb_pos+l,i):null}static startDimensionValue(i){i.startObject(3)}static addDimType(i,l){i.addFieldInt8(0,l,0)}static addDimValue(i,l){i.addFieldInt64(1,l,i.createLong(0,0))}static addDimParam(i,l){i.addFieldOffset(2,l,0)}static endDimensionValue(i){return i.endObject()}static createDimensionValue(i,l,p,m){return r.startDimensionValue(i),r.addDimType(i,l),r.addDimValue(i,p),r.addDimParam(i,m),r.endDimensionValue(i)}}n.DimensionValue=r})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(i,l){return this.bb_pos=i,this.bb=l,this}static getRootAsTensorTypeAndShape(i,l){return(l||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsTensorTypeAndShape(i,l){return i.setPosition(i.position()+_.SIZE_PREFIX_LENGTH),(l||new r).__init(i.readInt32(i.position())+i.position(),i)}elemType(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt32(this.bb_pos+i):0}shape(i){let l=this.bb.__offset(this.bb_pos,6);return l?(i||new t.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startTensorTypeAndShape(i){i.startObject(2)}static addElemType(i,l){i.addFieldInt32(0,l,0)}static addShape(i,l){i.addFieldOffset(1,l,0)}static endTensorTypeAndShape(i){return i.endObject()}static createTensorTypeAndShape(i,l,p){return r.startTensorTypeAndShape(i),r.addElemType(i,l),r.addShape(i,p),r.endTensorTypeAndShape(i)}}n.TensorTypeAndShape=r})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(i,l){return this.bb_pos=i,this.bb=l,this}static getRootAsMapType(i,l){return(l||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsMapType(i,l){return i.setPosition(i.position()+_.SIZE_PREFIX_LENGTH),(l||new r).__init(i.readInt32(i.position())+i.position(),i)}keyType(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt32(this.bb_pos+i):0}valueType(i){let l=this.bb.__offset(this.bb_pos,6);return l?(i||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startMapType(i){i.startObject(2)}static addKeyType(i,l){i.addFieldInt32(0,l,0)}static addValueType(i,l){i.addFieldOffset(1,l,0)}static endMapType(i){return i.endObject()}static createMapType(i,l,p){return r.startMapType(i),r.addKeyType(i,l),r.addValueType(i,p),r.endMapType(i)}}n.MapType=r})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(i,l){return this.bb_pos=i,this.bb=l,this}static getRootAsSequenceType(i,l){return(l||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsSequenceType(i,l){return i.setPosition(i.position()+_.SIZE_PREFIX_LENGTH),(l||new r).__init(i.readInt32(i.position())+i.position(),i)}elemType(i){let l=this.bb.__offset(this.bb_pos,4);return l?(i||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startSequenceType(i){i.startObject(1)}static addElemType(i,l){i.addFieldOffset(0,l,0)}static endSequenceType(i){return i.endObject()}static createSequenceType(i,l){return r.startSequenceType(i),r.addElemType(i,l),r.endSequenceType(i)}}n.SequenceType=r})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(i,l){return this.bb_pos=i,this.bb=l,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(i,l,p,m){return i.prep(4,12),i.writeInt32(m),i.writeInt32(p),i.writeInt32(l),i.offset()}}n.EdgeEnd=r})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(i,l){return this.bb_pos=i,this.bb=l,this}static getRootAsNodeEdge(i,l){return(l||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsNodeEdge(i,l){return i.setPosition(i.position()+_.SIZE_PREFIX_LENGTH),(l||new r).__init(i.readInt32(i.position())+i.position(),i)}nodeIndex(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readUint32(this.bb_pos+i):0}inputEdges(i,l){let p=this.bb.__offset(this.bb_pos,6);return p?(l||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+p)+i*12,this.bb):null}inputEdgesLength(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__vector_len(this.bb_pos+i):0}outputEdges(i,l){let p=this.bb.__offset(this.bb_pos,8);return p?(l||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+p)+i*12,this.bb):null}outputEdgesLength(){let i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__vector_len(this.bb_pos+i):0}static startNodeEdge(i){i.startObject(3)}static addNodeIndex(i,l){i.addFieldInt32(0,l,0)}static addInputEdges(i,l){i.addFieldOffset(1,l,0)}static startInputEdgesVector(i,l){i.startVector(12,l,4)}static addOutputEdges(i,l){i.addFieldOffset(2,l,0)}static startOutputEdgesVector(i,l){i.startVector(12,l,4)}static endNodeEdge(i){return i.endObject()}static createNodeEdge(i,l,p,m){return r.startNodeEdge(i),r.addNodeIndex(i,l),r.addInputEdges(i,p),r.addOutputEdges(i,m),r.endNodeEdge(i)}}n.NodeEdge=r})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(i,l){return this.bb_pos=i,this.bb=l,this}static getRootAsNode(i,l){return(l||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsNode(i,l){return i.setPosition(i.position()+_.SIZE_PREFIX_LENGTH),(l||new r).__init(i.readInt32(i.position())+i.position(),i)}name(i){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,i):null}docString(i){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,i):null}domain(i){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__string(this.bb_pos+l,i):null}sinceVersion(){let i=this.bb.__offset(this.bb_pos,10);return i?this.bb.readInt32(this.bb_pos+i):0}index(){let i=this.bb.__offset(this.bb_pos,12);return i?this.bb.readUint32(this.bb_pos+i):0}opType(i){let l=this.bb.__offset(this.bb_pos,14);return l?this.bb.__string(this.bb_pos+l,i):null}type(){let i=this.bb.__offset(this.bb_pos,16);return i?this.bb.readInt32(this.bb_pos+i):0}executionProviderType(i){let l=this.bb.__offset(this.bb_pos,18);return l?this.bb.__string(this.bb_pos+l,i):null}inputs(i,l){let p=this.bb.__offset(this.bb_pos,20);return p?this.bb.__string(this.bb.__vector(this.bb_pos+p)+i*4,l):null}inputsLength(){let i=this.bb.__offset(this.bb_pos,20);return i?this.bb.__vector_len(this.bb_pos+i):0}outputs(i,l){let p=this.bb.__offset(this.bb_pos,22);return p?this.bb.__string(this.bb.__vector(this.bb_pos+p)+i*4,l):null}outputsLength(){let i=this.bb.__offset(this.bb_pos,22);return i?this.bb.__vector_len(this.bb_pos+i):0}attributes(i,l){let p=this.bb.__offset(this.bb_pos,24);return p?(l||new t.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+p)+i*4),this.bb):null}attributesLength(){let i=this.bb.__offset(this.bb_pos,24);return i?this.bb.__vector_len(this.bb_pos+i):0}inputArgCounts(i){let l=this.bb.__offset(this.bb_pos,26);return l?this.bb.readInt32(this.bb.__vector(this.bb_pos+l)+i*4):0}inputArgCountsLength(){let i=this.bb.__offset(this.bb_pos,26);return i?this.bb.__vector_len(this.bb_pos+i):0}inputArgCountsArray(){let i=this.bb.__offset(this.bb_pos,26);return i?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+i),this.bb.__vector_len(this.bb_pos+i)):null}implicitInputs(i,l){let p=this.bb.__offset(this.bb_pos,28);return p?this.bb.__string(this.bb.__vector(this.bb_pos+p)+i*4,l):null}implicitInputsLength(){let i=this.bb.__offset(this.bb_pos,28);return i?this.bb.__vector_len(this.bb_pos+i):0}static startNode(i){i.startObject(13)}static addName(i,l){i.addFieldOffset(0,l,0)}static addDocString(i,l){i.addFieldOffset(1,l,0)}static addDomain(i,l){i.addFieldOffset(2,l,0)}static addSinceVersion(i,l){i.addFieldInt32(3,l,0)}static addIndex(i,l){i.addFieldInt32(4,l,0)}static addOpType(i,l){i.addFieldOffset(5,l,0)}static addType(i,l){i.addFieldInt32(6,l,0)}static addExecutionProviderType(i,l){i.addFieldOffset(7,l,0)}static addInputs(i,l){i.addFieldOffset(8,l,0)}static createInputsVector(i,l){i.startVector(4,l.length,4);for(let p=l.length-1;p>=0;p--)i.addOffset(l[p]);return i.endVector()}static startInputsVector(i,l){i.startVector(4,l,4)}static addOutputs(i,l){i.addFieldOffset(9,l,0)}static createOutputsVector(i,l){i.startVector(4,l.length,4);for(let p=l.length-1;p>=0;p--)i.addOffset(l[p]);return i.endVector()}static startOutputsVector(i,l){i.startVector(4,l,4)}static addAttributes(i,l){i.addFieldOffset(10,l,0)}static createAttributesVector(i,l){i.startVector(4,l.length,4);for(let p=l.length-1;p>=0;p--)i.addOffset(l[p]);return i.endVector()}static startAttributesVector(i,l){i.startVector(4,l,4)}static addInputArgCounts(i,l){i.addFieldOffset(11,l,0)}static createInputArgCountsVector(i,l){i.startVector(4,l.length,4);for(let p=l.length-1;p>=0;p--)i.addInt32(l[p]);return i.endVector()}static startInputArgCountsVector(i,l){i.startVector(4,l,4)}static addImplicitInputs(i,l){i.addFieldOffset(12,l,0)}static createImplicitInputsVector(i,l){i.startVector(4,l.length,4);for(let p=l.length-1;p>=0;p--)i.addOffset(l[p]);return i.endVector()}static startImplicitInputsVector(i,l){i.startVector(4,l,4)}static endNode(i){return i.endObject()}static createNode(i,l,p,m,s,h,f,v,I,G,W,X,ge,ie){return r.startNode(i),r.addName(i,l),r.addDocString(i,p),r.addDomain(i,m),r.addSinceVersion(i,s),r.addIndex(i,h),r.addOpType(i,f),r.addType(i,v),r.addExecutionProviderType(i,I),r.addInputs(i,G),r.addOutputs(i,W),r.addAttributes(i,X),r.addInputArgCounts(i,ge),r.addImplicitInputs(i,ie),r.endNode(i)}}n.Node=r})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(i,l){return this.bb_pos=i,this.bb=l,this}static getRootAsValueInfo(i,l){return(l||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsValueInfo(i,l){return i.setPosition(i.position()+_.SIZE_PREFIX_LENGTH),(l||new r).__init(i.readInt32(i.position())+i.position(),i)}name(i){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,i):null}docString(i){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,i):null}type(i){let l=this.bb.__offset(this.bb_pos,8);return l?(i||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startValueInfo(i){i.startObject(3)}static addName(i,l){i.addFieldOffset(0,l,0)}static addDocString(i,l){i.addFieldOffset(1,l,0)}static addType(i,l){i.addFieldOffset(2,l,0)}static endValueInfo(i){return i.endObject()}static createValueInfo(i,l,p,m){return r.startValueInfo(i),r.addName(i,l),r.addDocString(i,p),r.addType(i,m),r.endValueInfo(i)}}n.ValueInfo=r})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(i,l){return this.bb_pos=i,this.bb=l,this}static getRootAsTypeInfo(i,l){return(l||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsTypeInfo(i,l){return i.setPosition(i.position()+_.SIZE_PREFIX_LENGTH),(l||new r).__init(i.readInt32(i.position())+i.position(),i)}denotation(i){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,i):null}valueType(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.readUint8(this.bb_pos+i):0}value(i){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__union(i,this.bb_pos+l):null}static startTypeInfo(i){i.startObject(3)}static addDenotation(i,l){i.addFieldOffset(0,l,0)}static addValueType(i,l){i.addFieldInt8(1,l,0)}static addValue(i,l){i.addFieldOffset(2,l,0)}static endTypeInfo(i){return i.endObject()}static createTypeInfo(i,l,p,m){return r.startTypeInfo(i),r.addDenotation(i,l),r.addValueType(i,p),r.addValue(i,m),r.endTypeInfo(i)}}n.TypeInfo=r})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(i,l){return this.bb_pos=i,this.bb=l,this}static getRootAsOperatorSetId(i,l){return(l||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsOperatorSetId(i,l){return i.setPosition(i.position()+_.SIZE_PREFIX_LENGTH),(l||new r).__init(i.readInt32(i.position())+i.position(),i)}domain(i){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,i):null}version(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.readInt64(this.bb_pos+i):this.bb.createLong(0,0)}static startOperatorSetId(i){i.startObject(2)}static addDomain(i,l){i.addFieldOffset(0,l,0)}static addVersion(i,l){i.addFieldInt64(1,l,i.createLong(0,0))}static endOperatorSetId(i){return i.endObject()}static createOperatorSetId(i,l,p){return r.startOperatorSetId(i),r.addDomain(i,l),r.addVersion(i,p),r.endOperatorSetId(i)}}n.OperatorSetId=r})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(i,l){return this.bb_pos=i,this.bb=l,this}static getRootAsTensor(i,l){return(l||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsTensor(i,l){return i.setPosition(i.position()+_.SIZE_PREFIX_LENGTH),(l||new r).__init(i.readInt32(i.position())+i.position(),i)}name(i){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,i):null}docString(i){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,i):null}dims(i){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.readInt64(this.bb.__vector(this.bb_pos+l)+i*8):this.bb.createLong(0,0)}dimsLength(){let i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__vector_len(this.bb_pos+i):0}dataType(){let i=this.bb.__offset(this.bb_pos,10);return i?this.bb.readInt32(this.bb_pos+i):0}rawData(i){let l=this.bb.__offset(this.bb_pos,12);return l?this.bb.readUint8(this.bb.__vector(this.bb_pos+l)+i):0}rawDataLength(){let i=this.bb.__offset(this.bb_pos,12);return i?this.bb.__vector_len(this.bb_pos+i):0}rawDataArray(){let i=this.bb.__offset(this.bb_pos,12);return i?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+i),this.bb.__vector_len(this.bb_pos+i)):null}stringData(i,l){let p=this.bb.__offset(this.bb_pos,14);return p?this.bb.__string(this.bb.__vector(this.bb_pos+p)+i*4,l):null}stringDataLength(){let i=this.bb.__offset(this.bb_pos,14);return i?this.bb.__vector_len(this.bb_pos+i):0}static startTensor(i){i.startObject(6)}static addName(i,l){i.addFieldOffset(0,l,0)}static addDocString(i,l){i.addFieldOffset(1,l,0)}static addDims(i,l){i.addFieldOffset(2,l,0)}static createDimsVector(i,l){i.startVector(8,l.length,8);for(let p=l.length-1;p>=0;p--)i.addInt64(l[p]);return i.endVector()}static startDimsVector(i,l){i.startVector(8,l,8)}static addDataType(i,l){i.addFieldInt32(3,l,0)}static addRawData(i,l){i.addFieldOffset(4,l,0)}static createRawDataVector(i,l){i.startVector(1,l.length,1);for(let p=l.length-1;p>=0;p--)i.addInt8(l[p]);return i.endVector()}static startRawDataVector(i,l){i.startVector(1,l,1)}static addStringData(i,l){i.addFieldOffset(5,l,0)}static createStringDataVector(i,l){i.startVector(4,l.length,4);for(let p=l.length-1;p>=0;p--)i.addOffset(l[p]);return i.endVector()}static startStringDataVector(i,l){i.startVector(4,l,4)}static endTensor(i){return i.endObject()}static createTensor(i,l,p,m,s,h,f){return r.startTensor(i),r.addName(i,l),r.addDocString(i,p),r.addDims(i,m),r.addDataType(i,s),r.addRawData(i,h),r.addStringData(i,f),r.endTensor(i)}}n.Tensor=r})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(i,l){return this.bb_pos=i,this.bb=l,this}static getRootAsSparseTensor(i,l){return(l||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsSparseTensor(i,l){return i.setPosition(i.position()+_.SIZE_PREFIX_LENGTH),(l||new r).__init(i.readInt32(i.position())+i.position(),i)}values(i){let l=this.bb.__offset(this.bb_pos,4);return l?(i||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}indices(i){let l=this.bb.__offset(this.bb_pos,6);return l?(i||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}dims(i){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.readInt64(this.bb.__vector(this.bb_pos+l)+i*8):this.bb.createLong(0,0)}dimsLength(){let i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__vector_len(this.bb_pos+i):0}static startSparseTensor(i){i.startObject(3)}static addValues(i,l){i.addFieldOffset(0,l,0)}static addIndices(i,l){i.addFieldOffset(1,l,0)}static addDims(i,l){i.addFieldOffset(2,l,0)}static createDimsVector(i,l){i.startVector(8,l.length,8);for(let p=l.length-1;p>=0;p--)i.addInt64(l[p]);return i.endVector()}static startDimsVector(i,l){i.startVector(8,l,8)}static endSparseTensor(i){return i.endObject()}static createSparseTensor(i,l,p,m){return r.startSparseTensor(i),r.addValues(i,l),r.addIndices(i,p),r.addDims(i,m),r.endSparseTensor(i)}}n.SparseTensor=r})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(i,l){return this.bb_pos=i,this.bb=l,this}static getRootAsAttribute(i,l){return(l||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsAttribute(i,l){return i.setPosition(i.position()+_.SIZE_PREFIX_LENGTH),(l||new r).__init(i.readInt32(i.position())+i.position(),i)}name(i){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,i):null}docString(i){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,i):null}type(){let i=this.bb.__offset(this.bb_pos,8);return i?this.bb.readInt32(this.bb_pos+i):0}f(){let i=this.bb.__offset(this.bb_pos,10);return i?this.bb.readFloat32(this.bb_pos+i):0}i(){let i=this.bb.__offset(this.bb_pos,12);return i?this.bb.readInt64(this.bb_pos+i):this.bb.createLong(0,0)}s(i){let l=this.bb.__offset(this.bb_pos,14);return l?this.bb.__string(this.bb_pos+l,i):null}t(i){let l=this.bb.__offset(this.bb_pos,16);return l?(i||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}g(i){let l=this.bb.__offset(this.bb_pos,18);return l?(i||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}floats(i){let l=this.bb.__offset(this.bb_pos,20);return l?this.bb.readFloat32(this.bb.__vector(this.bb_pos+l)+i*4):0}floatsLength(){let i=this.bb.__offset(this.bb_pos,20);return i?this.bb.__vector_len(this.bb_pos+i):0}floatsArray(){let i=this.bb.__offset(this.bb_pos,20);return i?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+i),this.bb.__vector_len(this.bb_pos+i)):null}ints(i){let l=this.bb.__offset(this.bb_pos,22);return l?this.bb.readInt64(this.bb.__vector(this.bb_pos+l)+i*8):this.bb.createLong(0,0)}intsLength(){let i=this.bb.__offset(this.bb_pos,22);return i?this.bb.__vector_len(this.bb_pos+i):0}strings(i,l){let p=this.bb.__offset(this.bb_pos,24);return p?this.bb.__string(this.bb.__vector(this.bb_pos+p)+i*4,l):null}stringsLength(){let i=this.bb.__offset(this.bb_pos,24);return i?this.bb.__vector_len(this.bb_pos+i):0}tensors(i,l){let p=this.bb.__offset(this.bb_pos,26);return p?(l||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+p)+i*4),this.bb):null}tensorsLength(){let i=this.bb.__offset(this.bb_pos,26);return i?this.bb.__vector_len(this.bb_pos+i):0}graphs(i,l){let p=this.bb.__offset(this.bb_pos,28);return p?(l||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+p)+i*4),this.bb):null}graphsLength(){let i=this.bb.__offset(this.bb_pos,28);return i?this.bb.__vector_len(this.bb_pos+i):0}static startAttribute(i){i.startObject(13)}static addName(i,l){i.addFieldOffset(0,l,0)}static addDocString(i,l){i.addFieldOffset(1,l,0)}static addType(i,l){i.addFieldInt32(2,l,0)}static addF(i,l){i.addFieldFloat32(3,l,0)}static addI(i,l){i.addFieldInt64(4,l,i.createLong(0,0))}static addS(i,l){i.addFieldOffset(5,l,0)}static addT(i,l){i.addFieldOffset(6,l,0)}static addG(i,l){i.addFieldOffset(7,l,0)}static addFloats(i,l){i.addFieldOffset(8,l,0)}static createFloatsVector(i,l){i.startVector(4,l.length,4);for(let p=l.length-1;p>=0;p--)i.addFloat32(l[p]);return i.endVector()}static startFloatsVector(i,l){i.startVector(4,l,4)}static addInts(i,l){i.addFieldOffset(9,l,0)}static createIntsVector(i,l){i.startVector(8,l.length,8);for(let p=l.length-1;p>=0;p--)i.addInt64(l[p]);return i.endVector()}static startIntsVector(i,l){i.startVector(8,l,8)}static addStrings(i,l){i.addFieldOffset(10,l,0)}static createStringsVector(i,l){i.startVector(4,l.length,4);for(let p=l.length-1;p>=0;p--)i.addOffset(l[p]);return i.endVector()}static startStringsVector(i,l){i.startVector(4,l,4)}static addTensors(i,l){i.addFieldOffset(11,l,0)}static createTensorsVector(i,l){i.startVector(4,l.length,4);for(let p=l.length-1;p>=0;p--)i.addOffset(l[p]);return i.endVector()}static startTensorsVector(i,l){i.startVector(4,l,4)}static addGraphs(i,l){i.addFieldOffset(12,l,0)}static createGraphsVector(i,l){i.startVector(4,l.length,4);for(let p=l.length-1;p>=0;p--)i.addOffset(l[p]);return i.endVector()}static startGraphsVector(i,l){i.startVector(4,l,4)}static endAttribute(i){return i.endObject()}static createAttribute(i,l,p,m,s,h,f,v,I,G,W,X,ge,ie){return r.startAttribute(i),r.addName(i,l),r.addDocString(i,p),r.addType(i,m),r.addF(i,s),r.addI(i,h),r.addS(i,f),r.addT(i,v),r.addG(i,I),r.addFloats(i,G),r.addInts(i,W),r.addStrings(i,X),r.addTensors(i,ge),r.addGraphs(i,ie),r.endAttribute(i)}}n.Attribute=r})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(i,l){return this.bb_pos=i,this.bb=l,this}static getRootAsGraph(i,l){return(l||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsGraph(i,l){return i.setPosition(i.position()+_.SIZE_PREFIX_LENGTH),(l||new r).__init(i.readInt32(i.position())+i.position(),i)}initializers(i,l){let p=this.bb.__offset(this.bb_pos,4);return p?(l||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+p)+i*4),this.bb):null}initializersLength(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__vector_len(this.bb_pos+i):0}nodeArgs(i,l){let p=this.bb.__offset(this.bb_pos,6);return p?(l||new t.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+p)+i*4),this.bb):null}nodeArgsLength(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__vector_len(this.bb_pos+i):0}nodes(i,l){let p=this.bb.__offset(this.bb_pos,8);return p?(l||new t.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+p)+i*4),this.bb):null}nodesLength(){let i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__vector_len(this.bb_pos+i):0}maxNodeIndex(){let i=this.bb.__offset(this.bb_pos,10);return i?this.bb.readUint32(this.bb_pos+i):0}nodeEdges(i,l){let p=this.bb.__offset(this.bb_pos,12);return p?(l||new t.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+p)+i*4),this.bb):null}nodeEdgesLength(){let i=this.bb.__offset(this.bb_pos,12);return i?this.bb.__vector_len(this.bb_pos+i):0}inputs(i,l){let p=this.bb.__offset(this.bb_pos,14);return p?this.bb.__string(this.bb.__vector(this.bb_pos+p)+i*4,l):null}inputsLength(){let i=this.bb.__offset(this.bb_pos,14);return i?this.bb.__vector_len(this.bb_pos+i):0}outputs(i,l){let p=this.bb.__offset(this.bb_pos,16);return p?this.bb.__string(this.bb.__vector(this.bb_pos+p)+i*4,l):null}outputsLength(){let i=this.bb.__offset(this.bb_pos,16);return i?this.bb.__vector_len(this.bb_pos+i):0}sparseInitializers(i,l){let p=this.bb.__offset(this.bb_pos,18);return p?(l||new t.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+p)+i*4),this.bb):null}sparseInitializersLength(){let i=this.bb.__offset(this.bb_pos,18);return i?this.bb.__vector_len(this.bb_pos+i):0}static startGraph(i){i.startObject(8)}static addInitializers(i,l){i.addFieldOffset(0,l,0)}static createInitializersVector(i,l){i.startVector(4,l.length,4);for(let p=l.length-1;p>=0;p--)i.addOffset(l[p]);return i.endVector()}static startInitializersVector(i,l){i.startVector(4,l,4)}static addNodeArgs(i,l){i.addFieldOffset(1,l,0)}static createNodeArgsVector(i,l){i.startVector(4,l.length,4);for(let p=l.length-1;p>=0;p--)i.addOffset(l[p]);return i.endVector()}static startNodeArgsVector(i,l){i.startVector(4,l,4)}static addNodes(i,l){i.addFieldOffset(2,l,0)}static createNodesVector(i,l){i.startVector(4,l.length,4);for(let p=l.length-1;p>=0;p--)i.addOffset(l[p]);return i.endVector()}static startNodesVector(i,l){i.startVector(4,l,4)}static addMaxNodeIndex(i,l){i.addFieldInt32(3,l,0)}static addNodeEdges(i,l){i.addFieldOffset(4,l,0)}static createNodeEdgesVector(i,l){i.startVector(4,l.length,4);for(let p=l.length-1;p>=0;p--)i.addOffset(l[p]);return i.endVector()}static startNodeEdgesVector(i,l){i.startVector(4,l,4)}static addInputs(i,l){i.addFieldOffset(5,l,0)}static createInputsVector(i,l){i.startVector(4,l.length,4);for(let p=l.length-1;p>=0;p--)i.addOffset(l[p]);return i.endVector()}static startInputsVector(i,l){i.startVector(4,l,4)}static addOutputs(i,l){i.addFieldOffset(6,l,0)}static createOutputsVector(i,l){i.startVector(4,l.length,4);for(let p=l.length-1;p>=0;p--)i.addOffset(l[p]);return i.endVector()}static startOutputsVector(i,l){i.startVector(4,l,4)}static addSparseInitializers(i,l){i.addFieldOffset(7,l,0)}static createSparseInitializersVector(i,l){i.startVector(4,l.length,4);for(let p=l.length-1;p>=0;p--)i.addOffset(l[p]);return i.endVector()}static startSparseInitializersVector(i,l){i.startVector(4,l,4)}static endGraph(i){return i.endObject()}static createGraph(i,l,p,m,s,h,f,v,I){return r.startGraph(i),r.addInitializers(i,l),r.addNodeArgs(i,p),r.addNodes(i,m),r.addMaxNodeIndex(i,s),r.addNodeEdges(i,h),r.addInputs(i,f),r.addOutputs(i,v),r.addSparseInitializers(i,I),r.endGraph(i)}}n.Graph=r})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(i,l){return this.bb_pos=i,this.bb=l,this}static getRootAsModel(i,l){return(l||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsModel(i,l){return i.setPosition(i.position()+_.SIZE_PREFIX_LENGTH),(l||new r).__init(i.readInt32(i.position())+i.position(),i)}irVersion(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readInt64(this.bb_pos+i):this.bb.createLong(0,0)}opsetImport(i,l){let p=this.bb.__offset(this.bb_pos,6);return p?(l||new t.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+p)+i*4),this.bb):null}opsetImportLength(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__vector_len(this.bb_pos+i):0}producerName(i){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__string(this.bb_pos+l,i):null}producerVersion(i){let l=this.bb.__offset(this.bb_pos,10);return l?this.bb.__string(this.bb_pos+l,i):null}domain(i){let l=this.bb.__offset(this.bb_pos,12);return l?this.bb.__string(this.bb_pos+l,i):null}modelVersion(){let i=this.bb.__offset(this.bb_pos,14);return i?this.bb.readInt64(this.bb_pos+i):this.bb.createLong(0,0)}docString(i){let l=this.bb.__offset(this.bb_pos,16);return l?this.bb.__string(this.bb_pos+l,i):null}graph(i){let l=this.bb.__offset(this.bb_pos,18);return l?(i||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}graphDocString(i){let l=this.bb.__offset(this.bb_pos,20);return l?this.bb.__string(this.bb_pos+l,i):null}static startModel(i){i.startObject(9)}static addIrVersion(i,l){i.addFieldInt64(0,l,i.createLong(0,0))}static addOpsetImport(i,l){i.addFieldOffset(1,l,0)}static createOpsetImportVector(i,l){i.startVector(4,l.length,4);for(let p=l.length-1;p>=0;p--)i.addOffset(l[p]);return i.endVector()}static startOpsetImportVector(i,l){i.startVector(4,l,4)}static addProducerName(i,l){i.addFieldOffset(2,l,0)}static addProducerVersion(i,l){i.addFieldOffset(3,l,0)}static addDomain(i,l){i.addFieldOffset(4,l,0)}static addModelVersion(i,l){i.addFieldInt64(5,l,i.createLong(0,0))}static addDocString(i,l){i.addFieldOffset(6,l,0)}static addGraph(i,l){i.addFieldOffset(7,l,0)}static addGraphDocString(i,l){i.addFieldOffset(8,l,0)}static endModel(i){return i.endObject()}static createModel(i,l,p,m,s,h,f,v,I,G){return r.startModel(i),r.addIrVersion(i,l),r.addOpsetImport(i,p),r.addProducerName(i,m),r.addProducerVersion(i,s),r.addDomain(i,h),r.addModelVersion(i,f),r.addDocString(i,v),r.addGraph(i,I),r.addGraphDocString(i,G),r.endModel(i)}}n.Model=r})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(i,l){return this.bb_pos=i,this.bb=l,this}static getRootAsKernelCreateInfos(i,l){return(l||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsKernelCreateInfos(i,l){return i.setPosition(i.position()+_.SIZE_PREFIX_LENGTH),(l||new r).__init(i.readInt32(i.position())+i.position(),i)}nodeIndices(i){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.readUint32(this.bb.__vector(this.bb_pos+l)+i*4):0}nodeIndicesLength(){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__vector_len(this.bb_pos+i):0}nodeIndicesArray(){let i=this.bb.__offset(this.bb_pos,4);return i?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+i),this.bb.__vector_len(this.bb_pos+i)):null}kernelDefHashes(i){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.readUint64(this.bb.__vector(this.bb_pos+l)+i*8):this.bb.createLong(0,0)}kernelDefHashesLength(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__vector_len(this.bb_pos+i):0}static startKernelCreateInfos(i){i.startObject(2)}static addNodeIndices(i,l){i.addFieldOffset(0,l,0)}static createNodeIndicesVector(i,l){i.startVector(4,l.length,4);for(let p=l.length-1;p>=0;p--)i.addInt32(l[p]);return i.endVector()}static startNodeIndicesVector(i,l){i.startVector(4,l,4)}static addKernelDefHashes(i,l){i.addFieldOffset(1,l,0)}static createKernelDefHashesVector(i,l){i.startVector(8,l.length,8);for(let p=l.length-1;p>=0;p--)i.addInt64(l[p]);return i.endVector()}static startKernelDefHashesVector(i,l){i.startVector(8,l,8)}static endKernelCreateInfos(i){return i.endObject()}static createKernelCreateInfos(i,l,p){return r.startKernelCreateInfos(i),r.addNodeIndices(i,l),r.addKernelDefHashes(i,p),r.endKernelCreateInfos(i)}}n.KernelCreateInfos=r})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(i,l){return this.bb_pos=i,this.bb=l,this}static getRootAsSubGraphSessionState(i,l){return(l||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsSubGraphSessionState(i,l){return i.setPosition(i.position()+_.SIZE_PREFIX_LENGTH),(l||new r).__init(i.readInt32(i.position())+i.position(),i)}graphId(i){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,i):null}sessionState(i){let l=this.bb.__offset(this.bb_pos,6);return l?(i||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startSubGraphSessionState(i){i.startObject(2)}static addGraphId(i,l){i.addFieldOffset(0,l,0)}static addSessionState(i,l){i.addFieldOffset(1,l,0)}static endSubGraphSessionState(i){let l=i.endObject();return i.requiredField(l,4),l}static createSubGraphSessionState(i,l,p){return r.startSubGraphSessionState(i),r.addGraphId(i,l),r.addSessionState(i,p),r.endSubGraphSessionState(i)}}n.SubGraphSessionState=r})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(i,l){return this.bb_pos=i,this.bb=l,this}static getRootAsSessionState(i,l){return(l||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsSessionState(i,l){return i.setPosition(i.position()+_.SIZE_PREFIX_LENGTH),(l||new r).__init(i.readInt32(i.position())+i.position(),i)}kernels(i){let l=this.bb.__offset(this.bb_pos,4);return l?(i||new t.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}subGraphSessionStates(i,l){let p=this.bb.__offset(this.bb_pos,6);return p?(l||new t.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+p)+i*4),this.bb):null}subGraphSessionStatesLength(){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__vector_len(this.bb_pos+i):0}static startSessionState(i){i.startObject(2)}static addKernels(i,l){i.addFieldOffset(0,l,0)}static addSubGraphSessionStates(i,l){i.addFieldOffset(1,l,0)}static createSubGraphSessionStatesVector(i,l){i.startVector(4,l.length,4);for(let p=l.length-1;p>=0;p--)i.addOffset(l[p]);return i.endVector()}static startSubGraphSessionStatesVector(i,l){i.startVector(4,l,4)}static endSessionState(i){return i.endObject()}static createSessionState(i,l,p){return r.startSessionState(i),r.addKernels(i,l),r.addSubGraphSessionStates(i,p),r.endSessionState(i)}}n.SessionState=r})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class r{constructor(){this.bb=null,this.bb_pos=0}__init(i,l){return this.bb_pos=i,this.bb=l,this}static getRootAsInferenceSession(i,l){return(l||new r).__init(i.readInt32(i.position())+i.position(),i)}static getSizePrefixedRootAsInferenceSession(i,l){return i.setPosition(i.position()+_.SIZE_PREFIX_LENGTH),(l||new r).__init(i.readInt32(i.position())+i.position(),i)}static bufferHasIdentifier(i){return i.__has_identifier("ORTM")}ortVersion(i){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,i):null}model(i){let l=this.bb.__offset(this.bb_pos,6);return l?(i||new t.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}sessionState(i){let l=this.bb.__offset(this.bb_pos,8);return l?(i||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startInferenceSession(i){i.startObject(3)}static addOrtVersion(i,l){i.addFieldOffset(0,l,0)}static addModel(i,l){i.addFieldOffset(1,l,0)}static addSessionState(i,l){i.addFieldOffset(2,l,0)}static endInferenceSession(i){return i.endObject()}static finishInferenceSessionBuffer(i,l){i.finish(l,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(i,l){i.finish(l,"ORTM",!0)}static createInferenceSession(i,l,p,m){return r.startInferenceSession(i),r.addOrtVersion(i,l),r.addModel(i,p),r.addSessionState(i,m),r.endInferenceSession(i)}}n.InferenceSession=r})(e.fbs||={})})(t.experimental||={})})(V||={})}),Bs=me((t,e)=>{e.exports=n;function n(r,a){for(var i=new Array(arguments.length-1),l=0,p=2,m=!0;p<arguments.length;)i[l++]=arguments[p++];return new Promise(function(s,h){i[l]=function(f){if(m)if(m=!1,f)h(f);else{for(var v=new Array(arguments.length-1),I=0;I<v.length;)v[I++]=arguments[I];s.apply(null,v)}};try{r.apply(a||null,i)}catch(f){m&&(m=!1,h(f))}})}}),Gs=me(t=>{var e=t;e.length=function(l){var p=l.length;if(!p)return 0;for(var m=0;--p%4>1&&l.charAt(p)==="=";)++m;return Math.ceil(l.length*3)/4-m};var n=new Array(64),r=new Array(123);for(a=0;a<64;)r[n[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;var a;e.encode=function(l,p,m){for(var s=null,h=[],f=0,v=0,I;p<m;){var G=l[p++];switch(v){case 0:h[f++]=n[G>>2],I=(G&3)<<4,v=1;break;case 1:h[f++]=n[I|G>>4],I=(G&15)<<2,v=2;break;case 2:h[f++]=n[I|G>>6],h[f++]=n[G&63],v=0;break}f>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,h)),f=0)}return v&&(h[f++]=n[I],h[f++]=61,v===1&&(h[f++]=61)),s?(f&&s.push(String.fromCharCode.apply(String,h.slice(0,f))),s.join("")):String.fromCharCode.apply(String,h.slice(0,f))};var i="invalid encoding";e.decode=function(l,p,m){for(var s=m,h=0,f,v=0;v<l.length;){var I=l.charCodeAt(v++);if(I===61&&h>1)break;if((I=r[I])===void 0)throw Error(i);switch(h){case 0:f=I,h=1;break;case 1:p[m++]=f<<2|(I&48)>>4,f=I,h=2;break;case 2:p[m++]=(f&15)<<4|(I&60)>>2,f=I,h=3;break;case 3:p[m++]=(f&3)<<6|I,h=0;break}}if(h===1)throw Error(i);return m-s},e.test=function(l){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(l)}}),zs=me((t,e)=>{e.exports=n;function n(){this._listeners={}}n.prototype.on=function(r,a,i){return(this._listeners[r]||(this._listeners[r]=[])).push({fn:a,ctx:i||this}),this},n.prototype.off=function(r,a){if(r===void 0)this._listeners={};else if(a===void 0)this._listeners[r]=[];else for(var i=this._listeners[r],l=0;l<i.length;)i[l].fn===a?i.splice(l,1):++l;return this},n.prototype.emit=function(r){var a=this._listeners[r];if(a){for(var i=[],l=1;l<arguments.length;)i.push(arguments[l++]);for(l=0;l<a.length;)a[l].fn.apply(a[l++].ctx,i)}return this}}),Xs=me((t,e)=>{e.exports=n(n);function n(p){return typeof Float32Array<"u"?(function(){var m=new Float32Array([-0]),s=new Uint8Array(m.buffer),h=s[3]===128;function f(W,X,ge){m[0]=W,X[ge]=s[0],X[ge+1]=s[1],X[ge+2]=s[2],X[ge+3]=s[3]}function v(W,X,ge){m[0]=W,X[ge]=s[3],X[ge+1]=s[2],X[ge+2]=s[1],X[ge+3]=s[0]}p.writeFloatLE=h?f:v,p.writeFloatBE=h?v:f;function I(W,X){return s[0]=W[X],s[1]=W[X+1],s[2]=W[X+2],s[3]=W[X+3],m[0]}function G(W,X){return s[3]=W[X],s[2]=W[X+1],s[1]=W[X+2],s[0]=W[X+3],m[0]}p.readFloatLE=h?I:G,p.readFloatBE=h?G:I})():(function(){function m(h,f,v,I){var G=f<0?1:0;if(G&&(f=-f),f===0)h(1/f>0?0:2147483648,v,I);else if(isNaN(f))h(2143289344,v,I);else if(f>34028234663852886e22)h((G<<31|2139095040)>>>0,v,I);else if(f<11754943508222875e-54)h((G<<31|Math.round(f/1401298464324817e-60))>>>0,v,I);else{var W=Math.floor(Math.log(f)/Math.LN2),X=Math.round(f*Math.pow(2,-W)*8388608)&8388607;h((G<<31|W+127<<23|X)>>>0,v,I)}}p.writeFloatLE=m.bind(null,r),p.writeFloatBE=m.bind(null,a);function s(h,f,v){var I=h(f,v),G=(I>>31)*2+1,W=I>>>23&255,X=I&8388607;return W===255?X?NaN:G*(1/0):W===0?G*1401298464324817e-60*X:G*Math.pow(2,W-150)*(X+8388608)}p.readFloatLE=s.bind(null,i),p.readFloatBE=s.bind(null,l)})(),typeof Float64Array<"u"?(function(){var m=new Float64Array([-0]),s=new Uint8Array(m.buffer),h=s[7]===128;function f(W,X,ge){m[0]=W,X[ge]=s[0],X[ge+1]=s[1],X[ge+2]=s[2],X[ge+3]=s[3],X[ge+4]=s[4],X[ge+5]=s[5],X[ge+6]=s[6],X[ge+7]=s[7]}function v(W,X,ge){m[0]=W,X[ge]=s[7],X[ge+1]=s[6],X[ge+2]=s[5],X[ge+3]=s[4],X[ge+4]=s[3],X[ge+5]=s[2],X[ge+6]=s[1],X[ge+7]=s[0]}p.writeDoubleLE=h?f:v,p.writeDoubleBE=h?v:f;function I(W,X){return s[0]=W[X],s[1]=W[X+1],s[2]=W[X+2],s[3]=W[X+3],s[4]=W[X+4],s[5]=W[X+5],s[6]=W[X+6],s[7]=W[X+7],m[0]}function G(W,X){return s[7]=W[X],s[6]=W[X+1],s[5]=W[X+2],s[4]=W[X+3],s[3]=W[X+4],s[2]=W[X+5],s[1]=W[X+6],s[0]=W[X+7],m[0]}p.readDoubleLE=h?I:G,p.readDoubleBE=h?G:I})():(function(){function m(h,f,v,I,G,W){var X=I<0?1:0;if(X&&(I=-I),I===0)h(0,G,W+f),h(1/I>0?0:2147483648,G,W+v);else if(isNaN(I))h(0,G,W+f),h(2146959360,G,W+v);else if(I>17976931348623157e292)h(0,G,W+f),h((X<<31|2146435072)>>>0,G,W+v);else{var ge;if(I<22250738585072014e-324)ge=I/5e-324,h(ge>>>0,G,W+f),h((X<<31|ge/4294967296)>>>0,G,W+v);else{var ie=Math.floor(Math.log(I)/Math.LN2);ie===1024&&(ie=1023),ge=I*Math.pow(2,-ie),h(ge*4503599627370496>>>0,G,W+f),h((X<<31|ie+1023<<20|ge*1048576&1048575)>>>0,G,W+v)}}}p.writeDoubleLE=m.bind(null,r,0,4),p.writeDoubleBE=m.bind(null,a,4,0);function s(h,f,v,I,G){var W=h(I,G+f),X=h(I,G+v),ge=(X>>31)*2+1,ie=X>>>20&2047,Pe=4294967296*(X&1048575)+W;return ie===2047?Pe?NaN:ge*(1/0):ie===0?ge*5e-324*Pe:ge*Math.pow(2,ie-1075)*(Pe+4503599627370496)}p.readDoubleLE=s.bind(null,i,0,4),p.readDoubleBE=s.bind(null,l,4,0)})(),p}function r(p,m,s){m[s]=p&255,m[s+1]=p>>>8&255,m[s+2]=p>>>16&255,m[s+3]=p>>>24}function a(p,m,s){m[s]=p>>>24,m[s+1]=p>>>16&255,m[s+2]=p>>>8&255,m[s+3]=p&255}function i(p,m){return(p[m]|p[m+1]<<8|p[m+2]<<16|p[m+3]<<24)>>>0}function l(p,m){return(p[m]<<24|p[m+1]<<16|p[m+2]<<8|p[m+3])>>>0}}),Ks=me((exports$1,module)=>{module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}}),Zs=me(t=>{var e=t;e.length=function(n){for(var r=0,a=0,i=0;i<n.length;++i)a=n.charCodeAt(i),a<128?r+=1:a<2048?r+=2:(a&64512)===55296&&(n.charCodeAt(i+1)&64512)===56320?(++i,r+=4):r+=3;return r},e.read=function(n,r,a){var i=a-r;if(i<1)return"";for(var l=null,p=[],m=0,s;r<a;)s=n[r++],s<128?p[m++]=s:s>191&&s<224?p[m++]=(s&31)<<6|n[r++]&63:s>239&&s<365?(s=((s&7)<<18|(n[r++]&63)<<12|(n[r++]&63)<<6|n[r++]&63)-65536,p[m++]=55296+(s>>10),p[m++]=56320+(s&1023)):p[m++]=(s&15)<<12|(n[r++]&63)<<6|n[r++]&63,m>8191&&((l||(l=[])).push(String.fromCharCode.apply(String,p)),m=0);return l?(m&&l.push(String.fromCharCode.apply(String,p.slice(0,m))),l.join("")):String.fromCharCode.apply(String,p.slice(0,m))},e.write=function(n,r,a){for(var i=a,l,p,m=0;m<n.length;++m)l=n.charCodeAt(m),l<128?r[a++]=l:l<2048?(r[a++]=l>>6|192,r[a++]=l&63|128):(l&64512)===55296&&((p=n.charCodeAt(m+1))&64512)===56320?(l=65536+((l&1023)<<10)+(p&1023),++m,r[a++]=l>>18|240,r[a++]=l>>12&63|128,r[a++]=l>>6&63|128,r[a++]=l&63|128):(r[a++]=l>>12|224,r[a++]=l>>6&63|128,r[a++]=l&63|128);return a-i}}),eu=me((t,e)=>{e.exports=n;function n(r,a,i){var l=i||8192,p=l>>>1,m=null,s=l;return function(h){if(h<1||h>p)return r(h);s+h>l&&(m=r(l),s=0);var f=a.call(m,s,s+=h);return s&7&&(s=(s|7)+1),f}}}),ru=me((t,e)=>{e.exports=r;var n=Jt();function r(p,m){this.lo=p>>>0,this.hi=m>>>0}var a=r.zero=new r(0,0);a.toNumber=function(){return 0},a.zzEncode=a.zzDecode=function(){return this},a.length=function(){return 1};var i=r.zeroHash="\0\0\0\0\0\0\0\0";r.fromNumber=function(p){if(p===0)return a;var m=p<0;m&&(p=-p);var s=p>>>0,h=(p-s)/4294967296>>>0;return m&&(h=~h>>>0,s=~s>>>0,++s>4294967295&&(s=0,++h>4294967295&&(h=0))),new r(s,h)},r.from=function(p){if(typeof p=="number")return r.fromNumber(p);if(n.isString(p))if(n.Long)p=n.Long.fromString(p);else return r.fromNumber(parseInt(p,10));return p.low||p.high?new r(p.low>>>0,p.high>>>0):a},r.prototype.toNumber=function(p){if(!p&&this.hi>>>31){var m=~this.lo+1>>>0,s=~this.hi>>>0;return m||(s=s+1>>>0),-(m+s*4294967296)}return this.lo+this.hi*4294967296},r.prototype.toLong=function(p){return n.Long?new n.Long(this.lo|0,this.hi|0,!!p):{low:this.lo|0,high:this.hi|0,unsigned:!!p}};var l=String.prototype.charCodeAt;r.fromHash=function(p){return p===i?a:new r((l.call(p,0)|l.call(p,1)<<8|l.call(p,2)<<16|l.call(p,3)<<24)>>>0,(l.call(p,4)|l.call(p,5)<<8|l.call(p,6)<<16|l.call(p,7)<<24)>>>0)},r.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},r.prototype.zzEncode=function(){var p=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^p)>>>0,this.lo=(this.lo<<1^p)>>>0,this},r.prototype.zzDecode=function(){var p=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^p)>>>0,this.hi=(this.hi>>>1^p)>>>0,this},r.prototype.length=function(){var p=this.lo,m=(this.lo>>>28|this.hi<<4)>>>0,s=this.hi>>>24;return s===0?m===0?p<16384?p<128?1:2:p<2097152?3:4:m<16384?m<128?5:6:m<2097152?7:8:s<128?9:10}}),Jt=me(t=>{var e=t;e.asPromise=Bs(),e.base64=Gs(),e.EventEmitter=zs(),e.float=Xs(),e.inquire=Ks(),e.utf8=Zs(),e.pool=eu(),e.LongBits=ru(),e.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node),e.global=e.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||t,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a},e.isString=function(a){return typeof a=="string"||a instanceof String},e.isObject=function(a){return a&&typeof a=="object"},e.isset=e.isSet=function(a,i){var l=a[i];return l!=null&&a.hasOwnProperty(i)?typeof l!="object"||(Array.isArray(l)?l.length:Object.keys(l).length)>0:!1},e.Buffer=(function(){try{var a=e.inquire("buffer").Buffer;return a.prototype.utf8Write?a:null}catch{return null}})(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(a){return typeof a=="number"?e.Buffer?e._Buffer_allocUnsafe(a):new e.Array(a):e.Buffer?e._Buffer_from(a):typeof Uint8Array>"u"?a:new Uint8Array(a)},e.Array=typeof Uint8Array<"u"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(a){return a?e.LongBits.from(a).toHash():e.LongBits.zeroHash},e.longFromHash=function(a,i){var l=e.LongBits.fromHash(a);return e.Long?e.Long.fromBits(l.lo,l.hi,i):l.toNumber(!!i)};function n(a,i,l){for(var p=Object.keys(i),m=0;m<p.length;++m)(a[p[m]]===void 0||!l)&&(a[p[m]]=i[p[m]]);return a}e.merge=n,e.lcFirst=function(a){return a.charAt(0).toLowerCase()+a.substring(1)};function r(a){function i(l,p){if(!(this instanceof i))return new i(l,p);Object.defineProperty(this,"message",{get:function(){return l}}),Error.captureStackTrace?Error.captureStackTrace(this,i):Object.defineProperty(this,"stack",{value:new Error().stack||""}),p&&n(this,p)}return i.prototype=Object.create(Error.prototype,{constructor:{value:i,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return a},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),i}e.newError=r,e.ProtocolError=r("ProtocolError"),e.oneOfGetter=function(a){for(var i={},l=0;l<a.length;++l)i[a[l]]=1;return function(){for(var p=Object.keys(this),m=p.length-1;m>-1;--m)if(i[p[m]]===1&&this[p[m]]!==void 0&&this[p[m]]!==null)return p[m]}},e.oneOfSetter=function(a){return function(i){for(var l=0;l<a.length;++l)a[l]!==i&&delete this[a[l]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var a=e.Buffer;if(!a){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=a.from!==Uint8Array.from&&a.from||function(i,l){return new a(i,l)},e._Buffer_allocUnsafe=a.allocUnsafe||function(i){return new a(i)}}}),si=me((t,e)=>{e.exports=h;var n=Jt(),r,a=n.LongBits,i=n.base64,l=n.utf8;function p(ie,Pe,je){this.fn=ie,this.len=Pe,this.next=void 0,this.val=je}function m(){}function s(ie){this.head=ie.head,this.tail=ie.tail,this.len=ie.len,this.next=ie.states}function h(){this.len=0,this.head=new p(m,0,0),this.tail=this.head,this.states=null}var f=function(){return n.Buffer?function(){return(h.create=function(){return new r})()}:function(){return new h}};h.create=f(),h.alloc=function(ie){return new n.Array(ie)},n.Array!==Array&&(h.alloc=n.pool(h.alloc,n.Array.prototype.subarray)),h.prototype._push=function(ie,Pe,je){return this.tail=this.tail.next=new p(ie,Pe,je),this.len+=Pe,this};function v(ie,Pe,je){Pe[je]=ie&255}function I(ie,Pe,je){for(;ie>127;)Pe[je++]=ie&127|128,ie>>>=7;Pe[je]=ie}function G(ie,Pe){this.len=ie,this.next=void 0,this.val=Pe}G.prototype=Object.create(p.prototype),G.prototype.fn=I,h.prototype.uint32=function(ie){return this.len+=(this.tail=this.tail.next=new G((ie=ie>>>0)<128?1:ie<16384?2:ie<2097152?3:ie<268435456?4:5,ie)).len,this},h.prototype.int32=function(ie){return ie<0?this._push(W,10,a.fromNumber(ie)):this.uint32(ie)},h.prototype.sint32=function(ie){return this.uint32((ie<<1^ie>>31)>>>0)};function W(ie,Pe,je){for(;ie.hi;)Pe[je++]=ie.lo&127|128,ie.lo=(ie.lo>>>7|ie.hi<<25)>>>0,ie.hi>>>=7;for(;ie.lo>127;)Pe[je++]=ie.lo&127|128,ie.lo=ie.lo>>>7;Pe[je++]=ie.lo}h.prototype.uint64=function(ie){var Pe=a.from(ie);return this._push(W,Pe.length(),Pe)},h.prototype.int64=h.prototype.uint64,h.prototype.sint64=function(ie){var Pe=a.from(ie).zzEncode();return this._push(W,Pe.length(),Pe)},h.prototype.bool=function(ie){return this._push(v,1,ie?1:0)};function X(ie,Pe,je){Pe[je]=ie&255,Pe[je+1]=ie>>>8&255,Pe[je+2]=ie>>>16&255,Pe[je+3]=ie>>>24}h.prototype.fixed32=function(ie){return this._push(X,4,ie>>>0)},h.prototype.sfixed32=h.prototype.fixed32,h.prototype.fixed64=function(ie){var Pe=a.from(ie);return this._push(X,4,Pe.lo)._push(X,4,Pe.hi)},h.prototype.sfixed64=h.prototype.fixed64,h.prototype.float=function(ie){return this._push(n.float.writeFloatLE,4,ie)},h.prototype.double=function(ie){return this._push(n.float.writeDoubleLE,8,ie)};var ge=n.Array.prototype.set?function(ie,Pe,je){Pe.set(ie,je)}:function(ie,Pe,je){for(var rt=0;rt<ie.length;++rt)Pe[je+rt]=ie[rt]};h.prototype.bytes=function(ie){var Pe=ie.length>>>0;if(!Pe)return this._push(v,1,0);if(n.isString(ie)){var je=h.alloc(Pe=i.length(ie));i.decode(ie,je,0),ie=je}return this.uint32(Pe)._push(ge,Pe,ie)},h.prototype.string=function(ie){var Pe=l.length(ie);return Pe?this.uint32(Pe)._push(l.write,Pe,ie):this._push(v,1,0)},h.prototype.fork=function(){return this.states=new s(this),this.head=this.tail=new p(m,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new p(m,0,0),this.len=0),this},h.prototype.ldelim=function(){var ie=this.head,Pe=this.tail,je=this.len;return this.reset().uint32(je),je&&(this.tail.next=ie.next,this.tail=Pe,this.len+=je),this},h.prototype.finish=function(){for(var ie=this.head.next,Pe=this.constructor.alloc(this.len),je=0;ie;)ie.fn(ie.val,Pe,je),je+=ie.len,ie=ie.next;return Pe},h._configure=function(ie){r=ie,h.create=f(),r._configure()}}),cu=me((t,e)=>{e.exports=a;var n=si();(a.prototype=Object.create(n.prototype)).constructor=a;var r=Jt();function a(){n.call(this)}a._configure=function(){a.alloc=r._Buffer_allocUnsafe,a.writeBytesBuffer=r.Buffer&&r.Buffer.prototype instanceof Uint8Array&&r.Buffer.prototype.set.name==="set"?function(l,p,m){p.set(l,m)}:function(l,p,m){if(l.copy)l.copy(p,m,0,l.length);else for(var s=0;s<l.length;)p[m++]=l[s++]}},a.prototype.bytes=function(l){r.isString(l)&&(l=r._Buffer_from(l,"base64"));var p=l.length>>>0;return this.uint32(p),p&&this._push(a.writeBytesBuffer,p,l),this};function i(l,p,m){l.length<40?r.utf8.write(l,p,m):p.utf8Write?p.utf8Write(l,m):p.write(l,m)}a.prototype.string=function(l){var p=r.Buffer.byteLength(l);return this.uint32(p),p&&this._push(i,p,l),this},a._configure()}),fi=me((t,e)=>{e.exports=p;var n=Jt(),r,a=n.LongBits,i=n.utf8;function l(I,G){return RangeError("index out of range: "+I.pos+" + "+(G||1)+" > "+I.len)}function p(I){this.buf=I,this.pos=0,this.len=I.length}var m=typeof Uint8Array<"u"?function(I){if(I instanceof Uint8Array||Array.isArray(I))return new p(I);throw Error("illegal buffer")}:function(I){if(Array.isArray(I))return new p(I);throw Error("illegal buffer")},s=function(){return n.Buffer?function(I){return(p.create=function(G){return n.Buffer.isBuffer(G)?new r(G):m(G)})(I)}:m};p.create=s(),p.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,p.prototype.uint32=(function(){var I=4294967295;return function(){if(I=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(I=(I|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(I=(I|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(I=(I|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(I=(I|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return I;if((this.pos+=5)>this.len)throw this.pos=this.len,l(this,10);return I}})(),p.prototype.int32=function(){return this.uint32()|0},p.prototype.sint32=function(){var I=this.uint32();return I>>>1^-(I&1)|0};function h(){var I=new a(0,0),G=0;if(this.len-this.pos>4){for(;G<4;++G)if(I.lo=(I.lo|(this.buf[this.pos]&127)<<G*7)>>>0,this.buf[this.pos++]<128)return I;if(I.lo=(I.lo|(this.buf[this.pos]&127)<<28)>>>0,I.hi=(I.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return I;G=0}else{for(;G<3;++G){if(this.pos>=this.len)throw l(this);if(I.lo=(I.lo|(this.buf[this.pos]&127)<<G*7)>>>0,this.buf[this.pos++]<128)return I}return I.lo=(I.lo|(this.buf[this.pos++]&127)<<G*7)>>>0,I}if(this.len-this.pos>4){for(;G<5;++G)if(I.hi=(I.hi|(this.buf[this.pos]&127)<<G*7+3)>>>0,this.buf[this.pos++]<128)return I}else for(;G<5;++G){if(this.pos>=this.len)throw l(this);if(I.hi=(I.hi|(this.buf[this.pos]&127)<<G*7+3)>>>0,this.buf[this.pos++]<128)return I}throw Error("invalid varint encoding")}p.prototype.bool=function(){return this.uint32()!==0};function f(I,G){return(I[G-4]|I[G-3]<<8|I[G-2]<<16|I[G-1]<<24)>>>0}p.prototype.fixed32=function(){if(this.pos+4>this.len)throw l(this,4);return f(this.buf,this.pos+=4)},p.prototype.sfixed32=function(){if(this.pos+4>this.len)throw l(this,4);return f(this.buf,this.pos+=4)|0};function v(){if(this.pos+8>this.len)throw l(this,8);return new a(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}p.prototype.float=function(){if(this.pos+4>this.len)throw l(this,4);var I=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,I},p.prototype.double=function(){if(this.pos+8>this.len)throw l(this,4);var I=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,I},p.prototype.bytes=function(){var I=this.uint32(),G=this.pos,W=this.pos+I;if(W>this.len)throw l(this,I);if(this.pos+=I,Array.isArray(this.buf))return this.buf.slice(G,W);if(G===W){var X=n.Buffer;return X?X.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,G,W)},p.prototype.string=function(){var I=this.bytes();return i.read(I,0,I.length)},p.prototype.skip=function(I){if(typeof I=="number"){if(this.pos+I>this.len)throw l(this,I);this.pos+=I}else do if(this.pos>=this.len)throw l(this);while(this.buf[this.pos++]&128);return this},p.prototype.skipType=function(I){switch(I){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(I=this.uint32()&7)!==4;)this.skipType(I);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+I+" at offset "+this.pos)}return this},p._configure=function(I){r=I,p.create=s(),r._configure();var G=n.Long?"toLong":"toNumber";n.merge(p.prototype,{int64:function(){return h.call(this)[G](!1)},uint64:function(){return h.call(this)[G](!0)},sint64:function(){return h.call(this).zzDecode()[G](!1)},fixed64:function(){return v.call(this)[G](!0)},sfixed64:function(){return v.call(this)[G](!1)}})}}),xu=me((t,e)=>{e.exports=a;var n=fi();(a.prototype=Object.create(n.prototype)).constructor=a;var r=Jt();function a(i){n.call(this,i)}a._configure=function(){r.Buffer&&(a.prototype._slice=r.Buffer.prototype.slice)},a.prototype.string=function(){var i=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+i,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+i,this.len))},a._configure()}),vu=me((t,e)=>{e.exports=r;var n=Jt();(r.prototype=Object.create(n.EventEmitter.prototype)).constructor=r;function r(a,i,l){if(typeof a!="function")throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=a,this.requestDelimited=!!i,this.responseDelimited=!!l}r.prototype.rpcCall=function a(i,l,p,m,s){if(!m)throw TypeError("request must be specified");var h=this;if(!s)return n.asPromise(a,h,i,l,p,m);if(!h.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return h.rpcImpl(i,l[h.requestDelimited?"encodeDelimited":"encode"](m).finish(),function(f,v){if(f)return h.emit("error",f,i),s(f);if(v===null){h.end(!0);return}if(!(v instanceof p))try{v=p[h.responseDelimited?"decodeDelimited":"decode"](v)}catch(I){return h.emit("error",I,i),s(I)}return h.emit("data",v,i),s(null,v)})}catch(f){h.emit("error",f,i),setTimeout(function(){s(f)},0);return}},r.prototype.end=function(a){return this.rpcImpl&&(a||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}}),Ou=me(t=>{var e=t;e.Service=vu()}),Su=me((t,e)=>{e.exports={}}),Eu=me(t=>{var e=t;e.build="minimal",e.Writer=si(),e.BufferWriter=cu(),e.Reader=fi(),e.BufferReader=xu(),e.util=Jt(),e.rpc=Ou(),e.roots=Su(),e.configure=n;function n(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}n()}),Lu=me((t,e)=>{e.exports=Eu()}),Cr=me((t,e)=>{var n=Lu(),r=n.Reader,a=n.Writer,i=n.util,l=n.roots.default||(n.roots.default={});l.onnx=(function(){var p={};return p.Version=(function(){var m={},s=Object.create(m);return s[m[0]="_START_VERSION"]=0,s[m[1]="IR_VERSION_2017_10_10"]=1,s[m[2]="IR_VERSION_2017_10_30"]=2,s[m[3]="IR_VERSION_2017_11_3"]=3,s[m[4]="IR_VERSION_2019_1_22"]=4,s[m[5]="IR_VERSION_2019_3_18"]=5,s[m[6]="IR_VERSION_2019_9_19"]=6,s[m[7]="IR_VERSION_2020_5_8"]=7,s[m[8]="IR_VERSION_2021_7_30"]=8,s[m[9]="IR_VERSION"]=9,s})(),p.AttributeProto=(function(){function m(s){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],this.sparseTensors=[],this.typeProtos=[],s)for(var h=Object.keys(s),f=0;f<h.length;++f)s[h[f]]!=null&&(this[h[f]]=s[h[f]])}return m.prototype.name="",m.prototype.refAttrName="",m.prototype.docString="",m.prototype.type=0,m.prototype.f=0,m.prototype.i=i.Long?i.Long.fromBits(0,0,!1):0,m.prototype.s=i.newBuffer([]),m.prototype.t=null,m.prototype.g=null,m.prototype.sparseTensor=null,m.prototype.tp=null,m.prototype.floats=i.emptyArray,m.prototype.ints=i.emptyArray,m.prototype.strings=i.emptyArray,m.prototype.tensors=i.emptyArray,m.prototype.graphs=i.emptyArray,m.prototype.sparseTensors=i.emptyArray,m.prototype.typeProtos=i.emptyArray,m.create=function(s){return new m(s)},m.encode=function(s,h){if(h||(h=a.create()),s.name!=null&&Object.hasOwnProperty.call(s,"name")&&h.uint32(10).string(s.name),s.f!=null&&Object.hasOwnProperty.call(s,"f")&&h.uint32(21).float(s.f),s.i!=null&&Object.hasOwnProperty.call(s,"i")&&h.uint32(24).int64(s.i),s.s!=null&&Object.hasOwnProperty.call(s,"s")&&h.uint32(34).bytes(s.s),s.t!=null&&Object.hasOwnProperty.call(s,"t")&&l.onnx.TensorProto.encode(s.t,h.uint32(42).fork()).ldelim(),s.g!=null&&Object.hasOwnProperty.call(s,"g")&&l.onnx.GraphProto.encode(s.g,h.uint32(50).fork()).ldelim(),s.floats!=null&&s.floats.length){h.uint32(58).fork();for(var f=0;f<s.floats.length;++f)h.float(s.floats[f]);h.ldelim()}if(s.ints!=null&&s.ints.length){h.uint32(66).fork();for(var f=0;f<s.ints.length;++f)h.int64(s.ints[f]);h.ldelim()}if(s.strings!=null&&s.strings.length)for(var f=0;f<s.strings.length;++f)h.uint32(74).bytes(s.strings[f]);if(s.tensors!=null&&s.tensors.length)for(var f=0;f<s.tensors.length;++f)l.onnx.TensorProto.encode(s.tensors[f],h.uint32(82).fork()).ldelim();if(s.graphs!=null&&s.graphs.length)for(var f=0;f<s.graphs.length;++f)l.onnx.GraphProto.encode(s.graphs[f],h.uint32(90).fork()).ldelim();if(s.docString!=null&&Object.hasOwnProperty.call(s,"docString")&&h.uint32(106).string(s.docString),s.tp!=null&&Object.hasOwnProperty.call(s,"tp")&&l.onnx.TypeProto.encode(s.tp,h.uint32(114).fork()).ldelim(),s.typeProtos!=null&&s.typeProtos.length)for(var f=0;f<s.typeProtos.length;++f)l.onnx.TypeProto.encode(s.typeProtos[f],h.uint32(122).fork()).ldelim();if(s.type!=null&&Object.hasOwnProperty.call(s,"type")&&h.uint32(160).int32(s.type),s.refAttrName!=null&&Object.hasOwnProperty.call(s,"refAttrName")&&h.uint32(170).string(s.refAttrName),s.sparseTensor!=null&&Object.hasOwnProperty.call(s,"sparseTensor")&&l.onnx.SparseTensorProto.encode(s.sparseTensor,h.uint32(178).fork()).ldelim(),s.sparseTensors!=null&&s.sparseTensors.length)for(var f=0;f<s.sparseTensors.length;++f)l.onnx.SparseTensorProto.encode(s.sparseTensors[f],h.uint32(186).fork()).ldelim();return h},m.encodeDelimited=function(s,h){return this.encode(s,h).ldelim()},m.decode=function(s,h){s instanceof r||(s=r.create(s));for(var f=h===void 0?s.len:s.pos+h,v=new l.onnx.AttributeProto;s.pos<f;){var I=s.uint32();switch(I>>>3){case 1:{v.name=s.string();break}case 21:{v.refAttrName=s.string();break}case 13:{v.docString=s.string();break}case 20:{v.type=s.int32();break}case 2:{v.f=s.float();break}case 3:{v.i=s.int64();break}case 4:{v.s=s.bytes();break}case 5:{v.t=l.onnx.TensorProto.decode(s,s.uint32());break}case 6:{v.g=l.onnx.GraphProto.decode(s,s.uint32());break}case 22:{v.sparseTensor=l.onnx.SparseTensorProto.decode(s,s.uint32());break}case 14:{v.tp=l.onnx.TypeProto.decode(s,s.uint32());break}case 7:{if(v.floats&&v.floats.length||(v.floats=[]),(I&7)===2)for(var G=s.uint32()+s.pos;s.pos<G;)v.floats.push(s.float());else v.floats.push(s.float());break}case 8:{if(v.ints&&v.ints.length||(v.ints=[]),(I&7)===2)for(var G=s.uint32()+s.pos;s.pos<G;)v.ints.push(s.int64());else v.ints.push(s.int64());break}case 9:{v.strings&&v.strings.length||(v.strings=[]),v.strings.push(s.bytes());break}case 10:{v.tensors&&v.tensors.length||(v.tensors=[]),v.tensors.push(l.onnx.TensorProto.decode(s,s.uint32()));break}case 11:{v.graphs&&v.graphs.length||(v.graphs=[]),v.graphs.push(l.onnx.GraphProto.decode(s,s.uint32()));break}case 23:{v.sparseTensors&&v.sparseTensors.length||(v.sparseTensors=[]),v.sparseTensors.push(l.onnx.SparseTensorProto.decode(s,s.uint32()));break}case 15:{v.typeProtos&&v.typeProtos.length||(v.typeProtos=[]),v.typeProtos.push(l.onnx.TypeProto.decode(s,s.uint32()));break}default:s.skipType(I&7);break}}return v},m.decodeDelimited=function(s){return s instanceof r||(s=new r(s)),this.decode(s,s.uint32())},m.verify=function(s){if(typeof s!="object"||s===null)return"object expected";if(s.name!=null&&s.hasOwnProperty("name")&&!i.isString(s.name))return"name: string expected";if(s.refAttrName!=null&&s.hasOwnProperty("refAttrName")&&!i.isString(s.refAttrName))return"refAttrName: string expected";if(s.docString!=null&&s.hasOwnProperty("docString")&&!i.isString(s.docString))return"docString: string expected";if(s.type!=null&&s.hasOwnProperty("type"))switch(s.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 11:case 13:case 6:case 7:case 8:case 9:case 10:case 12:case 14:break}if(s.f!=null&&s.hasOwnProperty("f")&&typeof s.f!="number")return"f: number expected";if(s.i!=null&&s.hasOwnProperty("i")&&!i.isInteger(s.i)&&!(s.i&&i.isInteger(s.i.low)&&i.isInteger(s.i.high)))return"i: integer|Long expected";if(s.s!=null&&s.hasOwnProperty("s")&&!(s.s&&typeof s.s.length=="number"||i.isString(s.s)))return"s: buffer expected";if(s.t!=null&&s.hasOwnProperty("t")){var h=l.onnx.TensorProto.verify(s.t);if(h)return"t."+h}if(s.g!=null&&s.hasOwnProperty("g")){var h=l.onnx.GraphProto.verify(s.g);if(h)return"g."+h}if(s.sparseTensor!=null&&s.hasOwnProperty("sparseTensor")){var h=l.onnx.SparseTensorProto.verify(s.sparseTensor);if(h)return"sparseTensor."+h}if(s.tp!=null&&s.hasOwnProperty("tp")){var h=l.onnx.TypeProto.verify(s.tp);if(h)return"tp."+h}if(s.floats!=null&&s.hasOwnProperty("floats")){if(!Array.isArray(s.floats))return"floats: array expected";for(var f=0;f<s.floats.length;++f)if(typeof s.floats[f]!="number")return"floats: number[] expected"}if(s.ints!=null&&s.hasOwnProperty("ints")){if(!Array.isArray(s.ints))return"ints: array expected";for(var f=0;f<s.ints.length;++f)if(!i.isInteger(s.ints[f])&&!(s.ints[f]&&i.isInteger(s.ints[f].low)&&i.isInteger(s.ints[f].high)))return"ints: integer|Long[] expected"}if(s.strings!=null&&s.hasOwnProperty("strings")){if(!Array.isArray(s.strings))return"strings: array expected";for(var f=0;f<s.strings.length;++f)if(!(s.strings[f]&&typeof s.strings[f].length=="number"||i.isString(s.strings[f])))return"strings: buffer[] expected"}if(s.tensors!=null&&s.hasOwnProperty("tensors")){if(!Array.isArray(s.tensors))return"tensors: array expected";for(var f=0;f<s.tensors.length;++f){var h=l.onnx.TensorProto.verify(s.tensors[f]);if(h)return"tensors."+h}}if(s.graphs!=null&&s.hasOwnProperty("graphs")){if(!Array.isArray(s.graphs))return"graphs: array expected";for(var f=0;f<s.graphs.length;++f){var h=l.onnx.GraphProto.verify(s.graphs[f]);if(h)return"graphs."+h}}if(s.sparseTensors!=null&&s.hasOwnProperty("sparseTensors")){if(!Array.isArray(s.sparseTensors))return"sparseTensors: array expected";for(var f=0;f<s.sparseTensors.length;++f){var h=l.onnx.SparseTensorProto.verify(s.sparseTensors[f]);if(h)return"sparseTensors."+h}}if(s.typeProtos!=null&&s.hasOwnProperty("typeProtos")){if(!Array.isArray(s.typeProtos))return"typeProtos: array expected";for(var f=0;f<s.typeProtos.length;++f){var h=l.onnx.TypeProto.verify(s.typeProtos[f]);if(h)return"typeProtos."+h}}return null},m.fromObject=function(s){if(s instanceof l.onnx.AttributeProto)return s;var h=new l.onnx.AttributeProto;switch(s.name!=null&&(h.name=String(s.name)),s.refAttrName!=null&&(h.refAttrName=String(s.refAttrName)),s.docString!=null&&(h.docString=String(s.docString)),s.type){default:if(typeof s.type=="number"){h.type=s.type;break}break;case"UNDEFINED":case 0:h.type=0;break;case"FLOAT":case 1:h.type=1;break;case"INT":case 2:h.type=2;break;case"STRING":case 3:h.type=3;break;case"TENSOR":case 4:h.type=4;break;case"GRAPH":case 5:h.type=5;break;case"SPARSE_TENSOR":case 11:h.type=11;break;case"TYPE_PROTO":case 13:h.type=13;break;case"FLOATS":case 6:h.type=6;break;case"INTS":case 7:h.type=7;break;case"STRINGS":case 8:h.type=8;break;case"TENSORS":case 9:h.type=9;break;case"GRAPHS":case 10:h.type=10;break;case"SPARSE_TENSORS":case 12:h.type=12;break;case"TYPE_PROTOS":case 14:h.type=14;break}if(s.f!=null&&(h.f=Number(s.f)),s.i!=null&&(i.Long?(h.i=i.Long.fromValue(s.i)).unsigned=!1:typeof s.i=="string"?h.i=parseInt(s.i,10):typeof s.i=="number"?h.i=s.i:typeof s.i=="object"&&(h.i=new i.LongBits(s.i.low>>>0,s.i.high>>>0).toNumber())),s.s!=null&&(typeof s.s=="string"?i.base64.decode(s.s,h.s=i.newBuffer(i.base64.length(s.s)),0):s.s.length>=0&&(h.s=s.s)),s.t!=null){if(typeof s.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");h.t=l.onnx.TensorProto.fromObject(s.t)}if(s.g!=null){if(typeof s.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");h.g=l.onnx.GraphProto.fromObject(s.g)}if(s.sparseTensor!=null){if(typeof s.sparseTensor!="object")throw TypeError(".onnx.AttributeProto.sparseTensor: object expected");h.sparseTensor=l.onnx.SparseTensorProto.fromObject(s.sparseTensor)}if(s.tp!=null){if(typeof s.tp!="object")throw TypeError(".onnx.AttributeProto.tp: object expected");h.tp=l.onnx.TypeProto.fromObject(s.tp)}if(s.floats){if(!Array.isArray(s.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");h.floats=[];for(var f=0;f<s.floats.length;++f)h.floats[f]=Number(s.floats[f])}if(s.ints){if(!Array.isArray(s.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");h.ints=[];for(var f=0;f<s.ints.length;++f)i.Long?(h.ints[f]=i.Long.fromValue(s.ints[f])).unsigned=!1:typeof s.ints[f]=="string"?h.ints[f]=parseInt(s.ints[f],10):typeof s.ints[f]=="number"?h.ints[f]=s.ints[f]:typeof s.ints[f]=="object"&&(h.ints[f]=new i.LongBits(s.ints[f].low>>>0,s.ints[f].high>>>0).toNumber())}if(s.strings){if(!Array.isArray(s.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");h.strings=[];for(var f=0;f<s.strings.length;++f)typeof s.strings[f]=="string"?i.base64.decode(s.strings[f],h.strings[f]=i.newBuffer(i.base64.length(s.strings[f])),0):s.strings[f].length>=0&&(h.strings[f]=s.strings[f])}if(s.tensors){if(!Array.isArray(s.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");h.tensors=[];for(var f=0;f<s.tensors.length;++f){if(typeof s.tensors[f]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");h.tensors[f]=l.onnx.TensorProto.fromObject(s.tensors[f])}}if(s.graphs){if(!Array.isArray(s.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");h.graphs=[];for(var f=0;f<s.graphs.length;++f){if(typeof s.graphs[f]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");h.graphs[f]=l.onnx.GraphProto.fromObject(s.graphs[f])}}if(s.sparseTensors){if(!Array.isArray(s.sparseTensors))throw TypeError(".onnx.AttributeProto.sparseTensors: array expected");h.sparseTensors=[];for(var f=0;f<s.sparseTensors.length;++f){if(typeof s.sparseTensors[f]!="object")throw TypeError(".onnx.AttributeProto.sparseTensors: object expected");h.sparseTensors[f]=l.onnx.SparseTensorProto.fromObject(s.sparseTensors[f])}}if(s.typeProtos){if(!Array.isArray(s.typeProtos))throw TypeError(".onnx.AttributeProto.typeProtos: array expected");h.typeProtos=[];for(var f=0;f<s.typeProtos.length;++f){if(typeof s.typeProtos[f]!="object")throw TypeError(".onnx.AttributeProto.typeProtos: object expected");h.typeProtos[f]=l.onnx.TypeProto.fromObject(s.typeProtos[f])}}return h},m.toObject=function(s,h){h||(h={});var f={};if((h.arrays||h.defaults)&&(f.floats=[],f.ints=[],f.strings=[],f.tensors=[],f.graphs=[],f.typeProtos=[],f.sparseTensors=[]),h.defaults){if(f.name="",f.f=0,i.Long){var v=new i.Long(0,0,!1);f.i=h.longs===String?v.toString():h.longs===Number?v.toNumber():v}else f.i=h.longs===String?"0":0;h.bytes===String?f.s="":(f.s=[],h.bytes!==Array&&(f.s=i.newBuffer(f.s))),f.t=null,f.g=null,f.docString="",f.tp=null,f.type=h.enums===String?"UNDEFINED":0,f.refAttrName="",f.sparseTensor=null}if(s.name!=null&&s.hasOwnProperty("name")&&(f.name=s.name),s.f!=null&&s.hasOwnProperty("f")&&(f.f=h.json&&!isFinite(s.f)?String(s.f):s.f),s.i!=null&&s.hasOwnProperty("i")&&(typeof s.i=="number"?f.i=h.longs===String?String(s.i):s.i:f.i=h.longs===String?i.Long.prototype.toString.call(s.i):h.longs===Number?new i.LongBits(s.i.low>>>0,s.i.high>>>0).toNumber():s.i),s.s!=null&&s.hasOwnProperty("s")&&(f.s=h.bytes===String?i.base64.encode(s.s,0,s.s.length):h.bytes===Array?Array.prototype.slice.call(s.s):s.s),s.t!=null&&s.hasOwnProperty("t")&&(f.t=l.onnx.TensorProto.toObject(s.t,h)),s.g!=null&&s.hasOwnProperty("g")&&(f.g=l.onnx.GraphProto.toObject(s.g,h)),s.floats&&s.floats.length){f.floats=[];for(var I=0;I<s.floats.length;++I)f.floats[I]=h.json&&!isFinite(s.floats[I])?String(s.floats[I]):s.floats[I]}if(s.ints&&s.ints.length){f.ints=[];for(var I=0;I<s.ints.length;++I)typeof s.ints[I]=="number"?f.ints[I]=h.longs===String?String(s.ints[I]):s.ints[I]:f.ints[I]=h.longs===String?i.Long.prototype.toString.call(s.ints[I]):h.longs===Number?new i.LongBits(s.ints[I].low>>>0,s.ints[I].high>>>0).toNumber():s.ints[I]}if(s.strings&&s.strings.length){f.strings=[];for(var I=0;I<s.strings.length;++I)f.strings[I]=h.bytes===String?i.base64.encode(s.strings[I],0,s.strings[I].length):h.bytes===Array?Array.prototype.slice.call(s.strings[I]):s.strings[I]}if(s.tensors&&s.tensors.length){f.tensors=[];for(var I=0;I<s.tensors.length;++I)f.tensors[I]=l.onnx.TensorProto.toObject(s.tensors[I],h)}if(s.graphs&&s.graphs.length){f.graphs=[];for(var I=0;I<s.graphs.length;++I)f.graphs[I]=l.onnx.GraphProto.toObject(s.graphs[I],h)}if(s.docString!=null&&s.hasOwnProperty("docString")&&(f.docString=s.docString),s.tp!=null&&s.hasOwnProperty("tp")&&(f.tp=l.onnx.TypeProto.toObject(s.tp,h)),s.typeProtos&&s.typeProtos.length){f.typeProtos=[];for(var I=0;I<s.typeProtos.length;++I)f.typeProtos[I]=l.onnx.TypeProto.toObject(s.typeProtos[I],h)}if(s.type!=null&&s.hasOwnProperty("type")&&(f.type=h.enums===String?l.onnx.AttributeProto.AttributeType[s.type]===void 0?s.type:l.onnx.AttributeProto.AttributeType[s.type]:s.type),s.refAttrName!=null&&s.hasOwnProperty("refAttrName")&&(f.refAttrName=s.refAttrName),s.sparseTensor!=null&&s.hasOwnProperty("sparseTensor")&&(f.sparseTensor=l.onnx.SparseTensorProto.toObject(s.sparseTensor,h)),s.sparseTensors&&s.sparseTensors.length){f.sparseTensors=[];for(var I=0;I<s.sparseTensors.length;++I)f.sparseTensors[I]=l.onnx.SparseTensorProto.toObject(s.sparseTensors[I],h)}return f},m.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},m.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.AttributeProto"},m.AttributeType=(function(){var s={},h=Object.create(s);return h[s[0]="UNDEFINED"]=0,h[s[1]="FLOAT"]=1,h[s[2]="INT"]=2,h[s[3]="STRING"]=3,h[s[4]="TENSOR"]=4,h[s[5]="GRAPH"]=5,h[s[11]="SPARSE_TENSOR"]=11,h[s[13]="TYPE_PROTO"]=13,h[s[6]="FLOATS"]=6,h[s[7]="INTS"]=7,h[s[8]="STRINGS"]=8,h[s[9]="TENSORS"]=9,h[s[10]="GRAPHS"]=10,h[s[12]="SPARSE_TENSORS"]=12,h[s[14]="TYPE_PROTOS"]=14,h})(),m})(),p.ValueInfoProto=(function(){function m(s){if(s)for(var h=Object.keys(s),f=0;f<h.length;++f)s[h[f]]!=null&&(this[h[f]]=s[h[f]])}return m.prototype.name="",m.prototype.type=null,m.prototype.docString="",m.create=function(s){return new m(s)},m.encode=function(s,h){return h||(h=a.create()),s.name!=null&&Object.hasOwnProperty.call(s,"name")&&h.uint32(10).string(s.name),s.type!=null&&Object.hasOwnProperty.call(s,"type")&&l.onnx.TypeProto.encode(s.type,h.uint32(18).fork()).ldelim(),s.docString!=null&&Object.hasOwnProperty.call(s,"docString")&&h.uint32(26).string(s.docString),h},m.encodeDelimited=function(s,h){return this.encode(s,h).ldelim()},m.decode=function(s,h){s instanceof r||(s=r.create(s));for(var f=h===void 0?s.len:s.pos+h,v=new l.onnx.ValueInfoProto;s.pos<f;){var I=s.uint32();switch(I>>>3){case 1:{v.name=s.string();break}case 2:{v.type=l.onnx.TypeProto.decode(s,s.uint32());break}case 3:{v.docString=s.string();break}default:s.skipType(I&7);break}}return v},m.decodeDelimited=function(s){return s instanceof r||(s=new r(s)),this.decode(s,s.uint32())},m.verify=function(s){if(typeof s!="object"||s===null)return"object expected";if(s.name!=null&&s.hasOwnProperty("name")&&!i.isString(s.name))return"name: string expected";if(s.type!=null&&s.hasOwnProperty("type")){var h=l.onnx.TypeProto.verify(s.type);if(h)return"type."+h}return s.docString!=null&&s.hasOwnProperty("docString")&&!i.isString(s.docString)?"docString: string expected":null},m.fromObject=function(s){if(s instanceof l.onnx.ValueInfoProto)return s;var h=new l.onnx.ValueInfoProto;if(s.name!=null&&(h.name=String(s.name)),s.type!=null){if(typeof s.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");h.type=l.onnx.TypeProto.fromObject(s.type)}return s.docString!=null&&(h.docString=String(s.docString)),h},m.toObject=function(s,h){h||(h={});var f={};return h.defaults&&(f.name="",f.type=null,f.docString=""),s.name!=null&&s.hasOwnProperty("name")&&(f.name=s.name),s.type!=null&&s.hasOwnProperty("type")&&(f.type=l.onnx.TypeProto.toObject(s.type,h)),s.docString!=null&&s.hasOwnProperty("docString")&&(f.docString=s.docString),f},m.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},m.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.ValueInfoProto"},m})(),p.NodeProto=(function(){function m(s){if(this.input=[],this.output=[],this.attribute=[],s)for(var h=Object.keys(s),f=0;f<h.length;++f)s[h[f]]!=null&&(this[h[f]]=s[h[f]])}return m.prototype.input=i.emptyArray,m.prototype.output=i.emptyArray,m.prototype.name="",m.prototype.opType="",m.prototype.domain="",m.prototype.attribute=i.emptyArray,m.prototype.docString="",m.create=function(s){return new m(s)},m.encode=function(s,h){if(h||(h=a.create()),s.input!=null&&s.input.length)for(var f=0;f<s.input.length;++f)h.uint32(10).string(s.input[f]);if(s.output!=null&&s.output.length)for(var f=0;f<s.output.length;++f)h.uint32(18).string(s.output[f]);if(s.name!=null&&Object.hasOwnProperty.call(s,"name")&&h.uint32(26).string(s.name),s.opType!=null&&Object.hasOwnProperty.call(s,"opType")&&h.uint32(34).string(s.opType),s.attribute!=null&&s.attribute.length)for(var f=0;f<s.attribute.length;++f)l.onnx.AttributeProto.encode(s.attribute[f],h.uint32(42).fork()).ldelim();return s.docString!=null&&Object.hasOwnProperty.call(s,"docString")&&h.uint32(50).string(s.docString),s.domain!=null&&Object.hasOwnProperty.call(s,"domain")&&h.uint32(58).string(s.domain),h},m.encodeDelimited=function(s,h){return this.encode(s,h).ldelim()},m.decode=function(s,h){s instanceof r||(s=r.create(s));for(var f=h===void 0?s.len:s.pos+h,v=new l.onnx.NodeProto;s.pos<f;){var I=s.uint32();switch(I>>>3){case 1:{v.input&&v.input.length||(v.input=[]),v.input.push(s.string());break}case 2:{v.output&&v.output.length||(v.output=[]),v.output.push(s.string());break}case 3:{v.name=s.string();break}case 4:{v.opType=s.string();break}case 7:{v.domain=s.string();break}case 5:{v.attribute&&v.attribute.length||(v.attribute=[]),v.attribute.push(l.onnx.AttributeProto.decode(s,s.uint32()));break}case 6:{v.docString=s.string();break}default:s.skipType(I&7);break}}return v},m.decodeDelimited=function(s){return s instanceof r||(s=new r(s)),this.decode(s,s.uint32())},m.verify=function(s){if(typeof s!="object"||s===null)return"object expected";if(s.input!=null&&s.hasOwnProperty("input")){if(!Array.isArray(s.input))return"input: array expected";for(var h=0;h<s.input.length;++h)if(!i.isString(s.input[h]))return"input: string[] expected"}if(s.output!=null&&s.hasOwnProperty("output")){if(!Array.isArray(s.output))return"output: array expected";for(var h=0;h<s.output.length;++h)if(!i.isString(s.output[h]))return"output: string[] expected"}if(s.name!=null&&s.hasOwnProperty("name")&&!i.isString(s.name))return"name: string expected";if(s.opType!=null&&s.hasOwnProperty("opType")&&!i.isString(s.opType))return"opType: string expected";if(s.domain!=null&&s.hasOwnProperty("domain")&&!i.isString(s.domain))return"domain: string expected";if(s.attribute!=null&&s.hasOwnProperty("attribute")){if(!Array.isArray(s.attribute))return"attribute: array expected";for(var h=0;h<s.attribute.length;++h){var f=l.onnx.AttributeProto.verify(s.attribute[h]);if(f)return"attribute."+f}}return s.docString!=null&&s.hasOwnProperty("docString")&&!i.isString(s.docString)?"docString: string expected":null},m.fromObject=function(s){if(s instanceof l.onnx.NodeProto)return s;var h=new l.onnx.NodeProto;if(s.input){if(!Array.isArray(s.input))throw TypeError(".onnx.NodeProto.input: array expected");h.input=[];for(var f=0;f<s.input.length;++f)h.input[f]=String(s.input[f])}if(s.output){if(!Array.isArray(s.output))throw TypeError(".onnx.NodeProto.output: array expected");h.output=[];for(var f=0;f<s.output.length;++f)h.output[f]=String(s.output[f])}if(s.name!=null&&(h.name=String(s.name)),s.opType!=null&&(h.opType=String(s.opType)),s.domain!=null&&(h.domain=String(s.domain)),s.attribute){if(!Array.isArray(s.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");h.attribute=[];for(var f=0;f<s.attribute.length;++f){if(typeof s.attribute[f]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");h.attribute[f]=l.onnx.AttributeProto.fromObject(s.attribute[f])}}return s.docString!=null&&(h.docString=String(s.docString)),h},m.toObject=function(s,h){h||(h={});var f={};if((h.arrays||h.defaults)&&(f.input=[],f.output=[],f.attribute=[]),h.defaults&&(f.name="",f.opType="",f.docString="",f.domain=""),s.input&&s.input.length){f.input=[];for(var v=0;v<s.input.length;++v)f.input[v]=s.input[v]}if(s.output&&s.output.length){f.output=[];for(var v=0;v<s.output.length;++v)f.output[v]=s.output[v]}if(s.name!=null&&s.hasOwnProperty("name")&&(f.name=s.name),s.opType!=null&&s.hasOwnProperty("opType")&&(f.opType=s.opType),s.attribute&&s.attribute.length){f.attribute=[];for(var v=0;v<s.attribute.length;++v)f.attribute[v]=l.onnx.AttributeProto.toObject(s.attribute[v],h)}return s.docString!=null&&s.hasOwnProperty("docString")&&(f.docString=s.docString),s.domain!=null&&s.hasOwnProperty("domain")&&(f.domain=s.domain),f},m.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},m.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.NodeProto"},m})(),p.TrainingInfoProto=(function(){function m(s){if(this.initializationBinding=[],this.updateBinding=[],s)for(var h=Object.keys(s),f=0;f<h.length;++f)s[h[f]]!=null&&(this[h[f]]=s[h[f]])}return m.prototype.initialization=null,m.prototype.algorithm=null,m.prototype.initializationBinding=i.emptyArray,m.prototype.updateBinding=i.emptyArray,m.create=function(s){return new m(s)},m.encode=function(s,h){if(h||(h=a.create()),s.initialization!=null&&Object.hasOwnProperty.call(s,"initialization")&&l.onnx.GraphProto.encode(s.initialization,h.uint32(10).fork()).ldelim(),s.algorithm!=null&&Object.hasOwnProperty.call(s,"algorithm")&&l.onnx.GraphProto.encode(s.algorithm,h.uint32(18).fork()).ldelim(),s.initializationBinding!=null&&s.initializationBinding.length)for(var f=0;f<s.initializationBinding.length;++f)l.onnx.StringStringEntryProto.encode(s.initializationBinding[f],h.uint32(26).fork()).ldelim();if(s.updateBinding!=null&&s.updateBinding.length)for(var f=0;f<s.updateBinding.length;++f)l.onnx.StringStringEntryProto.encode(s.updateBinding[f],h.uint32(34).fork()).ldelim();return h},m.encodeDelimited=function(s,h){return this.encode(s,h).ldelim()},m.decode=function(s,h){s instanceof r||(s=r.create(s));for(var f=h===void 0?s.len:s.pos+h,v=new l.onnx.TrainingInfoProto;s.pos<f;){var I=s.uint32();switch(I>>>3){case 1:{v.initialization=l.onnx.GraphProto.decode(s,s.uint32());break}case 2:{v.algorithm=l.onnx.GraphProto.decode(s,s.uint32());break}case 3:{v.initializationBinding&&v.initializationBinding.length||(v.initializationBinding=[]),v.initializationBinding.push(l.onnx.StringStringEntryProto.decode(s,s.uint32()));break}case 4:{v.updateBinding&&v.updateBinding.length||(v.updateBinding=[]),v.updateBinding.push(l.onnx.StringStringEntryProto.decode(s,s.uint32()));break}default:s.skipType(I&7);break}}return v},m.decodeDelimited=function(s){return s instanceof r||(s=new r(s)),this.decode(s,s.uint32())},m.verify=function(s){if(typeof s!="object"||s===null)return"object expected";if(s.initialization!=null&&s.hasOwnProperty("initialization")){var h=l.onnx.GraphProto.verify(s.initialization);if(h)return"initialization."+h}if(s.algorithm!=null&&s.hasOwnProperty("algorithm")){var h=l.onnx.GraphProto.verify(s.algorithm);if(h)return"algorithm."+h}if(s.initializationBinding!=null&&s.hasOwnProperty("initializationBinding")){if(!Array.isArray(s.initializationBinding))return"initializationBinding: array expected";for(var f=0;f<s.initializationBinding.length;++f){var h=l.onnx.StringStringEntryProto.verify(s.initializationBinding[f]);if(h)return"initializationBinding."+h}}if(s.updateBinding!=null&&s.hasOwnProperty("updateBinding")){if(!Array.isArray(s.updateBinding))return"updateBinding: array expected";for(var f=0;f<s.updateBinding.length;++f){var h=l.onnx.StringStringEntryProto.verify(s.updateBinding[f]);if(h)return"updateBinding."+h}}return null},m.fromObject=function(s){if(s instanceof l.onnx.TrainingInfoProto)return s;var h=new l.onnx.TrainingInfoProto;if(s.initialization!=null){if(typeof s.initialization!="object")throw TypeError(".onnx.TrainingInfoProto.initialization: object expected");h.initialization=l.onnx.GraphProto.fromObject(s.initialization)}if(s.algorithm!=null){if(typeof s.algorithm!="object")throw TypeError(".onnx.TrainingInfoProto.algorithm: object expected");h.algorithm=l.onnx.GraphProto.fromObject(s.algorithm)}if(s.initializationBinding){if(!Array.isArray(s.initializationBinding))throw TypeError(".onnx.TrainingInfoProto.initializationBinding: array expected");h.initializationBinding=[];for(var f=0;f<s.initializationBinding.length;++f){if(typeof s.initializationBinding[f]!="object")throw TypeError(".onnx.TrainingInfoProto.initializationBinding: object expected");h.initializationBinding[f]=l.onnx.StringStringEntryProto.fromObject(s.initializationBinding[f])}}if(s.updateBinding){if(!Array.isArray(s.updateBinding))throw TypeError(".onnx.TrainingInfoProto.updateBinding: array expected");h.updateBinding=[];for(var f=0;f<s.updateBinding.length;++f){if(typeof s.updateBinding[f]!="object")throw TypeError(".onnx.TrainingInfoProto.updateBinding: object expected");h.updateBinding[f]=l.onnx.StringStringEntryProto.fromObject(s.updateBinding[f])}}return h},m.toObject=function(s,h){h||(h={});var f={};if((h.arrays||h.defaults)&&(f.initializationBinding=[],f.updateBinding=[]),h.defaults&&(f.initialization=null,f.algorithm=null),s.initialization!=null&&s.hasOwnProperty("initialization")&&(f.initialization=l.onnx.GraphProto.toObject(s.initialization,h)),s.algorithm!=null&&s.hasOwnProperty("algorithm")&&(f.algorithm=l.onnx.GraphProto.toObject(s.algorithm,h)),s.initializationBinding&&s.initializationBinding.length){f.initializationBinding=[];for(var v=0;v<s.initializationBinding.length;++v)f.initializationBinding[v]=l.onnx.StringStringEntryProto.toObject(s.initializationBinding[v],h)}if(s.updateBinding&&s.updateBinding.length){f.updateBinding=[];for(var v=0;v<s.updateBinding.length;++v)f.updateBinding[v]=l.onnx.StringStringEntryProto.toObject(s.updateBinding[v],h)}return f},m.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},m.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.TrainingInfoProto"},m})(),p.ModelProto=(function(){function m(s){if(this.opsetImport=[],this.metadataProps=[],this.trainingInfo=[],this.functions=[],s)for(var h=Object.keys(s),f=0;f<h.length;++f)s[h[f]]!=null&&(this[h[f]]=s[h[f]])}return m.prototype.irVersion=i.Long?i.Long.fromBits(0,0,!1):0,m.prototype.opsetImport=i.emptyArray,m.prototype.producerName="",m.prototype.producerVersion="",m.prototype.domain="",m.prototype.modelVersion=i.Long?i.Long.fromBits(0,0,!1):0,m.prototype.docString="",m.prototype.graph=null,m.prototype.metadataProps=i.emptyArray,m.prototype.trainingInfo=i.emptyArray,m.prototype.functions=i.emptyArray,m.create=function(s){return new m(s)},m.encode=function(s,h){if(h||(h=a.create()),s.irVersion!=null&&Object.hasOwnProperty.call(s,"irVersion")&&h.uint32(8).int64(s.irVersion),s.producerName!=null&&Object.hasOwnProperty.call(s,"producerName")&&h.uint32(18).string(s.producerName),s.producerVersion!=null&&Object.hasOwnProperty.call(s,"producerVersion")&&h.uint32(26).string(s.producerVersion),s.domain!=null&&Object.hasOwnProperty.call(s,"domain")&&h.uint32(34).string(s.domain),s.modelVersion!=null&&Object.hasOwnProperty.call(s,"modelVersion")&&h.uint32(40).int64(s.modelVersion),s.docString!=null&&Object.hasOwnProperty.call(s,"docString")&&h.uint32(50).string(s.docString),s.graph!=null&&Object.hasOwnProperty.call(s,"graph")&&l.onnx.GraphProto.encode(s.graph,h.uint32(58).fork()).ldelim(),s.opsetImport!=null&&s.opsetImport.length)for(var f=0;f<s.opsetImport.length;++f)l.onnx.OperatorSetIdProto.encode(s.opsetImport[f],h.uint32(66).fork()).ldelim();if(s.metadataProps!=null&&s.metadataProps.length)for(var f=0;f<s.metadataProps.length;++f)l.onnx.StringStringEntryProto.encode(s.metadataProps[f],h.uint32(114).fork()).ldelim();if(s.trainingInfo!=null&&s.trainingInfo.length)for(var f=0;f<s.trainingInfo.length;++f)l.onnx.TrainingInfoProto.encode(s.trainingInfo[f],h.uint32(162).fork()).ldelim();if(s.functions!=null&&s.functions.length)for(var f=0;f<s.functions.length;++f)l.onnx.FunctionProto.encode(s.functions[f],h.uint32(202).fork()).ldelim();return h},m.encodeDelimited=function(s,h){return this.encode(s,h).ldelim()},m.decode=function(s,h){s instanceof r||(s=r.create(s));for(var f=h===void 0?s.len:s.pos+h,v=new l.onnx.ModelProto;s.pos<f;){var I=s.uint32();switch(I>>>3){case 1:{v.irVersion=s.int64();break}case 8:{v.opsetImport&&v.opsetImport.length||(v.opsetImport=[]),v.opsetImport.push(l.onnx.OperatorSetIdProto.decode(s,s.uint32()));break}case 2:{v.producerName=s.string();break}case 3:{v.producerVersion=s.string();break}case 4:{v.domain=s.string();break}case 5:{v.modelVersion=s.int64();break}case 6:{v.docString=s.string();break}case 7:{v.graph=l.onnx.GraphProto.decode(s,s.uint32());break}case 14:{v.metadataProps&&v.metadataProps.length||(v.metadataProps=[]),v.metadataProps.push(l.onnx.StringStringEntryProto.decode(s,s.uint32()));break}case 20:{v.trainingInfo&&v.trainingInfo.length||(v.trainingInfo=[]),v.trainingInfo.push(l.onnx.TrainingInfoProto.decode(s,s.uint32()));break}case 25:{v.functions&&v.functions.length||(v.functions=[]),v.functions.push(l.onnx.FunctionProto.decode(s,s.uint32()));break}default:s.skipType(I&7);break}}return v},m.decodeDelimited=function(s){return s instanceof r||(s=new r(s)),this.decode(s,s.uint32())},m.verify=function(s){if(typeof s!="object"||s===null)return"object expected";if(s.irVersion!=null&&s.hasOwnProperty("irVersion")&&!i.isInteger(s.irVersion)&&!(s.irVersion&&i.isInteger(s.irVersion.low)&&i.isInteger(s.irVersion.high)))return"irVersion: integer|Long expected";if(s.opsetImport!=null&&s.hasOwnProperty("opsetImport")){if(!Array.isArray(s.opsetImport))return"opsetImport: array expected";for(var h=0;h<s.opsetImport.length;++h){var f=l.onnx.OperatorSetIdProto.verify(s.opsetImport[h]);if(f)return"opsetImport."+f}}if(s.producerName!=null&&s.hasOwnProperty("producerName")&&!i.isString(s.producerName))return"producerName: string expected";if(s.producerVersion!=null&&s.hasOwnProperty("producerVersion")&&!i.isString(s.producerVersion))return"producerVersion: string expected";if(s.domain!=null&&s.hasOwnProperty("domain")&&!i.isString(s.domain))return"domain: string expected";if(s.modelVersion!=null&&s.hasOwnProperty("modelVersion")&&!i.isInteger(s.modelVersion)&&!(s.modelVersion&&i.isInteger(s.modelVersion.low)&&i.isInteger(s.modelVersion.high)))return"modelVersion: integer|Long expected";if(s.docString!=null&&s.hasOwnProperty("docString")&&!i.isString(s.docString))return"docString: string expected";if(s.graph!=null&&s.hasOwnProperty("graph")){var f=l.onnx.GraphProto.verify(s.graph);if(f)return"graph."+f}if(s.metadataProps!=null&&s.hasOwnProperty("metadataProps")){if(!Array.isArray(s.metadataProps))return"metadataProps: array expected";for(var h=0;h<s.metadataProps.length;++h){var f=l.onnx.StringStringEntryProto.verify(s.metadataProps[h]);if(f)return"metadataProps."+f}}if(s.trainingInfo!=null&&s.hasOwnProperty("trainingInfo")){if(!Array.isArray(s.trainingInfo))return"trainingInfo: array expected";for(var h=0;h<s.trainingInfo.length;++h){var f=l.onnx.TrainingInfoProto.verify(s.trainingInfo[h]);if(f)return"trainingInfo."+f}}if(s.functions!=null&&s.hasOwnProperty("functions")){if(!Array.isArray(s.functions))return"functions: array expected";for(var h=0;h<s.functions.length;++h){var f=l.onnx.FunctionProto.verify(s.functions[h]);if(f)return"functions."+f}}return null},m.fromObject=function(s){if(s instanceof l.onnx.ModelProto)return s;var h=new l.onnx.ModelProto;if(s.irVersion!=null&&(i.Long?(h.irVersion=i.Long.fromValue(s.irVersion)).unsigned=!1:typeof s.irVersion=="string"?h.irVersion=parseInt(s.irVersion,10):typeof s.irVersion=="number"?h.irVersion=s.irVersion:typeof s.irVersion=="object"&&(h.irVersion=new i.LongBits(s.irVersion.low>>>0,s.irVersion.high>>>0).toNumber())),s.opsetImport){if(!Array.isArray(s.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");h.opsetImport=[];for(var f=0;f<s.opsetImport.length;++f){if(typeof s.opsetImport[f]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");h.opsetImport[f]=l.onnx.OperatorSetIdProto.fromObject(s.opsetImport[f])}}if(s.producerName!=null&&(h.producerName=String(s.producerName)),s.producerVersion!=null&&(h.producerVersion=String(s.producerVersion)),s.domain!=null&&(h.domain=String(s.domain)),s.modelVersion!=null&&(i.Long?(h.modelVersion=i.Long.fromValue(s.modelVersion)).unsigned=!1:typeof s.modelVersion=="string"?h.modelVersion=parseInt(s.modelVersion,10):typeof s.modelVersion=="number"?h.modelVersion=s.modelVersion:typeof s.modelVersion=="object"&&(h.modelVersion=new i.LongBits(s.modelVersion.low>>>0,s.modelVersion.high>>>0).toNumber())),s.docString!=null&&(h.docString=String(s.docString)),s.graph!=null){if(typeof s.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");h.graph=l.onnx.GraphProto.fromObject(s.graph)}if(s.metadataProps){if(!Array.isArray(s.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");h.metadataProps=[];for(var f=0;f<s.metadataProps.length;++f){if(typeof s.metadataProps[f]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");h.metadataProps[f]=l.onnx.StringStringEntryProto.fromObject(s.metadataProps[f])}}if(s.trainingInfo){if(!Array.isArray(s.trainingInfo))throw TypeError(".onnx.ModelProto.trainingInfo: array expected");h.trainingInfo=[];for(var f=0;f<s.trainingInfo.length;++f){if(typeof s.trainingInfo[f]!="object")throw TypeError(".onnx.ModelProto.trainingInfo: object expected");h.trainingInfo[f]=l.onnx.TrainingInfoProto.fromObject(s.trainingInfo[f])}}if(s.functions){if(!Array.isArray(s.functions))throw TypeError(".onnx.ModelProto.functions: array expected");h.functions=[];for(var f=0;f<s.functions.length;++f){if(typeof s.functions[f]!="object")throw TypeError(".onnx.ModelProto.functions: object expected");h.functions[f]=l.onnx.FunctionProto.fromObject(s.functions[f])}}return h},m.toObject=function(s,h){h||(h={});var f={};if((h.arrays||h.defaults)&&(f.opsetImport=[],f.metadataProps=[],f.trainingInfo=[],f.functions=[]),h.defaults){if(i.Long){var v=new i.Long(0,0,!1);f.irVersion=h.longs===String?v.toString():h.longs===Number?v.toNumber():v}else f.irVersion=h.longs===String?"0":0;if(f.producerName="",f.producerVersion="",f.domain="",i.Long){var v=new i.Long(0,0,!1);f.modelVersion=h.longs===String?v.toString():h.longs===Number?v.toNumber():v}else f.modelVersion=h.longs===String?"0":0;f.docString="",f.graph=null}if(s.irVersion!=null&&s.hasOwnProperty("irVersion")&&(typeof s.irVersion=="number"?f.irVersion=h.longs===String?String(s.irVersion):s.irVersion:f.irVersion=h.longs===String?i.Long.prototype.toString.call(s.irVersion):h.longs===Number?new i.LongBits(s.irVersion.low>>>0,s.irVersion.high>>>0).toNumber():s.irVersion),s.producerName!=null&&s.hasOwnProperty("producerName")&&(f.producerName=s.producerName),s.producerVersion!=null&&s.hasOwnProperty("producerVersion")&&(f.producerVersion=s.producerVersion),s.domain!=null&&s.hasOwnProperty("domain")&&(f.domain=s.domain),s.modelVersion!=null&&s.hasOwnProperty("modelVersion")&&(typeof s.modelVersion=="number"?f.modelVersion=h.longs===String?String(s.modelVersion):s.modelVersion:f.modelVersion=h.longs===String?i.Long.prototype.toString.call(s.modelVersion):h.longs===Number?new i.LongBits(s.modelVersion.low>>>0,s.modelVersion.high>>>0).toNumber():s.modelVersion),s.docString!=null&&s.hasOwnProperty("docString")&&(f.docString=s.docString),s.graph!=null&&s.hasOwnProperty("graph")&&(f.graph=l.onnx.GraphProto.toObject(s.graph,h)),s.opsetImport&&s.opsetImport.length){f.opsetImport=[];for(var I=0;I<s.opsetImport.length;++I)f.opsetImport[I]=l.onnx.OperatorSetIdProto.toObject(s.opsetImport[I],h)}if(s.metadataProps&&s.metadataProps.length){f.metadataProps=[];for(var I=0;I<s.metadataProps.length;++I)f.metadataProps[I]=l.onnx.StringStringEntryProto.toObject(s.metadataProps[I],h)}if(s.trainingInfo&&s.trainingInfo.length){f.trainingInfo=[];for(var I=0;I<s.trainingInfo.length;++I)f.trainingInfo[I]=l.onnx.TrainingInfoProto.toObject(s.trainingInfo[I],h)}if(s.functions&&s.functions.length){f.functions=[];for(var I=0;I<s.functions.length;++I)f.functions[I]=l.onnx.FunctionProto.toObject(s.functions[I],h)}return f},m.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},m.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.ModelProto"},m})(),p.StringStringEntryProto=(function(){function m(s){if(s)for(var h=Object.keys(s),f=0;f<h.length;++f)s[h[f]]!=null&&(this[h[f]]=s[h[f]])}return m.prototype.key="",m.prototype.value="",m.create=function(s){return new m(s)},m.encode=function(s,h){return h||(h=a.create()),s.key!=null&&Object.hasOwnProperty.call(s,"key")&&h.uint32(10).string(s.key),s.value!=null&&Object.hasOwnProperty.call(s,"value")&&h.uint32(18).string(s.value),h},m.encodeDelimited=function(s,h){return this.encode(s,h).ldelim()},m.decode=function(s,h){s instanceof r||(s=r.create(s));for(var f=h===void 0?s.len:s.pos+h,v=new l.onnx.StringStringEntryProto;s.pos<f;){var I=s.uint32();switch(I>>>3){case 1:{v.key=s.string();break}case 2:{v.value=s.string();break}default:s.skipType(I&7);break}}return v},m.decodeDelimited=function(s){return s instanceof r||(s=new r(s)),this.decode(s,s.uint32())},m.verify=function(s){return typeof s!="object"||s===null?"object expected":s.key!=null&&s.hasOwnProperty("key")&&!i.isString(s.key)?"key: string expected":s.value!=null&&s.hasOwnProperty("value")&&!i.isString(s.value)?"value: string expected":null},m.fromObject=function(s){if(s instanceof l.onnx.StringStringEntryProto)return s;var h=new l.onnx.StringStringEntryProto;return s.key!=null&&(h.key=String(s.key)),s.value!=null&&(h.value=String(s.value)),h},m.toObject=function(s,h){h||(h={});var f={};return h.defaults&&(f.key="",f.value=""),s.key!=null&&s.hasOwnProperty("key")&&(f.key=s.key),s.value!=null&&s.hasOwnProperty("value")&&(f.value=s.value),f},m.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},m.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.StringStringEntryProto"},m})(),p.TensorAnnotation=(function(){function m(s){if(this.quantParameterTensorNames=[],s)for(var h=Object.keys(s),f=0;f<h.length;++f)s[h[f]]!=null&&(this[h[f]]=s[h[f]])}return m.prototype.tensorName="",m.prototype.quantParameterTensorNames=i.emptyArray,m.create=function(s){return new m(s)},m.encode=function(s,h){if(h||(h=a.create()),s.tensorName!=null&&Object.hasOwnProperty.call(s,"tensorName")&&h.uint32(10).string(s.tensorName),s.quantParameterTensorNames!=null&&s.quantParameterTensorNames.length)for(var f=0;f<s.quantParameterTensorNames.length;++f)l.onnx.StringStringEntryProto.encode(s.quantParameterTensorNames[f],h.uint32(18).fork()).ldelim();return h},m.encodeDelimited=function(s,h){return this.encode(s,h).ldelim()},m.decode=function(s,h){s instanceof r||(s=r.create(s));for(var f=h===void 0?s.len:s.pos+h,v=new l.onnx.TensorAnnotation;s.pos<f;){var I=s.uint32();switch(I>>>3){case 1:{v.tensorName=s.string();break}case 2:{v.quantParameterTensorNames&&v.quantParameterTensorNames.length||(v.quantParameterTensorNames=[]),v.quantParameterTensorNames.push(l.onnx.StringStringEntryProto.decode(s,s.uint32()));break}default:s.skipType(I&7);break}}return v},m.decodeDelimited=function(s){return s instanceof r||(s=new r(s)),this.decode(s,s.uint32())},m.verify=function(s){if(typeof s!="object"||s===null)return"object expected";if(s.tensorName!=null&&s.hasOwnProperty("tensorName")&&!i.isString(s.tensorName))return"tensorName: string expected";if(s.quantParameterTensorNames!=null&&s.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(s.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var h=0;h<s.quantParameterTensorNames.length;++h){var f=l.onnx.StringStringEntryProto.verify(s.quantParameterTensorNames[h]);if(f)return"quantParameterTensorNames."+f}}return null},m.fromObject=function(s){if(s instanceof l.onnx.TensorAnnotation)return s;var h=new l.onnx.TensorAnnotation;if(s.tensorName!=null&&(h.tensorName=String(s.tensorName)),s.quantParameterTensorNames){if(!Array.isArray(s.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");h.quantParameterTensorNames=[];for(var f=0;f<s.quantParameterTensorNames.length;++f){if(typeof s.quantParameterTensorNames[f]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");h.quantParameterTensorNames[f]=l.onnx.StringStringEntryProto.fromObject(s.quantParameterTensorNames[f])}}return h},m.toObject=function(s,h){h||(h={});var f={};if((h.arrays||h.defaults)&&(f.quantParameterTensorNames=[]),h.defaults&&(f.tensorName=""),s.tensorName!=null&&s.hasOwnProperty("tensorName")&&(f.tensorName=s.tensorName),s.quantParameterTensorNames&&s.quantParameterTensorNames.length){f.quantParameterTensorNames=[];for(var v=0;v<s.quantParameterTensorNames.length;++v)f.quantParameterTensorNames[v]=l.onnx.StringStringEntryProto.toObject(s.quantParameterTensorNames[v],h)}return f},m.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},m.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.TensorAnnotation"},m})(),p.GraphProto=(function(){function m(s){if(this.node=[],this.initializer=[],this.sparseInitializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],s)for(var h=Object.keys(s),f=0;f<h.length;++f)s[h[f]]!=null&&(this[h[f]]=s[h[f]])}return m.prototype.node=i.emptyArray,m.prototype.name="",m.prototype.initializer=i.emptyArray,m.prototype.sparseInitializer=i.emptyArray,m.prototype.docString="",m.prototype.input=i.emptyArray,m.prototype.output=i.emptyArray,m.prototype.valueInfo=i.emptyArray,m.prototype.quantizationAnnotation=i.emptyArray,m.create=function(s){return new m(s)},m.encode=function(s,h){if(h||(h=a.create()),s.node!=null&&s.node.length)for(var f=0;f<s.node.length;++f)l.onnx.NodeProto.encode(s.node[f],h.uint32(10).fork()).ldelim();if(s.name!=null&&Object.hasOwnProperty.call(s,"name")&&h.uint32(18).string(s.name),s.initializer!=null&&s.initializer.length)for(var f=0;f<s.initializer.length;++f)l.onnx.TensorProto.encode(s.initializer[f],h.uint32(42).fork()).ldelim();if(s.docString!=null&&Object.hasOwnProperty.call(s,"docString")&&h.uint32(82).string(s.docString),s.input!=null&&s.input.length)for(var f=0;f<s.input.length;++f)l.onnx.ValueInfoProto.encode(s.input[f],h.uint32(90).fork()).ldelim();if(s.output!=null&&s.output.length)for(var f=0;f<s.output.length;++f)l.onnx.ValueInfoProto.encode(s.output[f],h.uint32(98).fork()).ldelim();if(s.valueInfo!=null&&s.valueInfo.length)for(var f=0;f<s.valueInfo.length;++f)l.onnx.ValueInfoProto.encode(s.valueInfo[f],h.uint32(106).fork()).ldelim();if(s.quantizationAnnotation!=null&&s.quantizationAnnotation.length)for(var f=0;f<s.quantizationAnnotation.length;++f)l.onnx.TensorAnnotation.encode(s.quantizationAnnotation[f],h.uint32(114).fork()).ldelim();if(s.sparseInitializer!=null&&s.sparseInitializer.length)for(var f=0;f<s.sparseInitializer.length;++f)l.onnx.SparseTensorProto.encode(s.sparseInitializer[f],h.uint32(122).fork()).ldelim();return h},m.encodeDelimited=function(s,h){return this.encode(s,h).ldelim()},m.decode=function(s,h){s instanceof r||(s=r.create(s));for(var f=h===void 0?s.len:s.pos+h,v=new l.onnx.GraphProto;s.pos<f;){var I=s.uint32();switch(I>>>3){case 1:{v.node&&v.node.length||(v.node=[]),v.node.push(l.onnx.NodeProto.decode(s,s.uint32()));break}case 2:{v.name=s.string();break}case 5:{v.initializer&&v.initializer.length||(v.initializer=[]),v.initializer.push(l.onnx.TensorProto.decode(s,s.uint32()));break}case 15:{v.sparseInitializer&&v.sparseInitializer.length||(v.sparseInitializer=[]),v.sparseInitializer.push(l.onnx.SparseTensorProto.decode(s,s.uint32()));break}case 10:{v.docString=s.string();break}case 11:{v.input&&v.input.length||(v.input=[]),v.input.push(l.onnx.ValueInfoProto.decode(s,s.uint32()));break}case 12:{v.output&&v.output.length||(v.output=[]),v.output.push(l.onnx.ValueInfoProto.decode(s,s.uint32()));break}case 13:{v.valueInfo&&v.valueInfo.length||(v.valueInfo=[]),v.valueInfo.push(l.onnx.ValueInfoProto.decode(s,s.uint32()));break}case 14:{v.quantizationAnnotation&&v.quantizationAnnotation.length||(v.quantizationAnnotation=[]),v.quantizationAnnotation.push(l.onnx.TensorAnnotation.decode(s,s.uint32()));break}default:s.skipType(I&7);break}}return v},m.decodeDelimited=function(s){return s instanceof r||(s=new r(s)),this.decode(s,s.uint32())},m.verify=function(s){if(typeof s!="object"||s===null)return"object expected";if(s.node!=null&&s.hasOwnProperty("node")){if(!Array.isArray(s.node))return"node: array expected";for(var h=0;h<s.node.length;++h){var f=l.onnx.NodeProto.verify(s.node[h]);if(f)return"node."+f}}if(s.name!=null&&s.hasOwnProperty("name")&&!i.isString(s.name))return"name: string expected";if(s.initializer!=null&&s.hasOwnProperty("initializer")){if(!Array.isArray(s.initializer))return"initializer: array expected";for(var h=0;h<s.initializer.length;++h){var f=l.onnx.TensorProto.verify(s.initializer[h]);if(f)return"initializer."+f}}if(s.sparseInitializer!=null&&s.hasOwnProperty("sparseInitializer")){if(!Array.isArray(s.sparseInitializer))return"sparseInitializer: array expected";for(var h=0;h<s.sparseInitializer.length;++h){var f=l.onnx.SparseTensorProto.verify(s.sparseInitializer[h]);if(f)return"sparseInitializer."+f}}if(s.docString!=null&&s.hasOwnProperty("docString")&&!i.isString(s.docString))return"docString: string expected";if(s.input!=null&&s.hasOwnProperty("input")){if(!Array.isArray(s.input))return"input: array expected";for(var h=0;h<s.input.length;++h){var f=l.onnx.ValueInfoProto.verify(s.input[h]);if(f)return"input."+f}}if(s.output!=null&&s.hasOwnProperty("output")){if(!Array.isArray(s.output))return"output: array expected";for(var h=0;h<s.output.length;++h){var f=l.onnx.ValueInfoProto.verify(s.output[h]);if(f)return"output."+f}}if(s.valueInfo!=null&&s.hasOwnProperty("valueInfo")){if(!Array.isArray(s.valueInfo))return"valueInfo: array expected";for(var h=0;h<s.valueInfo.length;++h){var f=l.onnx.ValueInfoProto.verify(s.valueInfo[h]);if(f)return"valueInfo."+f}}if(s.quantizationAnnotation!=null&&s.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(s.quantizationAnnotation))return"quantizationAnnotation: array expected";for(var h=0;h<s.quantizationAnnotation.length;++h){var f=l.onnx.TensorAnnotation.verify(s.quantizationAnnotation[h]);if(f)return"quantizationAnnotation."+f}}return null},m.fromObject=function(s){if(s instanceof l.onnx.GraphProto)return s;var h=new l.onnx.GraphProto;if(s.node){if(!Array.isArray(s.node))throw TypeError(".onnx.GraphProto.node: array expected");h.node=[];for(var f=0;f<s.node.length;++f){if(typeof s.node[f]!="object")throw TypeError(".onnx.GraphProto.node: object expected");h.node[f]=l.onnx.NodeProto.fromObject(s.node[f])}}if(s.name!=null&&(h.name=String(s.name)),s.initializer){if(!Array.isArray(s.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");h.initializer=[];for(var f=0;f<s.initializer.length;++f){if(typeof s.initializer[f]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");h.initializer[f]=l.onnx.TensorProto.fromObject(s.initializer[f])}}if(s.sparseInitializer){if(!Array.isArray(s.sparseInitializer))throw TypeError(".onnx.GraphProto.sparseInitializer: array expected");h.sparseInitializer=[];for(var f=0;f<s.sparseInitializer.length;++f){if(typeof s.sparseInitializer[f]!="object")throw TypeError(".onnx.GraphProto.sparseInitializer: object expected");h.sparseInitializer[f]=l.onnx.SparseTensorProto.fromObject(s.sparseInitializer[f])}}if(s.docString!=null&&(h.docString=String(s.docString)),s.input){if(!Array.isArray(s.input))throw TypeError(".onnx.GraphProto.input: array expected");h.input=[];for(var f=0;f<s.input.length;++f){if(typeof s.input[f]!="object")throw TypeError(".onnx.GraphProto.input: object expected");h.input[f]=l.onnx.ValueInfoProto.fromObject(s.input[f])}}if(s.output){if(!Array.isArray(s.output))throw TypeError(".onnx.GraphProto.output: array expected");h.output=[];for(var f=0;f<s.output.length;++f){if(typeof s.output[f]!="object")throw TypeError(".onnx.GraphProto.output: object expected");h.output[f]=l.onnx.ValueInfoProto.fromObject(s.output[f])}}if(s.valueInfo){if(!Array.isArray(s.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");h.valueInfo=[];for(var f=0;f<s.valueInfo.length;++f){if(typeof s.valueInfo[f]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");h.valueInfo[f]=l.onnx.ValueInfoProto.fromObject(s.valueInfo[f])}}if(s.quantizationAnnotation){if(!Array.isArray(s.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");h.quantizationAnnotation=[];for(var f=0;f<s.quantizationAnnotation.length;++f){if(typeof s.quantizationAnnotation[f]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");h.quantizationAnnotation[f]=l.onnx.TensorAnnotation.fromObject(s.quantizationAnnotation[f])}}return h},m.toObject=function(s,h){h||(h={});var f={};if((h.arrays||h.defaults)&&(f.node=[],f.initializer=[],f.input=[],f.output=[],f.valueInfo=[],f.quantizationAnnotation=[],f.sparseInitializer=[]),h.defaults&&(f.name="",f.docString=""),s.node&&s.node.length){f.node=[];for(var v=0;v<s.node.length;++v)f.node[v]=l.onnx.NodeProto.toObject(s.node[v],h)}if(s.name!=null&&s.hasOwnProperty("name")&&(f.name=s.name),s.initializer&&s.initializer.length){f.initializer=[];for(var v=0;v<s.initializer.length;++v)f.initializer[v]=l.onnx.TensorProto.toObject(s.initializer[v],h)}if(s.docString!=null&&s.hasOwnProperty("docString")&&(f.docString=s.docString),s.input&&s.input.length){f.input=[];for(var v=0;v<s.input.length;++v)f.input[v]=l.onnx.ValueInfoProto.toObject(s.input[v],h)}if(s.output&&s.output.length){f.output=[];for(var v=0;v<s.output.length;++v)f.output[v]=l.onnx.ValueInfoProto.toObject(s.output[v],h)}if(s.valueInfo&&s.valueInfo.length){f.valueInfo=[];for(var v=0;v<s.valueInfo.length;++v)f.valueInfo[v]=l.onnx.ValueInfoProto.toObject(s.valueInfo[v],h)}if(s.quantizationAnnotation&&s.quantizationAnnotation.length){f.quantizationAnnotation=[];for(var v=0;v<s.quantizationAnnotation.length;++v)f.quantizationAnnotation[v]=l.onnx.TensorAnnotation.toObject(s.quantizationAnnotation[v],h)}if(s.sparseInitializer&&s.sparseInitializer.length){f.sparseInitializer=[];for(var v=0;v<s.sparseInitializer.length;++v)f.sparseInitializer[v]=l.onnx.SparseTensorProto.toObject(s.sparseInitializer[v],h)}return f},m.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},m.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.GraphProto"},m})(),p.TensorProto=(function(){function m(s){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],s)for(var h=Object.keys(s),f=0;f<h.length;++f)s[h[f]]!=null&&(this[h[f]]=s[h[f]])}return m.prototype.dims=i.emptyArray,m.prototype.dataType=0,m.prototype.segment=null,m.prototype.floatData=i.emptyArray,m.prototype.int32Data=i.emptyArray,m.prototype.stringData=i.emptyArray,m.prototype.int64Data=i.emptyArray,m.prototype.name="",m.prototype.docString="",m.prototype.rawData=i.newBuffer([]),m.prototype.externalData=i.emptyArray,m.prototype.dataLocation=0,m.prototype.doubleData=i.emptyArray,m.prototype.uint64Data=i.emptyArray,m.create=function(s){return new m(s)},m.encode=function(s,h){if(h||(h=a.create()),s.dims!=null&&s.dims.length){h.uint32(10).fork();for(var f=0;f<s.dims.length;++f)h.int64(s.dims[f]);h.ldelim()}if(s.dataType!=null&&Object.hasOwnProperty.call(s,"dataType")&&h.uint32(16).int32(s.dataType),s.segment!=null&&Object.hasOwnProperty.call(s,"segment")&&l.onnx.TensorProto.Segment.encode(s.segment,h.uint32(26).fork()).ldelim(),s.floatData!=null&&s.floatData.length){h.uint32(34).fork();for(var f=0;f<s.floatData.length;++f)h.float(s.floatData[f]);h.ldelim()}if(s.int32Data!=null&&s.int32Data.length){h.uint32(42).fork();for(var f=0;f<s.int32Data.length;++f)h.int32(s.int32Data[f]);h.ldelim()}if(s.stringData!=null&&s.stringData.length)for(var f=0;f<s.stringData.length;++f)h.uint32(50).bytes(s.stringData[f]);if(s.int64Data!=null&&s.int64Data.length){h.uint32(58).fork();for(var f=0;f<s.int64Data.length;++f)h.int64(s.int64Data[f]);h.ldelim()}if(s.name!=null&&Object.hasOwnProperty.call(s,"name")&&h.uint32(66).string(s.name),s.rawData!=null&&Object.hasOwnProperty.call(s,"rawData")&&h.uint32(74).bytes(s.rawData),s.doubleData!=null&&s.doubleData.length){h.uint32(82).fork();for(var f=0;f<s.doubleData.length;++f)h.double(s.doubleData[f]);h.ldelim()}if(s.uint64Data!=null&&s.uint64Data.length){h.uint32(90).fork();for(var f=0;f<s.uint64Data.length;++f)h.uint64(s.uint64Data[f]);h.ldelim()}if(s.docString!=null&&Object.hasOwnProperty.call(s,"docString")&&h.uint32(98).string(s.docString),s.externalData!=null&&s.externalData.length)for(var f=0;f<s.externalData.length;++f)l.onnx.StringStringEntryProto.encode(s.externalData[f],h.uint32(106).fork()).ldelim();return s.dataLocation!=null&&Object.hasOwnProperty.call(s,"dataLocation")&&h.uint32(112).int32(s.dataLocation),h},m.encodeDelimited=function(s,h){return this.encode(s,h).ldelim()},m.decode=function(s,h){s instanceof r||(s=r.create(s));for(var f=h===void 0?s.len:s.pos+h,v=new l.onnx.TensorProto;s.pos<f;){var I=s.uint32();switch(I>>>3){case 1:{if(v.dims&&v.dims.length||(v.dims=[]),(I&7)===2)for(var G=s.uint32()+s.pos;s.pos<G;)v.dims.push(s.int64());else v.dims.push(s.int64());break}case 2:{v.dataType=s.int32();break}case 3:{v.segment=l.onnx.TensorProto.Segment.decode(s,s.uint32());break}case 4:{if(v.floatData&&v.floatData.length||(v.floatData=[]),(I&7)===2)for(var G=s.uint32()+s.pos;s.pos<G;)v.floatData.push(s.float());else v.floatData.push(s.float());break}case 5:{if(v.int32Data&&v.int32Data.length||(v.int32Data=[]),(I&7)===2)for(var G=s.uint32()+s.pos;s.pos<G;)v.int32Data.push(s.int32());else v.int32Data.push(s.int32());break}case 6:{v.stringData&&v.stringData.length||(v.stringData=[]),v.stringData.push(s.bytes());break}case 7:{if(v.int64Data&&v.int64Data.length||(v.int64Data=[]),(I&7)===2)for(var G=s.uint32()+s.pos;s.pos<G;)v.int64Data.push(s.int64());else v.int64Data.push(s.int64());break}case 8:{v.name=s.string();break}case 12:{v.docString=s.string();break}case 9:{v.rawData=s.bytes();break}case 13:{v.externalData&&v.externalData.length||(v.externalData=[]),v.externalData.push(l.onnx.StringStringEntryProto.decode(s,s.uint32()));break}case 14:{v.dataLocation=s.int32();break}case 10:{if(v.doubleData&&v.doubleData.length||(v.doubleData=[]),(I&7)===2)for(var G=s.uint32()+s.pos;s.pos<G;)v.doubleData.push(s.double());else v.doubleData.push(s.double());break}case 11:{if(v.uint64Data&&v.uint64Data.length||(v.uint64Data=[]),(I&7)===2)for(var G=s.uint32()+s.pos;s.pos<G;)v.uint64Data.push(s.uint64());else v.uint64Data.push(s.uint64());break}default:s.skipType(I&7);break}}return v},m.decodeDelimited=function(s){return s instanceof r||(s=new r(s)),this.decode(s,s.uint32())},m.verify=function(s){if(typeof s!="object"||s===null)return"object expected";if(s.dims!=null&&s.hasOwnProperty("dims")){if(!Array.isArray(s.dims))return"dims: array expected";for(var h=0;h<s.dims.length;++h)if(!i.isInteger(s.dims[h])&&!(s.dims[h]&&i.isInteger(s.dims[h].low)&&i.isInteger(s.dims[h].high)))return"dims: integer|Long[] expected"}if(s.dataType!=null&&s.hasOwnProperty("dataType")&&!i.isInteger(s.dataType))return"dataType: integer expected";if(s.segment!=null&&s.hasOwnProperty("segment")){var f=l.onnx.TensorProto.Segment.verify(s.segment);if(f)return"segment."+f}if(s.floatData!=null&&s.hasOwnProperty("floatData")){if(!Array.isArray(s.floatData))return"floatData: array expected";for(var h=0;h<s.floatData.length;++h)if(typeof s.floatData[h]!="number")return"floatData: number[] expected"}if(s.int32Data!=null&&s.hasOwnProperty("int32Data")){if(!Array.isArray(s.int32Data))return"int32Data: array expected";for(var h=0;h<s.int32Data.length;++h)if(!i.isInteger(s.int32Data[h]))return"int32Data: integer[] expected"}if(s.stringData!=null&&s.hasOwnProperty("stringData")){if(!Array.isArray(s.stringData))return"stringData: array expected";for(var h=0;h<s.stringData.length;++h)if(!(s.stringData[h]&&typeof s.stringData[h].length=="number"||i.isString(s.stringData[h])))return"stringData: buffer[] expected"}if(s.int64Data!=null&&s.hasOwnProperty("int64Data")){if(!Array.isArray(s.int64Data))return"int64Data: array expected";for(var h=0;h<s.int64Data.length;++h)if(!i.isInteger(s.int64Data[h])&&!(s.int64Data[h]&&i.isInteger(s.int64Data[h].low)&&i.isInteger(s.int64Data[h].high)))return"int64Data: integer|Long[] expected"}if(s.name!=null&&s.hasOwnProperty("name")&&!i.isString(s.name))return"name: string expected";if(s.docString!=null&&s.hasOwnProperty("docString")&&!i.isString(s.docString))return"docString: string expected";if(s.rawData!=null&&s.hasOwnProperty("rawData")&&!(s.rawData&&typeof s.rawData.length=="number"||i.isString(s.rawData)))return"rawData: buffer expected";if(s.externalData!=null&&s.hasOwnProperty("externalData")){if(!Array.isArray(s.externalData))return"externalData: array expected";for(var h=0;h<s.externalData.length;++h){var f=l.onnx.StringStringEntryProto.verify(s.externalData[h]);if(f)return"externalData."+f}}if(s.dataLocation!=null&&s.hasOwnProperty("dataLocation"))switch(s.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:break}if(s.doubleData!=null&&s.hasOwnProperty("doubleData")){if(!Array.isArray(s.doubleData))return"doubleData: array expected";for(var h=0;h<s.doubleData.length;++h)if(typeof s.doubleData[h]!="number")return"doubleData: number[] expected"}if(s.uint64Data!=null&&s.hasOwnProperty("uint64Data")){if(!Array.isArray(s.uint64Data))return"uint64Data: array expected";for(var h=0;h<s.uint64Data.length;++h)if(!i.isInteger(s.uint64Data[h])&&!(s.uint64Data[h]&&i.isInteger(s.uint64Data[h].low)&&i.isInteger(s.uint64Data[h].high)))return"uint64Data: integer|Long[] expected"}return null},m.fromObject=function(s){if(s instanceof l.onnx.TensorProto)return s;var h=new l.onnx.TensorProto;if(s.dims){if(!Array.isArray(s.dims))throw TypeError(".onnx.TensorProto.dims: array expected");h.dims=[];for(var f=0;f<s.dims.length;++f)i.Long?(h.dims[f]=i.Long.fromValue(s.dims[f])).unsigned=!1:typeof s.dims[f]=="string"?h.dims[f]=parseInt(s.dims[f],10):typeof s.dims[f]=="number"?h.dims[f]=s.dims[f]:typeof s.dims[f]=="object"&&(h.dims[f]=new i.LongBits(s.dims[f].low>>>0,s.dims[f].high>>>0).toNumber())}if(s.dataType!=null&&(h.dataType=s.dataType|0),s.segment!=null){if(typeof s.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");h.segment=l.onnx.TensorProto.Segment.fromObject(s.segment)}if(s.floatData){if(!Array.isArray(s.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");h.floatData=[];for(var f=0;f<s.floatData.length;++f)h.floatData[f]=Number(s.floatData[f])}if(s.int32Data){if(!Array.isArray(s.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");h.int32Data=[];for(var f=0;f<s.int32Data.length;++f)h.int32Data[f]=s.int32Data[f]|0}if(s.stringData){if(!Array.isArray(s.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");h.stringData=[];for(var f=0;f<s.stringData.length;++f)typeof s.stringData[f]=="string"?i.base64.decode(s.stringData[f],h.stringData[f]=i.newBuffer(i.base64.length(s.stringData[f])),0):s.stringData[f].length>=0&&(h.stringData[f]=s.stringData[f])}if(s.int64Data){if(!Array.isArray(s.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");h.int64Data=[];for(var f=0;f<s.int64Data.length;++f)i.Long?(h.int64Data[f]=i.Long.fromValue(s.int64Data[f])).unsigned=!1:typeof s.int64Data[f]=="string"?h.int64Data[f]=parseInt(s.int64Data[f],10):typeof s.int64Data[f]=="number"?h.int64Data[f]=s.int64Data[f]:typeof s.int64Data[f]=="object"&&(h.int64Data[f]=new i.LongBits(s.int64Data[f].low>>>0,s.int64Data[f].high>>>0).toNumber())}if(s.name!=null&&(h.name=String(s.name)),s.docString!=null&&(h.docString=String(s.docString)),s.rawData!=null&&(typeof s.rawData=="string"?i.base64.decode(s.rawData,h.rawData=i.newBuffer(i.base64.length(s.rawData)),0):s.rawData.length>=0&&(h.rawData=s.rawData)),s.externalData){if(!Array.isArray(s.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");h.externalData=[];for(var f=0;f<s.externalData.length;++f){if(typeof s.externalData[f]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");h.externalData[f]=l.onnx.StringStringEntryProto.fromObject(s.externalData[f])}}switch(s.dataLocation){default:if(typeof s.dataLocation=="number"){h.dataLocation=s.dataLocation;break}break;case"DEFAULT":case 0:h.dataLocation=0;break;case"EXTERNAL":case 1:h.dataLocation=1;break}if(s.doubleData){if(!Array.isArray(s.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");h.doubleData=[];for(var f=0;f<s.doubleData.length;++f)h.doubleData[f]=Number(s.doubleData[f])}if(s.uint64Data){if(!Array.isArray(s.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");h.uint64Data=[];for(var f=0;f<s.uint64Data.length;++f)i.Long?(h.uint64Data[f]=i.Long.fromValue(s.uint64Data[f])).unsigned=!0:typeof s.uint64Data[f]=="string"?h.uint64Data[f]=parseInt(s.uint64Data[f],10):typeof s.uint64Data[f]=="number"?h.uint64Data[f]=s.uint64Data[f]:typeof s.uint64Data[f]=="object"&&(h.uint64Data[f]=new i.LongBits(s.uint64Data[f].low>>>0,s.uint64Data[f].high>>>0).toNumber(!0))}return h},m.toObject=function(s,h){h||(h={});var f={};if((h.arrays||h.defaults)&&(f.dims=[],f.floatData=[],f.int32Data=[],f.stringData=[],f.int64Data=[],f.doubleData=[],f.uint64Data=[],f.externalData=[]),h.defaults&&(f.dataType=0,f.segment=null,f.name="",h.bytes===String?f.rawData="":(f.rawData=[],h.bytes!==Array&&(f.rawData=i.newBuffer(f.rawData))),f.docString="",f.dataLocation=h.enums===String?"DEFAULT":0),s.dims&&s.dims.length){f.dims=[];for(var v=0;v<s.dims.length;++v)typeof s.dims[v]=="number"?f.dims[v]=h.longs===String?String(s.dims[v]):s.dims[v]:f.dims[v]=h.longs===String?i.Long.prototype.toString.call(s.dims[v]):h.longs===Number?new i.LongBits(s.dims[v].low>>>0,s.dims[v].high>>>0).toNumber():s.dims[v]}if(s.dataType!=null&&s.hasOwnProperty("dataType")&&(f.dataType=s.dataType),s.segment!=null&&s.hasOwnProperty("segment")&&(f.segment=l.onnx.TensorProto.Segment.toObject(s.segment,h)),s.floatData&&s.floatData.length){f.floatData=[];for(var v=0;v<s.floatData.length;++v)f.floatData[v]=h.json&&!isFinite(s.floatData[v])?String(s.floatData[v]):s.floatData[v]}if(s.int32Data&&s.int32Data.length){f.int32Data=[];for(var v=0;v<s.int32Data.length;++v)f.int32Data[v]=s.int32Data[v]}if(s.stringData&&s.stringData.length){f.stringData=[];for(var v=0;v<s.stringData.length;++v)f.stringData[v]=h.bytes===String?i.base64.encode(s.stringData[v],0,s.stringData[v].length):h.bytes===Array?Array.prototype.slice.call(s.stringData[v]):s.stringData[v]}if(s.int64Data&&s.int64Data.length){f.int64Data=[];for(var v=0;v<s.int64Data.length;++v)typeof s.int64Data[v]=="number"?f.int64Data[v]=h.longs===String?String(s.int64Data[v]):s.int64Data[v]:f.int64Data[v]=h.longs===String?i.Long.prototype.toString.call(s.int64Data[v]):h.longs===Number?new i.LongBits(s.int64Data[v].low>>>0,s.int64Data[v].high>>>0).toNumber():s.int64Data[v]}if(s.name!=null&&s.hasOwnProperty("name")&&(f.name=s.name),s.rawData!=null&&s.hasOwnProperty("rawData")&&(f.rawData=h.bytes===String?i.base64.encode(s.rawData,0,s.rawData.length):h.bytes===Array?Array.prototype.slice.call(s.rawData):s.rawData),s.doubleData&&s.doubleData.length){f.doubleData=[];for(var v=0;v<s.doubleData.length;++v)f.doubleData[v]=h.json&&!isFinite(s.doubleData[v])?String(s.doubleData[v]):s.doubleData[v]}if(s.uint64Data&&s.uint64Data.length){f.uint64Data=[];for(var v=0;v<s.uint64Data.length;++v)typeof s.uint64Data[v]=="number"?f.uint64Data[v]=h.longs===String?String(s.uint64Data[v]):s.uint64Data[v]:f.uint64Data[v]=h.longs===String?i.Long.prototype.toString.call(s.uint64Data[v]):h.longs===Number?new i.LongBits(s.uint64Data[v].low>>>0,s.uint64Data[v].high>>>0).toNumber(!0):s.uint64Data[v]}if(s.docString!=null&&s.hasOwnProperty("docString")&&(f.docString=s.docString),s.externalData&&s.externalData.length){f.externalData=[];for(var v=0;v<s.externalData.length;++v)f.externalData[v]=l.onnx.StringStringEntryProto.toObject(s.externalData[v],h)}return s.dataLocation!=null&&s.hasOwnProperty("dataLocation")&&(f.dataLocation=h.enums===String?l.onnx.TensorProto.DataLocation[s.dataLocation]===void 0?s.dataLocation:l.onnx.TensorProto.DataLocation[s.dataLocation]:s.dataLocation),f},m.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},m.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.TensorProto"},m.DataType=(function(){var s={},h=Object.create(s);return h[s[0]="UNDEFINED"]=0,h[s[1]="FLOAT"]=1,h[s[2]="UINT8"]=2,h[s[3]="INT8"]=3,h[s[4]="UINT16"]=4,h[s[5]="INT16"]=5,h[s[6]="INT32"]=6,h[s[7]="INT64"]=7,h[s[8]="STRING"]=8,h[s[9]="BOOL"]=9,h[s[10]="FLOAT16"]=10,h[s[11]="DOUBLE"]=11,h[s[12]="UINT32"]=12,h[s[13]="UINT64"]=13,h[s[14]="COMPLEX64"]=14,h[s[15]="COMPLEX128"]=15,h[s[16]="BFLOAT16"]=16,h[s[17]="FLOAT8E4M3FN"]=17,h[s[18]="FLOAT8E4M3FNUZ"]=18,h[s[19]="FLOAT8E5M2"]=19,h[s[20]="FLOAT8E5M2FNUZ"]=20,h})(),m.Segment=(function(){function s(h){if(h)for(var f=Object.keys(h),v=0;v<f.length;++v)h[f[v]]!=null&&(this[f[v]]=h[f[v]])}return s.prototype.begin=i.Long?i.Long.fromBits(0,0,!1):0,s.prototype.end=i.Long?i.Long.fromBits(0,0,!1):0,s.create=function(h){return new s(h)},s.encode=function(h,f){return f||(f=a.create()),h.begin!=null&&Object.hasOwnProperty.call(h,"begin")&&f.uint32(8).int64(h.begin),h.end!=null&&Object.hasOwnProperty.call(h,"end")&&f.uint32(16).int64(h.end),f},s.encodeDelimited=function(h,f){return this.encode(h,f).ldelim()},s.decode=function(h,f){h instanceof r||(h=r.create(h));for(var v=f===void 0?h.len:h.pos+f,I=new l.onnx.TensorProto.Segment;h.pos<v;){var G=h.uint32();switch(G>>>3){case 1:{I.begin=h.int64();break}case 2:{I.end=h.int64();break}default:h.skipType(G&7);break}}return I},s.decodeDelimited=function(h){return h instanceof r||(h=new r(h)),this.decode(h,h.uint32())},s.verify=function(h){return typeof h!="object"||h===null?"object expected":h.begin!=null&&h.hasOwnProperty("begin")&&!i.isInteger(h.begin)&&!(h.begin&&i.isInteger(h.begin.low)&&i.isInteger(h.begin.high))?"begin: integer|Long expected":h.end!=null&&h.hasOwnProperty("end")&&!i.isInteger(h.end)&&!(h.end&&i.isInteger(h.end.low)&&i.isInteger(h.end.high))?"end: integer|Long expected":null},s.fromObject=function(h){if(h instanceof l.onnx.TensorProto.Segment)return h;var f=new l.onnx.TensorProto.Segment;return h.begin!=null&&(i.Long?(f.begin=i.Long.fromValue(h.begin)).unsigned=!1:typeof h.begin=="string"?f.begin=parseInt(h.begin,10):typeof h.begin=="number"?f.begin=h.begin:typeof h.begin=="object"&&(f.begin=new i.LongBits(h.begin.low>>>0,h.begin.high>>>0).toNumber())),h.end!=null&&(i.Long?(f.end=i.Long.fromValue(h.end)).unsigned=!1:typeof h.end=="string"?f.end=parseInt(h.end,10):typeof h.end=="number"?f.end=h.end:typeof h.end=="object"&&(f.end=new i.LongBits(h.end.low>>>0,h.end.high>>>0).toNumber())),f},s.toObject=function(h,f){f||(f={});var v={};if(f.defaults){if(i.Long){var I=new i.Long(0,0,!1);v.begin=f.longs===String?I.toString():f.longs===Number?I.toNumber():I}else v.begin=f.longs===String?"0":0;if(i.Long){var I=new i.Long(0,0,!1);v.end=f.longs===String?I.toString():f.longs===Number?I.toNumber():I}else v.end=f.longs===String?"0":0}return h.begin!=null&&h.hasOwnProperty("begin")&&(typeof h.begin=="number"?v.begin=f.longs===String?String(h.begin):h.begin:v.begin=f.longs===String?i.Long.prototype.toString.call(h.begin):f.longs===Number?new i.LongBits(h.begin.low>>>0,h.begin.high>>>0).toNumber():h.begin),h.end!=null&&h.hasOwnProperty("end")&&(typeof h.end=="number"?v.end=f.longs===String?String(h.end):h.end:v.end=f.longs===String?i.Long.prototype.toString.call(h.end):f.longs===Number?new i.LongBits(h.end.low>>>0,h.end.high>>>0).toNumber():h.end),v},s.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},s.getTypeUrl=function(h){return h===void 0&&(h="type.googleapis.com"),h+"/onnx.TensorProto.Segment"},s})(),m.DataLocation=(function(){var s={},h=Object.create(s);return h[s[0]="DEFAULT"]=0,h[s[1]="EXTERNAL"]=1,h})(),m})(),p.SparseTensorProto=(function(){function m(s){if(this.dims=[],s)for(var h=Object.keys(s),f=0;f<h.length;++f)s[h[f]]!=null&&(this[h[f]]=s[h[f]])}return m.prototype.values=null,m.prototype.indices=null,m.prototype.dims=i.emptyArray,m.create=function(s){return new m(s)},m.encode=function(s,h){if(h||(h=a.create()),s.values!=null&&Object.hasOwnProperty.call(s,"values")&&l.onnx.TensorProto.encode(s.values,h.uint32(10).fork()).ldelim(),s.indices!=null&&Object.hasOwnProperty.call(s,"indices")&&l.onnx.TensorProto.encode(s.indices,h.uint32(18).fork()).ldelim(),s.dims!=null&&s.dims.length){h.uint32(26).fork();for(var f=0;f<s.dims.length;++f)h.int64(s.dims[f]);h.ldelim()}return h},m.encodeDelimited=function(s,h){return this.encode(s,h).ldelim()},m.decode=function(s,h){s instanceof r||(s=r.create(s));for(var f=h===void 0?s.len:s.pos+h,v=new l.onnx.SparseTensorProto;s.pos<f;){var I=s.uint32();switch(I>>>3){case 1:{v.values=l.onnx.TensorProto.decode(s,s.uint32());break}case 2:{v.indices=l.onnx.TensorProto.decode(s,s.uint32());break}case 3:{if(v.dims&&v.dims.length||(v.dims=[]),(I&7)===2)for(var G=s.uint32()+s.pos;s.pos<G;)v.dims.push(s.int64());else v.dims.push(s.int64());break}default:s.skipType(I&7);break}}return v},m.decodeDelimited=function(s){return s instanceof r||(s=new r(s)),this.decode(s,s.uint32())},m.verify=function(s){if(typeof s!="object"||s===null)return"object expected";if(s.values!=null&&s.hasOwnProperty("values")){var h=l.onnx.TensorProto.verify(s.values);if(h)return"values."+h}if(s.indices!=null&&s.hasOwnProperty("indices")){var h=l.onnx.TensorProto.verify(s.indices);if(h)return"indices."+h}if(s.dims!=null&&s.hasOwnProperty("dims")){if(!Array.isArray(s.dims))return"dims: array expected";for(var f=0;f<s.dims.length;++f)if(!i.isInteger(s.dims[f])&&!(s.dims[f]&&i.isInteger(s.dims[f].low)&&i.isInteger(s.dims[f].high)))return"dims: integer|Long[] expected"}return null},m.fromObject=function(s){if(s instanceof l.onnx.SparseTensorProto)return s;var h=new l.onnx.SparseTensorProto;if(s.values!=null){if(typeof s.values!="object")throw TypeError(".onnx.SparseTensorProto.values: object expected");h.values=l.onnx.TensorProto.fromObject(s.values)}if(s.indices!=null){if(typeof s.indices!="object")throw TypeError(".onnx.SparseTensorProto.indices: object expected");h.indices=l.onnx.TensorProto.fromObject(s.indices)}if(s.dims){if(!Array.isArray(s.dims))throw TypeError(".onnx.SparseTensorProto.dims: array expected");h.dims=[];for(var f=0;f<s.dims.length;++f)i.Long?(h.dims[f]=i.Long.fromValue(s.dims[f])).unsigned=!1:typeof s.dims[f]=="string"?h.dims[f]=parseInt(s.dims[f],10):typeof s.dims[f]=="number"?h.dims[f]=s.dims[f]:typeof s.dims[f]=="object"&&(h.dims[f]=new i.LongBits(s.dims[f].low>>>0,s.dims[f].high>>>0).toNumber())}return h},m.toObject=function(s,h){h||(h={});var f={};if((h.arrays||h.defaults)&&(f.dims=[]),h.defaults&&(f.values=null,f.indices=null),s.values!=null&&s.hasOwnProperty("values")&&(f.values=l.onnx.TensorProto.toObject(s.values,h)),s.indices!=null&&s.hasOwnProperty("indices")&&(f.indices=l.onnx.TensorProto.toObject(s.indices,h)),s.dims&&s.dims.length){f.dims=[];for(var v=0;v<s.dims.length;++v)typeof s.dims[v]=="number"?f.dims[v]=h.longs===String?String(s.dims[v]):s.dims[v]:f.dims[v]=h.longs===String?i.Long.prototype.toString.call(s.dims[v]):h.longs===Number?new i.LongBits(s.dims[v].low>>>0,s.dims[v].high>>>0).toNumber():s.dims[v]}return f},m.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},m.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.SparseTensorProto"},m})(),p.TensorShapeProto=(function(){function m(s){if(this.dim=[],s)for(var h=Object.keys(s),f=0;f<h.length;++f)s[h[f]]!=null&&(this[h[f]]=s[h[f]])}return m.prototype.dim=i.emptyArray,m.create=function(s){return new m(s)},m.encode=function(s,h){if(h||(h=a.create()),s.dim!=null&&s.dim.length)for(var f=0;f<s.dim.length;++f)l.onnx.TensorShapeProto.Dimension.encode(s.dim[f],h.uint32(10).fork()).ldelim();return h},m.encodeDelimited=function(s,h){return this.encode(s,h).ldelim()},m.decode=function(s,h){s instanceof r||(s=r.create(s));for(var f=h===void 0?s.len:s.pos+h,v=new l.onnx.TensorShapeProto;s.pos<f;){var I=s.uint32();switch(I>>>3){case 1:{v.dim&&v.dim.length||(v.dim=[]),v.dim.push(l.onnx.TensorShapeProto.Dimension.decode(s,s.uint32()));break}default:s.skipType(I&7);break}}return v},m.decodeDelimited=function(s){return s instanceof r||(s=new r(s)),this.decode(s,s.uint32())},m.verify=function(s){if(typeof s!="object"||s===null)return"object expected";if(s.dim!=null&&s.hasOwnProperty("dim")){if(!Array.isArray(s.dim))return"dim: array expected";for(var h=0;h<s.dim.length;++h){var f=l.onnx.TensorShapeProto.Dimension.verify(s.dim[h]);if(f)return"dim."+f}}return null},m.fromObject=function(s){if(s instanceof l.onnx.TensorShapeProto)return s;var h=new l.onnx.TensorShapeProto;if(s.dim){if(!Array.isArray(s.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");h.dim=[];for(var f=0;f<s.dim.length;++f){if(typeof s.dim[f]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");h.dim[f]=l.onnx.TensorShapeProto.Dimension.fromObject(s.dim[f])}}return h},m.toObject=function(s,h){h||(h={});var f={};if((h.arrays||h.defaults)&&(f.dim=[]),s.dim&&s.dim.length){f.dim=[];for(var v=0;v<s.dim.length;++v)f.dim[v]=l.onnx.TensorShapeProto.Dimension.toObject(s.dim[v],h)}return f},m.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},m.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.TensorShapeProto"},m.Dimension=(function(){function s(f){if(f)for(var v=Object.keys(f),I=0;I<v.length;++I)f[v[I]]!=null&&(this[v[I]]=f[v[I]])}s.prototype.dimValue=null,s.prototype.dimParam=null,s.prototype.denotation="";var h;return Object.defineProperty(s.prototype,"value",{get:i.oneOfGetter(h=["dimValue","dimParam"]),set:i.oneOfSetter(h)}),s.create=function(f){return new s(f)},s.encode=function(f,v){return v||(v=a.create()),f.dimValue!=null&&Object.hasOwnProperty.call(f,"dimValue")&&v.uint32(8).int64(f.dimValue),f.dimParam!=null&&Object.hasOwnProperty.call(f,"dimParam")&&v.uint32(18).string(f.dimParam),f.denotation!=null&&Object.hasOwnProperty.call(f,"denotation")&&v.uint32(26).string(f.denotation),v},s.encodeDelimited=function(f,v){return this.encode(f,v).ldelim()},s.decode=function(f,v){f instanceof r||(f=r.create(f));for(var I=v===void 0?f.len:f.pos+v,G=new l.onnx.TensorShapeProto.Dimension;f.pos<I;){var W=f.uint32();switch(W>>>3){case 1:{G.dimValue=f.int64();break}case 2:{G.dimParam=f.string();break}case 3:{G.denotation=f.string();break}default:f.skipType(W&7);break}}return G},s.decodeDelimited=function(f){return f instanceof r||(f=new r(f)),this.decode(f,f.uint32())},s.verify=function(f){if(typeof f!="object"||f===null)return"object expected";var v={};if(f.dimValue!=null&&f.hasOwnProperty("dimValue")&&(v.value=1,!i.isInteger(f.dimValue)&&!(f.dimValue&&i.isInteger(f.dimValue.low)&&i.isInteger(f.dimValue.high))))return"dimValue: integer|Long expected";if(f.dimParam!=null&&f.hasOwnProperty("dimParam")){if(v.value===1)return"value: multiple values";if(v.value=1,!i.isString(f.dimParam))return"dimParam: string expected"}return f.denotation!=null&&f.hasOwnProperty("denotation")&&!i.isString(f.denotation)?"denotation: string expected":null},s.fromObject=function(f){if(f instanceof l.onnx.TensorShapeProto.Dimension)return f;var v=new l.onnx.TensorShapeProto.Dimension;return f.dimValue!=null&&(i.Long?(v.dimValue=i.Long.fromValue(f.dimValue)).unsigned=!1:typeof f.dimValue=="string"?v.dimValue=parseInt(f.dimValue,10):typeof f.dimValue=="number"?v.dimValue=f.dimValue:typeof f.dimValue=="object"&&(v.dimValue=new i.LongBits(f.dimValue.low>>>0,f.dimValue.high>>>0).toNumber())),f.dimParam!=null&&(v.dimParam=String(f.dimParam)),f.denotation!=null&&(v.denotation=String(f.denotation)),v},s.toObject=function(f,v){v||(v={});var I={};return v.defaults&&(I.denotation=""),f.dimValue!=null&&f.hasOwnProperty("dimValue")&&(typeof f.dimValue=="number"?I.dimValue=v.longs===String?String(f.dimValue):f.dimValue:I.dimValue=v.longs===String?i.Long.prototype.toString.call(f.dimValue):v.longs===Number?new i.LongBits(f.dimValue.low>>>0,f.dimValue.high>>>0).toNumber():f.dimValue,v.oneofs&&(I.value="dimValue")),f.dimParam!=null&&f.hasOwnProperty("dimParam")&&(I.dimParam=f.dimParam,v.oneofs&&(I.value="dimParam")),f.denotation!=null&&f.hasOwnProperty("denotation")&&(I.denotation=f.denotation),I},s.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},s.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TensorShapeProto.Dimension"},s})(),m})(),p.TypeProto=(function(){function m(h){if(h)for(var f=Object.keys(h),v=0;v<f.length;++v)h[f[v]]!=null&&(this[f[v]]=h[f[v]])}m.prototype.tensorType=null,m.prototype.sequenceType=null,m.prototype.mapType=null,m.prototype.optionalType=null,m.prototype.sparseTensorType=null,m.prototype.denotation="";var s;return Object.defineProperty(m.prototype,"value",{get:i.oneOfGetter(s=["tensorType","sequenceType","mapType","optionalType","sparseTensorType"]),set:i.oneOfSetter(s)}),m.create=function(h){return new m(h)},m.encode=function(h,f){return f||(f=a.create()),h.tensorType!=null&&Object.hasOwnProperty.call(h,"tensorType")&&l.onnx.TypeProto.Tensor.encode(h.tensorType,f.uint32(10).fork()).ldelim(),h.sequenceType!=null&&Object.hasOwnProperty.call(h,"sequenceType")&&l.onnx.TypeProto.Sequence.encode(h.sequenceType,f.uint32(34).fork()).ldelim(),h.mapType!=null&&Object.hasOwnProperty.call(h,"mapType")&&l.onnx.TypeProto.Map.encode(h.mapType,f.uint32(42).fork()).ldelim(),h.denotation!=null&&Object.hasOwnProperty.call(h,"denotation")&&f.uint32(50).string(h.denotation),h.sparseTensorType!=null&&Object.hasOwnProperty.call(h,"sparseTensorType")&&l.onnx.TypeProto.SparseTensor.encode(h.sparseTensorType,f.uint32(66).fork()).ldelim(),h.optionalType!=null&&Object.hasOwnProperty.call(h,"optionalType")&&l.onnx.TypeProto.Optional.encode(h.optionalType,f.uint32(74).fork()).ldelim(),f},m.encodeDelimited=function(h,f){return this.encode(h,f).ldelim()},m.decode=function(h,f){h instanceof r||(h=r.create(h));for(var v=f===void 0?h.len:h.pos+f,I=new l.onnx.TypeProto;h.pos<v;){var G=h.uint32();switch(G>>>3){case 1:{I.tensorType=l.onnx.TypeProto.Tensor.decode(h,h.uint32());break}case 4:{I.sequenceType=l.onnx.TypeProto.Sequence.decode(h,h.uint32());break}case 5:{I.mapType=l.onnx.TypeProto.Map.decode(h,h.uint32());break}case 9:{I.optionalType=l.onnx.TypeProto.Optional.decode(h,h.uint32());break}case 8:{I.sparseTensorType=l.onnx.TypeProto.SparseTensor.decode(h,h.uint32());break}case 6:{I.denotation=h.string();break}default:h.skipType(G&7);break}}return I},m.decodeDelimited=function(h){return h instanceof r||(h=new r(h)),this.decode(h,h.uint32())},m.verify=function(h){if(typeof h!="object"||h===null)return"object expected";var f={};if(h.tensorType!=null&&h.hasOwnProperty("tensorType")){f.value=1;{var v=l.onnx.TypeProto.Tensor.verify(h.tensorType);if(v)return"tensorType."+v}}if(h.sequenceType!=null&&h.hasOwnProperty("sequenceType")){if(f.value===1)return"value: multiple values";f.value=1;{var v=l.onnx.TypeProto.Sequence.verify(h.sequenceType);if(v)return"sequenceType."+v}}if(h.mapType!=null&&h.hasOwnProperty("mapType")){if(f.value===1)return"value: multiple values";f.value=1;{var v=l.onnx.TypeProto.Map.verify(h.mapType);if(v)return"mapType."+v}}if(h.optionalType!=null&&h.hasOwnProperty("optionalType")){if(f.value===1)return"value: multiple values";f.value=1;{var v=l.onnx.TypeProto.Optional.verify(h.optionalType);if(v)return"optionalType."+v}}if(h.sparseTensorType!=null&&h.hasOwnProperty("sparseTensorType")){if(f.value===1)return"value: multiple values";f.value=1;{var v=l.onnx.TypeProto.SparseTensor.verify(h.sparseTensorType);if(v)return"sparseTensorType."+v}}return h.denotation!=null&&h.hasOwnProperty("denotation")&&!i.isString(h.denotation)?"denotation: string expected":null},m.fromObject=function(h){if(h instanceof l.onnx.TypeProto)return h;var f=new l.onnx.TypeProto;if(h.tensorType!=null){if(typeof h.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");f.tensorType=l.onnx.TypeProto.Tensor.fromObject(h.tensorType)}if(h.sequenceType!=null){if(typeof h.sequenceType!="object")throw TypeError(".onnx.TypeProto.sequenceType: object expected");f.sequenceType=l.onnx.TypeProto.Sequence.fromObject(h.sequenceType)}if(h.mapType!=null){if(typeof h.mapType!="object")throw TypeError(".onnx.TypeProto.mapType: object expected");f.mapType=l.onnx.TypeProto.Map.fromObject(h.mapType)}if(h.optionalType!=null){if(typeof h.optionalType!="object")throw TypeError(".onnx.TypeProto.optionalType: object expected");f.optionalType=l.onnx.TypeProto.Optional.fromObject(h.optionalType)}if(h.sparseTensorType!=null){if(typeof h.sparseTensorType!="object")throw TypeError(".onnx.TypeProto.sparseTensorType: object expected");f.sparseTensorType=l.onnx.TypeProto.SparseTensor.fromObject(h.sparseTensorType)}return h.denotation!=null&&(f.denotation=String(h.denotation)),f},m.toObject=function(h,f){f||(f={});var v={};return f.defaults&&(v.denotation=""),h.tensorType!=null&&h.hasOwnProperty("tensorType")&&(v.tensorType=l.onnx.TypeProto.Tensor.toObject(h.tensorType,f),f.oneofs&&(v.value="tensorType")),h.sequenceType!=null&&h.hasOwnProperty("sequenceType")&&(v.sequenceType=l.onnx.TypeProto.Sequence.toObject(h.sequenceType,f),f.oneofs&&(v.value="sequenceType")),h.mapType!=null&&h.hasOwnProperty("mapType")&&(v.mapType=l.onnx.TypeProto.Map.toObject(h.mapType,f),f.oneofs&&(v.value="mapType")),h.denotation!=null&&h.hasOwnProperty("denotation")&&(v.denotation=h.denotation),h.sparseTensorType!=null&&h.hasOwnProperty("sparseTensorType")&&(v.sparseTensorType=l.onnx.TypeProto.SparseTensor.toObject(h.sparseTensorType,f),f.oneofs&&(v.value="sparseTensorType")),h.optionalType!=null&&h.hasOwnProperty("optionalType")&&(v.optionalType=l.onnx.TypeProto.Optional.toObject(h.optionalType,f),f.oneofs&&(v.value="optionalType")),v},m.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},m.getTypeUrl=function(h){return h===void 0&&(h="type.googleapis.com"),h+"/onnx.TypeProto"},m.Tensor=(function(){function h(f){if(f)for(var v=Object.keys(f),I=0;I<v.length;++I)f[v[I]]!=null&&(this[v[I]]=f[v[I]])}return h.prototype.elemType=0,h.prototype.shape=null,h.create=function(f){return new h(f)},h.encode=function(f,v){return v||(v=a.create()),f.elemType!=null&&Object.hasOwnProperty.call(f,"elemType")&&v.uint32(8).int32(f.elemType),f.shape!=null&&Object.hasOwnProperty.call(f,"shape")&&l.onnx.TensorShapeProto.encode(f.shape,v.uint32(18).fork()).ldelim(),v},h.encodeDelimited=function(f,v){return this.encode(f,v).ldelim()},h.decode=function(f,v){f instanceof r||(f=r.create(f));for(var I=v===void 0?f.len:f.pos+v,G=new l.onnx.TypeProto.Tensor;f.pos<I;){var W=f.uint32();switch(W>>>3){case 1:{G.elemType=f.int32();break}case 2:{G.shape=l.onnx.TensorShapeProto.decode(f,f.uint32());break}default:f.skipType(W&7);break}}return G},h.decodeDelimited=function(f){return f instanceof r||(f=new r(f)),this.decode(f,f.uint32())},h.verify=function(f){if(typeof f!="object"||f===null)return"object expected";if(f.elemType!=null&&f.hasOwnProperty("elemType")&&!i.isInteger(f.elemType))return"elemType: integer expected";if(f.shape!=null&&f.hasOwnProperty("shape")){var v=l.onnx.TensorShapeProto.verify(f.shape);if(v)return"shape."+v}return null},h.fromObject=function(f){if(f instanceof l.onnx.TypeProto.Tensor)return f;var v=new l.onnx.TypeProto.Tensor;if(f.elemType!=null&&(v.elemType=f.elemType|0),f.shape!=null){if(typeof f.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");v.shape=l.onnx.TensorShapeProto.fromObject(f.shape)}return v},h.toObject=function(f,v){v||(v={});var I={};return v.defaults&&(I.elemType=0,I.shape=null),f.elemType!=null&&f.hasOwnProperty("elemType")&&(I.elemType=f.elemType),f.shape!=null&&f.hasOwnProperty("shape")&&(I.shape=l.onnx.TensorShapeProto.toObject(f.shape,v)),I},h.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},h.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TypeProto.Tensor"},h})(),m.Sequence=(function(){function h(f){if(f)for(var v=Object.keys(f),I=0;I<v.length;++I)f[v[I]]!=null&&(this[v[I]]=f[v[I]])}return h.prototype.elemType=null,h.create=function(f){return new h(f)},h.encode=function(f,v){return v||(v=a.create()),f.elemType!=null&&Object.hasOwnProperty.call(f,"elemType")&&l.onnx.TypeProto.encode(f.elemType,v.uint32(10).fork()).ldelim(),v},h.encodeDelimited=function(f,v){return this.encode(f,v).ldelim()},h.decode=function(f,v){f instanceof r||(f=r.create(f));for(var I=v===void 0?f.len:f.pos+v,G=new l.onnx.TypeProto.Sequence;f.pos<I;){var W=f.uint32();switch(W>>>3){case 1:{G.elemType=l.onnx.TypeProto.decode(f,f.uint32());break}default:f.skipType(W&7);break}}return G},h.decodeDelimited=function(f){return f instanceof r||(f=new r(f)),this.decode(f,f.uint32())},h.verify=function(f){if(typeof f!="object"||f===null)return"object expected";if(f.elemType!=null&&f.hasOwnProperty("elemType")){var v=l.onnx.TypeProto.verify(f.elemType);if(v)return"elemType."+v}return null},h.fromObject=function(f){if(f instanceof l.onnx.TypeProto.Sequence)return f;var v=new l.onnx.TypeProto.Sequence;if(f.elemType!=null){if(typeof f.elemType!="object")throw TypeError(".onnx.TypeProto.Sequence.elemType: object expected");v.elemType=l.onnx.TypeProto.fromObject(f.elemType)}return v},h.toObject=function(f,v){v||(v={});var I={};return v.defaults&&(I.elemType=null),f.elemType!=null&&f.hasOwnProperty("elemType")&&(I.elemType=l.onnx.TypeProto.toObject(f.elemType,v)),I},h.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},h.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TypeProto.Sequence"},h})(),m.Map=(function(){function h(f){if(f)for(var v=Object.keys(f),I=0;I<v.length;++I)f[v[I]]!=null&&(this[v[I]]=f[v[I]])}return h.prototype.keyType=0,h.prototype.valueType=null,h.create=function(f){return new h(f)},h.encode=function(f,v){return v||(v=a.create()),f.keyType!=null&&Object.hasOwnProperty.call(f,"keyType")&&v.uint32(8).int32(f.keyType),f.valueType!=null&&Object.hasOwnProperty.call(f,"valueType")&&l.onnx.TypeProto.encode(f.valueType,v.uint32(18).fork()).ldelim(),v},h.encodeDelimited=function(f,v){return this.encode(f,v).ldelim()},h.decode=function(f,v){f instanceof r||(f=r.create(f));for(var I=v===void 0?f.len:f.pos+v,G=new l.onnx.TypeProto.Map;f.pos<I;){var W=f.uint32();switch(W>>>3){case 1:{G.keyType=f.int32();break}case 2:{G.valueType=l.onnx.TypeProto.decode(f,f.uint32());break}default:f.skipType(W&7);break}}return G},h.decodeDelimited=function(f){return f instanceof r||(f=new r(f)),this.decode(f,f.uint32())},h.verify=function(f){if(typeof f!="object"||f===null)return"object expected";if(f.keyType!=null&&f.hasOwnProperty("keyType")&&!i.isInteger(f.keyType))return"keyType: integer expected";if(f.valueType!=null&&f.hasOwnProperty("valueType")){var v=l.onnx.TypeProto.verify(f.valueType);if(v)return"valueType."+v}return null},h.fromObject=function(f){if(f instanceof l.onnx.TypeProto.Map)return f;var v=new l.onnx.TypeProto.Map;if(f.keyType!=null&&(v.keyType=f.keyType|0),f.valueType!=null){if(typeof f.valueType!="object")throw TypeError(".onnx.TypeProto.Map.valueType: object expected");v.valueType=l.onnx.TypeProto.fromObject(f.valueType)}return v},h.toObject=function(f,v){v||(v={});var I={};return v.defaults&&(I.keyType=0,I.valueType=null),f.keyType!=null&&f.hasOwnProperty("keyType")&&(I.keyType=f.keyType),f.valueType!=null&&f.hasOwnProperty("valueType")&&(I.valueType=l.onnx.TypeProto.toObject(f.valueType,v)),I},h.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},h.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TypeProto.Map"},h})(),m.Optional=(function(){function h(f){if(f)for(var v=Object.keys(f),I=0;I<v.length;++I)f[v[I]]!=null&&(this[v[I]]=f[v[I]])}return h.prototype.elemType=null,h.create=function(f){return new h(f)},h.encode=function(f,v){return v||(v=a.create()),f.elemType!=null&&Object.hasOwnProperty.call(f,"elemType")&&l.onnx.TypeProto.encode(f.elemType,v.uint32(10).fork()).ldelim(),v},h.encodeDelimited=function(f,v){return this.encode(f,v).ldelim()},h.decode=function(f,v){f instanceof r||(f=r.create(f));for(var I=v===void 0?f.len:f.pos+v,G=new l.onnx.TypeProto.Optional;f.pos<I;){var W=f.uint32();switch(W>>>3){case 1:{G.elemType=l.onnx.TypeProto.decode(f,f.uint32());break}default:f.skipType(W&7);break}}return G},h.decodeDelimited=function(f){return f instanceof r||(f=new r(f)),this.decode(f,f.uint32())},h.verify=function(f){if(typeof f!="object"||f===null)return"object expected";if(f.elemType!=null&&f.hasOwnProperty("elemType")){var v=l.onnx.TypeProto.verify(f.elemType);if(v)return"elemType."+v}return null},h.fromObject=function(f){if(f instanceof l.onnx.TypeProto.Optional)return f;var v=new l.onnx.TypeProto.Optional;if(f.elemType!=null){if(typeof f.elemType!="object")throw TypeError(".onnx.TypeProto.Optional.elemType: object expected");v.elemType=l.onnx.TypeProto.fromObject(f.elemType)}return v},h.toObject=function(f,v){v||(v={});var I={};return v.defaults&&(I.elemType=null),f.elemType!=null&&f.hasOwnProperty("elemType")&&(I.elemType=l.onnx.TypeProto.toObject(f.elemType,v)),I},h.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},h.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TypeProto.Optional"},h})(),m.SparseTensor=(function(){function h(f){if(f)for(var v=Object.keys(f),I=0;I<v.length;++I)f[v[I]]!=null&&(this[v[I]]=f[v[I]])}return h.prototype.elemType=0,h.prototype.shape=null,h.create=function(f){return new h(f)},h.encode=function(f,v){return v||(v=a.create()),f.elemType!=null&&Object.hasOwnProperty.call(f,"elemType")&&v.uint32(8).int32(f.elemType),f.shape!=null&&Object.hasOwnProperty.call(f,"shape")&&l.onnx.TensorShapeProto.encode(f.shape,v.uint32(18).fork()).ldelim(),v},h.encodeDelimited=function(f,v){return this.encode(f,v).ldelim()},h.decode=function(f,v){f instanceof r||(f=r.create(f));for(var I=v===void 0?f.len:f.pos+v,G=new l.onnx.TypeProto.SparseTensor;f.pos<I;){var W=f.uint32();switch(W>>>3){case 1:{G.elemType=f.int32();break}case 2:{G.shape=l.onnx.TensorShapeProto.decode(f,f.uint32());break}default:f.skipType(W&7);break}}return G},h.decodeDelimited=function(f){return f instanceof r||(f=new r(f)),this.decode(f,f.uint32())},h.verify=function(f){if(typeof f!="object"||f===null)return"object expected";if(f.elemType!=null&&f.hasOwnProperty("elemType")&&!i.isInteger(f.elemType))return"elemType: integer expected";if(f.shape!=null&&f.hasOwnProperty("shape")){var v=l.onnx.TensorShapeProto.verify(f.shape);if(v)return"shape."+v}return null},h.fromObject=function(f){if(f instanceof l.onnx.TypeProto.SparseTensor)return f;var v=new l.onnx.TypeProto.SparseTensor;if(f.elemType!=null&&(v.elemType=f.elemType|0),f.shape!=null){if(typeof f.shape!="object")throw TypeError(".onnx.TypeProto.SparseTensor.shape: object expected");v.shape=l.onnx.TensorShapeProto.fromObject(f.shape)}return v},h.toObject=function(f,v){v||(v={});var I={};return v.defaults&&(I.elemType=0,I.shape=null),f.elemType!=null&&f.hasOwnProperty("elemType")&&(I.elemType=f.elemType),f.shape!=null&&f.hasOwnProperty("shape")&&(I.shape=l.onnx.TensorShapeProto.toObject(f.shape,v)),I},h.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},h.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TypeProto.SparseTensor"},h})(),m})(),p.OperatorSetIdProto=(function(){function m(s){if(s)for(var h=Object.keys(s),f=0;f<h.length;++f)s[h[f]]!=null&&(this[h[f]]=s[h[f]])}return m.prototype.domain="",m.prototype.version=i.Long?i.Long.fromBits(0,0,!1):0,m.create=function(s){return new m(s)},m.encode=function(s,h){return h||(h=a.create()),s.domain!=null&&Object.hasOwnProperty.call(s,"domain")&&h.uint32(10).string(s.domain),s.version!=null&&Object.hasOwnProperty.call(s,"version")&&h.uint32(16).int64(s.version),h},m.encodeDelimited=function(s,h){return this.encode(s,h).ldelim()},m.decode=function(s,h){s instanceof r||(s=r.create(s));for(var f=h===void 0?s.len:s.pos+h,v=new l.onnx.OperatorSetIdProto;s.pos<f;){var I=s.uint32();switch(I>>>3){case 1:{v.domain=s.string();break}case 2:{v.version=s.int64();break}default:s.skipType(I&7);break}}return v},m.decodeDelimited=function(s){return s instanceof r||(s=new r(s)),this.decode(s,s.uint32())},m.verify=function(s){return typeof s!="object"||s===null?"object expected":s.domain!=null&&s.hasOwnProperty("domain")&&!i.isString(s.domain)?"domain: string expected":s.version!=null&&s.hasOwnProperty("version")&&!i.isInteger(s.version)&&!(s.version&&i.isInteger(s.version.low)&&i.isInteger(s.version.high))?"version: integer|Long expected":null},m.fromObject=function(s){if(s instanceof l.onnx.OperatorSetIdProto)return s;var h=new l.onnx.OperatorSetIdProto;return s.domain!=null&&(h.domain=String(s.domain)),s.version!=null&&(i.Long?(h.version=i.Long.fromValue(s.version)).unsigned=!1:typeof s.version=="string"?h.version=parseInt(s.version,10):typeof s.version=="number"?h.version=s.version:typeof s.version=="object"&&(h.version=new i.LongBits(s.version.low>>>0,s.version.high>>>0).toNumber())),h},m.toObject=function(s,h){h||(h={});var f={};if(h.defaults)if(f.domain="",i.Long){var v=new i.Long(0,0,!1);f.version=h.longs===String?v.toString():h.longs===Number?v.toNumber():v}else f.version=h.longs===String?"0":0;return s.domain!=null&&s.hasOwnProperty("domain")&&(f.domain=s.domain),s.version!=null&&s.hasOwnProperty("version")&&(typeof s.version=="number"?f.version=h.longs===String?String(s.version):s.version:f.version=h.longs===String?i.Long.prototype.toString.call(s.version):h.longs===Number?new i.LongBits(s.version.low>>>0,s.version.high>>>0).toNumber():s.version),f},m.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},m.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.OperatorSetIdProto"},m})(),p.OperatorStatus=(function(){var m={},s=Object.create(m);return s[m[0]="EXPERIMENTAL"]=0,s[m[1]="STABLE"]=1,s})(),p.FunctionProto=(function(){function m(s){if(this.input=[],this.output=[],this.attribute=[],this.attributeProto=[],this.node=[],this.opsetImport=[],s)for(var h=Object.keys(s),f=0;f<h.length;++f)s[h[f]]!=null&&(this[h[f]]=s[h[f]])}return m.prototype.name="",m.prototype.input=i.emptyArray,m.prototype.output=i.emptyArray,m.prototype.attribute=i.emptyArray,m.prototype.attributeProto=i.emptyArray,m.prototype.node=i.emptyArray,m.prototype.docString="",m.prototype.opsetImport=i.emptyArray,m.prototype.domain="",m.create=function(s){return new m(s)},m.encode=function(s,h){if(h||(h=a.create()),s.name!=null&&Object.hasOwnProperty.call(s,"name")&&h.uint32(10).string(s.name),s.input!=null&&s.input.length)for(var f=0;f<s.input.length;++f)h.uint32(34).string(s.input[f]);if(s.output!=null&&s.output.length)for(var f=0;f<s.output.length;++f)h.uint32(42).string(s.output[f]);if(s.attribute!=null&&s.attribute.length)for(var f=0;f<s.attribute.length;++f)h.uint32(50).string(s.attribute[f]);if(s.node!=null&&s.node.length)for(var f=0;f<s.node.length;++f)l.onnx.NodeProto.encode(s.node[f],h.uint32(58).fork()).ldelim();if(s.docString!=null&&Object.hasOwnProperty.call(s,"docString")&&h.uint32(66).string(s.docString),s.opsetImport!=null&&s.opsetImport.length)for(var f=0;f<s.opsetImport.length;++f)l.onnx.OperatorSetIdProto.encode(s.opsetImport[f],h.uint32(74).fork()).ldelim();if(s.domain!=null&&Object.hasOwnProperty.call(s,"domain")&&h.uint32(82).string(s.domain),s.attributeProto!=null&&s.attributeProto.length)for(var f=0;f<s.attributeProto.length;++f)l.onnx.AttributeProto.encode(s.attributeProto[f],h.uint32(90).fork()).ldelim();return h},m.encodeDelimited=function(s,h){return this.encode(s,h).ldelim()},m.decode=function(s,h){s instanceof r||(s=r.create(s));for(var f=h===void 0?s.len:s.pos+h,v=new l.onnx.FunctionProto;s.pos<f;){var I=s.uint32();switch(I>>>3){case 1:{v.name=s.string();break}case 4:{v.input&&v.input.length||(v.input=[]),v.input.push(s.string());break}case 5:{v.output&&v.output.length||(v.output=[]),v.output.push(s.string());break}case 6:{v.attribute&&v.attribute.length||(v.attribute=[]),v.attribute.push(s.string());break}case 11:{v.attributeProto&&v.attributeProto.length||(v.attributeProto=[]),v.attributeProto.push(l.onnx.AttributeProto.decode(s,s.uint32()));break}case 7:{v.node&&v.node.length||(v.node=[]),v.node.push(l.onnx.NodeProto.decode(s,s.uint32()));break}case 8:{v.docString=s.string();break}case 9:{v.opsetImport&&v.opsetImport.length||(v.opsetImport=[]),v.opsetImport.push(l.onnx.OperatorSetIdProto.decode(s,s.uint32()));break}case 10:{v.domain=s.string();break}default:s.skipType(I&7);break}}return v},m.decodeDelimited=function(s){return s instanceof r||(s=new r(s)),this.decode(s,s.uint32())},m.verify=function(s){if(typeof s!="object"||s===null)return"object expected";if(s.name!=null&&s.hasOwnProperty("name")&&!i.isString(s.name))return"name: string expected";if(s.input!=null&&s.hasOwnProperty("input")){if(!Array.isArray(s.input))return"input: array expected";for(var h=0;h<s.input.length;++h)if(!i.isString(s.input[h]))return"input: string[] expected"}if(s.output!=null&&s.hasOwnProperty("output")){if(!Array.isArray(s.output))return"output: array expected";for(var h=0;h<s.output.length;++h)if(!i.isString(s.output[h]))return"output: string[] expected"}if(s.attribute!=null&&s.hasOwnProperty("attribute")){if(!Array.isArray(s.attribute))return"attribute: array expected";for(var h=0;h<s.attribute.length;++h)if(!i.isString(s.attribute[h]))return"attribute: string[] expected"}if(s.attributeProto!=null&&s.hasOwnProperty("attributeProto")){if(!Array.isArray(s.attributeProto))return"attributeProto: array expected";for(var h=0;h<s.attributeProto.length;++h){var f=l.onnx.AttributeProto.verify(s.attributeProto[h]);if(f)return"attributeProto."+f}}if(s.node!=null&&s.hasOwnProperty("node")){if(!Array.isArray(s.node))return"node: array expected";for(var h=0;h<s.node.length;++h){var f=l.onnx.NodeProto.verify(s.node[h]);if(f)return"node."+f}}if(s.docString!=null&&s.hasOwnProperty("docString")&&!i.isString(s.docString))return"docString: string expected";if(s.opsetImport!=null&&s.hasOwnProperty("opsetImport")){if(!Array.isArray(s.opsetImport))return"opsetImport: array expected";for(var h=0;h<s.opsetImport.length;++h){var f=l.onnx.OperatorSetIdProto.verify(s.opsetImport[h]);if(f)return"opsetImport."+f}}return s.domain!=null&&s.hasOwnProperty("domain")&&!i.isString(s.domain)?"domain: string expected":null},m.fromObject=function(s){if(s instanceof l.onnx.FunctionProto)return s;var h=new l.onnx.FunctionProto;if(s.name!=null&&(h.name=String(s.name)),s.input){if(!Array.isArray(s.input))throw TypeError(".onnx.FunctionProto.input: array expected");h.input=[];for(var f=0;f<s.input.length;++f)h.input[f]=String(s.input[f])}if(s.output){if(!Array.isArray(s.output))throw TypeError(".onnx.FunctionProto.output: array expected");h.output=[];for(var f=0;f<s.output.length;++f)h.output[f]=String(s.output[f])}if(s.attribute){if(!Array.isArray(s.attribute))throw TypeError(".onnx.FunctionProto.attribute: array expected");h.attribute=[];for(var f=0;f<s.attribute.length;++f)h.attribute[f]=String(s.attribute[f])}if(s.attributeProto){if(!Array.isArray(s.attributeProto))throw TypeError(".onnx.FunctionProto.attributeProto: array expected");h.attributeProto=[];for(var f=0;f<s.attributeProto.length;++f){if(typeof s.attributeProto[f]!="object")throw TypeError(".onnx.FunctionProto.attributeProto: object expected");h.attributeProto[f]=l.onnx.AttributeProto.fromObject(s.attributeProto[f])}}if(s.node){if(!Array.isArray(s.node))throw TypeError(".onnx.FunctionProto.node: array expected");h.node=[];for(var f=0;f<s.node.length;++f){if(typeof s.node[f]!="object")throw TypeError(".onnx.FunctionProto.node: object expected");h.node[f]=l.onnx.NodeProto.fromObject(s.node[f])}}if(s.docString!=null&&(h.docString=String(s.docString)),s.opsetImport){if(!Array.isArray(s.opsetImport))throw TypeError(".onnx.FunctionProto.opsetImport: array expected");h.opsetImport=[];for(var f=0;f<s.opsetImport.length;++f){if(typeof s.opsetImport[f]!="object")throw TypeError(".onnx.FunctionProto.opsetImport: object expected");h.opsetImport[f]=l.onnx.OperatorSetIdProto.fromObject(s.opsetImport[f])}}return s.domain!=null&&(h.domain=String(s.domain)),h},m.toObject=function(s,h){h||(h={});var f={};if((h.arrays||h.defaults)&&(f.input=[],f.output=[],f.attribute=[],f.node=[],f.opsetImport=[],f.attributeProto=[]),h.defaults&&(f.name="",f.docString="",f.domain=""),s.name!=null&&s.hasOwnProperty("name")&&(f.name=s.name),s.input&&s.input.length){f.input=[];for(var v=0;v<s.input.length;++v)f.input[v]=s.input[v]}if(s.output&&s.output.length){f.output=[];for(var v=0;v<s.output.length;++v)f.output[v]=s.output[v]}if(s.attribute&&s.attribute.length){f.attribute=[];for(var v=0;v<s.attribute.length;++v)f.attribute[v]=s.attribute[v]}if(s.node&&s.node.length){f.node=[];for(var v=0;v<s.node.length;++v)f.node[v]=l.onnx.NodeProto.toObject(s.node[v],h)}if(s.docString!=null&&s.hasOwnProperty("docString")&&(f.docString=s.docString),s.opsetImport&&s.opsetImport.length){f.opsetImport=[];for(var v=0;v<s.opsetImport.length;++v)f.opsetImport[v]=l.onnx.OperatorSetIdProto.toObject(s.opsetImport[v],h)}if(s.domain!=null&&s.hasOwnProperty("domain")&&(f.domain=s.domain),s.attributeProto&&s.attributeProto.length){f.attributeProto=[];for(var v=0;v<s.attributeProto.length;++v)f.attributeProto[v]=l.onnx.AttributeProto.toObject(s.attributeProto[v],h)}return f},m.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},m.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.FunctionProto"},m})(),p})(),e.exports=l});function Fr(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function sn(t){return new TextDecoder().decode(t)}var ye,hr,pi,Ze,jn,We,it,U,an,mr,br,gr,fe=L$2(()=>{zn(),Zo(),ye=Ar(Cr()),yr(),hr=class{static arraysEqual(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}},pi=class{static preprocessInputShapes(t,e){let n=t.length===1?[1,t[0]]:t,r=e.length===1?[e[0],1]:e;return[n,r]}static postprocessOutputShape(t,e,n){e===1&&t.splice(t.length-2,1),n===1&&t.pop()}static calcMatMulShape(t,e){return t[1]!==e[0]?void 0:[t[0],e[1]]}},Ze=class VT{static calcShape(e,n,r=!1){let a=e.length,i=n.length;if(a===0)return n;if(i===0)return e;let l=Math.max(e.length,n.length),p=new Array(l);if(r){if(a<2||i<2)return;let m=pi.calcMatMulShape([e[a-2],e[a-1]],[n[i-2],n[i-1]]);if(m===void 0)return;[p[l-2],p[l-1]]=m}for(let m=r?3:1;m<=l;m++){let s=a-m<0?1:e[a-m],h=i-m<0?1:n[i-m];if(s!==h&&s>1&&h>1)return;p[l-m]=Math.max(s,h)}return p}static index(e,n){let r=new Array(n.length);return VT.fillIndex(e,n,r),r}static fillIndex(e,n,r){let a=e.length-n.length;for(let i=0;i<n.length;i++)r[i]=e[a+i]%n[i]}static calc(e,n,r,a,i){let l=VT.calcShape(e.dims,n.dims);if(l){if(a&&!U.areEqual(l,e.dims))return;let p=U.size(l),m=a?e:new $e(l,i||e.type);if(l.length===0)m.set([],r(e.get([]),n.get([])));else{let s=new Array(l.length),h=new Array(e.dims.length),f=new Array(n.dims.length),v=0,I=0,G=!1,W=!1;e.dims.length===0&&(v=e.get([]),G=!0),n.dims.length===0&&(I=n.get([]),W=!0);let X;for(let ge=0;ge<p;ge++){X=ge;for(let ie=l.length-1;ie>=0;ie--)s[ie]=X%l[ie],X=Math.floor(X/l[ie]);G||(VT.fillIndex(s,e.dims,h),v=e.get(h)),W||(VT.fillIndex(s,n.dims,f),I=n.get(f)),m.set(s,r(v,I))}}return m}}static isValidBroadcast(e,n){let r=e.length,a=n.length;if(r>a)return!1;for(let i=1;i<=r;i++)if(e[r-i]!==1&&e[r-i]!==n[a-i])return!1;return!0}static getBroadcastDims(e,n){let r=e.length,a=[];for(let i=0;i<r;i++){let l=r-1-i,p=e[l]||1;(n[n.length-1-i]||1)>1&&p===1&&a.unshift(l)}return a}},jn=class{static getShapeOfGemmResult(t,e,n,r,a){if(t.length!==2||n.length!==2)throw new Error("shape need to be of size 2");let i,l,p;e?(i=t[1],l=t[0]):(i=t[0],l=t[1]);let m=-1;if(r?(p=n[0],m=1):(p=n[1],m=0),n[m]!==l)throw new Error("dimension mismatch");if(i<=0||p<=0||l<=0)throw new Error("invalid shape specified");if(a&&!Ze.isValidBroadcast(a,[i,p]))throw new Error("gemm: invalid bias shape for broadcast");return[i,p,l]}},We=class Sw{static tensorDataTypeFromProto(e){switch(e){case ye.onnx.TensorProto.DataType.INT8:return"int8";case ye.onnx.TensorProto.DataType.UINT8:return"uint8";case ye.onnx.TensorProto.DataType.BOOL:return"bool";case ye.onnx.TensorProto.DataType.INT16:return"int16";case ye.onnx.TensorProto.DataType.UINT16:return"uint16";case ye.onnx.TensorProto.DataType.INT32:return"int32";case ye.onnx.TensorProto.DataType.UINT32:return"uint32";case ye.onnx.TensorProto.DataType.FLOAT:return"float32";case ye.onnx.TensorProto.DataType.DOUBLE:return"float64";case ye.onnx.TensorProto.DataType.STRING:return"string";case ye.onnx.TensorProto.DataType.INT64:return"int32";case ye.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${ye.onnx.TensorProto.DataType[e]}`)}}static tensorDataTypeStringToEnum(e){switch(e){case"int8":return ye.onnx.TensorProto.DataType.INT8;case"uint8":return ye.onnx.TensorProto.DataType.UINT8;case"bool":return ye.onnx.TensorProto.DataType.BOOL;case"int16":return ye.onnx.TensorProto.DataType.INT16;case"uint16":return ye.onnx.TensorProto.DataType.UINT16;case"int32":return ye.onnx.TensorProto.DataType.INT32;case"uint32":return ye.onnx.TensorProto.DataType.UINT32;case"float32":return ye.onnx.TensorProto.DataType.FLOAT;case"float64":return ye.onnx.TensorProto.DataType.DOUBLE;case"string":return ye.onnx.TensorProto.DataType.STRING;case"int64":return ye.onnx.TensorProto.DataType.INT64;case"uint64":return ye.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${e}`)}}static tensorDimsFromProto(e){return e.map(n=>Vt.isLong(n)?n.toNumber():n)}static tensorValueTypeFromProto(e){return{tensorType:Sw.tensorDataTypeFromProto(e.elemType),shape:{dims:Sw.tensorDimsFromProto(e.shape.dim.map(n=>n.dimValue))}}}static tensorDimsFromORTFormat(e){let n=[];for(let r=0;r<e.dimsLength();r++)n.push(it.longToNumber(e.dims(r)));return n}static tensorAttributesFromORTFormat(e){let n=[];for(let r=0;r<e.attributesLength();r++)n.push(e.attributes(r));return n}},it=class{static longToNumber(t,e){return Vt.isLong(t)?t.toNumber():t instanceof _.Long?Vt.fromValue({low:t.low,high:t.high,unsigned:e??!1}).toNumber():t}static isLong(t){return Vt.isLong(t)||t instanceof _.Long}},U=class jy{static size(e){return jy.getSizeFromDimensionRange(e,0,e.length)}static sizeFromDimension(e,n){if(n<0||n>e.length)throw new Error(`invalid dimension of ${n} for sizeFromDimension as Tensor has ${e.length} dimensions.`);return jy.getSizeFromDimensionRange(e,n,e.length)}static sizeToDimension(e,n){if(n<0||n>e.length)throw new Error(`invalid dimension of ${n} for sizeToDimension as Tensor has ${e.length} dimensions.`);return jy.getSizeFromDimensionRange(e,0,n)}static getSizeFromDimensionRange(e,n,r){let a=1;for(let i=n;i<r;i++){if(e[i]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");a*=e[i]}return a}static computeStrides(e){let n=e.length;if(n===0)return[];if(n===1)return[1];let r=new Array(n);r[n-1]=1,r[n-2]=e[n-1];for(let a=n-3;a>=0;--a)r[a]=r[a+1]*e[a+1];return r}static transpose(e){return e.slice().reverse()}static indicesToOffset(e,n,r){r===void 0&&(r=e.length);let a=0;for(let i=0;i<r;++i)a+=n[i]*e[i];return a}static offsetToIndices(e,n){let r=n.length;if(r===0)return[];if(r===1)return[e*n[0]];let a=new Array(n.length);for(let i=0;i<a.length-1;++i)a[i]=Math.floor(e/n[i]),e-=a[i]*n[i];return a[a.length-1]=e,a}static normalizeAxis(e,n){if(e<-n&&e>=n)throw new Error("unsupported axis for this operation.");return e<0?e+n:e}static normalizeAxes(e,n){return e.map(r=>this.normalizeAxis(r,n))}static incrementIndex(e,n,r){if(n.length===0||e.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(r===void 0)r=n.length;else if(r<=0||r>n.length)throw new Error("Incorrect axis to increment on");for(let a=r-1;a>=0&&(e[a]++,!(e[a]<n[a]));--a)e[a]=0}static calculateReshapedDims(e,n){if(n.length===0){if(e.length===0||jy.size(e)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}let r=n.length,a=new Array(r),i=-1,l=1;for(let m=0;m<r;m++){if(n[m]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(n[m]===-1){if(i!==-1)throw new Error("at most one dimension in shape hints can be -1");i=m}else{if(n[m]===0){if(m>=e.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");a[m]=e[m]}else a[m]=n[m];l*=a[m]}}let p=jy.size(e);if(i!==-1){if(p%l!==0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${e}] Output shape: [${n}]`);a[i]=p/l}else if(l!==p)throw new Error("reshapedDims and originalDims don't have matching sizes");return a}static sortBasedOnPerm(e,n){return n?n.map(r=>e[r]):e.slice().reverse()}static padShape(e,n){let r=e.length;return e.map((a,i)=>a+n[i]+n[i+r])}static areEqual(e,n){return e.length!==n.length?!1:e.every((r,a)=>r===n[a])}static validateDimsAndCalcSize(e){if(e.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let n=1;for(let r of e){if(!Number.isInteger(r))throw new TypeError(`Invalid shape: ${r} is not an integer`);if(r<0||r>2147483647)throw new TypeError(`Invalid shape: length ${r} is not allowed`);n*=r}return n}static flattenShape(e,n){n<0&&(n+=e.length);let r=e.reduce((i,l)=>i*l,1),a=e.slice(n).reduce((i,l)=>i*l,1);return[r/a,a]}static squeezeShape(e,n){let r=new Array;n=jy.normalizeAxes(n,e.length);for(let a=0;a<e.length;a++){let i=n.indexOf(a)>=0;if(i&&e[a]!==1)throw new Error("squeeze an axis of size different than 1");(n.length===0&&e[a]>1||n.length>0&&!i)&&r.push(e[a])}return r}static unsqueezeShape(e,n){let r=new Array(e.length+n.length);r.fill(0);for(let i=0;i<n.length;i++){let l=jy.normalizeAxis(n[i],r.length);if(l>=r.length)throw new Error("'axes' has an out of range axis");if(r[l]!==0)throw new Error("'axes' has a duplicate axis");r[l]=1}let a=0;for(let i=0;i<r.length;i++)r[i]===0&&(r[i]=e[a++]);if(a!==e.length)throw new Error("the unsqueezed dimension could not be established");return r}},an=class AI{static splitShape(e,n,r,a){if(r.length===0){if(!a)throw new Error("need to know number of outputs when the 'split' attribute is not specified");AI.determineSplit(e[n],a,r)}let i=[],l=[0];for(let p=0;p<r.length;++p){p!==0&&l.push(l[p-1]+r[p-1]);let m=e.slice();m[n]=r[p],i.push(m)}return[i,l]}static determineSplit(e,n,r){if(e%n!==0)throw new Error("cannot split tensor to equal sized parts");for(let a=0;a<n;++a)r.push(e/n)}},mr=class LT{static adjustPoolAttributes(e,n,r,a,i,l){if(!e&&r.length!==n.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(e)for(let p=0;p<n.length-2;p++)p>=r.length?r.push(n[p+2]):r[p]=n[p+2];for(let p=0;p<r.length;p++)if(p<a.length){if(a[p]<0)throw new Error("strides should be greater than or equal to 1")}else a.push(1);for(let p=0;p<r.length;p++)if(p<i.length){if(i[p]<0)throw new Error("dilations should be greater than or equal to 1")}else i.push(1);for(let p=0;p<r.length*2;p++)if(p<l.length){if(l[p]<0)throw new Error("pad should be greater than or equal to 1")}else l.push(0);for(let p=0;p<r.length;p++){if(r[p]<=0)throw new Error("kernel shapes need to be greater than 0");if(l[p]>=r[p]||l[p+r.length]>=r[p])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(e,n,r,a,i,l){if(l){if(i.length!==2*(e.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(n.length!==e.length-2)throw new Error("length of strides should be the length of data dimensions");if(a.length!==e.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let p=0;p<e.length-2;p++)LT.adjustPadAndReturnShape(e[p+2],n[p],r[p],a[p],i,p,p+e.length-2,l)}}static computePoolOutputShape(e,n,r,a,i,l,p){if(n.length<=0)throw new Error("input shape must be of size greater than 0");let m=[n[0],n[1]];return LT.computeShapeHelper(e,n,m,r,a,i,l,p),m}static computeConvOutputShape(e,n,r,a,i,l,p){if(e.length<=0||n.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let m=[e[0],n[0]];return LT.computeShapeHelper(!1,e,m,r,a,i,l,p),m}static computeShapeHelper(e,n,r,a,i,l,p,m){if(e)for(let s=0;s<n.length-2;s++)r.push(1);else for(let s=0;s<n.length-2;s++)r.push(LT.adjustPadAndReturnShape(n[s+2],a[s],i[s],l[s],p,s,s+n.length-2,m))}static adjustPadAndReturnShape(e,n,r,a,i,l,p,m){let s=r*(a-1)+1;if(m&&m!=="NOTSET")switch(m){case"VALID":return i[l]=0,i[p]=0,Math.floor((e-s)/n+1);case"SAME_LOWER":case"SAME_UPPER":if(r!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let h=((e+n-1)/n-1)*n+a-e;return i[l]=Math.floor(m==="SAME_LOWER"?(h+1)/2:h/2),i[p]=h-i[l],Math.floor((e+h-a)/n+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((e+i[l]+i[p]-s)/n+1)}},br=-34028234663852886e22,gr=34028234663852886e22});function Hd(t){switch(t){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${t}`)}}function Fu(t){switch(t){case ne.onnx.TensorProto.DataType.UINT8:case ne.onnx.TensorProto.DataType.INT8:case ne.onnx.TensorProto.DataType.BOOL:return 1;case ne.onnx.TensorProto.DataType.UINT16:case ne.onnx.TensorProto.DataType.INT16:return 2;case ne.onnx.TensorProto.DataType.FLOAT:case ne.onnx.TensorProto.DataType.INT32:case ne.onnx.TensorProto.DataType.UINT32:return 4;case ne.onnx.TensorProto.DataType.INT64:case ne.onnx.TensorProto.DataType.DOUBLE:case ne.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${ne.onnx.TensorProto.DataType[t]}`)}}function qd(t,e){return new(Bu(e))(t)}function Bu(t){switch(t){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function hi(t,e){if(e===ne.onnx.TensorProto.DataType.INT64||e===di.TensorDataType.INT64){if(t.greaterThanOrEqual(2147483648)||t.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else if(e===ne.onnx.TensorProto.DataType.UINT32||e===di.TensorDataType.UINT32||e===ne.onnx.TensorProto.DataType.UINT64||e===di.TensorDataType.UINT64){if(t.greaterThanOrEqual(4294967296)||t.lessThan(0))throw new TypeError("uint64 is not supported")}else throw new TypeError(`not a LONG type: ${ne.onnx.TensorProto.DataType[e]}`);return t.toNumber()}function $u(t,e,n){switch(e){case ne.onnx.TensorProto.DataType.BOOL:case ne.onnx.TensorProto.DataType.UINT8:return t.getUint8(n);case ne.onnx.TensorProto.DataType.INT8:return t.getInt8(n);case ne.onnx.TensorProto.DataType.UINT16:return t.getUint16(n,!0);case ne.onnx.TensorProto.DataType.INT16:return t.getInt16(n,!0);case ne.onnx.TensorProto.DataType.FLOAT:return t.getFloat32(n,!0);case ne.onnx.TensorProto.DataType.INT32:return t.getInt32(n,!0);case ne.onnx.TensorProto.DataType.UINT32:return t.getUint32(n,!0);case ne.onnx.TensorProto.DataType.INT64:return hi(Vt.fromBits(t.getUint32(n,!0),t.getUint32(n+4,!0),!1),e);case ne.onnx.TensorProto.DataType.DOUBLE:return t.getFloat64(n,!0);case ne.onnx.TensorProto.DataType.UINT64:return hi(Vt.fromBits(t.getUint32(n,!0),t.getUint32(n+4,!0),!0),e);default:throw new Error(`cannot read from DataView for type ${ne.onnx.TensorProto.DataType[e]}`)}}var ku,ne,di,$e,yr=L$2(()=>{ku=Ar(Os()),Zo(),tn(),ne=Ar(Cr()),fe(),di=V.experimental.fbs,$e=class j0{constructor(e,n,r,a,i,l=ku.Guid.create()){this.dims=e,this.type=n,this.dataProvider=r,this.asyncDataProvider=a,this.cache=i,this.dataId=l,this.size=U.validateDimsAndCalcSize(e);let p=this.size,m=r===void 0&&a===void 0&&i===void 0;if(i!==void 0&&i.length!==p)throw new RangeError("Input dims doesn't match data length.");if(n==="string"){if(i!==void 0&&(!Array.isArray(i)||!i.every(s=>typeof s=="string")))throw new TypeError("cache should be a string array");m&&(this.cache=new Array(p))}else{if(i!==void 0){let s=Bu(n);if(!(i instanceof s))throw new TypeError(`cache should be type ${s.name}`)}if(m){let s=new ArrayBuffer(p*Hd(n));this.cache=qd(s,n)}}}get data(){if(this.cache===void 0){let e=this.dataProvider(this.dataId);if(e.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=e}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(e){return this.data[U.indicesToOffset(e,this.strides)]}set(e,n){this.data[U.indicesToOffset(e,this.strides)]=n}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=U.computeStrides(this.dims)),this._strides}static fromProto(e){if(!e)throw new Error("cannot construct Value from an empty tensor");let n=We.tensorDataTypeFromProto(e.dataType),r=We.tensorDimsFromProto(e.dims),a=new j0(r,n);if(n==="string")e.stringData.forEach((i,l)=>{a.data[l]=sn(i)});else if(e.rawData&&typeof e.rawData.byteLength=="number"&&e.rawData.byteLength>0){let i=a.data,l=new DataView(e.rawData.buffer,e.rawData.byteOffset,e.rawData.byteLength),p=Fu(e.dataType),m=e.rawData.byteLength/p;if(e.rawData.byteLength%p!==0)throw new Error("invalid buffer length");if(i.length!==m)throw new Error("buffer length mismatch");for(let s=0;s<m;s++){let h=$u(l,e.dataType,s*p);i[s]=h}}else{let i;switch(e.dataType){case ne.onnx.TensorProto.DataType.FLOAT:i=e.floatData;break;case ne.onnx.TensorProto.DataType.INT32:case ne.onnx.TensorProto.DataType.INT16:case ne.onnx.TensorProto.DataType.UINT16:case ne.onnx.TensorProto.DataType.INT8:case ne.onnx.TensorProto.DataType.UINT8:case ne.onnx.TensorProto.DataType.BOOL:i=e.int32Data;break;case ne.onnx.TensorProto.DataType.INT64:i=e.int64Data;break;case ne.onnx.TensorProto.DataType.DOUBLE:i=e.doubleData;break;case ne.onnx.TensorProto.DataType.UINT32:case ne.onnx.TensorProto.DataType.UINT64:i=e.uint64Data;break;default:throw new Error("unspecific error")}if(i==null)throw new Error("failed to populate data from a tensorproto value");let l=a.data;if(l.length!==i.length)throw new Error("array length mismatch");for(let p=0;p<i.length;p++){let m=i[p];Vt.isLong(m)?l[p]=hi(m,e.dataType):l[p]=m}}return a}static fromData(e,n,r){return new j0(n,r,void 0,void 0,e)}static fromOrtTensor(e){if(!e)throw new Error("cannot construct Value from an empty tensor");let n=We.tensorDimsFromORTFormat(e),r=We.tensorDataTypeFromProto(e.dataType()),a=new j0(n,r);if(r==="string")for(let i=0;i<e.stringDataLength();i++)a.data[i]=e.stringData(i);else if(e.rawDataArray()&&typeof e.rawDataLength()=="number"&&e.rawDataLength()>0){let i=a.data,l=new DataView(e.rawDataArray().buffer,e.rawDataArray().byteOffset,e.rawDataLength()),p=Fu(e.dataType()),m=e.rawDataLength()/p;if(e.rawDataLength()%p!==0)throw new Error("invalid buffer length");if(i.length!==m)throw new Error("buffer length mismatch");for(let s=0;s<m;s++){let h=$u(l,e.dataType(),s*p);i[s]=h}}return a}}});function H(t){return t===1?jd:Yd}function Nu(t){let e=H(t);return`${e.version}
      precision highp float;
      ${e.attribute} vec3 position;
      ${e.attribute} vec2 textureCoord;

      ${e.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`}function Ru(t){let e=H(t);return`${e.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${e.varyingFrag} vec2 TexCoords;
    ${e.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `}function Mu(t,e){let n=H(t);return`
  void main() {
    int indices[${e}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${n.output} = result;
  }
  `}var jd,Yd,we=L$2(()=>{jd={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},Yd={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"}}),ae=L$2(()=>{});async function mi(t,e=r=>0,n){return new Promise((r,a)=>{let i=0,l=()=>{if(t()){r();return}i++;let p=e(i);setTimeout(l,p)};l()})}function Yn(t){return Fr(typeof t<"u"&&t.length!==0,()=>"empty string found for sampler name"),"get"+t.charAt(0).toUpperCase()+t.slice(1)}function Gu(t){return Fr(typeof t<"u"&&t.length!==0,()=>"empty string found for sampler name"),"get"+t.charAt(0).toUpperCase()+t.slice(1)+"AtOutCoords"}function $r(t,e){let n=JSON.parse(JSON.stringify(t));return n=e,n}function kr(t,e){return e.map(n=>t[n]).join(", ")}function Qe(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function Dt(t=6){return["x","y","z","w","u","v"].slice(0,t)}var Bt=L$2(()=>{fe()});function Xd(t,e){return Dt(e).map(n=>`${t}.${n}`)}function Br(t,e){return e===1?[t]:Xd(t,e)}function Nt(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}var Tr=L$2(()=>{Bt()});function Jd(t,e,n){if(t===0)return"false";if(t===1)return`rc > ${e[0]}`;let r="";for(let a=t-2;a<t;a++)r+=`${n[a]} >= ${e[a-t+2]}`,a<t-1&&(r+="||");return r}function Zd(t,e){let n=t.length;if(n===0)return"getA(), 0, 0, 0";if(n===1)return`getA(rc),
            rc + 1 >= ${t[0]} ? 0. : getA(rc + 1),
            0, 0`;let r="r, c",a="r, cp1",i="rp1, c",l="rp1, cp1",p="";if(n>2)for(let m=0;m<n-2;++m)p=p+`${e[m]},`;return`getA(${p}${r}),
          rEdge ? 0. : getA(${p}${i}),
          cEdge ? 0. : getA(${p}${a}),
          rEdge || cEdge ? 0. : getA(${p}${l})`}function Qd(t,e,n,r){return t===0||t===1?"":`
    int r = ${e[t-2]};
    int c = ${e[t-1]};
    int rp1 = ${e[t-2]} + 1;
    int cp1 = ${e[t-1]} + 1;
    bool rEdge = rp1 >= ${r};
    bool cEdge = cp1 >= ${n};
    `}var Uu,Kd,zu,Vu=L$2(()=>{we(),ae(),Bt(),Tr(),Uu={name:"pack",inputNames:["A"],inputTypes:[1]},Kd=(t,e)=>{let n=H(t.session.backend.glContext.version),r=e.dims,a=r.length,i=e.dims.length,l=Qe(i),p=Br("rc",i),m=Qd(i,p,r[r.length-2],r[r.length-1]),s;a===0?s=[1,1]:a===1?s=[r[0],1]:s=[r[i-1],r[i-2]];let h=Jd(i,s,p),f=Zd(r,p),v=`
        void main() {
          ${l} rc = getOutputCoords();

          if(${h}) {
            ${n.output} = vec4(0);
          } else {
            ${m}

            ${n.output} = vec4(${f});
          }
        }
      `;return{...Uu,hasMain:!0,output:{dims:e.dims,type:e.type,textureType:2},shaderSource:v}},zu=(t,e)=>({...Uu,get:()=>Kd(t,e)})});function bi(t){if(t.length===0)return[1,1,1];let e=1;for(let n=0;n<t.length-2;++n)e*=t[n];return[e,t.length>1?t[t.length-2]:1,t[t.length-1]]}function Hu(t,e){let n=!1;return t.length===0||e.length===0?n=!0:t.length<2||e.length<2?n=t[t.length-1]===e[e.length-1]:n=t[t.length-1]===e[e.length-1]&&t[t.length-2]===e[e.length-2],n}function rh(t){let e=U.computeStrides(t),n=["b","r","c"],r="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e.map((a,i)=>{let l=`int ${n[i]} = ${r} / ${a}`,p=i===e.length-1?`int ${n[i+1]} = ${r} - ${n[i]} * ${a}`:`index -= ${n[i]} * ${a}`;return`${l}; ${p};`}).join("")}
      return ivec3(b, r, c);
    }
  `}function nh(t){let e=U.computeStrides(t);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${e[0]} + coords.z * ${e[1]} + coords.y;
  }
`}var eh,th,Wu,qu=L$2(()=>{fe(),we(),ae(),Tr(),eh=t=>({name:"Reshape (packed)",inputTypes:[2],inputNames:["A"],cacheHint:`${t}`}),th=(t,e,n,r)=>{let a=e.dims,i=r,l="";for(let s=0;s<4;s++){let h="";switch(s){case 0:h="outputCoords = rc;";break;case 1:h="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:h="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:h="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}l+=`
        ${h}
        ${s>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${s}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${s>0?"}":""}
      `}let p=H(t.session.backend.glContext.version),m=`
      ${rh(a)}
      ${nh(i)}
      ${Nt()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${i[2]};
        int cols = ${i[1]};

        ${l}
        ${p.output} = result;
      }
    `;return{...n,output:{dims:i,type:e.type,textureType:2},shaderSource:m,hasMain:!0}},Wu=(t,e,n)=>{let r=eh(n);return{...r,get:()=>th(t,e,r,n)}}}),gi,ju=L$2(()=>{we(),ae(),gi=(t,e)=>{let n=e.shape,r=H(t.session.backend.glContext.version),a=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${r.texture2D}(X,TexCoords).r;
      ${r.output} = encodeAsUint8(value);
    }`,i={name:"Uint8Encode",inputTypes:[0],inputNames:["X"],output:{dims:n,type:e.tensor.type,textureType:3},shaderSource:a,hasMain:!0};return t.executeProgram(i,[e.tensor])}});function ih(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}var Yu,oh,Xu,Ku=L$2(()=>{we(),ae(),Bt(),Tr(),Yu={name:"unpack",inputNames:["A"],inputTypes:[2]},oh=(t,e)=>{let n=e.dims.length,r=Br("rc",n),a=r.slice(-2),i=Qe(n),l=Nt(),p=e.dims.length===0?"":ih(n,r),m=n<=1?"rc":`vec2(${a.join(",")})`,s=H(t.session.backend.glContext.version),h=`
    ${l}
    void main() {
      ${i} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${p});

       ${s.output} = vec4(getChannel(packedInput, ${m}), 0, 0, 0);
     }
   `;return{...Yu,hasMain:!0,output:{dims:e.dims,type:e.type,textureType:0},shaderSource:h}},Xu=(t,e)=>({...Yu,get:()=>oh(t,e)})}),Xn,un,Kn,ln=L$2(()=>{lt(),Xn=class{constructor(t,e=1){if(e===1)this.internalFormat=t.R32F,this.format=t.RED,this.textureType=t.FLOAT,this.channelSize=e;else if(e===4)this.internalFormat=t.RGBA32F,this.format=t.RGBA,this.textureType=t.FLOAT,this.channelSize=e;else throw new Error(`Invalid number of channels: ${e}`)}encode(t,e){let n,r;return t.constructor!==Float32Array&&(ce.warning("Encoder","data was not of type Float32; creating new Float32Array"),r=new Float32Array(t)),e*this.channelSize>t.length?(ce.warning("Encoder","Source data too small. Allocating larger array"),r=t,n=this.allocate(e*this.channelSize),r.forEach((a,i)=>n[i]=a)):(r=t,n=r),n}allocate(t){return new Float32Array(t*4)}decode(t,e){return this.channelSize===1?t.filter((n,r)=>r%4===0).subarray(0,e):t.subarray(0,e)}},un=class{constructor(t,e=1,n){if(e!==1&&e!==4)throw new Error(`Invalid number of channels: ${e}`);this.internalFormat=t.RGBA,this.format=t.RGBA,this.channelSize=e,this.textureType=n||t.FLOAT}encode(t,e){let n=t;return this.channelSize===1&&(ce.verbose("Encoder","Exploding into a larger array"),n=this.allocate(e),t.forEach((r,a)=>n[a*4]=r)),n}allocate(t){return new Float32Array(t*4)}decode(t,e){return this.channelSize===1?t.filter((n,r)=>r%4===0).subarray(0,e):t.subarray(0,e)}},Kn=class{constructor(t,e=1){if(this.channelSize=4,e===1)this.internalFormat=t.ALPHA,this.format=t.ALPHA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=e;else if(e===4)this.internalFormat=t.RGBA,this.format=t.RGBA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=e;else throw new Error(`Invalid number of channels: ${e}`)}encode(t,e){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}allocate(t){return new Uint8Array(t*this.channelSize)}decode(t,e){if(t instanceof Uint8Array)return t.subarray(0,e);throw new Error(`Invalid array type: ${t.constructor}`)}}}),fn,Ju,yi,Zu=L$2(()=>{fe(),ae(),fn=(t,e,n)=>{let r=n===0||n===1?1:4,a=n===2,i=n===1||n===2,l=n===4?e.length-1:void 0,p=n===4?e.map((m,s)=>s===e.length-1?m*4:m):void 0;return yi(t,e,r,p,{isPacked:a,reverseWH:i,breakAxis:l})},Ju=(t,e,n)=>{let r=fn(t,e,n);return[r.width,r.height]},yi=(t,e,n=1,r,a)=>{let i=!!(a&&a.isPacked),[l,p]=t.computeTextureWH(i&&r||e,a),m=e.length,s=e.slice(0);if(m===0&&(s=[1]),n===1)r=e;else if(i){if(n!==4)throw new Error("a packed texture must be 4-channel");r=e,m>0&&(s[m-1]=Math.ceil(s[m-1]/2)),m>1&&(s[m-2]=Math.ceil(s[m-2]/2))}else if(!r)throw new Error("Unpacked shape is needed when using channels > 1");return{width:l,height:p,channels:n,isPacked:i,shape:s,strides:U.computeStrides(s),unpackedShape:r,reversedWH:a&&a.reverseWH}}}),sh,Jn,el=L$2(()=>{lt(),yr(),fe(),Vu(),qu(),ju(),Ku(),ln(),Zu(),ae(),sh=(t,e)=>{let n=e.map(a=>`${a.unpackedShape.join(",")};${a.width}x${a.height}`).join("_"),r=t.name;return t.cacheHint&&(r+="["+t.cacheHint+"]"),r+=":"+n,r},Jn=class{constructor(t){this.session=t,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(t,e){return Ju(this.session.layoutStrategy,t,e)}executeProgram(t,e){if(e.length<t.inputNames.length)throw new Error(`Input size mustn't be less than ${t.inputNames.length}.`);if(t.inputNames.length!==t.inputTypes.length)throw new Error("input names size does not match input types");let n=[];for(let m=0;m<t.inputNames.length;++m)n[m]=this.getOrCreateTextureData(e[m],t.inputTypes[m]);let r=sh(t,n),a=this.session.programManager.getArtifact(r),i=a?a.programInfo:typeof t.get=="function"?t.get():t,l=fn(this.session.layoutStrategy,i.output.dims,i.output.textureType),p=this.createTextureData(l,i.output.type);return a||(a=this.session.programManager.build(i,n,p),this.session.programManager.setArtifact(r,a)),this.runProgram(a,n,p),p}run(t,e){return this.executeProgram(t,e).tensor}runProgram(t,e,n){for(let r=0;r<e.length;++r)if(!!e[r].isPacked!=(t.programInfo.inputTypes[r]===2))throw new Error(`input[${r}] property packed inconsistent`);if(!!n.isPacked!=(t.programInfo.output.textureType===2))throw new Error("output property packed inconsistent");this.session.programManager.run(t,e,n)}getOrCreateTextureData(t,e){let n=this.getTextureData(t.dataId,e===2);if(!n&&(n=this.getTextureData(t.dataId,e!==2),n))return e===2?this.pack(n):this.unpack(n);if(!n){let r=fn(this.session.layoutStrategy,t.dims,e);if(e===4){let a=t.dims;if(a.length===4){let i=[a[0],Math.ceil(a[1]*a[2]*a[3]/4)],l=fn(this.session.layoutStrategy,i,e),p=t.numberData;if(a[1]*a[2]*a[3]%4!==0){let m=a[0],s=a[1]*a[2]*a[3],h=Math.ceil(s*1/4)*4,f=m*h;p=new Float32Array(f);for(let v=0;v<m;++v){let I=v*s,G=v*h+v%1*s;p.set(t.numberData.subarray(I,I+s),G)}}return this.createTextureData(l,t.type,p,t,1)}}if(e===2){let a=yi(this.session.layoutStrategy,t.dims,1,[],{reverseWH:!0}),i=this.createTextureData(a,t.type,t.numberData,t,1);n=this.pack(i)}else n=this.createTextureData(r,t.type,t.numberData,t,1)}return n}createTextureDataFromLayoutBindTensor(t,e,n,r){return this.createTextureData(t,e,n,r,1)}createTextureData(t,e,n,r,a){ce.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(t)}]`);let i=this.session.textureManager.createTextureFromLayout(e,t,n,a);return this.createTextureDataFromTexture(t,e,i,r)}reshapeUnpacked(t,e){let n=this.getOrCreateTextureData(t,0),r={channels:n.channels,height:n.height,width:n.width,shape:e.length!==0?e:[1],strides:U.computeStrides(e),unpackedShape:e};return this.createTextureDataFromTexture(r,t.type,n.texture).tensor}reshapePacked(t,e){let n=this.getOrCreateTextureData(t,2);if(Hu(t.dims,e)){let p={channels:n.channels,height:n.height,width:n.width,shape:e.length!==0?e:[1],strides:U.computeStrides(e),unpackedShape:e,isPacked:!0};return this.createTextureDataFromTexture(p,t.type,n.texture).tensor}let r=bi(t.dims),a=bi(e),i=this.reshapePacked(t,r),l=this.run(Wu(this,i,a),[i]);return this.reshapePacked(l,e)}cast(t,e){let n=this.getOrCreateTextureData(t,0);return this.createTextureDataFromTexture(n,e,n.texture).tensor}createTextureDataFromTexture(t,e,n,r,a){let i={...t,tensor:r||new $e(t.unpackedShape,e,l=>this.readTexture(i),async l=>this.readTextureAsync(i),void 0,a),texture:n};return this.setTextureData(i.tensor.dataId,i,t.isPacked),i}getTextureData(t,e=!1){return this.session.isInitializer(t)?this.session.getTextureData(t,e):e?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)}setTextureData(t,e,n=!1){this.session.isInitializer(t)?this.session.setTextureData(t,e,n):(n?this.packedTextureDataCache:this.unpackedTextureDataCache).set(t,e)}isTextureLayoutCached(t,e=!1){return!!this.getTextureData(t.dataId,e)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(t=>this.session.textureManager.releaseTexture(t)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(t=>this.session.textureManager.releaseTexture(t)),this.unpackedTextureDataCache=new Map}readTexture(t){return t.isPacked?this.readTexture(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat(gi(this,t))}async readTextureAsync(t){return t.isPacked?this.readTextureAsync(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat(gi(this,t))}pack(t){return this.executeProgram(zu(this,t.tensor),[t.tensor])}unpack(t){return this.executeProgram(Xu(this,t.tensor),[t.tensor])}}}),Ti,Q,Ue=L$2(()=>{Ti=class{constructor(t){Object.assign(this,t)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(t=>`${this[t]}`).join(";")),this.key}},Q=t=>new Ti(t)}),tl,rl,nl,uh,lh,ol=L$2(()=>{Ue(),we(),ae(),tl={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[0,0,0,0,0]},rl=(t,e,n)=>(lh(e),[t.run({...tl,cacheHint:n.cacheKey,get:()=>uh(t,e,n)},e)]),nl=t=>{let e=t.attributes.getFloat("epsilon",1e-5),n=t.attributes.getFloat("momentum",.9),r=t.attributes.getInt("spatial",1);return Q({epsilon:e,momentum:n,spatial:r})},uh=(t,e,n)=>{let r=H(t.session.backend.glContext.version),a=e[0].dims.length,[i,l]=t.calculateTextureWidthAndHeight(e[1].dims,0),p=`
  float process(int[${a}] indices) {
    vec2 position = offsetToCoords(indices[1], ${i}, ${l});
    float scale = getColorAsFloat(${r.texture2D}(Scale, position));
    float mean = getColorAsFloat(${r.texture2D}(Mean, position));
    float variance = getColorAsFloat(${r.texture2D}(Variance, position));
    float b = getColorAsFloat(${r.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${n.epsilon})) ) + b;
  }`;return{...tl,output:{dims:e[0].dims,type:e[0].type,textureType:0},shaderSource:p}},lh=t=>{if(!t||t.length!==5)throw new Error("BatchNormalization requires 5 inputs.");let e=t[0],n=t[1],r=t[2],a=t[3],i=t[4];if(e.dims.length<3||n.dims.length!==1||r.dims.length!==1||a.dims.length!==1||i.dims.length!==1)throw new Error("invalid input shape.");if(n.dims[0]!==e.dims[1]||r.dims[0]!==e.dims[1]||a.dims[0]!==e.dims[1]||i.dims[0]!==e.dims[1])throw new Error("invalid input shape.");if(e.type!=="float32"&&e.type!=="float64"||n.type!=="float32"&&n.type!=="float64"||r.type!=="float32"&&r.type!=="float64"||a.type!=="float32"&&a.type!=="float64"||i.type!=="float32"&&i.type!=="float64")throw new Error("invalid input tensor types.")}}),Zn,dt,R,cn,Qn,Wt=L$2(()=>{Zn=class{constructor(t,e,n,r){this.glContext=t,this.programInfo=e,this.inputTextureLayouts=n,this.outputTextureLayout=r}},dt=class{constructor(t){this.context=t}},R=class{constructor(t,e){this.routineBody=t,this.dependencies=e}},cn=class{constructor(t,e,n){this.name=t,n?this.dependencies=n:this.dependencies=[],e&&(this.routineBody=e)}addDependency(t){t&&this.dependencies.push(t)}},Qn=class{static returnOrderedNodes(t){if(!t||t.length===0)return[];if(t.length===1)return t;let e=new Set,n=new Set,r=new Array;return this.createOrderedNodes(t,e,n,r),r}static createOrderedNodes(t,e,n,r){for(let a=0;a<t.length;++a)this.dfsTraverse(t[a],e,n,r)}static dfsTraverse(t,e,n,r){if(!t||n.has(t.name))return;if(e.has(t.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");e.add(t.name);let a=t.dependencies;if(a&&a.length>0)for(let i=0;i<a.length;++i)this.dfsTraverse(a[i],e,n,r);r.push(t),n.add(t.name),e.delete(t.name)}}});function ch(){let t="add_";return{body:`
  float ${t}(float a, float b) {
    return a + b;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:t,type:0}}function ph(){let t="div_";return{body:`
  float ${t}(float a, float b) {
    return a / b;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:t,type:0}}function dh(){let t="mul_";return{body:`
  float ${t}(float a, float b) {
    return a * b;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:t,type:0}}function hh(){let t="sub_";return{body:`
  float ${t}(float a, float b) {
    return a - b;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:t,type:0}}function mh(){let t="equal_";return{body:`
  float ${t}(float a, float b) {
    return float(a == b);
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:t,type:0}}function bh(){let t="greater_";return{body:`
  float ${t}(float a, float b) {
    return float(a > b);
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:t,type:0}}function gh(){let t="less_";return{body:`
  float ${t}(float a, float b) {
    return float(a < b);
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:t,type:0}}function yh(){let t="and_";return{body:`
  float ${t}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:t,type:0}}function Th(){let t="or_";return{body:`
  float ${t}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:t,type:0}}function xh(){let t="xor_";return{body:`
  float ${t}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:t,type:0}}function wh(){return _h("pow")}function vh(){let t="prelu_";return{body:`
  float ${t}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:t,type:0}}function _h(t){let e=`${t}_`;return{body:`
  float ${e}(float a, float b) {
    return ${t}(a, b);
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return ${t}(v1, v2);
  }
  `,name:e,type:0}}var ht,Oh,il,al,sl,ul,ll,fl,cl,pl,dl,hl,ml,bl,gl=L$2(()=>{fe(),Wt(),we(),ae(),ht=(t,e,n,r=e[0].type,a)=>{let i=t.session.pack?2:0;return{name:n.name,inputNames:["A","B"],inputTypes:[i,i],cacheHint:a,get:()=>Oh(t,e,n,r)}},Oh=(t,e,n,r=e[0].type)=>{let a=t.session.pack?2:0,i=!U.areEqual(e[0].dims,e[1].dims),l=e[0].dims,p=t.session.pack;if(i){let h=Ze.calcShape(e[0].dims,e[1].dims,!1);if(!h)throw new Error("Can't perform binary op on the given tensors");l=h;let f=l.length,v=e[0].dims.length!==0?e[0].dims.length:1,I=e[1].dims.length!==0?e[1].dims.length:1,G=e[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",W=e[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",X=H(t.session.backend.glContext.version),ge=p?`
      ${n.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${n.name}(a, b);
        ${X.output} = result;
      }`:`
      ${n.body}
      float process(int indices[${f}]) {
        int aindices[${v}];
        int bindices[${I}];
        ${G}
        ${W}
        return ${n.name}(_A(aindices), _B(bindices));
      }`;return{name:n.name,inputNames:["A","B"],inputTypes:[a,a],output:{dims:l,type:r,textureType:a},shaderSource:ge,hasMain:p}}let m=H(t.session.backend.glContext.version),s=`
    ${n.body}
    void main() {
      vec4 v1 = ${m.texture2D}(A, TexCoords);
      vec4 v2 = ${m.texture2D}(B, TexCoords);
      vec4 result = ${n.name}(v1, v2);
      ${m.output} = result;
    }
    `;return{name:n.name,inputNames:["A","B"],inputTypes:[a,a],output:{dims:e[0].dims,type:r,textureType:a},shaderSource:s,hasMain:!0}},il=(t,e)=>[t.run(ht(t,e,ch()),e)],al=(t,e)=>[t.run(ht(t,e,yh(),"bool"),e)],sl=(t,e)=>[t.run(ht(t,e,ph()),e)],ul=(t,e)=>[t.run(ht(t,e,mh(),"bool"),e)],ll=(t,e)=>[t.run(ht(t,e,bh(),"bool"),e)],fl=(t,e)=>[t.run(ht(t,e,gh(),"bool"),e)],cl=(t,e)=>[t.run(ht(t,e,dh()),e)],pl=(t,e)=>[t.run(ht(t,e,Th(),"bool"),e)],dl=(t,e)=>[t.run(ht(t,e,wh()),e)],hl=(t,e)=>[t.run(ht(t,e,vh()),e)],ml=(t,e)=>[t.run(ht(t,e,hh()),e)],bl=(t,e)=>[t.run(ht(t,e,xh(),"bool"),e)]}),yl,Tl,Sh,xl=L$2(()=>{fe(),yl=(t,e,n)=>(Sh(e),[t.cast(e[0],n)]),Tl=t=>We.tensorDataTypeFromProto(t.attributes.getInt("to")),Sh=t=>{if(!t||t.length!==1)throw new Error("Cast requires 1 input.");if(t[0].type==="string")throw new Error("Invalid input type.")}}),Ah,Ph,wl,eo,vl=L$2(()=>{we(),ae(),Bt(),Tr(),Ah=(t,e)=>({name:"Concat (packed)",inputNames:Array.from({length:t},(n,r)=>`X${r}`),inputTypes:Array(t).fill(2),cacheHint:e}),Ph=(t,e,n,r)=>{let a=n[0].dims.slice();if(r>=a.length||r<-1*a.length)throw new Error("axis specified for concat doesn't match input dimensionality");r<0&&(r=a.length+r);let i=a.slice(0);for(let rt=1;rt<n.length;rt++){let qt=n[rt].dims.slice();for(let de=0;de<a.length;de++)if(de===r)i[r]+=qt[de];else if(a[de]!==qt[de])throw new Error("non concat dimensions must match")}let l=i.length,p=Br("coords",l),m=Qe(l),s=Nt(),h=n.map(rt=>rt.dims),f=Dt(l),v=new Array(h.length-1);v[0]=h[0][r];for(let rt=1;rt<v.length;rt++)v[rt]=v[rt-1]+h[rt][r];let I=f[r],G=f.slice(-2),W=f.join(),X=`if (${I} < ${v[0]}) {
        return getChannel(
            getX0(${W}), vec2(${G.join()}));
        }`;for(let rt=1;rt<v.length;rt++){let qt=v[rt-1];X+=`
            if (${I} < ${v[rt]}  && ${I} >= ${v[rt-1]}) {
              return getChannel(
                getX${rt}(${eo(f,I,qt)}),
                vec2(${eo(G,I,qt)}));
            }`}let ge=v.length,ie=v[v.length-1];X+=`
            return getChannel(
              getX${ge}(${eo(f,I,ie)}),
              vec2(${eo(G,I,ie)}));`;let Pe=H(t.session.backend.glContext.version),je=`
          ${s}
          float getValue(${f.map(rt=>"int "+rt)}) {
            ${X}
          }

          void main() {
            ${m} coords = getOutputCoords();
            int lastDim = coords.${f[l-1]};
            coords.${f[l-1]} = coords.${f[l-2]};
            coords.${f[l-2]} = lastDim;

            vec4 result = vec4(getValue(${p}), 0., 0., 0.);

            ${p[l-1]} = ${p[l-1]} + 1;
            if (${p[l-1]} < ${i[l-1]}) {
              result.g = getValue(${p});
            }

            ${p[l-2]} = ${p[l-2]} + 1;
            if (${p[l-2]} < ${i[l-2]}) {
              result.a = getValue(${p});
            }

            ${p[l-1]} = ${p[l-1]} - 1;
            if (${p[l-2]} < ${i[l-2]} &&
                ${p[l-1]} < ${i[l-1]}) {
              result.b = getValue(${p});
            }
            ${Pe.output} = result;
          }
        `;return{...e,output:{dims:i,type:n[0].type,textureType:2},shaderSource:je,hasMain:!0}},wl=(t,e,n)=>{let r=Ah(e.length,n.cacheKey);return{...r,get:()=>Ph(t,r,e,n.axis)}},eo=(t,e,n)=>{let r=t.indexOf(e);return t.map((a,i)=>i===r?`${a} - ${n}`:a).join()}}),_l,Eh,Dh,Lh,Ol,Ch,Fh,$h,Il,kh,Sl=L$2(()=>{Ue(),ae(),vl(),_l=(t,e,n)=>(kh(e),t.session.pack&&e[0].dims.length>1?[t.run(wl(t,e,n),e)]:[t.run(Lh(t,e,n),e)]),Eh=(t,e)=>({name:"Concat",inputNames:Array.from({length:t},(n,r)=>`X${r}`),inputTypes:Array(t).fill(0),cacheHint:e}),Dh=(t,e,n,r)=>{let a=n[0].dims.slice();if(r>=a.length||r<-1*a.length)throw new Error("axis specified for concat doesn't match input dimensionality");r<0&&(r=a.length+r);let i=a.slice(0);for(let I=1;I<n.length;I++){let G=n[I].dims.slice();for(let W=0;W<a.length;W++)if(W===r)i[r]+=G[W];else if(a[W]!==G[W])throw new Error("non concat dimensions must match")}let l=i.length,p=new Array(n.length),m=0;for(let I=0;I<p.length;++I)m+=n[I].dims[r],p[I]=m;let s="";n.length<5?s=Ol(p):s=Ch(p);let h=Fh(n.length,l),f=$h(p),v=`
        ${h}
        ${f}
        ${s}
        float process(int indices[${l}]) {
          int textureIndex = getTextureWhereDataResides (indices[${r}]);

          if(textureIndex != 0) {
            indices[${r}] = indices[${r}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return{...e,output:{dims:i,type:n[0].type,textureType:0},shaderSource:v}},Lh=(t,e,n)=>{let r=Eh(e.length,n.cacheKey);return{...r,get:()=>Dh(t,r,e,n.axis)}},Ol=t=>`int getTextureWhereDataResides(int index) {
      ${t.map((e,n)=>`if(index<${e}) {return ${n};}
`).join("")}
    }`,Ch=t=>Ol(t),Fh=(t,e)=>{let n=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${e}]) {`];for(let r=0;r<t;++r)r===0?n.push(`	if (textureIndex == ${r}) { return _X${r}(indices); }`):r===t-1?n.push(`	else { return _X${r}(indices); }`):n.push(`	else if (textureIndex == ${r}) { return _X${r}(indices); }`);return n.push("	}"),n.join(`
`)},$h=t=>{let e=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let n=0;n<t.length;++n)n===0?e.push(`	if (index == ${n}) { return ${t[n]}; }`):n===t.length-1?e.push(`	else { return ${t[n]}; }`):e.push(`	else if (index == ${n}) { return ${t[n]}; }`);return e.push("	}"),e.join(`
`)},Il=t=>Q({axis:t.attributes.getInt("axis")}),kh=t=>{if(!t||t.length<1)throw new Error("too few inputs");let e=t[0].type,n=t[0].dims.length;if(e==="string")throw new Error("string tensor is not supported yet");for(let r of t){if(r.type!==e)throw new Error("input tensors should be one type");if(r.dims.length!==n)throw new Error("input tensors should have the same shape")}}});function Bh(){return mt("abs")}function Nh(){return mt("acos")}function Rh(){return mt("asin")}function Mh(){return mt("atan")}function Gh(){return mt("ceil")}function Uh(){return mt("cos")}function zh(t){let e="elu";return{body:`
  const float alpha = float(${t});

  float ${e}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${e}_(vec4 v) {
    return vec4(${e}_(v.x), ${e}_(v.y), ${e}_(v.z), ${e}_(v.w));
  }
  `,name:e,type:0}}function Vh(){return mt("exp")}function Wh(){return mt("floor")}function xi(t,e){let n="clip";return{body:`
  const float min = float(${t});
  const float max = float(${e});

  float ${n}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${n}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:n,type:0}}function Hh(){let t="indentity";return{body:`
  float ${t}_(float a) {
    return a;
  }
  vec4 ${t}_(vec4 v) {
    return v;
  }
  `,name:t,type:0}}function qh(t){let e="leakyRelu";return{body:`
  const float alpha = float(${t});

  float ${e}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${e}_(vec4 v) {
    return vec4(${e}_(v.x), ${e}_(v.y), ${e}_(v.z), ${e}_(v.w));
  }
  `,name:e,type:0}}function jh(){return mt("log")}function Yh(){let t="neg";return{body:`
  float ${t}_(float a) {
    return -a;
  }
  vec4 ${t}_(vec4 v) {
    return -v;
  }
  `,name:t,type:0}}function Xh(){let t="not";return{body:`
  float ${t}_(float a) {
    return float( ! bool(a) );
  }
  bool ${t}_(bool a) {
    return !a;
  }
  vec4 ${t}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${t}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:t,type:0}}function Kh(){return mt("sin")}function wi(){let t="relu";return{body:`
  float ${t}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${t}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:t,type:0}}function vi(){let t="sigmoid";return{body:`
  float ${t}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${t}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:t,type:0}}function Jh(){return mt("sqrt")}function Zh(){return mt("tan")}function Qh(){let t="tanh";return{body:`
  float ${t}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${t}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:t,type:0}}function mt(t){return{body:`
  float ${t}_(float a) {
    return ${t}(a);
  }
  vec4 ${t}_(vec4 v) {
    return ${t}(v);
  }
  `,name:t,type:0}}var em,Ee,Al,Pl,El,Dl,_i,Ll,Cl,tm,Fl,$l,kl,Bl,Nl,Rl,Oi,Ml,Gl,Ul,zl,Vl,Wl,Hl,ql,jl,Yl,Xl,Ii=L$2(()=>{Ue(),fe(),Wt(),we(),ae(),em=(t,e,n,r)=>{let a=t.session.pack?2:0,i=H(t.session.backend.glContext.version);return{...e,output:{dims:n.dims,type:n.type,textureType:a},shaderSource:`
     ${r.body}
     void main() {
       vec4 v = ${i.texture2D}(A, TexCoords);
       v = ${r.name}_(v);
       ${i.output} = v;
     }
     `,hasMain:!0}},Ee=(t,e,n,r)=>{let a=t.session.pack?2:0,i={name:n.name,inputTypes:[a],inputNames:["A"],cacheHint:r};return{...i,get:()=>em(t,i,e,n)}},Al=(t,e)=>[t.run(Ee(t,e[0],Bh()),e)],Pl=(t,e)=>[t.run(Ee(t,e[0],Nh()),e)],El=(t,e)=>[t.run(Ee(t,e[0],Rh()),e)],Dl=(t,e)=>[t.run(Ee(t,e[0],Mh()),e)],_i=(t,e,n)=>[t.run(Ee(t,e[0],xi(n.min,n.max),n.cacheKey),e)],Ll=t=>Q({min:t.attributes.getFloat("min",br),max:t.attributes.getFloat("max",gr)}),Cl=(t,e)=>{let n=tm(t,e);return _i(t,[e[0]],n)},tm=(t,e)=>{if(e.length>=3&&(!t.session.isInitializer(e[1].dataId)||!t.session.isInitializer(e[2].dataId)))throw new Error("dynamic clip attributes are not allowed");let n=e.length>=3?e[1].numberData[0]:br,r=e.length>=3?e[2].numberData[0]:gr;return Q({min:n,max:r})},Fl=(t,e)=>[t.run(Ee(t,e[0],Gh()),e)],$l=(t,e)=>[t.run(Ee(t,e[0],Uh()),e)],kl=(t,e,n)=>[t.run(Ee(t,e[0],zh(n.alpha),n.cacheKey),e)],Bl=t=>Q({alpha:t.attributes.getFloat("alpha",1)}),Nl=(t,e)=>[t.run(Ee(t,e[0],Vh()),e)],Rl=(t,e)=>[t.run(Ee(t,e[0],Wh()),e)],Oi=(t,e)=>[t.run(Ee(t,e[0],Hh()),e)],Ml=(t,e,n)=>[t.run(Ee(t,e[0],qh(n.alpha),n.cacheKey),e)],Gl=t=>Q({alpha:t.attributes.getFloat("alpha",.01)}),Ul=(t,e)=>[t.run(Ee(t,e[0],jh()),e)],zl=(t,e)=>[t.run(Ee(t,e[0],Yh()),e)],Vl=(t,e)=>[t.run(Ee(t,e[0],Xh()),e)],Wl=(t,e)=>[t.run(Ee(t,e[0],wi()),e)],Hl=(t,e)=>[t.run(Ee(t,e[0],vi()),e)],ql=(t,e)=>[t.run(Ee(t,e[0],Kh()),e)],jl=(t,e)=>[t.run(Ee(t,e[0],Jh()),e)],Yl=(t,e)=>[t.run(Ee(t,e[0],Zh()),e)],Xl=(t,e)=>[t.run(Ee(t,e[0],Qh()),e)]});function Rt(t){let e;switch(t.activation){case"Relu":e=wi();break;case"Sigmoid":e=vi();break;case"Clip":e=xi(t.clipMin,t.clipMax);break;default:return{activationFunction:"",applyActivation:""}}let n=e.name,r=e.body,a=`value = ${n}_(value);`;return{activationFunction:r,applyActivation:a}}var Nr,xr=L$2(()=>{fe(),Ii(),Nr=t=>{let e=t.getString("activation","");if(e==="Clip"){let[n,r]=t.getFloats("activation_params",[br,gr]);return{activation:e,clipMax:r,clipMin:n,activationCacheKey:`${e}:${n},${r}`}}return{activation:e,activationCacheKey:e}}}),nm,om,Kl,Jl=L$2(()=>{lt(),we(),ae(),to(),xr(),nm=(t,e)=>({name:"GroupedConv",inputNames:t?["X","W","Bias"]:["X","W"],inputTypes:t?[0,0,0]:[0,0],cacheHint:e}),om=(t,e,n,r)=>{let a=e.length>2?"value += getBias(output_channel);":"",i=e[0].dims.slice(),l=e[1].dims.slice(),p=l[0]/r.group;ce.verbose("GroupedConv",`autpPad:${r.autoPad}, dilations:${r.dilations}, group:${r.group}, kernelShape:${r.kernelShape}, pads:${r.pads}, strides:${r.strides}`);let m=Rr(i,l,r.dilations,r.pads,r.strides),s=H(t.session.backend.glContext.version),{activationFunction:h,applyActivation:f}=Rt(r),v=`
  const ivec2 strides = ivec2(${r.strides[0]}, ${r.strides[1]});
  const ivec2 pads = ivec2(${r.pads[0]}, ${r.pads[1]});
  ${h}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${p};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${l[1]}; wInChannel++) {
      int input_channel = group_id * ${l[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${l[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${r.dilations[0]};

        if (xHeight < 0 || xHeight >= ${i[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${l[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${r.dilations[1]};
          if (xWidth < 0 || xWidth >= ${i[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${a}
    ${f}
    ${s.output} = vec4(value, .0, .0, .0);
  }
`;return{...n,output:{dims:m,type:e[0].type,textureType:0},shaderSource:v,hasMain:!0}},Kl=(t,e,n)=>{let r=nm(e.length>2,n.cacheKey);return{...r,get:()=>om(t,e,r,n)}}}),im,am,Zl,Ql=L$2(()=>{we(),ae(),Tr(),im=t=>({name:"Im2Col (packed)",inputNames:["A"],inputTypes:[2],cacheHint:t}),am=(t,e,n,r,a,i)=>{let l=n.dims,p=r.dims,m=2,s=3,h=a.length,f=[p[1]*p[2]*p[3],a[2]*a[3]],v=p[2]*p[3],I=Nt(),G=H(t.session.backend.glContext.version),W="";for(let ge=0;ge<=1;ge++)for(let ie=0;ie<=1;ie++)W+=`
            blockIndex = rc.x + ${ie};
            pos = rc.y + ${ge};

            if(blockIndex < ${f[1]} && pos < ${f[0]}) {
              offsetY = int(blockIndex / (${a[h-1]})) * ${i.strides[0]} -
                ${i.pads[0]};
              d0 = offsetY + ${i.dilations[0]} * (imod(pos, ${v}) / ${p[2]});

              if(d0 < ${l[m]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${a[h-1]}) * ${i.strides[1]} -
                  ${i.pads[1]};
                d1 = offsetX + ${i.dilations[1]} * imod(imod(pos, ${v}), ${p[2]});

                if(d1 < ${l[s]} && d1 >= 0) {

                  ch = int(float(pos)/ ${v}.);
                    innerDims = vec2(d0, d1);
                    result[${ge*2+ie}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;let X=`
      ${I}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${W}
          ${G.output} = result;
      }
            `;return{...e,output:{dims:f,type:n.type,textureType:2},shaderSource:X,hasMain:!0}},Zl=(t,e,n,r,a)=>{let i=im(a.cacheKey);return{...i,get:()=>am(t,i,e,n,r,a)}}});function um(t,e,n){let r=e[0].dims,a=e[1].dims,i=Ze.calcShape(r,a,!0);if(!i)throw new Error("Can't use matmul on the given tensors");let l=Qe(i.length),p=Dt(),{activationFunction:m,applyActivation:s}=Rt(n),h=e.length>2,f=h?"value += getBiasForMatmul();":"",v=h?`${Ai(l,p,e[2].dims,i,!1)}`:"",I=i.length,G=r.length,W=a.length,X=r[r.length-1],ge=`
    ${m}
    ${v}
    float process(int indices[${I}]) {
        int a[${G}];
        int b[${W}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${X}; ++k) {
            a[${G-1}] = k;
            b[${W-2}] = k;
            value += _A(a) * _B(b);
        }
        ${f}
        ${s}
        return value;
    }`;return{...t,output:{dims:i,type:e[0].type,textureType:0},shaderSource:ge}}function Si(t,e){let n=sm(t.length>2,e.activationCacheKey);return{...n,get:()=>um(n,t,e)}}function Ai(t,e,n,r,a){let i="",l=n.length,p=r.length,m=p-l;p<2&&l>0?i="coords":i=n.map((v,I)=>`coords.${e[I+m]}`).join(", ");let s=Ze.getBroadcastDims(n,r).map(v=>`coords.${e[v+m]} = 0;`).join(`
`),h=U.size(n)===1,f="vec4(outputValue.xx, outputValue.yy)";return h&&(f="vec4(outputValue.x)"),a?`
vec4 getBiasForMatmul() {
  ${t} coords = getOutputCoords();
  ${s}
  vec4 outputValue = getBias(${i});
  return ${f};
}`:`
float getBiasForMatmul() {
  ${t} coords = getOutputCoords();
  ${s}
  return getBias(coords.x);
}`}var ef,tf,sm,lm,ro=L$2(()=>{fe(),ae(),Bt(),xr(),Pi(),ef=(t,e,n)=>(lm(e),t.session.pack?[t.run(no(t,e,n),e)]:[t.run(Si(e,n),e)]),tf=t=>Nr(t.attributes),sm=(t,e)=>({name:"MatMul",inputNames:t?["A","B","Bias"]:["A","B"],inputTypes:t?[0,0,0]:[0,0],cacheHint:e}),lm=t=>{if(!t||t.length!==2)throw new Error("MatMul requires 2 inputs.");if(t[0].dims[t[0].dims.length-1]!==t[1].dims[t[1].dims.length-2])throw new Error("shared dimension does not match.");if(t[0].type!=="float32"&&t[0].type!=="float64"||t[1].type!=="float32"&&t[1].type!=="float64")throw new Error("inputs should be float type");if(t[0].type!==t[1].type)throw new Error("inputs types should match")}});function pm(t,e,n,r){let a=[],i=[],l=n[0].dims,p=n[1].dims,m=l.length,s=p.length,h=r.length,f=h-m,v=h-s;a=l.map((ie,Pe)=>`coords.${e[Pe+f]}`),a[m-1]="i*2",a.join(", "),i=p.map((ie,Pe)=>`coords.${e[Pe+v]}`),i[s-2]="i*2",i.join(", ");let I=Ze.getBroadcastDims(l,r),G=Ze.getBroadcastDims(p,r),W=I.map(ie=>`coords.${e[ie+f]} = 0;`).join(`
`),X=G.map(ie=>`coords.${e[ie+v]} = 0;`).join(`
`),ge=`int lastDim = coords.${e[h-1]};
  coords.${e[h-1]} = coords.${e[h-2]};
  coords.${e[h-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${t} coords = getOutputCoords();
  ${ge}
  ${W}
  vec4 outputValue = getA(${a});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${t} coords = getOutputCoords();
  ${ge}
  ${X}
  vec4 outputValue = getB(${i});
  return outputValue;
}`}function dm(t,e){let n="";for(let r=0;r<e-2;r++)n+=`rc.${t[r]}, `;return n+=`rc.${t[e-2]}, i*2`,n}function hm(t,e){let n="";for(let r=0;r<e-2;r++)n+=`rc.${t[r]}, `;return n+=`i*2, rc.${t[e-1]}`,n}var fm,cm,no,Pi=L$2(()=>{fe(),we(),ae(),Bt(),xr(),ro(),fm=(t,e)=>({name:"MatMul (packed)",inputNames:t?["A","B","Bias"]:["A","B"],inputTypes:t?[2,2,2]:[2,2],cacheHint:e}),cm=(t,e,n,r)=>{let a=n.length>2,i=a?"value += getBiasForMatmul();":"",l=n[0].dims,p=n[1].dims,m=Ze.calcShape(l,p,!0),s=!U.areEqual(n[0].dims,n[1].dims);if(!m)throw new Error("Can't use matmul on the given tensors");let h=l[l.length-1],f=Math.ceil(h/2),v=l.length,I=p.length,G=H(t.session.backend.glContext.version),W=Qe(m.length),X=m.length,ge=Dt(),{activationFunction:ie,applyActivation:Pe}=Rt(r),je=a?`${Ai(W,ge,n[2].dims,m,!0)}`:"",rt=s?`${pm(W,ge,n,m)}`:"",qt=s?"getAAtOutCoordsMatmul(i)":`getA(${dm(ge,v)})`,de=s?"getBAtOutCoordsMatmul(i)":`getB(${hm(ge,I)})`,se=s?"":`${W} rc =
          getOutputCoords(); int lastDim = rc.${ge[X-1]}; rc.${ge[X-1]} =
          rc.${ge[X-2]}; rc.${ge[X-2]} = lastDim;
      `,he=`
            ${rt}
            ${je}
            ${ie}
            void main() {
              ${se}

              vec4 value = vec4(0);
              for (int i = 0; i < ${f}; i++) {
                vec4 a = ${qt};
                vec4 b = ${de};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${i}
              ${Pe}
              ${G.output} = value;
            }`;return{...e,output:{dims:m,type:n[0].type,textureType:2},shaderSource:he,hasMain:!0}},no=(t,e,n)=>{let r=fm(e.length>2,n.activationCacheKey);return{...r,get:()=>cm(t,r,e,n)}}}),rf,nf=L$2(()=>{to(),Ql(),Pi(),rf=(t,e,n)=>{let r=e[0].dims,a=e[1].dims,i=Rr(r,a,n.dilations,n.pads,n.strides),l=t.run(Zl(t,e[0],e[1],i,n),[e[0]]),p=t.reshapePacked(e[1],[a[0],a[1]*a[2]*a[3]]),m=e.length===3?[p,l,e[2]]:[p,l],s=t.run(no(t,m,n),m);return t.reshapePacked(s,i)}}),mm,bm,of,Ei,Di=L$2(()=>{ae(),mm=t=>({name:"Im2Col",inputNames:["X"],inputTypes:[0],cacheHint:t}),bm=(t,e,n,r,a,i)=>{let l=n.dims,p=r.dims,m=a.length,s=Ei(l,p,a,4),h=`
        const int XC = ${l[1]};
        const int XH = ${l[2]};
        const int XW = ${l[3]};
        const int KH = ${i.kernelShape[0]};
        const int KW = ${i.kernelShape[1]};
        const int dilationH = ${i.dilations[0]};
        const int dilationW = ${i.dilations[1]};
        const int strideH = ${i.strides[0]};
        const int strideW = ${i.strides[1]};
        const int padH = ${i.pads[0]};
        const int padW = ${i.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${m}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${l.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return{...e,output:{dims:s,type:n.type,textureType:4},shaderSource:h}},of=(t,e,n,r,a)=>{let i=mm(a.cacheKey);return{...i,get:()=>bm(t,i,e,n,r,a)}},Ei=(t,e,n,r=4)=>[n[0],n[2],n[3],Math.ceil(t[1]*e[2]*e[3]/r)]}),gm,ym,af,sf=L$2(()=>{fe(),we(),ae(),xr(),Di(),gm=(t,e)=>({name:"ConvDotProduct",inputNames:t?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:t?[0,4,0]:[0,4],cacheKey:e.activationCacheKey}),ym=(t,e,n,r,a)=>{let i=n[0].dims,l=n[1].dims,p=[l[0],Math.ceil(i[1]*l[2]*l[3]/4)],m=Ei(i,l,r),[s,h]=t.calculateTextureWidthAndHeight(p,4),f=U.computeStrides(m),[v,I]=t.calculateTextureWidthAndHeight(m,4),G=r.length,W=n.length<3?"0.0":"_B(b)",X=Math.ceil(i[1]*l[2]*l[3]/4),{activationFunction:ge,applyActivation:ie}=Rt(a),Pe=H(t.session.backend.glContext.version),je=`
${ge}
float process(int indices[${G}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${f[0]} + im2col[1] * ${f[1]} + im2col[2] * ${f[2]};
  int kernelOffset = indices[1] * ${p[1]};
  float value = ${W};
  for (int i = 0; i < ${X}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${v}, ${I});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${s}, ${h});
    value += dot(${Pe.texture2D}(Im2Col, im2colCoords), ${Pe.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${ie}
  return value;
}`;return{...e,output:{dims:r,type:n[0].type,textureType:0},shaderSource:je}},af=(t,e,n,r)=>{let a=gm(e.length>2,r);return{...a,get:()=>ym(t,a,e,n,r)}}}),Rr,Li,Tm,xm,wm,vm,Ci,_m,to=L$2(()=>{Ue(),fe(),Jl(),nf(),sf(),xr(),Di(),ro(),Rr=(t,e,n,r,a)=>{let i=t[0],l=t.slice(2),p=l.length,m=e[0],s=e.slice(2).map((f,v)=>f+(f-1)*(n[v]-1)),h=l.map((f,v)=>f+r[v]+r[v+p]).map((f,v)=>Math.floor((f-s[v]+a[v])/a[v]));return[i,m].concat(...h)},Li=(t,e,n)=>(_m(e,n),Tm(t,e,n)),Tm=(t,e,n)=>{let r=vm(n,e),a=t.session.pack,i=r.kernelShape[0]===1&&r.kernelShape[1]===1;return r.group>1?[t.run(Kl(t,e,r),e)]:i&&a?[xm(t,e,r)]:a&&e[0].dims.length===4&&e[0].dims[0]===1&&!i?[rf(t,e,r)]:[wm(t,e,r)]},xm=(t,e,n)=>{let r=e[0].dims,a=e[1].dims,i=Rr(r,a,n.dilations,n.pads,n.strides),l=t.reshapeUnpacked(e[0],[r[1],r[2]*r[3]]),p=t.reshapeUnpacked(e[1],[a[0],a[1]]),m=e.length>2?[p,l,e[2]]:[p,l],s=t.run(Si(m,n),m);return t.reshapeUnpacked(s,i)},wm=(t,e,n)=>{let r=e[0].dims,a=e[1].dims,i=Rr(r,a,n.dilations,n.pads,n.strides),l=t.run(of(t,e[0],e[1],i,n),[e[0]]),p=e.length===3?[l,e[1],e[2]]:[l,e[1]];return t.run(af(t,e,i,n),p)},vm=(t,e)=>{let n=t.kernelShape.slice();if(t.kernelShape.length===0)for(let i=2;i<e[1].dims.length;++i)n.push(e[1].dims[i]);let r=t.pads.slice();mr.adjustPadsBasedOnAutoPad(e[0].dims,t.strides,t.dilations,n,r,t.autoPad);let a=Object.assign({},t);return Object.assign(a,{kernelShape:n,pads:r,cacheKey:t.cacheKey}),a},Ci=t=>{let e=t.attributes,n=Nr(e),r=e.getString("auto_pad","NOTSET"),a=e.getInts("dilations",[1,1]),i=e.getInt("group",1),l=e.getInts("kernel_shape",[]),p=e.getInts("pads",[0,0,0,0]),m=e.getInts("strides",[1,1]);return Q({autoPad:r,dilations:a,group:i,kernelShape:l,pads:p,strides:m,...n})},_m=(t,e)=>{if(!t||t.length!==2&&t.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(t[0].dims.length!==4||t[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let n=t[0].dims[1],r=t[1].dims[1]*e.group;if(n!==r)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(t.length===3&&(t[2].dims.length!==1||t[1].dims[0]!==t[2].dims[0]))throw new Error("invalid bias");let a=t[0].dims.length-2;if(e.dilations.length!==a)throw new Error(`dilations should be ${a}D`);if(e.strides.length!==a)throw new Error(`strides should be ${a}D`);if(e.pads.length!==a*2)throw new Error(`pads should be ${a*2}D`);if(e.kernelShape.length!==0&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if(t[0].type!=="float32"||t[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(t.length===3&&t[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}}),Om,Im,Sm,uf,Am,Pm,Em,Dm,Lm,Cm,lf,Fm,ff=L$2(()=>{Ue(),we(),ae(),xr(),Om=(t,e,n,r,a,i)=>(t-1)*e+n+(r-1)*a+1-i,Im=(t,e,n,r,a)=>{let i=Math.floor(t/2);e==="SAME_UPPER"?(n[r]=i,n[a]=t-i):e==="SAME_LOWER"&&(n[r]=t-i,n[a]=i)},Sm=(t,e,n,r,a,i,l,p)=>{let m=t.length-2,s=p.length===0;for(let h=0;h<m;++h){let f=s?t[h+2]*i[h]:p[h],v=Om(t[h+2],i[h],a[h],e[h],n[h],f);Im(v,r,a,h,h+m),s&&p.push(i[h]*(t[h+2]-1)+l[h]+(e[h]-1)*n[h]+1-a[h]-a[h+m])}},uf=(t,e,n)=>(Fm(e,n),Am(t,e,n)),Am=(t,e,n)=>{let r=Cm(n,e);return[Lm(t,e,r)]},Pm=(t,e)=>({name:"ConvTranspose",inputNames:t?["X","W","B"]:["X","W"],inputTypes:t?[0,0,0]:[0,0],cacheHint:e}),Em=(t,e,n,r)=>{let a=e.length>2?"getB(output_channel)":"0.0",i=e[0].dims,l=e[1].dims,p=l[1],m=l[0]/r.group,s=[e[0].dims[0],e[1].dims[1]*r.group,...r.outputShape],h=H(t.session.backend.glContext.version),{activationFunction:f,applyActivation:v}=Rt(r),I=`
  const ivec2 strides = ivec2(${r.strides[0]}, ${r.strides[1]});
  const ivec2 pads = ivec2(${r.pads[0]}, ${r.pads[1]});
  ${f}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${p};
    int wOutChannel = output_channel - group_id * ${p};

    float value = ${a};
    for (int inChannelOffset = 0; inChannelOffset < ${m}; inChannelOffset++) {
      int input_channel = group_id * ${m} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${l[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${l[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${r.dilations[0]}, wHOff * ${r.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${i[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${i[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${v}
    ${h.output} = vec4(value, .0, .0, .0);
  }
`;return{...n,output:{dims:s,type:e[0].type,textureType:0},shaderSource:I,hasMain:!0}},Dm=(t,e,n)=>{let r=Pm(e.length>2,n.cacheKey);return{...r,get:()=>Em(t,e,r,n)}},Lm=(t,e,n)=>t.run(Dm(t,e,n),e),Cm=(t,e)=>{let n=t.kernelShape.slice();if(t.kernelShape.length===0)for(let p=2;p<e[1].dims.length;++p)n.push(e[1].dims[p]);let r=t.pads.slice(),a=t.outputShape.slice(),i=e[0].dims;Sm(i,n,t.dilations,t.autoPad,r,t.strides,t.outputPadding,a);let l=Object.assign({},t);return Object.assign(l,{kernelShape:n,pads:r,outputShape:a,cacheKey:t.cacheKey}),l},lf=t=>{let e=t.attributes,n=Nr(e),r=e.getString("auto_pad","NOTSET"),a=e.getInts("dilations",[1,1]),i=e.getInt("group",1),l=e.getInts("kernel_shape",[]),p=e.getInts("output_padding",[0,0]),m=e.getInts("output_shape",[]),s=e.getInts("pads",[0,0,0,0]),h=e.getInts("strides",[1,1]);return Q({autoPad:r,dilations:a,group:i,kernelShape:l,outputPadding:p,outputShape:m,pads:s,strides:h,...n})},Fm=(t,e)=>{if(!t||t.length!==2&&t.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(t[0].dims.length!==4||t[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let n=t[0].dims[1],r=t[1].dims[0];if(n!==r)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let a=t[1].dims[1]*e.group;if(t.length===3&&(t[2].dims.length!==1||t[2].dims[0]!==a))throw new Error("invalid bias");let i=t[0].dims.length-2;if(e.dilations.length!==i)throw new Error(`dilations should be ${i}D`);if(e.strides.length!==i)throw new Error(`strides should be ${i}D`);if(e.pads.length!==i*2)throw new Error(`pads should be ${i*2}D`);if(e.outputPadding.length!==i)throw new Error(`output_padding should be ${i}D`);if(e.kernelShape.length!==0&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if(e.outputShape.length!==0&&e.outputShape.length!==t[0].dims.length-2)throw new Error("invalid output shape");if(t[0].type!=="float32"||t[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(t.length===3&&t[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}}),cf,wr,pf,$m,df,km,Bm,Nm,oo=L$2(()=>{Ue(),fe(),ae(),cf={name:"Transpose",inputNames:["A"],inputTypes:[0]},wr=(t,e,n)=>(Nm(e),[t.run({...cf,cacheHint:n.cacheKey,get:()=>$m(t,e[0],n.perm)},e)]),pf=t=>Q({perm:t.attributes.getInts("perm",[])}),$m=(t,e,n)=>{let r=e.dims;n=df(r,n);let a=km(r,n),i=r.length,l=`
      ${Bm("perm",n,i)}
      float process(int indices[${i}]) {
        int a[${i}];
        perm(a, indices);
        return _A(a);
      }`;return{...cf,output:{dims:a,type:e.type,textureType:0},shaderSource:l}},df=(t,e)=>(e&&e.length!==t.length&&(e=[...t.keys()].reverse()),e),km=(t,e)=>(e=df(t,e),U.sortBasedOnPerm(t,e)),Bm=(t,e,n)=>{let r=[];r.push(`void ${t}(out int a[${n}], int src[${n}]) {`);for(let a=0;a<n;++a)r.push(`	a[${e[a]}]=src[${a}];`);return r.push("	}"),r.join(`
`)},Nm=t=>{if(!t||t.length!==1)throw new Error("Transpose requires 1 input.");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("input should be float tensor")}}),hf,mf,Rm,bf=L$2(()=>{oo(),hf=(t,e,n)=>{Rm(e);let r=n.blocksize,a=r*r,i=n.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],l=n.mode==="DCR"?[e[0].dims[0],r,r,e[0].dims[1]/a,e[0].dims[2],e[0].dims[3]]:[e[0].dims[0],e[0].dims[1]/a,r,r,e[0].dims[2],e[0].dims[3]],p=t.reshapeUnpacked(e[0],l),m={perm:i,cacheKey:`${i}`},[s]=wr(t,[p],m),h=[e[0].dims[0],e[0].dims[1]/a,e[0].dims[2]*r,e[0].dims[3]*r];return[t.reshapeUnpacked(s,h)]},mf=t=>{let e=t.attributes.getInt("blocksize");if(e<1)throw new Error(`blocksize must be >= 1, but got : ${e} for DepthToSpace`);let n=t.attributes.getString("mode","DCR");if(n!=="DCR"&&n!=="CRD")throw new Error(`unrecognized mode: ${n} for DepthToSpace`);return{mode:n,blocksize:e}},Rm=t=>{if(t.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${t.length}`);if(t[0].type==="string"||t[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}}),gf,yf,Mm,Tf=L$2(()=>{fe(),gf=(t,e,n)=>{Mm(e,n);let r=U.flattenShape(e[0].dims,n);return[t.reshapeUnpacked(e[0],r)]},yf=t=>t.attributes.getInt("axis",1),Mm=(t,e)=>{if(!t||t.length!==1)throw new Error("Flatten requires 1 input.");let n=t[0].dims.length;if(n===0)throw new Error("scalar tensor is not supported.");if(e<-n||e>n)throw new Error("Invalid axis");if(t[0].type==="string")throw new Error("string tensor is not supported.")}}),Qt,pn=L$2(()=>{Qt=["float32","float64","int32","int16","int8","uint16","uint32","uint8"]}),xf,wf,Gm,Um,zm,Vm,vf=L$2(()=>{Ue(),pn(),fe(),ae(),xf=(t,e,n)=>(Vm(e,n.axis),[t.run(zm(t,e,n),e)]),wf=t=>Q({axis:t.attributes.getInt("axis",0)}),Gm={name:"Gather",inputNames:["A","B"],inputTypes:[0,0]},Um=(t,e,n,r)=>{let a=n[0].dims.slice(),i=n[1].dims.slice(),l=new Array(a.length+i.length-1);r=U.normalizeAxis(r,a.length);let p=[];for(let v=0;v<l.length;v++)v<r?(l[v]=a[v],p.push(`inputIdx[${v}] = outputIdx[${v}];`)):v<r+i.length?(l[v]=i[v-r],p.push(`indexDataIdx[${v-r}] = outputIdx[${v}];`)):(l[v]=a[v-i.length+1],p.push(`inputIdx[${v-i.length+1}] = outputIdx[${v}];`));let m=l.length||1,s=a.length,h=i.length||1,f=`
      float process(int outputIdx[${m}]) {
        int inputIdx[${s}];
        int indexDataIdx[${h}];
        indexDataIdx[0] = 0;
        ${p.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${r}] = idx < 0 ? idx + ${a[r]} : idx;
        return _A(inputIdx);
      }`;return{...e,output:{dims:l,type:n[0].type,textureType:0},shaderSource:f}},zm=(t,e,n)=>{let r={...Gm,cacheHint:n.cacheKey};return{...r,get:()=>Um(t,r,e,n.axis)}},Vm=(t,e)=>{if(!t||t.length!==2)throw new Error("Gather requires 2 inputs.");let n=t[0].dims.length;if(n<1)throw new Error("Invalid input shape.");if(e<-n||e>n-1)throw new Error("Invalid axis.");if(Qt.indexOf(t[0].type)===-1)throw new Error("Invaid input type.");if(t[1].type!=="int32"&&t[1].type!=="int16")throw new Error("Invaid input type.")}}),Fi,_f,Of,If,Wm,Hm,qm,Sf=L$2(()=>{Ue(),fe(),ae(),Fi=(t,e,n)=>(qm(e,n),[t.run(Wm(e,n),e)]),_f=(t,e)=>{let n=t.attributes.getInt("transA",0)!==0,r=t.attributes.getInt("transB",0)!==0,a=t.attributes.getFloat("alpha",1),i=t.attributes.getFloat("beta",1);return Q({transA:n,transB:r,alpha:a,beta:i,isOptionalC:e})},Of=t=>_f(t,!1),If=t=>_f(t,!0),Wm=(t,e)=>{let n={name:"Gemm",inputNames:t.length===3?["A","B","C"]:["A","B"],inputTypes:t.length===3?[0,0,0]:[0,0],key:e.cacheKey};return{...n,get:()=>Hm(n,t,e)}},Hm=(t,e,n)=>{let r=e[0].dims.slice(),a=e[1].dims.slice(),[i,l]=jn.getShapeOfGemmResult(r,n.transA,a,n.transB,e.length===3?e[2].dims:void 0),p=[i,l];if(!p)throw new Error("Can't use gemm on the given tensors");let m=r[r.length-1],s="";n.transA&&(m=r[0]),n.transA&&n.transB?s="value += _A_T(a) * _B_T(b);":n.transA&&!n.transB?s="value += _A_T(a) * _B(b);":!n.transA&&n.transB?s="value += _A(a) * _B_T(b);":!n.transA&&!n.transB&&(s="value += _A(a) * _B(b);");let h=p.length,f=e.length===3?`int c[${e[2].dims.length}];`:"",v=e.length===3?"bcastIndices_C(indices, c);":"",I=e.length===3?"value += beta * _C(c);":"",G=`
      float process(int indices[${h}]) {
          int a[${h}];
          int b[${h}];
          ${f}

          copyVec(indices, a);
          copyVec(indices, b);
          ${v}

          float value = 0.0;
          for (int k=0; k<${m}; ++k) {
              a[${h-1}] = k;
              b[${h-2}] = k;
              ${s}
          }

          value = value * alpha;
          ${I}
          return value;
      }`;return{...t,output:{dims:p,type:e[0].type,textureType:0},variables:[{name:"alpha",type:"float",data:n.alpha},{name:"beta",type:"float",data:n.beta}],shaderSource:G}},qm=(t,e)=>{if(!t)throw new Error("Input is missing");if(e.isOptionalC&&(t.length<2||t.length>3))throw new Error("Invaid input shape.");if(!e.isOptionalC&&t.length!==3)throw new Error("Gemm requires 3 inputs");if(t.length===3&&t[2].dims.length!==1&&t[2].dims.length!==2)throw new Error("Invalid input shape of C");if(t[0].type!=="float32"&&t[0].type!=="float64"||t[1].type!=="float32"&&t[1].type!=="float64"||t.length===3&&t[2].type!=="float32"&&t[2].type!=="float64")throw new Error("Invalid input type.");if(t[0].type!==t[1].type||t.length===3&&t[0].type!==t[2].type)throw new Error("Input types are mismatched")}}),Af,Pf,jm,Ym,Xm,Km,Jm,Ef=L$2(()=>{Ue(),ae(),Af=(t,e,n)=>(Jm(e),[t.run(Xm(t,e,n),e)]),Pf=t=>{let e=t.attributes.getFloat("scale"),n=t.attributes.getFloats("bias");return Q({scale:e,bias:n})},jm={name:"ImageScaler",inputNames:["X"],inputTypes:[0]},Ym=(t,e,n,r)=>{let a=n[0].dims.slice(),i=a.length,l=`
      ${Km(r.bias.length)}
      float process(int indices[${i}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return{...e,output:{dims:a,type:n[0].type,textureType:0},variables:[{name:"bias",type:"float",arrayLength:r.bias.length,data:r.bias},{name:"scale",type:"float",data:r.scale}],shaderSource:l}},Xm=(t,e,n)=>{let r={...jm,cacheHint:n.cacheKey};return{...r,get:()=>Ym(t,r,e,n)}},Km=t=>{let e=[`float getBias(float bias[${t}], int channel) {`];for(let n=0;n<t;++n)n===0?e.push(`	if (channel == ${n}) { return bias[${n}]; }`):n===t-1?e.push(`	else { return bias[${n}]; }`):e.push(`	else if (channel == ${n}) { return bias[${n}]; }`);return e.push("	}"),e.join(`
`)},Jm=t=>{if(!t||t.length!==1)throw new Error("ImageScaler requires 1 input.");if(t[0].dims.length!==4)throw new Error("Invalid input shape.");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type.")}}),Lf,Cf,Df,Zm,Qm,eb,tb,rb,nb,Ff=L$2(()=>{we(),ae(),Lf=(t,e,n)=>{nb(e);let r=t.run(Qm(e[0]),e);return[t.run(rb(t,e[0],n,r.dims),[e[0],r,e[1],e[2]])]},Cf=t=>t.attributes.getFloat("epsilon",1e-5),Df={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[0]},Zm=(t,e)=>{let n=e.dims.slice(),r=n[1],a=n[2]*n[3],i=[n[0],r],l=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${n[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${n[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${a});
        temp = 0.0;
        for(int a2=0; a2<${n[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${n[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${a});

        return v;
      }`;return{...t,output:{dims:i,type:e.type,textureType:4},shaderSource:l}},Qm=t=>({...Df,get:()=>Zm(Df,t)}),eb={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[0,4,0,0]},tb=(t,e,n,r,a)=>{let i=H(t.session.backend.glContext.version),[l,p]=t.calculateTextureWidthAndHeight(a,4),[m,s]=[l/4,p],h=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${m}, ${s});
        return ${i.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return{...e,output:{dims:n.dims,type:n.type,textureType:0},variables:[{name:"epsilon",type:"float",data:r}],shaderSource:h}},rb=(t,e,n,r)=>{let a={...eb,cacheHint:`${n}`};return{...a,get:()=>tb(t,a,e,n,r)}},nb=t=>{if(!t||t.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");let e=t[0],n=t[1],r=t[2];if(e.dims.length<3||n.dims.length!==1||r.dims.length!==1)throw new Error("Invalid input shape.");if(n.dims[0]!==e.dims[1]||r.dims[0]!==e.dims[1])throw new Error("Input shapes are mismatched.");if(e.type!=="float32"&&e.type!=="float64"||n.type!=="float32"&&n.type!=="float64"||r.type!=="float32"&&r.type!=="float64")throw new Error("Invalid input type.");if(t[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}});function ob(t,e){let n=t[0].dims[1],r=t[0].dims.length,a=-Math.floor((e.size-1)/2),i=Math.ceil((e.size-1)/2),l=`float(${e.alpha}) / float(${e.size})`,p=`float(${e.bias})`,m=`float(${e.beta})`,s=`
    float process(int indices[${r}]) {
        int c = indices[1];
        float x = _X(indices);
        float square_sum = 0.0;

        for (int i = ${a}; i <= ${i}; i++) {
          int idx = c + i;
          if (c >= 0 && c < ${n}) {
            indices[1] = idx;
            float j = _X(indices);
            square_sum += j * j;
          }
        }
        return x / pow(${p} + ${l} * square_sum, ${m});
    }`;return{...Bf,cacheHint:e.cacheKey,output:{dims:t[0].dims,type:t[0].type,textureType:0},shaderSource:s}}function ib(t,e){return{...Bf,cacheHint:e.cacheKey,get:()=>ob(t,e)}}var $f,kf,Bf,ab,Nf=L$2(()=>{Ue(),ae(),$f=(t,e,n)=>(ab(e),[t.run(ib(e,n),e)]),kf=t=>{let e=t.attributes.getFloat("alpha",1e-4),n=t.attributes.getFloat("beta",.75),r=t.attributes.getFloat("bias",1),a=t.attributes.getInt("size");return Q({alpha:e,beta:n,bias:r,size:a})},Bf={name:"LRN",inputNames:["X"],inputTypes:[0]},ab=t=>{if(!t||t.length!==1)throw new Error("LRN requires 1 input.");if(t[0].dims.length!==4)throw new Error('currently only support LRN for input with "NCHW" format');if(t[0].type!=="float32")throw new Error("input should be float type")}}),sb,$i,Rf,Mf,Gf,ub,lb,fb,cb,pb,db$1,hb,mb,Uf=L$2(()=>{Ue(),fe(),we(),ae(),sb={name:"Pad",inputNames:["A"],inputTypes:[0]},$i=(t,e,n)=>(fb(e),[t.run({...sb,cacheHint:n.cacheKey,get:()=>lb(t,e[0],n)},e)]),Rf=t=>{let e=t.attributes.getString("mode","constant"),n=t.attributes.getFloat("value",0),r=t.attributes.getInts("pads");return Q({mode:e,value:n,pads:r})},Mf=(t,e,n)=>{cb(e);let r=ub(t,e,n);return $i(t,[e[0]],r)},Gf=t=>t.attributes.getString("mode","constant"),ub=(t,e,n)=>{if(!t.session.isInitializer(e[1].dataId)||e.length>=3&&!t.session.isInitializer(e[2].dataId))throw new Error("dynamic pad attributes are not allowed");let r=Array.from(e[1].integerData),a=e.length>=3?e[2].floatData[0]:0;return Q({mode:n,pads:r,value:a})},lb=(t,e,n)=>{let r=U.padShape(e.dims.slice(),n.pads),a=r.length,i=`
      ${pb(t,e,n)}
      float process(int[${a}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[0],output:{dims:r,type:e.type,textureType:0},shaderSource:i}},fb=t=>{if(!t||t.length!==1)throw new Error("Pad requires 1 input");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type.")},cb=t=>{if(!t||t.length!==2&&t.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(t[1].type!=="int32")throw new Error("Invalid input type.");if(t.length>=3&&t[2].type==="string")throw new Error("Invalid input type.")},pb=(t,e,n)=>{let r=H(t.session.backend.glContext.version),[a,i]=t.calculateTextureWidthAndHeight(e.dims,0),l=U.computeStrides(e.dims);switch(n.mode){case"constant":return db$1(r,e.dims,l,a,i,n.pads,n.value);case"reflect":return hb(r,e.dims,l,a,i,n.pads);case"edge":return mb(r,e.dims,l,a,i,n.pads);default:throw new Error("Invalid mode")}},db$1=(t,e,n,r,a,i,l)=>{let p=e.length,m="";for(let s=p-1;s>=0;--s)m+=`
        k = m[${s}] - ${i[s]};
        if (k < 0)  return constant;
        if (k >= ${e[s]}) return constant;
        offset += k * ${n[s]};
        `;return`
      float padA(int m[${p}]) {
        const float constant = float(${l});
        int offset = 0;
        int k = 0;
        ${m}
        vec2 coords = offsetToCoords(offset, ${r}, ${a});
        float value = getColorAsFloat(${t.texture2D}(A, coords));
        return value;
      }
      `},hb=(t,e,n,r,a,i)=>{let l=e.length,p="";for(let m=l-1;m>=0;--m)p+=`
        k = m[${m}] - ${i[m]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(e[m]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${e[m]}) { k = _2n_1 - k; }
        }
        offset += k * ${n[m]};
        `;return`
      float padA(int m[${l}]) {
        int offset = 0;
        int k = 0;
        ${p}
        vec2 coords = offsetToCoords(offset, ${r}, ${a});
        float value = getColorAsFloat(${t.texture2D}(A, coords));
        return value;
      }
      `},mb=(t,e,n,r,a,i)=>{let l=e.length,p="";for(let m=l-1;m>=0;--m)p+=`
        k = m[${m}] - ${i[m]};
        if (k < 0)  k = 0;
        if (k >= ${e[m]}) k = ${e[m]-1};
        offset += k * ${n[m]};
      `;return`
      float padA(int m[${l}]) {
        int offset = 0;
        int k = 0;
        ${p}
        vec2 coords = offsetToCoords(offset, ${r}, ${a});
        float value = getColorAsFloat(${t.texture2D}(A, coords));
        return value;
      }
      `}}),Vf,Wf,Hf,qf,jf,Yf,Xf,Kf,Jf,bb,zf,Zf,ao,Qf,io,gb,ec=L$2(()=>{Ue(),fe(),ae(),Vf=(t,e,n)=>{ao(e);let r={name:"AveragePool",inputNames:["X"],inputTypes:[0],cacheHint:n.cacheKey};return[t.run({...r,get:()=>Hf(e,r,!1,n)},e)]},Wf=t=>{let e=t.attributes.getString("auto_pad","NOTSET"),n=t.attributes.getInt("ceil_mode",0),r=t.attributes.getInt("count_include_pad",0)!==0,a=t.attributes.getInts("kernel_shape"),i=t.attributes.getInts("strides",[]),l=t.attributes.getInts("pads",[]);if(n!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return Q({autoPad:e,ceilMode:n,countIncludePad:r,kernelShape:a,strides:i,pads:l})},Hf=(t,e,n,r)=>{let[a,i]=Jf(t,r,n),l=U.size(a.kernelShape),p="value += _X(x);",m="";a.countIncludePad?m+=`value /= float(${l});`:m+=`value /= float(${l} - pad);`;let s=`
        ${Qf(t[0].dims,a,p,m,"0.0")}
      `;return{...e,output:{dims:i,type:t[0].type,textureType:0},shaderSource:s}},qf=(t,e,n)=>{ao(e);let r={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[0],cacheHint:`${n.countIncludePad}`};return[t.run({...r,get:()=>Hf(e,r,!0,n)},e)]},jf=t=>{let e=t.attributes.getInt("count_include_pad",0)!==0;return Q({autoPad:"",ceilMode:0,countIncludePad:e,kernelShape:[],strides:[],pads:[]})},Yf=(t,e,n)=>{ao(e);let r={name:"MaxPool",inputNames:["X"],inputTypes:[0],cacheHint:n.cacheKey};return[t.run({...r,get:()=>Kf(e,r,!1,n)},e)]},Xf=t=>{let e=t.attributes.getString("auto_pad","NOTSET"),n=t.attributes.getInt("ceil_mode",0),r=t.attributes.getInts("kernel_shape"),a=t.attributes.getInts("strides",[]),i=t.attributes.getInts("pads",[]),l=t.attributes.getInt("storage_order",0),p=t.attributes.getInts("dilations",[]);if(l!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(n!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return Q({autoPad:e,ceilMode:n,countIncludePad:!1,kernelShape:r,strides:a,pads:i,storageOrder:l,dilations:p})},Kf=(t,e,n,r)=>{let[a,i]=Jf(t,r,n),l=`
      value = max(_X(x), value);
    `,p="",m=`
      ${Qf(t[0].dims,a,l,p,"-1e5")}
    `;return{...e,output:{dims:i,type:t[0].type,textureType:0},shaderSource:m}},Jf=(t,e,n)=>{let r=t[0].dims.slice(),a=Object.hasOwnProperty.call(e,"dilations"),i=e.kernelShape.slice(),l=e.strides.slice(),p=a?e.dilations.slice():[],m=e.pads.slice();mr.adjustPoolAttributes(n,r,i,l,p,m);let s=mr.computePoolOutputShape(n,r,l,p,i,m,e.autoPad),h=Object.assign({},e);return a?Object.assign(h,{kernelShape:i,strides:l,pads:m,dilations:p,cacheKey:e.cacheKey}):Object.assign(h,{kernelShape:i,strides:l,pads:m,cacheKey:e.cacheKey}),[h,s]},bb={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},zf={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[0]},Zf=(t,e)=>(ao(e),[t.run({...zf,get:()=>Kf(e,zf,!0,bb)},e)]),ao=t=>{if(!t||t.length!==1)throw new Error("Pool ops requires 1 input.");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type.")},Qf=(t,e,n,r,a)=>{let i=t.length;if(e.kernelShape.length<=2){let l=e.kernelShape[e.kernelShape.length-1],p=e.strides[e.strides.length-1],m=e.pads[e.pads.length/2-1],s=e.pads[e.pads.length-1],h=t[i-1],f="",v="",I="";if(m+s!==0?f=`
          for (int i = 0; i < ${l}; i++) {
            x[${i} - 1] = indices[${i} - 1] * ${p} - ${m} + i;
            if (x[${i} - 1] < 0 || x[${i} - 1] >= ${h}) {
              pad++;
              continue;
            }
            ${n}
          }`:f=`
          for (int i = 0; i < ${l}; i++) {
            x[${i} - 1] = indices[${i} - 1] * ${p} - ${m} + i;
            ${n}
          }`,e.kernelShape.length===2){let G=e.kernelShape[e.kernelShape.length-2],W=e.strides[e.strides.length-2],X=e.pads[e.pads.length/2-2],ge=e.pads[e.pads.length-2],ie=t[i-2];X+ge!==0?v=`
            for (int j = 0; j < ${G}; j++) {
              x[${i} - 2] = indices[${i} - 2] * ${W} - ${X} + j;
              if (x[${i} - 2] < 0 || x[${i} - 2] >= ${ie}) {
                pad+= ${l};
                continue;
              }
          `:v=`
            for (int j = 0; j < ${G}; j++) {
              x[${i} - 2] = indices[${i} - 2] * ${W} - ${X} + j;
            `,I=`
          }
        `}return`
        float process(int indices[${i}]) {
          int x[${i}];
          copyVec(indices, x);

          float value = ${a};
          int pad = 0;
          ${v}
          ${f}
          ${I}
          ${r}
          return value;
        }
      `}else{let l=U.size(e.kernelShape),p=U.computeStrides(e.kernelShape),m=p.length,s=e.pads.length,h=gb(m),f=io(t,"inputDims"),v=io(e.pads,"pads"),I=io(p,"kernelStrides"),G=io(e.strides,"strides"),W=e.pads.reduce((ge,ie)=>ge+ie),X="";return W?X=`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${n}
          }`:X=`
          }
          ${n}
        `,`
        ${h}
        float process(int indices[${i}]) {
          int x[${i}];
          copyVec(indices, x);
          int offset[${m}];
          int pads[${s}];
          int inputDims[${i}];
          int kernelStrides[${m}];
          int strides[${m}];
          ${v}
          ${f}
          ${G}
          ${I}

          float value = ${a};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${l}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${i} - ${m}; j < ${i}; j++) {
              x[j] = indices[j] * strides[j - ${i} + ${m}]
                + offset[j - ${i} + ${m}] - pads[j - 2];
              ${X}
          }
          ${r}

          return value;
        }
      `}},io=(t,e)=>{let n="";for(let r=0;r<t.length;r++)n+=`
      ${e}[${r}] = ${t[r]};
    `;return n},gb=t=>`
  void offsetToIndices(int offset, int[${t}] strides, out int[${t}] indices) {
    if (${t} == 0) {
      return;
    }
    for (int i = 0; i < ${t} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${t} - 1] = offset;
  }`}),vr,er,yb,Tb,tc,rc,nc,oc,ic,ac,sc,uc=L$2(()=>{Ue(),pn(),fe(),ae(),vr=(t,e,n,r,a)=>{Tb(e);let i={name:r,inputNames:["A"],inputTypes:[0]};return[t.run({...i,cacheHint:n.cacheKey,get:()=>yb(t,e,n,r,a,i)},e)]},er=t=>{let e=t.attributes.getInts("axes",[]),n=t.attributes.getInt("keepdims",1)===1;return Q({axes:e,keepDims:n})},yb=(t,e,n,r,a,i)=>{let l=[],p=e[0].dims.length||1,m=[],s=U.normalizeAxes(n.axes,e[0].dims.length),h=a(e,s),f=h[1];for(let I=0;I<e[0].dims.length;I++)s.indexOf(I)>=0||s.length===0?(n.keepDims&&l.push(1),f=`
          for(int j${I} = 0; j${I} < ${e[0].dims[I]}; j${I}++) {
            inputIdx[${I}] = j${I};
            ${f}
          }`):(m.push(`inputIdx[${I}] = outputIdx[${l.length}];`),l.push(e[0].dims[I]));let v=`
      float process(int outputIdx[${l.length||1}]) {
        float value;                 // final result
        int inputIdx[${p}];      // addressing input data
        ${m.join(`
`)}
        ${h[0]}       // init ops for reduce max/min
        ${f}
        ${h[2]}       // final computation for reduce mean
        return value;
      }`;return{...i,output:{dims:l,type:e[0].type,textureType:0},shaderSource:v}},Tb=t=>{if(!t||t.length!==1)throw new Error("Reduce op requires 1 input.");if(Qt.indexOf(t[0].type)===-1)throw new Error("Invalid input type.")},tc=(t,e,n)=>vr(t,e,n,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),rc=(t,e,n)=>vr(t,e,n,"ReduceMean",(r,a)=>{let i=1;for(let l=0;l<r[0].dims.length;l++)(a.indexOf(l)>=0||a.length===0)&&(i*=r[0].dims[l]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${i}.;`]}),nc=(t,e,n)=>vr(t,e,n,"ReduceMax",(r,a)=>{let i=[];for(let l=0;l<r[0].dims.length;l++)(a.indexOf(l)>=0||a.length===0)&&i.push(`inputIdx[${l}] = 0;`);return[`${i.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),oc=(t,e,n)=>vr(t,e,n,"ReduceMin",(r,a)=>{let i=[];for(let l=0;l<r[0].dims.length;l++)(a.indexOf(l)>=0||a.length===0)&&i.push(`inputIdx[${l}] = 0;`);return[`${i.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),ic=(t,e,n)=>vr(t,e,n,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),ac=(t,e,n)=>vr(t,e,n,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),sc=(t,e,n)=>vr(t,e,n,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])}),lc,fc=L$2(()=>{fe(),lc=(t,e)=>{let n=U.calculateReshapedDims(e[0].dims,e[1].integerData);return t.session.pack?[t.reshapePacked(e[0],n)]:[t.reshapeUnpacked(e[0],n)]}}),cc,ki,pc,dc,dn,xb,Bi,so,Ni=L$2(()=>{Ue(),we(),ae(),cc={name:"Upsample",inputNames:["X"],inputTypes:[0]},ki=(t,e,n)=>(Bi(e,n),[t.run({...cc,cacheHint:n.cacheKey,get:()=>xb(t,e,n)},e)]),pc=t=>dn(t,7),dc=t=>dn(t,9),dn=(t,e)=>{let n=e>=10,r=t.attributes.getString("mode","nearest");if(r!=="nearest"&&r!=="linear"&&(e<11||r!=="cubic"))throw new Error(`unrecognized mode: ${r}`);let a=[];e<9&&(a=t.attributes.getFloats("scales"),so(a,r,n));let i=t.attributes.getFloat("extrapolation_value",0),l=e>10?t.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(l)===-1)throw new Error(`coordinate_transform_mode '${l}' is not supported`);let p=l==="tf_crop_and_resize",m=p,s=r==="nearest"&&e>=11?t.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(s)===-1)throw new Error(`nearest_mode '${s}' is not supported`);let h=t.attributes.getFloat("cubic_coeff_a",-.75),f=t.attributes.getInt("exclude_outside",0)!==0;if(f&&r!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");let v=e<11?!0:r==="nearest"&&l==="asymmetric"&&s==="floor",I=0,G=0,W=0;return e>10?t.inputs.length>2?(I=1,G=2,W=3):(G=1,W=2):e===9&&(G=1),Q({opset:e,isResize:n,mode:r,scales:a,extrapolationValue:i,coordinateTransformMode:l,useExtrapolation:m,needRoiInput:p,nearestMode:s,cubicCoefficientA:h,excludeOutside:f,useNearest2xOptimization:v,roiInputIdx:I,scalesInputIdx:G,sizesInputIdx:W})},xb=(t,e,n)=>{let r=H(t.session.backend.glContext.version),[a,i]=t.calculateTextureWidthAndHeight(e[0].dims,0),l=e[0].dims.map((W,X)=>Math.floor(W*n.scales[X])),[p,m]=t.calculateTextureWidthAndHeight(l,0),s=l.length,h=new Array(s),f=new Array(s),v=`
      int output_pitches[${s}];
      int input_pitches[${s}];
      `;for(let W=s-1;W>=0;W--)h[W]=W===s-1?1:h[W+1]*l[W+1],f[W]=W===s-1?1:f[W+1]*e[0].dims[W+1],v+=`
        output_pitches[${W}] = ${h[W]};
        input_pitches[${W}] = ${f[W]};
        `;let I=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${a}, ${i});
        float value = getColorAsFloat(${r.texture2D}(X, coords));
        return value;
      }
      `,G=n.mode==="nearest"?`
    ${I}
    float process(int indices[${s}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${p}, ${m});

      ${v}

      int d, m;
      for (int dim = 0; dim < ${s}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:s===4?`
    ${I}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${p}, ${m});

      ${v}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${e[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${I}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${p}, ${m});

      ${v}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${e[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return{...cc,output:{dims:l,type:e[0].type,textureType:0},shaderSource:G,variables:[{name:"scales",type:"int",arrayLength:n.scales.length,data:n.scales.map(W=>Math.ceil(W))}]}},Bi=(t,e)=>{if(!t||e.opset<9&&t.length!==1||e.opset>=9&&e.opset<11&&t.length!==2||e.opset>=11&&t.length<2)throw new Error("invalid inputs.");if(e.scales.length>0&&t[0].dims.length!==e.scales.length)throw new Error("Invalid input shape.");if(t[0].type==="string")throw new Error("Invalid input tensor types.")},so=(t,e,n)=>{if(n){for(let r of t)if(r<=0)throw new Error("Scale value should be greater than 0.")}else for(let r of t)if(r<1)throw new Error("Scale value should be greater than or equal to 1.");if((e==="linear"||e==="cubic")&&t.length!==2&&(t.length!==4||t[0]!==1||t[1]!==1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${n?"Resize":"Upsample"} opeartor.`)}}),Ri,Mi,hc,mc,wb,vb,_b,Ob,bc=L$2(()=>{we(),ae(),Bt(),Tr(),Ni(),Ri={name:"Resize",inputNames:["A"],inputTypes:[2]},Mi=(t,e,n)=>(Bi(e,n),[t.run({...Ri,cacheHint:n.cacheKey,get:()=>wb(t,e,n)},e)]),hc=t=>dn(t,10),mc=t=>dn(t,11),wb=(t,e,n)=>{let r=H(t.session.backend.glContext.version),[a,i]=vb(e,n);if(a.every(ie=>ie===1)&&n.coordinateTransformMode!=="tf_crop_and_resize")return{...Ri,output:{dims:i,type:e[0].type,textureType:2},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${r.texture2D}(X, TexCoords);
                    ${r.output} = v;
                }`};let l=i.length;if(l<2)throw new Error(`output dimension should be at least 2, but got ${l}`);let p=i[l-2],m=i[l-1],s=e[0].dims;if(l!==s.length)throw new Error(`output dimension should match input ${s.length}, but got ${l}`);let h=s[l-2],f=s[l-1],v=a[l-2],I=a[l-1],G="";if(n.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${n.mode}'`);switch(n.coordinateTransformMode){case"asymmetric":G=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":G=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":G=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${m}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${p}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${m}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${p}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":G=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${m}.0 - 1.0, ${p}.0 - 1.0, ${m}.0 - 1.0,
                            ${p}.0 - 1.0);
                        vec4 original = vec4(${f}.0 - 1.0, ${h}.0 - 1.0, ${f}.0 - 1.0,
                            ${h}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${n.coordinateTransformMode}'`)}let W=Qe(l),X=Nt(),ge=`
            const vec2 inputWH = vec2(${h}.0, ${f}.0);
            const vec4 scaleWHWH = vec4(float(${v}), float(${I}), float(${v}), float(${I}));
            ${X}
            ${G}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${W} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${p-1};
                bool hasNextCol = rc.z < ${m-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${r.output} = vec4(newValue);
            }
        `;return{...Ri,output:{dims:i,type:e[0].type,textureType:2},hasMain:!0,shaderSource:ge}},vb=(t,e)=>{let n=t[0].dims,r=e.scales,a;if(r.length===0){let l=t[e.scalesInputIdx];if(l&&l.size!==0){if(t[e.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");r=_b(l,e.mode,e.isResize)}else{let p=t[e.sizesInputIdx];if(!p||p.size===0)throw new Error("Either scales or sizes MUST be provided as input.");a=Array.from(p.integerData),r=Ob(a,n,e.mode,e.isResize)}}else if(t[e.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");let i=a||n.map((l,p)=>Math.floor(l*r[p]));return[r,i]},_b=(t,e,n)=>{let r=Array.from(t.floatData);return so(r,e,n),r},Ob=(t,e,n,r)=>{let a=e.length,i=new Array(a);for(let l=0,p=a;l<p;l++)if(e[l]===0){if(t[l]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");i[l]=1}else i[l]=t[l]/e[l];return so(i,n,r),i}}),gc,Ib,yc=L$2(()=>{yr(),gc=(t,e)=>(Ib(e),[new $e([e[0].dims.length],"int32",void 0,void 0,new Int32Array(e[0].dims))]),Ib=t=>{if(!t||t.length!==1)throw new Error("Shape requires 1 input.")}}),Gi,Tc,xc,wc,Sb,vc,Ab,Pb,_c=L$2(()=>{Ue(),pn(),fe(),ae(),Gi={name:"Slice",inputNames:["A"],inputTypes:[0]},Tc=(t,e,n)=>(Sb(e),[t.run({...Gi,cacheHint:n.cacheKey,get:()=>wc(t,e[0],n)},e)]),xc=t=>{let e=t.attributes.getInts("starts"),n=t.attributes.getInts("ends"),r=t.attributes.getInts("axes",[]);return Q({starts:e,ends:n,axes:r})},wc=(t,e,n)=>{let r=n.axes.length===0?e.dims.slice(0).map((h,f)=>f):n.axes,a=U.normalizeAxes(r,e.dims.length),i=n.starts.map((h,f)=>h>e.dims[a[f]]-1?e.dims[a[f]]:U.normalizeAxis(h,e.dims[a[f]])),l=n.ends.map((h,f)=>h>e.dims[a[f]]-1?e.dims[a[f]]:U.normalizeAxis(h,e.dims[a[f]])),p=e.dims.slice(),m=[];for(let h=0;h<a.length;h++)p[a[h]]=l[h]-i[h],i[h]>0&&m.push(`outputIdx[${a[h]}] += ${i[h]};`);let s=`
      float process(int outputIdx[${p.length}]) {
        ${m.join(`
      `)}
        return _A(outputIdx);
      }`;return{...Gi,output:{dims:p,type:e.type,textureType:0},shaderSource:s}},Sb=t=>{if(!t||t.length!==1)throw new Error("Slice requires 1 input.");if(Qt.indexOf(t[0].type)===-1)throw new Error("Invalid input type.")},vc=(t,e)=>{Pb(e);let n=Ab(t,e);return[t.run({...Gi,cacheHint:n.cacheKey,get:()=>wc(t,e[0],n)},[e[0]])]},Ab=(t,e)=>{if(!t.session.isInitializer(e[1].dataId)||!t.session.isInitializer(e[2].dataId)||e.length>=4&&!t.session.isInitializer(e[3].dataId)||e.length>=5&&!t.session.isInitializer(e[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(e.length>=5&&e[4].integerData.some(l=>l!==1))throw new Error("currently non-1 steps is not supported for Slice");let n=Array.from(e[1].integerData),r=Array.from(e[2].integerData),a=e.length>=4?Array.from(e[3].integerData):[],i=`${a};${n};${r}`;return{starts:n,ends:r,axes:a,cacheKey:i}},Pb=t=>{if(!t||t.length<3||t.length>5)throw new Error("Invalid input number.");if(t[1].type!=="int32"||t[1].dims.length!==1)throw new Error("Invalid input type.");if(t[2].type!=="int32"||t[2].dims.length!==1)throw new Error("Invalid input type.");if(t.length>=4&&(t[3].type!=="int32"||t[3].dims.length!==1))throw new Error("Invalid input type.");if(t.length>=5&&(t[4].type!=="int32"||t[4].dims.length!==1))throw new Error("Invalid input type.")}}),Oc,Ic,Sc,Ac,Pc,Ec,Dc,Lc,Eb,Db,Lb,Cc,Fc=L$2(()=>{Ue(),fe(),we(),ae(),oo(),Oc={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[0]},Ic={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[0,0]},Sc={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[0,0,0]},Ac=(t,e,n)=>{Cc(e);let r=e[0].dims.slice(),a=U.normalizeAxis(n.axis,r.length),i=U.sizeToDimension(r,a),l=U.sizeFromDimension(r,a);return Lc(t,e,n,i,l)},Pc=t=>Q({axis:t.attributes.getInt("axis",1)}),Ec=t=>Q({axis:t.attributes.getInt("axis",-1)}),Dc=(t,e,n)=>{Cc(e);let r=e[0].dims.slice(),a=U.normalizeAxis(n.axis,r.length),i=r.length,l=a!==i-1,p=[],m=[],s=[],h;l&&(m=Array.from({length:i}).map((G,W)=>W),m[a]=i-1,m[i-1]=a,m.map(G=>p.push(r[G])),h=Q({perm:m}),s=wr(t,e,h));let f=l?U.sizeToDimension(p,i-1):U.sizeToDimension(r,i-1),v=l?U.sizeFromDimension(p,i-1):U.sizeFromDimension(r,i-1),I=Lc(t,l?s:e,n,f,v);return l?wr(t,I,h):I},Lc=(t,e,n,r,a)=>{let i=Eb(t,e[0],r,a,[r]),l=t.run({...Oc,cacheHint:n.cacheKey,get:()=>i},e),p=Db(t,e[0],r,a,i.output.dims,[r]),m=t.run({...Ic,cacheHint:n.cacheKey,get:()=>p},[e[0],l]),s=Lb(t,e[0],r,a,i.output.dims,p.output.dims);return[t.run({...Sc,cacheHint:n.cacheKey,get:()=>s},[e[0],l,m])]},Eb=(t,e,n,r,a)=>{let[i,l]=t.calculateTextureWidthAndHeight(e.dims,0),p=a.length;if(n<1||r<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(a.length!==1)throw new Error("Dimensionality of the output should be 1");if(a[0]!==n)throw new Error("Shape of the output should be equal to logical row count");let m=H(t.session.backend.glContext.version),s=`
      float process(int[${p}] indices) {
        int logical_row_start_offset = indices[0] * ${r};

        float max = getColorAsFloat(${m.texture2D}(A, offsetToCoords(logical_row_start_offset, ${i},
        ${l} )));
        for(int i=1; i<${r}; ++i)
        {
          float current = getColorAsFloat(${m.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${i}, ${l})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return{...Oc,output:{dims:a,type:e.type,textureType:0},shaderSource:s}},Db=(t,e,n,r,a,i)=>{let[l,p]=t.calculateTextureWidthAndHeight(e.dims,0),m=i.length;if(n<1||r<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(i.length!==1)throw new Error("Dimensionality of the output should be 1");if(i[0]!==n)throw new Error("Shape of the output should be equal to logical row count");if(a.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(a[0]!==n)throw new Error("Shape of the intermediate results should be equal to logical row count");let s=H(t.session.backend.glContext.version),h=`
      float process(int[${m}] indices) {
        int logical_row_start_offset = indices[0] * ${r};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${r}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${s.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${l}, ${p}))) - max);
        }

        return norm_factor;
      }`;return{...Ic,output:{dims:i,type:e.type,textureType:0},shaderSource:h}},Lb=(t,e,n,r,a,i)=>{let[l,p]=t.calculateTextureWidthAndHeight(e.dims,0),m=e.dims.length;if(n<1||r<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(a.length!==1||i.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(a[0]!==n||i[0]!==n)throw new Error("Shape of the intermediate results should be equal to logical row count");let s=`
      float process(int[${m}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${l}, ${p});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${r};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return{...Sc,output:{dims:e.dims,type:e.type,textureType:0},shaderSource:s}},Cc=t=>{if(!t||t.length!==1)throw new Error("Softmax requires 1 input.");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type")}}),$c,kc,Bc,Cb,Fb,$b,Nc=L$2(()=>{Ue(),fe(),ae(),$c={name:"Split",inputNames:["A"],inputTypes:[0]},kc=(t,e,n)=>{$b(e);let r=U.normalizeAxis(n.axis,e[0].dims.length),a=Cb(t,e,r,n),i=[];for(let l=0;l<a;++l)i.push(t.run({...$c,cacheHint:`${n.cacheKey};${l}`,get:()=>Fb(t,e[0],n,r,l)},e));return i},Bc=t=>{let e=t.attributes.getInt("axis",0),n=t.attributes.getInts("split",[]),r=t.outputs.length;return Q({axis:e,split:n,numOutputs:r})},Cb=(t,e,n,r)=>{let[,a]=an.splitShape(e[0].dims,n,r.split,r.numOutputs);return a.length},Fb=(t,e,n,r,a)=>{let[i,l]=an.splitShape(e.dims,r,n.split,n.numOutputs),p=l[a],m=i[a],s=`
      float process(int indices[${m.length}]) {
        indices[${r}] += ${p};
        return _A(indices);
      }
    `;return{...$c,cacheHint:`${n.cacheKey}:${a}`,output:{dims:m,type:e.type,textureType:0},shaderSource:s}},$b=t=>{if(!t||t.length!==1)throw new Error("Split requires one input.");if(t[0].type!=="int8"&&t[0].type!=="uint8"&&t[0].type!=="int16"&&t[0].type!=="uint16"&&t[0].type!=="int32"&&t[0].type!=="uint32"&&t[0].type!=="float32"&&t[0].type!=="float64"&&t[0].type!=="bool")throw new Error("Invalid input type.")}}),Ui,Rc,Mc,kb,Bb,Gc=L$2(()=>{fe(),Ui=(t,e,n)=>{kb(e);let r=U.squeezeShape(e[0].dims,n);return[t.reshapeUnpacked(e[0],r)]},Rc=(t,e)=>(Bb(e),Ui(t,[e[0]],Array.from(e[1].integerData))),Mc=t=>t.attributes.getInts("axes"),kb=t=>{if(!t||t.length!==1)throw new Error("Squeeze requires 1 input.");if(t[0].type==="string")throw new Error("invalid input tensor types.")},Bb=t=>{if(!t||t.length!==2)throw new Error("Squeeze requires 2 inputs.");if(t[1].type!=="int32")throw new Error("Invalid input type.")}}),Uc,Nb,Rb,zc=L$2(()=>{we(),ae(),Uc=(t,e)=>{Rb(e);let n={name:"Sum",inputNames:e.map((r,a)=>`X${a}`),inputTypes:new Array(e.length).fill(0)};return[t.run({...n,get:()=>Nb(t,e,n)},e)]},Nb=(t,e,n)=>{let r=H(t.session.backend.glContext.version),a=e[0].dims.slice(),i=`
      void main() {
        vec4 result = ${e.map((l,p)=>`${r.texture2D}(X${p},TexCoords)`).join(" + ")};
        ${r.output} = result;
      }
    `;return{...n,output:{dims:a,type:e[0].type,textureType:0},hasMain:!0,shaderSource:i}},Rb=t=>{if(!t||t.length===0)throw new Error("Sum requires inputs.");let e=t[0].dims.length;for(let n=1;n<t.length;n++){if(e!==t[n].dims.length)throw new Error("Input shapes are mismatched.");for(let r=0;r<e;r++)if(t[0].dims[r]!==t[n].dims[r])throw new Error("Input shapes are not matched.")}if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type.");for(let n=1;n<t.length;n++)if(t[0].type!==t[n].type)throw new Error("Input types are not matched.")}}),Vc,Mb,Gb,Wc=L$2(()=>{pn(),ae(),Vc=(t,e)=>{Gb(e);let n={name:"Tile",inputNames:["A"],inputTypes:[0]};return[t.run({...n,get:()=>Mb(t,e,n)},e)]},Mb=(t,e,n)=>{let r=e[0].dims.slice(),a=new Array(r.length),i=[];for(let m=0;m<r.length;m++)a[m]=r[m]*e[1].numberData[m],i.push(`inputIdx[${m}] = int(mod(float(outputIdx[${m}]), ${r[m]}.));`);let l=a.length,p=`
      float process(int outputIdx[${l}]) {
        int inputIdx[${l}];
        ${i.join(`
`)}
        return _A(inputIdx);
      }
    `;return{...n,output:{dims:a,type:e[0].type,textureType:0},shaderSource:p}},Gb=t=>{if(!t||t.length!==2)throw new Error("Tile requires 2 input.");if(t[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(t[1].dims[0]!==t[0].dims.length)throw new Error("Invalid input shape.");if(Qt.indexOf(t[0].type)===-1)throw new Error("Invalid input type.");if(t[1].type!=="int32"&&t[1].type!=="int16")throw new Error("Invalid repeat type.")}}),zi,Hc,qc,Ub,zb,jc=L$2(()=>{fe(),zi=(t,e,n)=>{Ub(e);let r=U.unsqueezeShape(e[0].dims,n);return[t.reshapeUnpacked(e[0],r)]},Hc=(t,e)=>(zb(e),zi(t,[e[0]],Array.from(e[1].integerData))),qc=t=>t.attributes.getInts("axes"),Ub=t=>{if(!t||t.length!==1)throw new Error("Unsqueeze requires 1 input.");if(t[0].type==="string")throw new Error("invalid input tensor types.")},zb=t=>{if(!t||t.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(t[1].type!=="int32")throw new Error("Invalid input type.")}}),Yc,Xc=L$2(()=>{ol(),gl(),xl(),Sl(),to(),ff(),bf(),Tf(),vf(),Sf(),Ef(),Ff(),Nf(),ro(),Uf(),ec(),uc(),fc(),bc(),yc(),_c(),Fc(),Nc(),Gc(),zc(),Wc(),oo(),Ii(),jc(),Ni(),Yc=[["Abs","","6+",Al],["Acos","","7+",Pl],["Add","","7+",il],["And","","7+",al],["Asin","","7+",El],["Atan","","7+",Dl],["AveragePool","","7+",Vf,Wf],["BatchNormalization","","7+",rl,nl],["Cast","","6+",yl,Tl],["Ceil","","6+",Fl],["Clip","","6-10",_i,Ll],["Clip","","11+",Cl],["Concat","","4+",_l,Il],["Conv","","1+",Li,Ci],["ConvTranspose","","1+",uf,lf],["Cos","","7+",$l],["Div","","7+",sl],["Dropout","","7+",Oi],["DepthToSpace","","1+",hf,mf],["Equal","","7+",ul],["Elu","","6+",kl,Bl],["Exp","","6+",Nl],["Flatten","","1+",gf,yf],["Floor","","6+",Rl],["FusedConv","com.microsoft","1+",Li,Ci],["Gather","","1+",xf,wf],["Gemm","","7-10",Fi,Of],["Gemm","","11+",Fi,If],["GlobalAveragePool","","1+",qf,jf],["GlobalMaxPool","","1+",Zf],["Greater","","7+",ll],["Identity","","1+",Oi],["ImageScaler","","1+",Af,Pf],["InstanceNormalization","","6+",Lf,Cf],["LeakyRelu","","6+",Ml,Gl],["Less","","7+",fl],["LRN","","1+",$f,kf],["Log","","6+",Ul],["MatMul","","1+",ef,tf],["MaxPool","","1+",Yf,Xf],["Mul","","7+",cl],["Neg","","6+",zl],["Not","","1+",Vl],["Or","","7+",pl],["Pad","","2-10",$i,Rf],["Pad","","11+",Mf,Gf],["Pow","","7+",dl],["PRelu","","7+",hl],["ReduceLogSum","","1+",ac,er],["ReduceMax","","1+",nc,er],["ReduceMean","","1+",rc,er],["ReduceMin","","1+",oc,er],["ReduceProd","","1+",ic,er],["ReduceSum","","1-12",tc,er],["ReduceSumSquare","","1+",sc,er],["Relu","","6+",Wl],["Reshape","","5+",lc],["Resize","","10",Mi,hc],["Resize","","11+",Mi,mc],["Shape","","1+",gc],["Sigmoid","","6+",Hl],["Sin","","7+",ql],["Slice","","10+",vc],["Slice","","1-9",Tc,xc],["Softmax","","1-12",Ac,Pc],["Softmax","","13+",Dc,Ec],["Split","","2-12",kc,Bc],["Sqrt","","6+",jl],["Squeeze","","1-12",Ui,Mc],["Squeeze","","13+",Rc],["Sub","","7+",ml],["Sum","","6+",Uc],["Tan","","7+",Yl],["Tanh","","6+",Xl],["Tile","","6+",Vc],["Transpose","","1+",wr,pf],["Upsample","","7-8",ki,pc],["Upsample","","9",ki,dc],["Unsqueeze","","1-12",zi,qc],["Unsqueeze","","13+",Hc],["Xor","","7+",bl]]});function Jc(t){let e={},n;for(;(n=Kc.exec(t))!==null;){let r=n[3].split(",").map(a=>{let i=a.trim().split(" ");return i&&i.length===2?{type:i[0],name:i[1]}:null}).filter(a=>a!==null);e[n[2]]={params:r,body:n[4]}}for(let r in e){let a=Vb.replace("__FUNC__",r),i=new RegExp(a,"gm");for(;(n=i.exec(t))!==null;){let l=n[1],p=n[2],m=n[3].split(","),s=l?`${l} ${p};`:"",h=e[r].body,f="";e[r].params.forEach((I,G)=>{I&&(f+=`${I.type} ${I.name} = ${m[G]};
`)}),h=`${f}
 ${h}`,h=h.replace("return",`${p} = `);let v=`
      ${s}
      {
        ${h}
      }
      `;t=t.replace(n[0],v)}}return t=t.replace(Kc,""),t}var Kc,Vb,Zc=L$2(()=>{Kc=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm,Vb="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;"});function Mr(t,e){let n=[],r=[];for(let a=0;a<t.length;++a)t[a]!==1&&(n.push(t[a]),r.push(a));return{newShape:n,keptDims:r}}function qb(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function Qc(t){let e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}var uo,Vi=L$2(()=>{lt(),fe(),uo=class{constructor(t){this.maxTextureSize=t}computeTextureWH(t,e){let n=this.computeTexture(t,e);return e&&e.isPacked&&(n[0]/=2,n[1]/=2),e&&e.reverseWH?[n[1],n[0]]:n}computeTexture(t,e){let n=e&&e.isPacked;if(t.length===0)return n?[2,2]:[1,1];let r=this.maxTextureSize;if(e&&e.breakAxis!==void 0){let l=e.breakAxis>=t.length?1:t.slice(e.breakAxis).reduce((m,s)=>m*s),p=e.breakAxis<=0?1:t.slice(0,e.breakAxis).reduce((m,s)=>m*s);if(l>r||p>r)ce.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${t}, breakAxis:${e.breakAxis}`);else return[l,p]}let a=t.slice(0);n&&(r=r*2,a=a.map((l,p)=>p>=a.length-2?a[p]%2===0?a[p]:a[p]+1:a[p]),a.length===1&&(a=[2,a[0]])),a.length!==2&&(a=Mr(a).newShape);let i=qb(a);return a.length<=1&&i<=r?[1,i]:a.length===2&&a[0]<=r&&a[1]<=r?a:a.length===3&&a[0]*a[1]<=r&&a[2]<=r?[a[0]*a[1],a[2]]:a.length===3&&a[0]<=r&&a[1]*a[2]<=r?[a[0],a[1]*a[2]]:a.length===4&&a[0]*a[1]*a[2]<=r&&a[3]<=r?[a[0]*a[1]*a[2],a[3]]:a.length===4&&a[0]<=r&&a[1]*a[2]*a[3]<=r?[a[0],a[1]*a[2]*a[3]]:n?Qc(i/4).map(l=>l*2):Qc(i)}}}),lo,ep=L$2(()=>{fe(),Wt(),we(),Vi(),Bt(),lo=class extends dt{constructor(t){super(t)}getFunctions(){return{...this.offsetToCoords(),...this.coordsToOffset(),...this.toVec(),...this.valueFrom(),...this.getCommonUtilFuncs(),...this.getInputsSamplingSnippets(),...this.getOutputSamplingSnippet()}}getCustomTypes(){return{}}offsetToCoords(){let t="offsetToCoords";return{offsetToCoords:new R(`
      vec2 ${t}(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){let t="coordsToOffset";return{coordsToOffset:new R(`
      int ${t}(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){let t=this.context.outputTextureLayout;return t.isPacked?this.getPackedOutputSamplingSnippet(t):this.getUnpackedOutputSamplingSnippet(t)}getPackedOutputSamplingSnippet(t){let e=t.unpackedShape,n=[t.width,t.height],r={},a="getOutputCoords";switch(e.length){case 0:r[a]=this.getOutputScalarCoords();break;case 1:r[a]=this.getOutputPacked1DCoords(e,n);break;case 2:r[a]=this.getOutputPacked2DCoords(e,n);break;case 3:r[a]=this.getOutputPacked3DCoords(e,n);break;default:r[a]=this.getOutputPackedNDCoords(e,n)}let i=`
      void setOutput(vec4 val) {
        ${H(this.context.glContext.version).output} = val;
      }
    `,l="floatTextureSetRGBA";return r[l]=new R(i),r}getUnpackedOutputSamplingSnippet(t){let e=t.unpackedShape,n=[t.width,t.height],r={},a="getOutputCoords";switch(e.length){case 0:r[a]=this.getOutputScalarCoords();break;case 1:r[a]=this.getOutputUnpacked1DCoords(e,n);break;case 2:r[a]=this.getOutputUnpacked2DCoords(e,n);break;case 3:r[a]=this.getOutputUnpacked3DCoords(e,n);break;case 4:r[a]=this.getOutputUnpacked4DCoords(e,n);break;case 5:r[a]=this.getOutputUnpacked5DCoords(e,n);break;case 6:r[a]=this.getOutputUnpacked6DCoords(e,n);break;default:throw new Error(`Unsupported output dimensionality: ${e.length}`)}let i=`
        void setOutput(float val) {
          ${H(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `,l="floatTextureSetR";return r[l]=new R(i),r}getOutputScalarCoords(){return new R(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(t,e){let n=e,r="";return n[0]===1?(r=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${n[1]}.0);
          }
        `,new R(r)):n[1]===1?(r=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${n[0]}.0);
          }
        `,new R(r)):(r=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${n[0]}, ${n[1]}));
          return 2 * (resTexRC.y * ${n[0]} + resTexRC.x);
        }
      `,new R(r))}getOutputPacked2DCoords(t,e){let n="";if(hr.arraysEqual(t,e))return n=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${e[0]}, ${e[1]}));
        }
      `,new R(n);let r=e,a=Math.ceil(t[1]/2);return n=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${r[0]}, ${r[1]}));

          int index = resTexRC.y * ${r[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${a}) * 2;
          int c = 2 * (index / ${a});

          return ivec2(r, c);
        }
      `,new R(n)}getOutputPacked3DCoords(t,e){let n=[e[0],e[1]],r=Math.ceil(t[2]/2),a=r*Math.ceil(t[1]/2),i=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${n[0]}, ${n[1]}));
          int index = resTexRC.y * ${n[0]} + resTexRC.x;

          int b = index / ${a};
          index -= b * ${a};

          // reverse r and c order for packed texture
          int r = imod(index, ${r}) * 2;
          int c = 2 * (index / ${r});

          return ivec3(b, r, c);
        }
      `;return new R(i)}getOutputPackedNDCoords(t,e){let n=[e[0],e[1]],r=Math.ceil(t[t.length-1]/2),a=r*Math.ceil(t[t.length-2]/2),i=a,l="",p="b, r, c";for(let s=2;s<t.length-1;s++)i*=t[t.length-s-1],l=`
      int b${s} = index / ${i};
      index -= b${s} * ${i};
    `+l,p=`b${s}, `+p;let m=`
      ivec${t.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${n[0]}, ${n[1]}));
        int index = resTexRC.y * ${n[0]} + resTexRC.x;

        ${l}

        int b = index / ${a};
        index -= b * ${a};

        // reverse r and c order for packed texture
        int r = imod(index, ${r}) * 2;
        int c = 2 * (index / ${r});

        return ivec${t.length}(${p});
      }
    `;return new R(m)}getOutputUnpacked1DCoords(t,e){let n=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          return resTexRC.y * ${e[0]} + resTexRC.x;
        }
      `;return new R(n)}getOutputUnpacked2DCoords(t,e){let n=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          int r = index / ${t[1]};
          int c = index - r * ${t[1]};
          return ivec2(r, c);
        }
      `;return new R(n)}getOutputUnpacked3DCoords(t,e){let n="",r=t.length,a=null;r<2&&(a=[]),a=new Array(r-1),a[r-2]=t[r-1];for(let p=r-3;p>=0;--p)a[p]=a[p+1]*t[p+1];let i=["r","c","d"],l=a.map((p,m)=>{let s=`int ${i[m]} = index / ${p}`,h=m===a.length-1?`int ${i[m+1]} = index - ${i[m]} * ${p}`:`index -= ${i[m]} * ${p}`;return`${s}; ${h};`}).join("");return n=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${l}
          return ivec3(r, c, d);
        }
      `,new R(n)}getOutputUnpacked4DCoords(t,e){let n="",r=t.length,a=null;r<2&&(a=[]),a=new Array(r-1),a[r-2]=t[r-1];for(let p=r-3;p>=0;--p)a[p]=a[p+1]*t[p+1];let i=["r","c","d","d2"],l=a.map((p,m)=>{let s=`int ${i[m]} = index / ${p}`,h=m===a.length-1?`int ${i[m+1]} = index - ${i[m]} * ${p}`:`index -= ${i[m]} * ${p}`;return`${s}; ${h};`}).join("");return n=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${l}
          return ivec4(r, c, d, d2);
        }
      `,new R(n)}getOutputUnpacked5DCoords(t,e){let n="",r=t.length,a=null;r<2&&(a=[]),a=new Array(r-1),a[r-2]=t[r-1];for(let p=r-3;p>=0;--p)a[p]=a[p+1]*t[p+1];let i=["r","c","d","d2","d3"],l=a.map((p,m)=>{let s=`int ${i[m]} = index / ${p}`,h=m===a.length-1?`int ${i[m+1]} = index - ${i[m]} * ${p}`:`index -= ${i[m]} * ${p}`;return`${s}; ${h};`}).join("");return n=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${l}
          return ivec5(r, c, d, d2, d3);
        }
      `,new R(n)}getOutputUnpacked6DCoords(t,e){let n="",r=t.length,a=null;r<2&&(a=[]),a=new Array(r-1),a[r-2]=t[r-1];for(let p=r-3;p>=0;--p)a[p]=a[p+1]*t[p+1];let i=["r","c","d","d2","d3","d4"],l=a.map((p,m)=>{let s=`int ${i[m]} = index / ${p}`,h=m===a.length-1?`int ${i[m+1]} = index - ${i[m]} * ${p}`:`index -= ${i[m]} * ${p}`;return`${s}; ${h};`}).join("");return n=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${e[0]}, ${e[1]}));
         int index = resTexRC.y * ${e[0]} + resTexRC.x;
         ${l}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new R(n)}getCommonUtilFuncs(){let t={},e="uvFromFlat";t[e]=new R(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),e="packedUVfrom1D",t[e]=new R(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),e="packedUVfrom2D",t[e]=new R(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),e="packedUVfrom3D",t[e]=new R(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),e="sampleTexture";let n=H(this.context.glContext.version);return t[e]=new R(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${n.texture2D}(textureSampler, uv).r;
        }`),t}getInputsSamplingSnippets(){let t={},e=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((n,r)=>{let a=this.context.inputTextureLayouts[r],i=Yn(n);a.isPacked?t[i]=this.getPackedSamplerFromInput(i,n,a):t[i]=this.getUnpackedSamplerFromInput(i,n,a);let l=Gu(n);a.unpackedShape.length<=e.unpackedShape.length&&(a.isPacked?t[l]=this.getPackedSamplerAtOutputCoords(l,a,e,n):t[l]=this.getUnpackedSamplerAtOutputCoords(l,a,e,n))}),t}getPackedSamplerAtOutputCoords(t,e,n,r){let a=e.unpackedShape,i=n.unpackedShape,l=Yn(r),p=a.length,m=i.length,s=Ze.getBroadcastDims(a,i),h=Qe(m),f=m-p,v,I=Dt();p===0?v="":m<2&&s.length>=1?v="coords = 0;":v=s.map(je=>`coords.${I[je+f]} = 0;`).join(`
`);let G="";m<2&&p>0?G="coords":G=a.map((je,rt)=>`coords.${I[rt+f]}`).join(", ");let W="return outputValue;",X=U.size(a)===1,ge=U.size(i)===1;if(p===1&&!X&&!ge)W=`
        return vec4(outputValue.xy, outputValue.xy);
      `;else if(X&&!ge)m===1?W=`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:W=`
          return vec4(outputValue.x);
        `;else if(s.length){let je=p-2,rt=p-1;s.indexOf(je)>-1&&s.indexOf(rt)>-1?W="return vec4(outputValue.x);":s.indexOf(je)>-1?W="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(rt)>-1&&(W="return vec4(outputValue.xx, outputValue.zz);")}let ie=`
        int lastDim = coords.${I[m-1]};
        coords.${I[m-1]} = coords.${I[m-2]};
        coords.${I[m-2]} = lastDim;
      `,Pe=`
      vec4 ${t}() {
        ${h} coords = getOutputCoords();
        ${ie}
        ${v}
        vec4 outputValue = ${l}(${G});
        ${W}
      }
    `;return new R(Pe,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(t,e,n,r){let a=[n.width,n.height],i=[e.width,e.height],l=e.unpackedShape.length,p=n.unpackedShape.length,m=e.unpackedShape,s=n.unpackedShape,h=Yn(r);if(l===p&&hr.arraysEqual(i,a)){let ie=`
          float ${t}() {
            return sampleTexture(${r}, TexCoords);
          }
        `;return new R(ie,["coordinates.sampleTexture"])}let f=Qe(p),v=Ze.getBroadcastDims(m,s),I=p-l,G,W=Dt();l===0?G="":p<2&&v.length>=1?G="coords = 0;":G=v.map(ie=>`coords.${W[ie+I]} = 0;`).join(`
`);let X="";p<2&&l>0?X="coords":X=e.unpackedShape.map((ie,Pe)=>`coords.${W[Pe+I]}`).join(", ");let ge=`
        float ${t}() {
          ${f} coords = getOutputCoords();
          ${G}
          return ${h}(${X});
        }
      `;return new R(ge,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(t,e,n){switch(n.unpackedShape.length){case 0:return this.getPackedSamplerScalar(t,e);case 1:return this.getPackedSampler1D(t,e,n);case 2:return this.getPackedSampler2D(t,e,n);case 3:return this.getPackedSampler3D(t,e,n);default:return this.getPackedSamplerND(t,e,n)}}getUnpackedSamplerFromInput(t,e,n){let r=n.unpackedShape;switch(r.length){case 0:return this.getUnpackedSamplerScalar(t,e,n);case 1:return this.getUnpackedSampler1D(t,e,n);case 2:return this.getUnpackedSampler2D(t,e,n);case 3:return this.getUnpackedSampler3D(t,e,n);case 4:return this.getUnpackedSampler4D(t,e,n);case 5:return this.getUnpackedSampler5D(t,e,n);case 6:return this.getUnpackedSampler6D(t,e,n);default:throw new Error(`Unsupported dimension ${r.length}-D`)}}getPackedSamplerScalar(t,e){let n=H(this.context.glContext.version),r=`
          vec4 ${t}() {
            return ${n.texture2D}(${e}, halfCR);
          }
        `;return new R(r)}getPackedSampler1D(t,e,n){let r=[n.width,n.height],a=[r[1],r[0]],i=H(this.context.glContext.version),l=`vec4 ${t}(int index) {
      vec2 uv = packedUVfrom1D(
      ${a[0]}, ${a[1]}, index);
      return ${i.texture2D}(${e}, uv);
    }`;return new R(l,["coordinates.packedUVfrom1D"])}getPackedSampler2D(t,e,n){let r=n.unpackedShape,a=[n.width,n.height],i=H(this.context.glContext.version),l=a[0],p=a[1];if(a!=null&&hr.arraysEqual(r,a)){let f=`vec4 ${t}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${p}.0, ${l}.0);
        return ${i.texture2D}(${e}, uv);
      }`;return new R(f)}let m=a,s=Math.ceil(r[1]/2),h=`vec4 ${t}(int row, int col) {
      vec2 uv = packedUVfrom2D(${m[1]}, ${m[0]}, ${s}, row, col);
      return ${i.texture2D}(${e}, uv);
    }`;return new R(h,["coordinates.packedUVfrom2D"])}getPackedSampler3D(t,e,n){let r=n.unpackedShape,a=[n.width,n.height],i=[a[0],a[1]],l=H(this.context.glContext.version);if(r[0]===1){let v=r.slice(1),I=[1,2],G=$r(r,v),W=["b","row","col"],X=JSON.parse(JSON.stringify(n));X.unpackedShape=G;let ge=this.getPackedSamplerFromInput(t,e,X),ie=`${ge.routineBody}
      vec4 ${t}(int b, int row, int col) {
        return ${t}(${kr(W,I)});
      } `;return new R(ie,ge.dependencies)}let p=i[0],m=i[1],s=Math.ceil(r[2]/2),h=s*Math.ceil(r[1]/2),f=`vec4 ${t}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${m}, ${p}, ${h}, ${s}, b, row, col);
      return ${l.texture2D}(${e}, uv);}`;return new R(f,["coordinates.packedUVfrom3D"])}getPackedSamplerND(t,e,n){let r=n.unpackedShape,a=r.length,i=[n.width,n.height],l=H(this.context.glContext.version),p=[i[0],i[1]],m=p[1],s=p[0],h=Math.ceil(r[a-1]/2),f=h*Math.ceil(r[a-2]/2),v="int b, int row, int col",I=`b * ${f} + (row / 2) * ${h} + (col / 2)`;for(let W=2;W<a-1;W++)v=`int b${W}, `+v,f*=r[a-W-1],I=`b${W} * ${f} + `+I;let G=`vec4 ${t}(${v}) {
      int index = ${I};
      int texR = index / ${s};
      int texC = index - texR * ${s};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}, ${m});
      return ${l.texture2D}(${e}, uv);
    }`;return new R(G)}getUnpackedSamplerScalar(t,e,n){let[r,a]=[n.width,n.height];if(r===1&&a===1){let l=`
          float ${t}() {
            return sampleTexture(${e}, halfCR);
          }
        `;return new R(l,["coordinates.sampleTexture"])}let i=`
        float ${t}() {
          int offset_${e} = coordsToOffset(TexCoords, ${r}, ${a});
          vec2 uv = uvFromFlat(${r}, ${a}, offset_${e});
          return sampleTexture(${e}, uv);
        }
      `;return new R(i,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(t,e,n){let r=n.width,a=n.height;if(a===1&&r===1){let l=`
        float ${t}(int index) {
          return sampleTexture(${e}, halfCR);
        }
      `;return new R(l,["coordinates.sampleTexture"])}if(a===1){let l=`
          float ${t}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${r}.0, 0.5);
            return sampleTexture(${e}, uv);
          }
        `;return new R(l,["coordinates.sampleTexture"])}if(r===1){let l=`
          float ${t}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${a}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new R(l,["coordinates.sampleTexture"])}let i=`
        float ${t}(int index) {
          vec2 uv = uvFromFlat(${r}, ${a}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new R(i,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(t,e,n){let r=n.unpackedShape,a=[n.height,n.width];if(a!=null&&hr.arraysEqual(r,a)){let f=a[1],v=a[0],I=`
          float ${t}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${f}.0, ${v}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new R(I,["coordinates.sampleTexture"])}let{newShape:i,keptDims:l}=Mr(r),p=i;if(p.length<r.length){let f=$r(r,p),v=JSON.parse(JSON.stringify(n));v.unpackedShape=f;let I=["col","row"],G=`
          ${this.getUnpackedSamplerFromInput(t,e,v).routineBody}
          float ${t}(int row, int col) {
            return ${t}(${kr(I,l)});
          }
        `;return new R(G,["coordinates.sampleTexture"])}let m=a[1],s=a[0];if(s===1){let f=`
          float ${t}(int row, int col) {
            int offset_${e} = coordsToOffset(TexCoords, ${m}, ${s});
            float index = dot(vec3(row, col, offset_${e}), vec3(${r[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${m}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new R(f,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(m===1){let f=`
          float ${t}(int row, int col) {
            int offset_${e} = coordsToOffset(TexCoords, ${m}, ${s});
            float index = dot(vec3(row, col, offset_${e}), vec3(${r[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${s}.0, 0.5);
            return sampleTexture(${e}, uv);
          }
        `;return new R(f,["coordinates.sampleTexture","coordinates.coordsToOffset"])}let h=`
        float ${t}(int row, int col) {
          int index = col * ${r[1]} + row;
          vec2 uv = uvFromFlat(${m}, ${s}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new R(h,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(t,e,n){let r=n.unpackedShape,a=r[1]*r[2],i=r[2],{newShape:l,keptDims:p}=Mr(r),m=l;if(m.length<r.length){let v=$r(r,m),I=["batch","col","row"],G=JSON.parse(JSON.stringify(n));G.unpackedShape=v;let W=this.getUnpackedSamplerFromInput(t,e,G),X=p.reverse(),ge=`
          ${W.routineBody}
          float ${t}(int batch, int row, int col) {
            return ${t}(${kr(I,X)});
          }
        `;return new R(ge,W.dependencies)}let s=n.width,h=n.height,f=`
          float ${t}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${a} + col * ${i} + row;
            vec2 uv = uvFromFlat(${s}, ${h}, index);
            return sampleTexture(${e}, uv);
          }
      `;return new R(f,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(t,e,n){let r=n.unpackedShape,a=r[3],i=r[2]*a,l=r[1]*i,p=n.width,m=n.height,s=`
        float ${t}(int row, int col, int depth, int depth2) {
          int index = row * ${l} + col * ${i} +
              depth2 * ${a} + depth;
          vec2 uv = uvFromFlat(${p}, ${m}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new R(s,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(t,e,n){let r=n.unpackedShape,a=r[4],i=r[3]*a,l=r[2]*i,p=r[1]*l,{newShape:m,keptDims:s}=Mr(r);if(m.length<r.length){let I=$r(r,m),G=["row","col","depth","depth2","depth3"],W=JSON.parse(JSON.stringify(n));W.unpackedShape=I;let X=`
          ${this.getUnpackedSamplerFromInput(t,e,W).routineBody}
          float ${t}(int row, int col, int depth, int depth2, int depth3) {
            return ${t}(${kr(G,s)});
          }
        `;return new R(X,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let h=n.width,f=n.height,v=`
        float ${t}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${p} + col * ${l} + depth * ${i} +
          depth3 * ${a} + depth2;
          vec2 uv = uvFromFlat(${h}, ${f}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new R(v,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(t,e,n){let r=n.unpackedShape,a=r[5],i=r[4]*a,l=r[3]*i,p=r[2]*l,m=r[1]*p,{newShape:s,keptDims:h}=Mr(r);if(s.length<r.length){let G=$r(r,s),W=["row","col","depth","depth2","depth3","depth4"],X=JSON.parse(JSON.stringify(n));X.unpackedShape=G;let ge=`
            ${this.getUnpackedSamplerFromInput(t,e,X).routineBody}
            float ${t}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${t}(${kr(W,h)});
            }
          `;return new R(ge,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let f=n.width,v=n.height,I=`
          float ${t}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${m} + col * ${p} + depth * ${l} +
            depth2 * ${i} + depth3 * ${a} + depth4;
            vec2 uv = uvFromFlat(${f}, ${v}, index);
            return sampleTexture(${e}, uv);
          }
        `;return new R(I,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){let t=this.context.outputTextureLayout,e=t.shape.length,n=t.strides,r=t.width,a=t.height,i=[];for(let p=0;p<e-1;++p)i.push(`
        c[${p}] = offset / ${n[p]};`),i.push(`
        offset -= c[${p}] * ${n[p]};`);i.push(`
        c[${e-1}] = offset;`);let l=`
      void toVec(vec2 texCoords, out int c[${e}]) {
        int offset = coordsToOffset(texCoords, ${r}, ${a});
        ${i.join("")}
      }
      void toVec(int offset, out int c[${e}]) {
        ${i.join("")}
      }
    `;return{toVec:new R(l,["coordinates.coordsToOffset"])}}valueFrom(){let t={};return this.context.programInfo.inputNames.forEach((e,n)=>{let r=this.context.inputTextureLayouts[n],a=(r.unpackedShape.length>0?r.unpackedShape:r.shape).length,i=`_${e}`;t[i]=new R(this.getValueFromSingle(e,a,r.width,r.height,!1),[`shapeUtils.indicesToOffset${i}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),i=i+"_T",t[i]=new R(this.getValueFromSingle(e,a,r.width,r.height,!0),[`shapeUtils.indicesToOffset${i}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),t}getValueFromSingle(t,e,n,r,a){let i=`_${t}`;a&&(i=i+"_T");let l=H(this.context.glContext.version);return`
        float ${i}(int m[${e}]) {
          int offset = indicesToOffset${i}(m);
          vec2 coords = offsetToCoords(offset, ${n}, ${r});
          float value = getColorAsFloat(${l.texture2D}(${t}, coords));
          return value;
        }
        `}getPackedValueFrom(t,e,n,r,a){let i=`_${t}_Pack`;a&&(i=i+"_T");let l=H(this.context.glContext.version);return`
        vec4 ${i}(int m[${e}]) {
          int offset = indicesToOffset_${t}(m);
          vec2 coords = offsetToCoords(offset, ${n}, ${r});
          return ${l.texture2D}(${t}, coords);
        }
        `}}}),fo,tp=L$2(()=>{Wt(),fo=class Rw extends dt{constructor(e){super(e)}getFunctions(){return{...this.encodeFloat32(),...this.decodeFloat32()}}getCustomTypes(){return{}}encodeFloat32(){return{encode:new R(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new R(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){let e=Rw.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new R(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${e}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){let e=Rw.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new R(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${e}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){let e=new ArrayBuffer(4),n=new Uint32Array(e),r=new Uint8Array(e);if(n[0]=3735928559,r[0]===239)return!0;if(r[0]===222)return!1;throw new Error("unknown endianness")}}}),co,rp=L$2(()=>{Wt(),we(),co=class extends dt{constructor(t){super(t)}getFunctions(){return{...this.setFragColor(),...this.getColorAsFloat()}}getCustomTypes(){return{}}setFragColor(){let t=H(this.context.glContext.version);return{setFragColor:new R(`
        void setFragColor(float value) {
            ${t.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new R(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}}),po,np=L$2(()=>{Wt(),po=class MT extends dt{constructor(e){super(e)}getFunctions(){return{...this.bcastIndex(),...this.bcastMatmulIndex(),...this.offsetToIndices(),...this.indicesToOffset(),...this.incrementIndices()}}getCustomTypes(){return{}}bcastIndex(){let e=this.context.outputTextureLayout.shape.length,n={};return this.context.programInfo.inputNames.forEach((r,a)=>{let i=this.context.inputTextureLayouts[a].unpackedShape;if(i.length<=e){let l=i.length,p=e-l,m=`bcastIndices_${r}`,s="";for(let f=0;f<l;++f)s+=`
          realIndices[${f}] = int( mod(float(bcastedIndices[${p+f}]), ${i[f]}.0) );
          `;let h=`
        void ${m} (int bcastedIndices[${e}], out int realIndices[${l}]) {
          ${s}
        }
        `;n[m]=new R(h)}}),n}bcastMatmulIndex(){let e=this.context.outputTextureLayout.shape.length,n={};return this.context.programInfo.inputNames.forEach((r,a)=>{let i=this.context.inputTextureLayouts[a].shape;if(!(i.length<2||i.length>e)){let l=i.length,p=e-l,m=`bcastMatmulIndices_${r}`,s="";for(let f=0;f<l-2;++f)s+=`
          realIndices[${f}] = int( mod(float(bcastedIndices[${p+f}]), ${i[f]}.0) );
          `;let h=`
        void ${m}(int bcastedIndices[${e}], out int realIndices[${l}]) {
          ${s}
          realIndices[${l-1}] = bcastedIndices[${e-1}];
          realIndices[${l-2}] = bcastedIndices[${e-2}];
        }
        `;n[m]=new R(h)}}),n}indicesToOffset(){let e={};return this.context.programInfo.inputNames.forEach((n,r)=>{let a=this.context.inputTextureLayouts[r].shape,i=this.context.inputTextureLayouts[r].strides,l=a.length,p=`indicesToOffset_${n}`;e[p]=new R(MT.indexToOffsetSingle(p,l,i)),p=`indicesToOffset_${n}_T`,e[p]=new R(MT.indexToOffsetSingle(p,l,i.slice().reverse()))}),e}static indexToOffsetSingle(e,n,r){let a="";for(let i=n-1;i>=0;--i)a+=`
        offset += indices[${i}] * ${r[i]};
        `;return`
      int ${e}(int indices[${n}]) {
        int offset = 0;
        ${a}
        return offset;
      }
      `}offsetToIndices(){let e={};return this.context.programInfo.inputNames.forEach((n,r)=>{let a=this.context.inputTextureLayouts[r].shape,i=this.context.inputTextureLayouts[r].strides,l=a.length,p=`offsetToIndices_${n}`;e[p]=new R(MT.offsetToIndicesSingle(p,l,i)),p=`offsetToIndices_${n}_T`,e[p]=new R(MT.offsetToIndicesSingle(p,l,i.slice().reverse()))}),e}static offsetToIndicesSingle(e,n,r){let a=[];for(let i=0;i<n-1;++i)a.push(`
      indices[${i}] = offset / ${r[i]};`),a.push(`
        offset -= indices[${i}] * ${r[i]};`);return a.push(`
      indices[${n-1}] = offset;`),`
      void ${e}(int offset, out int indices[${n}]) {
        ${a.join("")}
      }
      `}incrementIndices(){let e={};return this.context.programInfo.inputNames.forEach((n,r)=>{let a=this.context.inputTextureLayouts[r].shape,i=a.length,l=`incrementIndices_${n}`,p="";for(let s=0;s<i;++s)p+=`
        shape[${s}] = ${a[s]};`;let m=`
        void ${l}(int axis, out int indices[${i}]) {
          int shape[${i}];
          ${p};
          for(int i = ${i} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;e[l]=new R(m)}),e}}}),ho,op=L$2(()=>{Wt(),ho=class extends dt{constructor(t){super(t)}getCustomTypes(){return{}}getFunctions(){return{...this.binaryVecFunctions(),...this.copyVec(),...this.setVecItem(),...this.getVecItem()}}binaryVecFunctions(){let t=this.context.outputTextureLayout.shape.length,e={add:"+=",sub:"-=",mul:"*=",div:"/="},n={};for(let r in e){let a=`${r}Vec`,i="";for(let p=0;p<t;++p)i+=`
          dest[${p}] ${e[r]} src[${p}];
          `;let l=`
        void ${a}(int src[${t}], out int dest[${t}]) {
          ${i}
        }
        `;n[a]=new R(l)}return n}copyVec(){let t=this.context.outputTextureLayout.shape.length,e="";for(let r=0;r<t;++r)e+=`
        dest[${r}] = src[${r}];
        `;let n=`
      void copyVec(int src[${t}], out int dest[${t}]) {
        ${e}
      }
      `;return{copyVec:new R(n)}}setVecItem(){let t=this.context.outputTextureLayout.shape.length,e=`
        if(index < 0)
            index =${t} + index;
        if (index == 0)
            m[0] = value;
        `;for(let r=1;r<t-1;++r)e+=`
        else if (index == ${r})
            m[${r}] = value;
            `;e+=`
        else
            m[${t-1}] = value;
        `;let n=`
      void setVecItem(out int m[${t}], int index, int value) {
        ${e}
      }
        `;return{setVecItem:new R(n)}}getVecItem(){let t=this.context.outputTextureLayout.shape.length,e=`
        if(index < 0)
            index = ${t} + index;
        if (index == 0)
            return m[0];
      `;for(let r=1;r<t-1;++r)e+=`
        else if (index == ${r})
            return m[${r}];
      `;e+=`
        else
            return m[${t-1}];
        `;let n=`
      int getVecItem(int m[${t}], int index) {
        ${e}
      }
    `;return{getVecItem:new R(n)}}}}),Wi,ip=L$2(()=>{ep(),tp(),rp(),np(),op(),Wi={encoding:fo,fragcolor:co,vec:ho,shapeUtils:po,coordinates:lo}}),mo,ap=L$2(()=>{Wt(),Zc(),ip(),we(),mo=class{constructor(t,e,n,r){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new Zn(t,e,n,r),Object.keys(Wi).forEach(i=>{let l=new Wi[i](this.context);this.libs[i]=l});let a=this.glslLibRoutineDependencyGraph;for(let i in this.libs){let l=this.libs[i].getFunctions();for(let p in l){let m=i+"."+p,s;a[m]?(s=a[m],s.routineBody=l[p].routineBody):(s=new cn(m,l[p].routineBody),a[m]=s);let h=l[p].dependencies;if(h)for(let f=0;f<h.length;++f)if(a[h[f]])s.addDependency(a[h[f]]);else{let v=new cn(h[f]);a[h[f]]=v,s.addDependency(v)}}}}preprocess(){let t=this.context.programInfo,e=t.shaderSource;return this.context.programInfo.hasMain||(e=`${e}
      ${Mu(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),e=Jc(e),`${Ru(this.context.glContext.version)}
    ${this.getUniforms(t.inputNames,t.variables)}
    ${this.getImports(e)}
    ${e}`}getImports(t){let e=this.selectGlslLibRoutinesToBeIncluded(t);if(e.length===0)return"";let n="";for(let r=0;r<e.length;++r)if(e[r].routineBody)n+=e[r].routineBody+`
`;else throw new Error(`Missing body for the Glsl Library routine: ${e[r].name}`);return n}selectGlslLibRoutinesToBeIncluded(t){let e=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(n=>{let r=n.split(".")[1];t.indexOf(r)!==-1&&e.push(this.glslLibRoutineDependencyGraph[n])}),Qn.returnOrderedNodes(e)}getUniforms(t,e){let n=[];if(t)for(let r of t)n.push(`uniform sampler2D ${r};`);if(e)for(let r of e)n.push(`uniform ${r.type} ${r.name}${r.arrayLength?`[${r.arrayLength}]`:""};`);return n.join(`
`)}}}),bo,sp=L$2(()=>{Ot(),lt(),ap(),we(),bo=class{constructor(t,e,n){this.profiler=t,this.glContext=e,this.textureLayoutStrategy=n,this.repo=new Map,this.attributesBound=!1}getArtifact(t){return this.repo.get(t)}setArtifact(t,e){this.repo.set(t,e)}run(t,e,n){this.profiler.event("op",`ProgramManager.run ${t.programInfo.name??"unknown kernel"}`,()=>{let r=this.glContext.gl,a=t.program;r.useProgram(a);try{this.bindOutput(n),this.attributesBound||this.bindAttributes(t.attribLocations),this.bindUniforms(t.uniformLocations,t.programInfo.variables??[],e)}catch(i){throw ce.error("ProgramManager",t.programInfo.shaderSource),i}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(t=>this.glContext.deleteProgram(t.program))}build(t,e,n){return this.profiler.event("backend","ProgramManager.build",()=>{let r=new mo(this.glContext,t,e,n),a=r.preprocess(),i=this.compile(a);return{programInfo:t,program:i,uniformLocations:this.getUniformLocations(i,r.context.programInfo.inputNames,r.context.programInfo.variables),attribLocations:this.getAttribLocations(i)}})}compile(t){if(!this.vertexShader){ce.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");let r=Nu(this.glContext.version);this.vertexShader=this.glContext.compileShader(r,this.glContext.gl.VERTEX_SHADER)}Z.debug&&ce.verbose("ProrgramManager",`FragShader:
${t}
`);let e=this.glContext.compileShader(t,this.glContext.gl.FRAGMENT_SHADER),n=this.glContext.createProgram(this.vertexShader,e);return this.glContext.deleteShader(e),n}bindOutput(t){let e=t.width,n=t.height;ce.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${e}/${n}, shape=${t.shape}, type=${t.tensor.type}`),this.glContext.attachFramebuffer(t.texture,e,n)}bindAttributes(t){let e=t.position,n=t.textureCoord;this.glContext.setVertexAttributes(e,n),this.attributesBound=!0}bindUniforms(t,e,n){let r=this.glContext.gl,a=0;for(let{name:i,type:l,location:p,arrayLength:m}of t){let s=e.find(h=>h.name===i)?.data;if(l!=="sampler2D"&&!s)throw new Error(`variable '${i}' does not have data defined in program info`);switch(l){case"sampler2D":this.bindTexture(n[a],p,a),a++;break;case"float":m?r.uniform1fv(p,s):r.uniform1f(p,s);break;case"int":m?r.uniform1iv(p,s):r.uniform1i(p,s);break;default:throw new Error(`Uniform not implemented: ${l}`)}}}bindTexture(t,e,n){this.glContext.bindTextureToUniform(t.texture,n,e)}getAttribLocations(t){return{position:this.getAttribLocation(t,"position"),textureCoord:this.getAttribLocation(t,"textureCoord")}}getUniformLocations(t,e,n){let r=[];if(e)for(let a of e)r.push({name:a,type:"sampler2D",location:this.getUniformLocation(t,a)});if(n)for(let a of n)r.push({...a,location:this.getUniformLocation(t,a.name)});return r}getUniformLocation(t,e){let n=this.glContext.gl.getUniformLocation(t,e);if(n===null)throw new Error(`Uniform ${e} not found.`);return n}getAttribLocation(t,e){return this.glContext.gl.getAttribLocation(t,e)}}}),go,up=L$2(()=>{lt(),ln(),go=class{constructor(t,e,n,r){this.glContext=t,this.layoutStrategy=e,this.profiler=n,this.config=r,this.pendingRead=new Map,r.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(t,e,n,r){let a=this.toEncoderType(t),i=this.glContext.getEncoder(a,e.channels||1,r);if(e.isPacked&&r===1)throw new Error("not implemented");let l=e.width,p=e.height,m,s;if(this.config.reuseTextures){m=`${l}x${p}_${i.format}_${i.internalFormat}_${i.textureType}`,s=this.inUseTextures.get(m),s||(s=[],this.inUseTextures.set(m,s));let f=this.idleTextures.get(m);if(f&&f.length>0){let v=f.pop();return s.push(v),r===1&&this.glContext.updateTexture(v,l,p,i,this.toTextureData(t,n)),v}}ce.verbose("TextureManager",`Creating new texture of size ${e.width}x${e.height}`);let h=this.glContext.allocateTexture(l,p,i,this.toTextureData(t,n));return this.config.reuseTextures&&(s.push(h),this.textureLookup.set(h,m)),h}readTexture(t,e,n){return n||(n=1),this.profiler.event("backend","TextureManager.readTexture",()=>{let r=t.shape.reduce((i,l)=>i*l)*n,a=this.glContext.readTexture(t.texture,t.width,t.height,r,this.toEncoderType(e),n);return this.toTensorData(e,a)})}async readTextureAsync(t,e,n){let r=t.tensor.dataId;if(n||(n=1),this.pendingRead.has(r)){let a=this.pendingRead.get(r);return new Promise(i=>a?.push(i))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(r,[]);let a=t.shape.reduce((m,s)=>m*s)*n;await this.glContext.createAndWaitForFence();let i=this.glContext.readTexture(t.texture,t.width,t.height,a,this.toEncoderType(e),n),l=this.toTensorData(e,i),p=this.pendingRead.get(r);return this.pendingRead.delete(r),p?.forEach(m=>m(l)),l})}readUint8TextureAsFloat(t){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{let e=t.shape.reduce((r,a)=>r*a),n=this.glContext.readTexture(t.texture,t.width,t.height,e*4,"byte",4);return new Float32Array(n.buffer,n.byteOffset,e)})}releaseTexture(t,e){let n;if(this.config.reuseTextures&&(n=this.textureLookup.get(t.texture),n)){e&&this.textureLookup.delete(n);let r=this.inUseTextures.get(n);if(r){let a=r.indexOf(t.texture);if(a!==-1){r.splice(a,1);let i=this.idleTextures.get(n);i||(i=[],this.idleTextures.set(n,i)),i.push(t.texture)}}}(!n||e)&&(ce.verbose("TextureManager",`Deleting texture of size ${t.width}x${t.height}`),this.glContext.deleteTexture(t.texture))}toTensorData(t,e){switch(t){case"int16":return e instanceof Int16Array?e:Int16Array.from(e);case"int32":return e instanceof Int32Array?e:Int32Array.from(e);case"int8":return e instanceof Int8Array?e:Int8Array.from(e);case"uint16":return e instanceof Uint16Array?e:Uint16Array.from(e);case"uint32":return e instanceof Uint32Array?e:Uint32Array.from(e);case"uint8":case"bool":return e instanceof Uint8Array?e:Uint8Array.from(e);case"float32":return e instanceof Float32Array?e:Float32Array.from(e);case"float64":return e instanceof Float64Array?e:Float64Array.from(e);default:throw new Error(`TensorData type ${t} is not supported`)}}toTextureData(t,e){if(e)return e instanceof Float32Array?e:new Float32Array(e)}toEncoderType(t){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}}),yo,lp=L$2(()=>{lt(),_s(),el(),Xc(),sp(),Vi(),up(),yo=class{constructor(t,e){this.backend=t,this.context=e,this.layoutStrategy=new uo(t.glContext.maxTextureSize),this.programManager=new bo(this.context.profiler,t.glContext,this.layoutStrategy),this.textureManager=new go(t.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:t.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=t.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new Jn(this)}onGraphInitialized(t){let e=t.getValues().filter(n=>n.from===-1&&n.tensor).map(n=>n.tensor.dataId);this.initializers=new Set(e)}isInitializer(t){return this.initializers?this.initializers.has(t):!1}addInitializer(t){this.initializers.add(t)}getTextureData(t,e){return e?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)}setTextureData(t,e,n=!1){ce.verbose("WebGLSessionHandler","Storing Texture data in cache"),n?this.packedTextureDataCache.set(t,e):this.unpackedTextureDataCache.set(t,e)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(t=>this.textureManager.releaseTexture(t,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(t=>this.textureManager.releaseTexture(t,!0)),this.unpackedTextureDataCache=new Map}resolve(t,e,n){let r=vs(t,e,Yc);return{impl:r.opImpl,context:r.opInit?r.opInit(t,n):t}}}});function jb(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}var hn,fp=L$2(()=>{Ot(),ln(),ln(),Bt(),hn=class{constructor(t,e){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=t,this.version=e,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(t,e,n,r){let a=this.gl,i=a.createTexture();a.bindTexture(a.TEXTURE_2D,i),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);let l=r?n.encode(r,t*e):null;return a.texImage2D(a.TEXTURE_2D,0,n.internalFormat,t,e,0,n.format,n.textureType,l),this.checkError(),i}updateTexture(t,e,n,r,a){let i=this.gl;i.bindTexture(i.TEXTURE_2D,t);let l=r.encode(a,e*n);i.texSubImage2D(i.TEXTURE_2D,0,0,0,e,n,r.format,r.textureType,l),this.checkError()}attachFramebuffer(t,e,n){let r=this.gl;r.bindTexture(r.TEXTURE_2D,t),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),this.checkError(),r.viewport(0,0,e,n),r.scissor(0,0,e,n)}readTexture(t,e,n,r,a,i){let l=this.gl;i||(i=1),this.frameBufferBound||this.attachFramebuffer(t,e,n);let p=this.getEncoder(a,i),m=p.allocate(e*n);return l.bindTexture(l.TEXTURE_2D,t),l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,t,0),l.readPixels(0,0,e,n,l.RGBA,p.textureType,m),this.checkError(),p.decode(m,r)}isFramebufferReady(){return!0}getActiveTexture(){let t=this.gl;return`TEXTURE${t.getParameter(this.gl.ACTIVE_TEXTURE)-t.TEXTURE0}`}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(t,e){let n=this.gl;n.vertexAttribPointer(t,3,n.FLOAT,!1,20,0),n.enableVertexAttribArray(t),e!==-1&&(n.vertexAttribPointer(e,2,n.FLOAT,!1,20,12),n.enableVertexAttribArray(e)),this.checkError()}createProgram(t,e){let n=this.gl,r=n.createProgram();return n.attachShader(r,t),n.attachShader(r,e),n.linkProgram(r),r}compileShader(t,e){let n=this.gl,r=n.createShader(e);if(!r)throw new Error(`createShader() returned null with type ${e}`);if(n.shaderSource(r,t),n.compileShader(r),n.getShaderParameter(r,n.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${n.getShaderInfoLog(r)}
Shader source:
${t}`);return r}deleteShader(t){this.gl.deleteShader(t)}bindTextureToUniform(t,e,n){let r=this.gl;r.activeTexture(r.TEXTURE0+e),this.checkError(),r.bindTexture(r.TEXTURE_2D,t),this.checkError(),r.uniform1i(n,e),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(Z.debug){let t=this.gl,e=t.getError(),n="";switch(e){case t.NO_ERROR:return;case t.INVALID_ENUM:n="INVALID_ENUM";break;case t.INVALID_VALUE:n="INVALID_VALUE";break;case t.INVALID_OPERATION:n="INVALID_OPERATION";break;case t.INVALID_FRAMEBUFFER_OPERATION:n="INVALID_FRAMEBUFFER_OPERATION";break;case t.OUT_OF_MEMORY:n="OUT_OF_MEMORY";break;case t.CONTEXT_LOST_WEBGL:n="CONTEXT_LOST_WEBGL";break;default:n=`Unknown WebGL Error: ${e.toString(16)}`}throw new Error(n)}}deleteTexture(t){this.gl.deleteTexture(t)}deleteProgram(t){this.gl.deleteProgram(t)}getEncoder(t,e,n=0){if(this.version===2)return new Xn(this.gl,e);switch(t){case"float":return n===1||this.isRenderFloat32Supported?new un(this.gl,e):new un(this.gl,e,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new Kn(this.gl,e);default:throw new Error(`Invalid dataType: ${t}`)}}clearActiveTextures(){let t=this.gl;for(let e=0;e<this.maxTextureImageUnits;++e)t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,null)}dispose(){if(this.disposed)return;let t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(this.framebuffer),t.bindBuffer(t.ARRAY_BUFFER,null),t.deleteBuffer(this.vertexbuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){let t=this.gl,e=t.createBuffer();if(!e)throw new Error("createBuffer() returned null");let n=this.createDefaultGeometry();return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),this.checkError(),e}createFramebuffer(){let t=this.gl.createFramebuffer();if(!t)throw new Error("createFramebuffer returned null");return t}queryVitalParameters(){let t=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){let t=this.gl,e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);let n=this.version===2?t.RGBA32F:t.RGBA;t.texImage2D(t.TEXTURE_2D,0,n,1,1,0,t.RGBA,t.FLOAT,null);let r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);let a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(r),a}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){let t=this.gl,e,n,r,a,i;try{e=t.createTexture(),n=t.createFramebuffer(),t.bindTexture(t.TEXTURE_2D,e);let l=this.version===2?t.RGBA32F:t.RGBA;return t.texImage2D(t.TEXTURE_2D,0,l,1,1,0,t.RGBA,t.FLOAT,null),t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),t.enable(t.BLEND),r=t.createShader(t.VERTEX_SHADER),!r||(t.shaderSource(r,"void main(){}"),t.compileShader(r),a=t.createShader(t.FRAGMENT_SHADER),!a)||(t.shaderSource(a,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),t.compileShader(a),i=t.createProgram(),!i)?!1:(t.attachShader(i,r),t.attachShader(i,a),t.linkProgram(i),t.useProgram(i),t.drawArrays(t.POINTS,0,1),t.getError()===t.NO_ERROR)}finally{t.disable(t.BLEND),i&&t.deleteProgram(i),r&&t.deleteShader(r),a&&t.deleteShader(a),n&&(t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(n)),e&&(t.bindTexture(t.TEXTURE_2D,null),t.deleteTexture(e))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let t=this.gl,e=this.disjointTimerQueryWebgl2Extension,n=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,n),n}else throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let t=this.gl,e=this.disjointTimerQueryWebgl2Extension;t.endQuery(e.TIME_ELAPSED_EXT);return}else throw new Error("WebGL1 profiling currently not supported")}isTimerResultAvailable(t){let e=!1,n=!1;if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let r=this.gl,a=this.disjointTimerQueryWebgl2Extension;e=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE),n=r.getParameter(a.GPU_DISJOINT_EXT)}else throw new Error("WebGL1 profiling currently not supported");return e&&!n}getTimerResult(t){let e=0;if(this.version===2){let n=this.gl;e=n.getQueryParameter(t,n.QUERY_RESULT),n.deleteQuery(t)}else throw new Error("WebGL1 profiling currently not supported");return e/1e6}async waitForQueryAndGetTime(t){return await mi(()=>this.isTimerResultAvailable(t)),this.getTimerResult(t)}async createAndWaitForFence(){let t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let e,n=t,r=n.fenceSync(n.SYNC_GPU_COMMANDS_COMPLETE,0);return t.flush(),r===null?e=()=>!0:e=()=>{let a=n.clientWaitSync(r,0,0);return a===n.ALREADY_SIGNALED||a===n.CONDITION_SATISFIED},{query:r,isFencePassed:e}}async pollFence(t){return new Promise(e=>{this.addItemToPoll(()=>t.isFencePassed(),()=>e())})}pollItems(){let t=jb(this.itemsToPoll.map(e=>e.isDoneFn));for(let e=0;e<=t;++e){let{resolveFn:n}=this.itemsToPoll[e];n()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}async addItemToPoll(t,e){this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),!(this.itemsToPoll.length>1)&&await mi(()=>(this.pollItems(),this.itemsToPoll.length===0))}}});function Hi(t){let e;if((!t||t==="webgl2")&&"webgl2"in Gr?e=Gr.webgl2:(!t||t==="webgl")&&"webgl"in Gr&&(e=Gr.webgl),!e)try{let r=Xb();e=cp(r,t)}catch{let r=Yb();e=cp(r,t)}t=t||e.version===1?"webgl":"webgl2";let n=e.gl;return Gr[t]=e,n.isContextLost()?(delete Gr[t],Hi(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),e)}function cp(t,e){let n={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1},r,a=n;if((!e||e==="webgl2")&&(r=t.getContext("webgl2",a),r))try{return new hn(r,2)}catch(i){ce.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${i}`)}if((!e||e==="webgl")&&(r=t.getContext("webgl",a)||t.getContext("experimental-webgl",a),r))try{return new hn(r,1)}catch(i){ce.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${i}`)}throw new Error("WebGL is not supported")}function Yb(){if(typeof document>"u")throw new TypeError("failed to create canvas: document is not supported");let t=document.createElement("canvas");return t.width=1,t.height=1,t}function Xb(){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create offscreen canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}var Gr,pp=L$2(()=>{lt(),fp(),Gr={}}),To,dp=L$2(()=>{Ot(),lt(),lp(),pp(),To=class{get contextId(){return Z.webgl.contextId}set contextId(t){Z.webgl.contextId=t}get matmulMaxBatchSize(){return Z.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(t){Z.webgl.matmulMaxBatchSize=t}get textureCacheMode(){return Z.webgl.textureCacheMode}set textureCacheMode(t){Z.webgl.textureCacheMode=t}get pack(){return Z.webgl.pack}set pack(t){Z.webgl.pack=t}get async(){return Z.webgl.async}set async(t){Z.webgl.async=t}initialize(){try{return this.glContext=Hi(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),ce.setWithEnv(Z),Z.webgl.context||Object.defineProperty(Z.webgl,"context",{value:this.glContext.gl}),ce.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(t){return ce.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${t}`),!1}}createSessionHandler(t){return new yo(this,t)}dispose(){this.glContext.dispose()}}});async function qi(t){if(t){let e=typeof t=="string"?[t]:t;for(let n of e){let r=hp.get(n);if(r)return r;let a=await Jb(n);if(a)return a}}else return qi(["webgl"]);throw new Error("no available backend to use")}async function Jb(t){let e=Kb;if(typeof e[t]<"u"&&Zb(e[t])){let n=e[t],r=n.initialize();if(typeof r=="object"&&"then"in r&&(r=await r),r)return hp.set(t,n),n}}function Zb(t){let e=t;return"initialize"in e&&typeof e.initialize=="function"&&"createSessionHandler"in e&&typeof e.createSessionHandler=="function"&&"dispose"in e&&typeof e.dispose=="function"}var hp,Kb,mp=L$2(()=>{dp(),hp=new Map,Kb={webgl:new To}}),ji,xo,bp=L$2(()=>{lt(),ji=class{constructor(t,e){this.op=t,this.node=e}},xo=class{constructor(t,e,n){this.graph=t,this.profiler=n,this.initialize(e)}initialize(t){this.profiler.event("session","ExecutionPlan.initialize",()=>{let e=this.graph.getNodes();if(e.length!==t.length)throw new Error("The size of nodes and OPs do not match.");this._ops=t.map((n,r)=>new ji(n,e[r])),this.reset(),this._starter=[],this._ops.forEach((n,r)=>{let a=!0;for(let i of n.node.inputs)if(!this._values[i]&&this.graph.getInputIndices().indexOf(i)===-1){a=!1;break}a&&this._starter.push(r)})})}reset(){this._values=this.graph.getValues().map(t=>t.tensor)}async execute(t,e){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();let n=t.createInferenceHandler(),r=this.graph.getInputIndices();if(e.length!==r.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${e.length} expected: ${r.length}`);e.forEach((s,h)=>{let f=r[h];this._values[f]=s});let a=this._starter.slice(0),i=this.graph.getValues(),l=this.graph.getNodes(),p=0;for(;p<a.length;){let s=a[p++],h=this._ops[s],f=h.node.inputs.map(W=>this._values[W]);if(f.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${h.node}`);let v=f;ce.verbose("ExecPlan",`Runing op:${h.node.name} (${v.map((W,X)=>`'${h.node.inputs[X]}': ${W.type}[${W.dims.join(",")}]`).join(", ")})`);let I=await this.profiler.event("node",h.node.name,async()=>h.op.impl(n,v,h.op.context));if(I.length!==h.node.outputs.length)throw new Error("the size of output does not match model definition.");I.forEach((W,X)=>{let ge=h.node.outputs[X];if(this._values[ge])throw new Error(`output [${ge}] already has value: op:${h.node.name}`);this._values[ge]=W});let G=new Set;I.forEach((W,X)=>{let ge=h.node.outputs[X];for(let ie of i[ge].to){let Pe=l[ie],je=!0;for(let rt of Pe.inputs)if(!this._values[rt]){je=!1;break}je&&G.add(ie)}}),a.push(...G)}let m=[];for(let s=0;s<this.graph.getOutputIndices().length;s++){let h=this.graph.getOutputIndices()[s],f=this._values[h];if(f===void 0)throw new Error(`required output [${h}] does not have value`);h===0?await f.getData():f.data,m.push(f)}return ce.verbose("ExecPlan","disposing of inferenceHandler"),n.dispose(),m})}}}),oe,bt,mn,gp=L$2(()=>{tn(),oe=Ar(Cr()),yr(),fe(),bt=V.experimental.fbs,mn=class kT{constructor(e){if(this._attributes=new Map,e!=null){for(let n of e)n instanceof oe.onnx.AttributeProto?this._attributes.set(n.name,[kT.getValue(n),kT.getType(n)]):n instanceof bt.Attribute&&this._attributes.set(n.name(),[kT.getValue(n),kT.getType(n)]);if(this._attributes.size<e.length)throw new Error("duplicated attribute names")}}set(e,n,r){this._attributes.set(e,[r,n])}delete(e){this._attributes.delete(e)}getFloat(e,n){return this.get(e,"float",n)}getInt(e,n){return this.get(e,"int",n)}getString(e,n){return this.get(e,"string",n)}getTensor(e,n){return this.get(e,"tensor",n)}getFloats(e,n){return this.get(e,"floats",n)}getInts(e,n){return this.get(e,"ints",n)}getStrings(e,n){return this.get(e,"strings",n)}getTensors(e,n){return this.get(e,"tensors",n)}get(e,n,r){let a=this._attributes.get(e);if(a===void 0){if(r!==void 0)return r;throw new Error(`required attribute not found: ${e}`)}if(a[1]!==n)throw new Error(`type mismatch: expected ${n} but got ${a[1]}`);return a[0]}static getType(e){let n=e instanceof oe.onnx.AttributeProto?e.type:e.type();switch(n){case oe.onnx.AttributeProto.AttributeType.FLOAT:return"float";case oe.onnx.AttributeProto.AttributeType.INT:return"int";case oe.onnx.AttributeProto.AttributeType.STRING:return"string";case oe.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case oe.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case oe.onnx.AttributeProto.AttributeType.INTS:return"ints";case oe.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case oe.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${oe.onnx.AttributeProto.AttributeType[n]}`)}}static getValue(e){let n=e instanceof oe.onnx.AttributeProto?e.type:e.type();if(n===oe.onnx.AttributeProto.AttributeType.GRAPH||n===oe.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");let r=this.getValueNoCheck(e);if(n===oe.onnx.AttributeProto.AttributeType.INT&&it.isLong(r))return it.longToNumber(r);if(n===oe.onnx.AttributeProto.AttributeType.INTS){let a=r,i=new Array(a.length);for(let l=0;l<a.length;l++){let p=a[l];i[l]=it.longToNumber(p)}return i}if(n===oe.onnx.AttributeProto.AttributeType.TENSOR)return e instanceof oe.onnx.AttributeProto?$e.fromProto(r):$e.fromOrtTensor(r);if(n===oe.onnx.AttributeProto.AttributeType.TENSORS){if(e instanceof oe.onnx.AttributeProto)return r.map(a=>$e.fromProto(a));if(e instanceof bt.Attribute)return r.map(a=>$e.fromOrtTensor(a))}return n===oe.onnx.AttributeProto.AttributeType.STRING&&e instanceof oe.onnx.AttributeProto?sn(r):n===oe.onnx.AttributeProto.AttributeType.STRINGS&&e instanceof oe.onnx.AttributeProto?r.map(sn):r}static getValueNoCheck(e){return e instanceof oe.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(e):this.getValueNoCheckFromOrtFormat(e)}static getValueNoCheckFromOnnxFormat(e){switch(e.type){case oe.onnx.AttributeProto.AttributeType.FLOAT:return e.f;case oe.onnx.AttributeProto.AttributeType.INT:return e.i;case oe.onnx.AttributeProto.AttributeType.STRING:return e.s;case oe.onnx.AttributeProto.AttributeType.TENSOR:return e.t;case oe.onnx.AttributeProto.AttributeType.GRAPH:return e.g;case oe.onnx.AttributeProto.AttributeType.FLOATS:return e.floats;case oe.onnx.AttributeProto.AttributeType.INTS:return e.ints;case oe.onnx.AttributeProto.AttributeType.STRINGS:return e.strings;case oe.onnx.AttributeProto.AttributeType.TENSORS:return e.tensors;case oe.onnx.AttributeProto.AttributeType.GRAPHS:return e.graphs;default:throw new Error(`unsupported attribute type: ${oe.onnx.AttributeProto.AttributeType[e.type]}`)}}static getValueNoCheckFromOrtFormat(e){switch(e.type()){case bt.AttributeType.FLOAT:return e.f();case bt.AttributeType.INT:return e.i();case bt.AttributeType.STRING:return e.s();case bt.AttributeType.TENSOR:return e.t();case bt.AttributeType.GRAPH:return e.g();case bt.AttributeType.FLOATS:return e.floatsArray();case bt.AttributeType.INTS:{let n=[];for(let r=0;r<e.intsLength();r++)n.push(e.ints(r));return n}case bt.AttributeType.STRINGS:{let n=[];for(let r=0;r<e.stringsLength();r++)n.push(e.strings(r));return n}case bt.AttributeType.TENSORS:{let n=[];for(let r=0;r<e.tensorsLength();r++)n.push(e.tensors(r));return n}default:throw new Error(`unsupported attribute type: ${bt.AttributeType[e.type()]}`)}}}}),Xi,wo,Ki,Mt,vo,Yi,yp=L$2(()=>{gp(),tn(),Xi=Ar(Cr()),yr(),fe(),wo=V.experimental.fbs,Ki={from:(t,e)=>new Yi(t,e)},Mt=class{constructor(t){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,t&&(this.type=We.tensorValueTypeFromProto(t.type.tensorType))}get from(){return this._from}get to(){return this._to}},vo=class{constructor(t,e){t instanceof Xi.onnx.NodeProto?(this.name=t.name,this.opType=t.opType,this.attributes=new mn(t.attribute)):t instanceof wo.Node&&(this.name=e??t.name(),this.opType=t.opType(),this.attributes=new mn(We.tensorAttributesFromORTFormat(t))),this.inputs=[],this.outputs=[],this.executeNode=!0}},Yi=class{constructor(t,e){if(!t)throw new TypeError("graph is empty");this.buildGraph(t),this.transformGraph(e),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(t){if(t instanceof Xi.onnx.GraphProto)this.buildGraphFromOnnxFormat(t);else if(t instanceof wo.Graph)this.buildGraphFromOrtFormat(t);else throw new TypeError("Graph type is not supported.")}buildGraphFromOnnxFormat(t){let e=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let n=new Map;if(!t.input)throw new Error("missing information in graph: input");let r=[];for(let a of t.input){if(e.has(a.name))throw new Error(`duplicated input name: ${a.name}`);let i=this._allData.push(new Mt(a))-1;e.set(a.name,i),r.push(a.name)}if(!t.initializer)throw new Error("missing information in graph: initializer");for(let a of t.initializer){let i=e.get(a.name);if(i===void 0){let l=new Mt;l.type={shape:{dims:We.tensorDimsFromProto(a.dims)},tensorType:We.tensorDataTypeFromProto(a.dataType)},i=this._allData.push(l)-1,e.set(a.name,i)}this._allData[i]._from=-1,this._allData[i].tensor=$e.fromProto(a)}for(let a=0;a<this._allData.length;a++)this._allData[a].tensor||(this._allInputIndices.push(a),this._allInputNames.push(r[a]));if(!t.output)throw new Error("missing information in graph: output");for(let a of t.output){if(e.has(a.name))throw new Error(`duplicated output name: ${a.name}`);let i=this._allData.push(new Mt(a))-1;e.set(a.name,i),this._allOutputIndices.push(i),this._allOutputNames.push(a.name)}if(!t.node)throw new Error("missing information in graph: node");for(let a of t.node){if(!a.name)for(let l=0;;l++){let p=`unnamed_${a.opType}_${l}`;if(!n.has(p)){a.name=p;break}}if(n.has(a.name))throw new Error(`duplicated node name: ${a.name}`);let i=this._nodes.push(new vo(a))-1;n.set(a.name,i)}for(let a=0;a<this._nodes.length;a++){let i=this._nodes[a],l=t.node[a];if(!l.output)throw new Error(`missing output for node: ${l.name}`);for(let p of l.output){let m=e.get(p);if(typeof m>"u"&&(m=this._allData.push(new Mt)-1,e.set(p,m)),i.outputs.push(m),this._allData[m]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${m}`);if(this._allData[m]._from=a,l.opType==="Constant"){if(!l.attribute||l.attribute.length!==1||!l.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!l.output||l.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");i.outputs.pop(),i.executeNode=!1,this._allData[m]._from=-1,this._allData[m].tensor=$e.fromProto(l.attribute[0].t)}}}for(let a=0;a<this._nodes.length;a++){let i=this._nodes[a],l=t.node[a];if(!l.input)throw new Error(`missing input for node: ${l.name}`);for(let p of l.input){let m=e.get(p);if(typeof m>"u"){if(p===""&&(l.input.length===3||l.input.length===4)&&l.opType==="Resize")continue;throw new Error(`unrecognized input '${p}' for node: ${l.name}`)}i.inputs.push(m),this._allData[m]._to.push(a)}}return!0}buildGraphFromOrtFormat(t){let e=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let n=new Map,r=[];for(let a=0;a<t.inputsLength();a++){let i=t.inputs(a);if(e.has(i))throw new Error(`duplicated input name: ${i}`);for(let l=0;l<t.nodeArgsLength();l++)if(t.nodeArgs(l)?.name()===i){let p=new Mt;if(t.nodeArgs(l)?.type()?.valueType()!==wo.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");let m=t.nodeArgs(l).type().value(new wo.TensorTypeAndShape),s=We.tensorDataTypeFromProto(m.elemType()),h=m.shape(),f=[];for(let I=0;I<h.dimLength();I++)f.push(it.longToNumber(h.dim(I).value().dimValue()));p.type={shape:{dims:f},tensorType:s};let v=this._allData.push(p)-1;e.set(i,v),r.push(i)}}for(let a=0;a<t.initializersLength();a++){let i=t.initializers(a),l=e.get(i.name());if(l===void 0){let p=new Mt,m=We.tensorDimsFromORTFormat(i),s=We.tensorDataTypeFromProto(i.dataType());p.type={shape:{dims:m},tensorType:s},l=this._allData.push(p)-1,e.set(i.name(),l)}this._allData[l]._from=-1,this._allData[l].tensor=$e.fromOrtTensor(i)}for(let a=0;a<this._allData.length;a++)this._allData[a].tensor||(this._allInputIndices.push(a),this._allInputNames.push(r[a]));for(let a=0;a<t.outputsLength();a++){let i=t.outputs(a);if(e.has(i))throw new Error(`duplicated output name: ${i}`);let l=this._allData.push(new Mt)-1;e.set(i,l),this._allOutputIndices.push(l),this._allOutputNames.push(i)}if(!t.nodes)throw new Error("missing information in graph: node");for(let a=0;a<t.nodesLength();a++){let i=t.nodes(a),l=i.name();if(!l)for(let m=0;l=`unnamed_${i.opType()}_${m}`,!!n.has(l);m++);if(n.has(l))throw new Error(`duplicated node name: ${l}`);let p=this._nodes.push(new vo(i,l))-1;n.set(l,p)}for(let a=0;a<this._nodes.length;a++){let i=this._nodes[a],l=t.nodes(a);if(l==null)throw new Error(`No node exists at index ${a}`);if(l?.outputsLength()===0)throw new Error(`missing output for node: ${l.name}`);for(let p=0;p<l?.outputsLength();p++){let m=l?.outputs(p),s=e.get(m);if(typeof s>"u"&&(s=this._allData.push(new Mt)-1,e.set(m,s)),i.outputs.push(s),this._allData[s]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${s}`);if(this._allData[s]._from=a,l.opType()==="Constant"){if(l.attributesLength()!==1||!l.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(l.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");i.outputs.pop(),i.executeNode=!1,this._allData[s]._from=-1,this._allData[s].tensor=$e.fromOrtTensor(l.attributes(0).t())}}}for(let a=0;a<this._nodes.length;a++){let i=this._nodes[a],l=t.nodes(a);if(l.inputsLength()===0)throw new Error(`missing input for node: ${l.name}`);for(let p=0;p<l.inputsLength();p++){let m=l.inputs(p),s=e.get(m);if(typeof s>"u")throw new Error(`unrecognized input '${m}' for node: ${l.name()}`);i.inputs.push(s),this._allData[s]._to.push(a)}}}checkIsAcyclic(){let t=new Set;this._allInputIndices.forEach(r=>{this._allData[r]._to.forEach(a=>{t.add(a)})});let e=Array.from(t),n=new Array(this._nodes.length).fill("white");for(;e.length>0;){let r=e.pop();n[r]==="gray"?n[r]="black":(e.push(r),n[r]="gray",this._nodes[r].outputs.forEach(a=>{let i=this._allData[a];if(typeof i.tensor<"u")throw new Error("node outputs should not be initialized");if(i._from!==r)throw new Error("from property of the Value object doesn't match index of Node being processed");i._to.forEach(l=>{if(n[l]==="gray")throw new Error("model graph is cyclic");n[l]==="white"&&e.push(l)})}))}}transformGraph(t){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),t&&t.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let t=0,e=new Array(this._nodes.length,0),n=0;for(let r=0;r<this._nodes.length;r++)e[r]=n,this._nodes[r].executeNode?(n!==r&&(this._nodes[n]=this._nodes[r]),n++):this._nodes[r].outputs.forEach(a=>{this._allData[a]._from=-2});this._nodes.splice(n,this._nodes.length-n);for(let r=0;r<this._allData.length;r++){let a=this._allData[r];a._from!==void 0&&a._from!==-1&&a._from!==-2&&(a._from=e[a._from]);for(let i=0;i<a._to.length;i++)if(a._to[i]>=0)a._to[i]=e[a._to[i]];else throw new Error("Trying to update a removed node")}t=0;for(let r=0;r<this._allData.length;r++){if(this._allData[r].from===-2&&this._allOutputIndices.indexOf(r+t)===-1){t++,this._allData.splice(r,1),r--;continue}if(t>0){let a=-1;this._allData[r].from!==void 0&&this._allData[r].from!==-1?(a=this._nodes[this._allData[r].from].outputs.indexOf(r+t),a!==-1&&(this._nodes[this._allData[r].from].outputs[a]=r)):(a=this._allInputIndices.indexOf(r+t),a!==-1&&(this._allInputIndices[a]=r)),this._allData[r].to.forEach(i=>{a=this._nodes[i].inputs.indexOf(r+t),a!==-1&&(this._nodes[i].inputs[a]=r)}),this._allData[r].to.length===0&&(a=this._allOutputIndices.indexOf(r+t),a!==-1&&(this._allOutputIndices[a]=r))}}}deleteNode(t){let e=this._nodes[t];if(e.outputs.length>1){for(let l=1;l<e.outputs.length;l++)if(this._allData[e.outputs[l]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}e.executeNode=!1;let n=e.inputs[0],r=e.outputs[0],a=this._allData[r].to;for(let l=0;l<e.inputs.length;l++){let p=this._allData[e.inputs[l]].to.indexOf(t);if(p===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[e.inputs[l]].to.splice(p,1)}this._allData[r]._to=[];let i=this._allOutputIndices.indexOf(r);if(i!==-1&&(this._allOutputIndices[i]=n),a&&a.length>0)for(let l of a){let p=this._nodes[l].inputs.indexOf(r);if(p===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[l].inputs[p]=n,this._allData[n].to.push(l)}}removeAllDropoutNodes(){let t=0;for(let e of this._nodes){if(e.opType==="Dropout"){if(e.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(e.outputs.length!==1&&e.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(e.outputs.length===2&&this._allData[e.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(t)}t++}}removeAllIdentityNodes(){let t=0;for(let e of this._nodes)e.opType==="Identity"&&this.deleteNode(t),t++}isActivation(t){switch(t.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(let t of this._nodes)if(t.opType==="Conv"){let e=this._allData[t.outputs[0]]._to;if(e.length===1&&this.isActivation(this._nodes[e[0]])){let n=this._nodes[e[0]];if(n.opType==="Clip")if(n.inputs.length===1)try{t.attributes.set("activation_params","floats",[n.attributes.getFloat("min"),n.attributes.getFloat("max")])}catch{t.attributes.set("activation_params","floats",[br,gr])}else if(n.inputs.length>=3&&this._allData[n.inputs[1]].tensor!==void 0&&this._allData[n.inputs[2]].tensor!==void 0)t.attributes.set("activation_params","floats",[this._allData[n.inputs[1]].tensor.floatData[0],this._allData[n.inputs[2]].tensor.floatData[0]]);else continue;t.attributes.set("activation","string",n.opType),this.deleteNode(e[0])}}}}}),Tp,Qb,_o,xp=L$2(()=>{zn(),yp(),tn(),Tp=Ar(Cr()),fe(),Qb=V.experimental.fbs,_o=class{constructor(){}load(t,e,n){let r;if(!n)try{this.loadFromOnnxFormat(t,e);return}catch(a){if(n!==void 0)throw a;r=a}try{this.loadFromOrtFormat(t,e)}catch(a){throw n!==void 0?a:new Error(`Failed to load model as ONNX format: ${r}
as ORT format: ${a}`)}}loadFromOnnxFormat(t,e){let n=Tp.onnx.ModelProto.decode(t);if(it.longToNumber(n.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=n.opsetImport.map(r=>({domain:r.domain,version:it.longToNumber(r.version)})),this._graph=Ki.from(n.graph,e)}loadFromOrtFormat(t,e){let n=new _.ByteBuffer(t),r=Qb.InferenceSession.getRootAsInferenceSession(n).model();if(it.longToNumber(r.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let a=0;a<r.opsetImportLength();a++){let i=r.opsetImport(a);this._opsets.push({domain:i?.domain(),version:it.longToNumber(i.version())})}this._graph=Ki.from(r.graph(),e)}get graph(){return this._graph}get opsets(){return this._opsets}}}),Oo,wp=L$2(()=>{mp(),bp(),lt(),xp(),Oo=class{constructor(t={}){this._initialized=!1,this.backendHint=t.backendHint,this.profiler=Gn.create(t.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(t,e,n){await this.profiler.event("session","Session.loadModel",async()=>{let r=await qi(this.backendHint);if(this.sessionHandler=r.createSessionHandler(this.context),this._model=new _o,typeof t=="string"){let a=t.endsWith(".ort");if(typeof process<"u"&&process.versions&&process.versions.node){let i=await(void 0)(t);this.initialize(i,a)}else{let i=await(await fetch(t)).arrayBuffer();this.initialize(new Uint8Array(i),a)}}else if(ArrayBuffer.isView(t))this.initialize(t);else{let a=new Uint8Array(t,e||0,n||t.byteLength);this.initialize(a)}})}initialize(t,e){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{let n=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(t,n,e),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new xo(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(t){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{let e=this.normalizeAndValidateInputs(t),n=await this._executionPlan.execute(this.sessionHandler,e);return this.createOutput(n)})}normalizeAndValidateInputs(t){let e=this._model.graph.getInputNames();if(Array.isArray(t)){if(t.length!==e.length)throw new Error(`incorrect input array length: expected ${e.length} but got ${t.length}`)}else{if(t.size!==e.length)throw new Error(`incorrect input map size: expected ${e.length} but got ${t.size}`);let n=new Array(t.size),r=0;for(let a=0;a<e.length;++a){let i=t.get(e[a]);if(!i)throw new Error(`missing input tensor for: '${name}'`);n[r++]=i}t=n}if(!this.context.graphInputTypes||this.context.graphInputTypes.length===0||!this.context.graphInputDims||this.context.graphInputDims.length===0){let n=this._model.graph.getInputIndices(),r=this._model.graph.getValues(),a=new Array(n.length);for(let i=0;i<n.length;++i){let l=r[n[i]];a[i]=l.type.shape.dims,this.context.graphInputTypes.push(l.type.tensorType),this.context.graphInputDims.push(t[i].dims)}this.validateInputTensorDims(a,t,!0)}else this.validateInputTensorDims(this.context.graphInputDims,t,!1);return this.validateInputTensorTypes(this.context.graphInputTypes,t),t}validateInputTensorTypes(t,e){for(let n=0;n<e.length;n++){let r=t[n],a=e[n].type;if(r!==a)throw new Error(`input tensor[${n}] check failed: expected type '${r}' but got ${a}`)}}validateInputTensorDims(t,e,n){for(let r=0;r<e.length;r++){let a=t[r],i=e[r].dims;if(!this.compareTensorDims(a,i,n))throw new Error(`input tensor[${r}] check failed: expected shape '[${a.join(",")}]' but got [${i.join(",")}]`)}}compareTensorDims(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r]&&(!n||t[r]!==0))return!1;return!0}createOutput(t){let e=this._model.graph.getOutputNames();if(t.length!==e.length)throw new Error("expected number of outputs do not match number of generated outputs");let n=new Map;for(let r=0;r<e.length;++r)n.set(e[r],t[r]);return n}initializeOps(t){let e=t.getNodes();this._ops=new Array(e.length);for(let n=0;n<e.length;n++)this._ops[n]=this.sessionHandler.resolve(e[n],this._model.opsets,t)}}}),Io,vp=L$2(()=>{Ot(),yr(),Io=class{constructor(t){this.session=t,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(t,e,n){let r=new Map;for(let l in t)if(Object.hasOwnProperty.call(t,l)){let p=t[l];r.set(l,new $e(p.dims,p.type,void 0,void 0,p.data))}let a=await this.session.run(r),i={};return a.forEach((l,p)=>{i[p]=new Me(l.type,l.data,l.dims)}),i}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}}),_p={};Sr(_p,{onnxjsBackend:()=>tg});var Ji,tg,Op=L$2(()=>{wp(),vp(),Ji=class{async init(){}async createInferenceSessionHandler(t,e){let n=new Oo(e);return typeof t=="string"?await n.loadModel(t):await n.loadModel(t),new Io(n)}},tg=new Ji}),Zi={};Sr(Zi,{createReadStream:()=>Ip,readFile:()=>rg,readFileSync:()=>ng});var rg,ng,Ip,Qi=L$2(()=>{rg=void 0,ng=void 0,Ip=void 0}),ea={};Sr(ea,{join:()=>og});var og,ta=L$2(()=>{og=void 0}),Pp=me((t,e)=>{var n=(()=>{var r=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(r||=__filename),function(a={}){var i=a,l,p,m=new Promise((re,Ne)=>{l=re,p=Ne}),s=Object.assign({},i),h="./this.program",f=typeof window=="object",v=typeof importScripts=="function",I=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",G="",W,X,ge;if(I){var ie=(Qi(),ar(Zi)),Pe=(ta(),ar(ea));G=v?Pe.dirname(G)+"/":__dirname+"/",W=(re,Ne)=>(re=Se(re)?new URL(re):Pe.normalize(re),ie.readFileSync(re,Ne?void 0:"utf8")),ge=re=>(re=W(re,!0),re.buffer||(re=new Uint8Array(re)),re),X=(re,Ne,Ve,wt=!0)=>{re=Se(re)?new URL(re):Pe.normalize(re),ie.readFile(re,wt?void 0:"utf8",(In,ir)=>{In?Ve(In):Ne(wt?ir.buffer:ir)})},!i.thisProgram&&1<process.argv.length&&(h=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2)}else(f||v)&&(v?G=self.location.href:typeof document<"u"&&document.currentScript&&(G=document.currentScript.src),r&&(G=r),G.startsWith("blob:")?G="":G=G.substr(0,G.replace(/[?#].*/,"").lastIndexOf("/")+1),W=re=>{var Ne=new XMLHttpRequest;return Ne.open("GET",re,!1),Ne.send(null),Ne.responseText},v&&(ge=re=>{var Ne=new XMLHttpRequest;return Ne.open("GET",re,!1),Ne.responseType="arraybuffer",Ne.send(null),new Uint8Array(Ne.response)}),X=(re,Ne,Ve)=>{var wt=new XMLHttpRequest;wt.open("GET",re,!0),wt.responseType="arraybuffer",wt.onload=()=>{wt.status==200||wt.status==0&&wt.response?Ne(wt.response):Ve()},wt.onerror=Ve,wt.send(null)});var je=console.log.bind(console),rt=console.error.bind(console);Object.assign(i,s),s=null;var qt,de=!1,se,he,pe,Ae,Ce;function Te(){var re=qt.buffer;i.HEAP8=se=new Int8Array(re),i.HEAP16=new Int16Array(re),i.HEAPU8=he=new Uint8Array(re),i.HEAPU16=new Uint16Array(re),i.HEAP32=pe=new Int32Array(re),i.HEAPU32=Ae=new Uint32Array(re),i.HEAPF32=new Float32Array(re),i.HEAPF64=Ce=new Float64Array(re)}var Hr=[],or=[],ze=[],An=0,jt=null;function Xr(re){throw re="Aborted("+re+")",rt(re),de=!0,re=new WebAssembly.RuntimeError(re+". Build with -sASSERTIONS for more info."),p(re),re}var wn=re=>re.startsWith("data:application/octet-stream;base64,"),Se=re=>re.startsWith("file://"),et;if(et="ort-wasm.wasm",!wn(et)){var vn=et;et=i.locateFile?i.locateFile(vn,G):G+vn}function Tn(re){if(ge)return ge(re);throw"both async and sync fetching of the wasm failed"}function xn(re){if(f||v){if(typeof fetch=="function"&&!Se(re))return fetch(re,{credentials:"same-origin"}).then(Ne=>{if(!Ne.ok)throw`failed to load wasm binary file at '${re}'`;return Ne.arrayBuffer()}).catch(()=>Tn(re));if(X)return new Promise((Ne,Ve)=>{X(re,wt=>Ne(new Uint8Array(wt)),Ve)})}return Promise.resolve().then(()=>Tn(re))}function Sn(re,Ne,Ve){return xn(re).then(wt=>WebAssembly.instantiate(wt,Ne)).then(Ve,wt=>{rt(`failed to asynchronously prepare wasm: ${wt}`),Xr(wt)})}function Lr(re,Ne){var Ve=et;return typeof WebAssembly.instantiateStreaming!="function"||wn(Ve)||Se(Ve)||I||typeof fetch!="function"?Sn(Ve,re,Ne):fetch(Ve,{credentials:"same-origin"}).then(wt=>WebAssembly.instantiateStreaming(wt,re).then(Ne,function(In){return rt(`wasm streaming compile failed: ${In}`),rt("falling back to ArrayBuffer instantiation"),Sn(Ve,re,Ne)}))}var ti,ei={798088:(re,Ne,Ve,wt)=>{if(typeof i>"u"||!i.ya)return 1;if(re=tu(re>>>0),re.startsWith("./")&&(re=re.substring(2)),re=i.ya.get(re),!re)return 2;if(Ne>>>=0,Ve>>>=0,Ne+Ve>re.byteLength)return 3;try{return he.set(re.subarray(Ne,Ne+Ve),wt>>>0>>>0),0}catch{return 4}}};class $o{constructor(Ne){this.wa=Ne-24}}var Ea=0,$a=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,bu=(re,Ne,Ve)=>{Ne>>>=0;var wt=Ne+Ve;for(Ve=Ne;re[Ve]&&!(Ve>=wt);)++Ve;if(16<Ve-Ne&&re.buffer&&$a)return $a.decode(re.subarray(Ne,Ve));for(wt="";Ne<Ve;){var In=re[Ne++];if(In&128){var ir=re[Ne++]&63;if((In&224)==192)wt+=String.fromCharCode((In&31)<<6|ir);else{var qr=re[Ne++]&63;In=(In&240)==224?(In&15)<<12|ir<<6|qr:(In&7)<<18|ir<<12|qr<<6|re[Ne++]&63,65536>In?wt+=String.fromCharCode(In):(In-=65536,wt+=String.fromCharCode(55296|In>>10,56320|In&1023))}}else wt+=String.fromCharCode(In)}return wt},tu=(re,Ne)=>(re>>>=0)?bu(he,re,Ne):"",xd=re=>{for(var Ne=0,Ve=0;Ve<re.length;++Ve){var wt=re.charCodeAt(Ve);127>=wt?Ne++:2047>=wt?Ne+=2:55296<=wt&&57343>=wt?(Ne+=4,++Ve):Ne+=3}return Ne},Ca=(re,Ne,Ve,wt)=>{if(Ve>>>=0,!(0<wt))return 0;var In=Ve;wt=Ve+wt-1;for(var ir=0;ir<re.length;++ir){var qr=re.charCodeAt(ir);if(55296<=qr&&57343>=qr){var zo=re.charCodeAt(++ir);qr=65536+((qr&1023)<<10)|zo&1023}if(127>=qr){if(Ve>=wt)break;Ne[Ve++>>>0]=qr}else{if(2047>=qr){if(Ve+1>=wt)break;Ne[Ve++>>>0]=192|qr>>6}else{if(65535>=qr){if(Ve+2>=wt)break;Ne[Ve++>>>0]=224|qr>>12}else{if(Ve+3>=wt)break;Ne[Ve++>>>0]=240|qr>>18,Ne[Ve++>>>0]=128|qr>>12&63}Ne[Ve++>>>0]=128|qr>>6&63}Ne[Ve++>>>0]=128|qr&63}}return Ne[Ve>>>0]=0,Ve-In},lu=re=>re%4===0&&(re%100!==0||re%400===0),Wd=[0,31,60,91,121,152,182,213,244,274,305,335],na=[0,31,59,90,120,151,181,212,243,273,304,334],ra=[],Da={},Jg=()=>{if(!Nd){var re={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:h||"./this.program"},Ne;for(Ne in Da)Da[Ne]===void 0?delete re[Ne]:re[Ne]=Da[Ne];var Ve=[];for(Ne in re)Ve.push(`${Ne}=${re[Ne]}`);Nd=Ve}return Nd},Nd,Na=[null,[],[]],Ap=[31,29,31,30,31,30,31,31,30,31,30,31],uu=[31,28,31,30,31,30,31,31,30,31,30,31];function e_(re){var Ne=Array(xd(re)+1);return Ca(re,Ne,0,Ne.length),Ne}function ui(re,Ne,Ve,wt){function In(st,ci,Qo){for(st=typeof st=="number"?st.toString():st||"";st.length<ci;)st=Qo[0]+st;return st}function ir(st,ci){return In(st,ci,"0")}function qr(st,ci){function Qo(Wn){return 0>Wn?-1:0<Wn?1:0}var Ws;return(Ws=Qo(st.getFullYear()-ci.getFullYear()))===0&&(Ws=Qo(st.getMonth()-ci.getMonth()))===0&&(Ws=Qo(st.getDate()-ci.getDate())),Ws}function zo(st){switch(st.getDay()){case 0:return new Date(st.getFullYear()-1,11,29);case 1:return st;case 2:return new Date(st.getFullYear(),0,3);case 3:return new Date(st.getFullYear(),0,2);case 4:return new Date(st.getFullYear(),0,1);case 5:return new Date(st.getFullYear()-1,11,31);case 6:return new Date(st.getFullYear()-1,11,30)}}function fu(st){var ci=st.sa;for(st=new Date(new Date(st.ta+1900,0,1).getTime());0<ci;){var Qo=st.getMonth(),Ws=(lu(st.getFullYear())?Ap:uu)[Qo];if(ci>Ws-st.getDate())ci-=Ws-st.getDate()+1,st.setDate(1),11>Qo?st.setMonth(Qo+1):(st.setMonth(0),st.setFullYear(st.getFullYear()+1));else{st.setDate(st.getDate()+ci);break}}return Qo=new Date(st.getFullYear()+1,0,4),ci=zo(new Date(st.getFullYear(),0,4)),Qo=zo(Qo),0>=qr(ci,st)?0>=qr(Qo,st)?st.getFullYear()+1:st.getFullYear():st.getFullYear()-1}re>>>=0,Ne>>>=0,Ve>>>=0,wt>>>=0;var xa=Ae[wt+40>>>2>>>0];wt={Ba:pe[wt>>>2>>>0],Aa:pe[wt+4>>>2>>>0],ua:pe[wt+8>>>2>>>0],xa:pe[wt+12>>>2>>>0],va:pe[wt+16>>>2>>>0],ta:pe[wt+20>>>2>>>0],na:pe[wt+24>>>2>>>0],sa:pe[wt+28>>>2>>>0],Da:pe[wt+32>>>2>>>0],za:pe[wt+36>>>2>>>0],Ca:xa?tu(xa):""},Ve=tu(Ve),xa={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var Hs in xa)Ve=Ve.replace(new RegExp(Hs,"g"),xa[Hs]);var ah="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),yg="January February March April May June July August September October November December".split(" ");xa={"%a":st=>ah[st.na].substring(0,3),"%A":st=>ah[st.na],"%b":st=>yg[st.va].substring(0,3),"%B":st=>yg[st.va],"%C":st=>ir((st.ta+1900)/100|0,2),"%d":st=>ir(st.xa,2),"%e":st=>In(st.xa,2," "),"%g":st=>fu(st).toString().substring(2),"%G":fu,"%H":st=>ir(st.ua,2),"%I":st=>(st=st.ua,st==0?st=12:12<st&&(st-=12),ir(st,2)),"%j":st=>{for(var ci=0,Qo=0;Qo<=st.va-1;ci+=(lu(st.ta+1900)?Ap:uu)[Qo++]);return ir(st.xa+ci,3)},"%m":st=>ir(st.va+1,2),"%M":st=>ir(st.Aa,2),"%n":()=>`
`,"%p":st=>0<=st.ua&&12>st.ua?"AM":"PM","%S":st=>ir(st.Ba,2),"%t":()=>"	","%u":st=>st.na||7,"%U":st=>ir(Math.floor((st.sa+7-st.na)/7),2),"%V":st=>{var ci=Math.floor((st.sa+7-(st.na+6)%7)/7);if(2>=(st.na+371-st.sa-2)%7&&ci++,ci)ci==53&&(Qo=(st.na+371-st.sa)%7,Qo==4||Qo==3&&lu(st.ta)||(ci=1));else{ci=52;var Qo=(st.na+7-st.sa-1)%7;(Qo==4||Qo==5&&lu(st.ta%400-1))&&ci++}return ir(ci,2)},"%w":st=>st.na,"%W":st=>ir(Math.floor((st.sa+7-(st.na+6)%7)/7),2),"%y":st=>(st.ta+1900).toString().substring(2),"%Y":st=>st.ta+1900,"%z":st=>{st=st.za;var ci=0<=st;return st=Math.abs(st)/60,(ci?"+":"-")+("0000"+(st/60*100+st%60)).slice(-4)},"%Z":st=>st.Ca,"%%":()=>"%"},Ve=Ve.replace(/%%/g,"\0\0");for(Hs in xa)Ve.includes(Hs)&&(Ve=Ve.replace(new RegExp(Hs,"g"),xa[Hs](wt)));return Ve=Ve.replace(/\0\0/g,"%"),Hs=e_(Ve),Hs.length>Ne?0:(se.set(Hs,re>>>0),Hs.length-1)}var P_={a:function(re,Ne,Ve){re>>>=0;var wt=new $o(re);throw Ae[wt.wa+16>>>2>>>0]=0,Ae[wt.wa+4>>>2>>>0]=Ne>>>0,Ae[wt.wa+8>>>2>>>0]=Ve>>>0,Ea=re,Ea},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,I:function(re,Ne,Ve){return Ne>>>=0,he.copyWithin(re>>>0>>>0,Ne>>>0,Ne+(Ve>>>0)>>>0)},n:function(re,Ne,Ve){re=Ne+2097152>>>0<4194305-!!re?(re>>>0)+4294967296*Ne:NaN,Ve>>>=0,re=new Date(1e3*re),pe[Ve>>>2>>>0]=re.getUTCSeconds(),pe[Ve+4>>>2>>>0]=re.getUTCMinutes(),pe[Ve+8>>>2>>>0]=re.getUTCHours(),pe[Ve+12>>>2>>>0]=re.getUTCDate(),pe[Ve+16>>>2>>>0]=re.getUTCMonth(),pe[Ve+20>>>2>>>0]=re.getUTCFullYear()-1900,pe[Ve+24>>>2>>>0]=re.getUTCDay(),pe[Ve+28>>>2>>>0]=(re.getTime()-Date.UTC(re.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(re,Ne,Ve){re=Ne+2097152>>>0<4194305-!!re?(re>>>0)+4294967296*Ne:NaN,Ve>>>=0,re=new Date(1e3*re),pe[Ve>>>2>>>0]=re.getSeconds(),pe[Ve+4>>>2>>>0]=re.getMinutes(),pe[Ve+8>>>2>>>0]=re.getHours(),pe[Ve+12>>>2>>>0]=re.getDate(),pe[Ve+16>>>2>>>0]=re.getMonth(),pe[Ve+20>>>2>>>0]=re.getFullYear()-1900,pe[Ve+24>>>2>>>0]=re.getDay(),pe[Ve+28>>>2>>>0]=(lu(re.getFullYear())?Wd:na)[re.getMonth()]+re.getDate()-1|0,pe[Ve+36>>>2>>>0]=-(60*re.getTimezoneOffset()),Ne=new Date(re.getFullYear(),6,1).getTimezoneOffset();var wt=new Date(re.getFullYear(),0,1).getTimezoneOffset();pe[Ve+32>>>2>>>0]=(Ne!=wt&&re.getTimezoneOffset()==Math.min(wt,Ne))|0},p:function(re){re>>>=0;var Ne=new Date(pe[re+20>>>2>>>0]+1900,pe[re+16>>>2>>>0],pe[re+12>>>2>>>0],pe[re+8>>>2>>>0],pe[re+4>>>2>>>0],pe[re>>>2>>>0],0),Ve=pe[re+32>>>2>>>0],wt=Ne.getTimezoneOffset(),In=new Date(Ne.getFullYear(),6,1).getTimezoneOffset(),ir=new Date(Ne.getFullYear(),0,1).getTimezoneOffset(),qr=Math.min(ir,In);return 0>Ve?pe[re+32>>>2>>>0]=+(In!=ir&&qr==wt):0<Ve!=(qr==wt)&&(In=Math.max(ir,In),Ne.setTime(Ne.getTime()+6e4*((0<Ve?qr:In)-wt))),pe[re+24>>>2>>>0]=Ne.getDay(),pe[re+28>>>2>>>0]=(lu(Ne.getFullYear())?Wd:na)[Ne.getMonth()]+Ne.getDate()-1|0,pe[re>>>2>>>0]=Ne.getSeconds(),pe[re+4>>>2>>>0]=Ne.getMinutes(),pe[re+8>>>2>>>0]=Ne.getHours(),pe[re+12>>>2>>>0]=Ne.getDate(),pe[re+16>>>2>>>0]=Ne.getMonth(),pe[re+20>>>2>>>0]=Ne.getYear(),re=Ne.getTime(),re=isNaN(re)?-1:re/1e3,t_((ti=re,1<=+Math.abs(ti)?0<ti?+Math.floor(ti/4294967296)>>>0:~~+Math.ceil((ti-+(~~ti>>>0))/4294967296)>>>0:0)),re>>>0},l:function(){return-52},m:function(){},t:function(re,Ne,Ve,wt){Ve>>>=0,wt>>>=0;var In=new Date().getFullYear(),ir=new Date(In,0,1),qr=new Date(In,6,1);In=ir.getTimezoneOffset();var zo=qr.getTimezoneOffset();Ae[re>>>0>>>2>>>0]=60*Math.max(In,zo),pe[Ne>>>0>>>2>>>0]=+(In!=zo),re=fu=>fu.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],ir=re(ir),qr=re(qr),zo<In?(Ca(ir,he,Ve,17),Ca(qr,he,wt,17)):(Ca(ir,he,wt,17),Ca(qr,he,Ve,17))},d:()=>{Xr("")},B:function(re,Ne,Ve){re>>>=0,Ne>>>=0,Ve>>>=0,ra.length=0;for(var wt;wt=he[Ne++>>>0];){var In=wt!=105;In&=wt!=112,Ve+=In&&Ve%8?4:0,ra.push(wt==112?Ae[Ve>>>2>>>0]:wt==105?pe[Ve>>>2>>>0]:Ce[Ve>>>3>>>0]),Ve+=In?8:4}return ei[re](...ra)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),s:function(re){re>>>=0;var Ne=he.length;if(4294901760<re)return!1;for(var Ve=1;4>=Ve;Ve*=2){var wt=Ne*(1+.2/Ve);wt=Math.min(wt,re+100663296);var In=Math;wt=Math.max(re,wt);e:{In=(In.min.call(In,4294901760,wt+(65536-wt%65536)%65536)-qt.buffer.byteLength+65535)/65536;try{qt.grow(In),Te();var ir=1;break e}catch{}ir=void 0}if(ir)return!0}return!1},C:function(re,Ne){re>>>=0,Ne>>>=0;var Ve=0;return Jg().forEach((wt,In)=>{var ir=Ne+Ve;for(In=Ae[re+4*In>>>2>>>0]=ir,ir=0;ir<wt.length;++ir)se[In++>>>0]=wt.charCodeAt(ir);se[In>>>0]=0,Ve+=wt.length+1}),0},D:function(re,Ne){re>>>=0,Ne>>>=0;var Ve=Jg();Ae[re>>>2>>>0]=Ve.length;var wt=0;return Ve.forEach(In=>wt+=In.length+1),Ae[Ne>>>2>>>0]=wt,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(re,Ne,Ve,wt){Ne>>>=0,Ve>>>=0,wt>>>=0;for(var In=0,ir=0;ir<Ve;ir++){var qr=Ae[Ne>>>2>>>0],zo=Ae[Ne+4>>>2>>>0];Ne+=8;for(var fu=0;fu<zo;fu++){var xa=he[qr+fu>>>0],Hs=Na[re];xa===0||xa===10?((re===1?je:rt)(bu(Hs,0)),Hs.length=0):Hs.push(xa)}In+=zo}return Ae[wt>>>2>>>0]=In,0},r:ui,c:function(re,Ne,Ve,wt){return ui(re>>>0,Ne>>>0,Ve>>>0,wt>>>0)}},Kr=(function(){function re(Ve){return Kr=Ve.exports,Kr=Ma(),qt=Kr.K,Te(),or.unshift(Kr.L),An--,An==0&&jt&&(Ve=jt,jt=null,Ve()),Kr}var Ne={a:P_};if(An++,i.instantiateWasm)try{return i.instantiateWasm(Ne,re)}catch(Ve){rt(`Module.instantiateWasm callback failed with error: ${Ve}`),p(Ve)}return Lr(Ne,function(Ve){re(Ve.instance)}).catch(p),{}})();i._OrtInit=(re,Ne)=>(i._OrtInit=Kr.M)(re,Ne),i._OrtGetLastError=(re,Ne)=>(i._OrtGetLastError=Kr.N)(re,Ne),i._OrtCreateSessionOptions=(re,Ne,Ve,wt,In,ir,qr,zo,fu,xa)=>(i._OrtCreateSessionOptions=Kr.O)(re,Ne,Ve,wt,In,ir,qr,zo,fu,xa),i._OrtAppendExecutionProvider=(re,Ne)=>(i._OrtAppendExecutionProvider=Kr.P)(re,Ne),i._OrtAddFreeDimensionOverride=(re,Ne,Ve)=>(i._OrtAddFreeDimensionOverride=Kr.Q)(re,Ne,Ve),i._OrtAddSessionConfigEntry=(re,Ne,Ve)=>(i._OrtAddSessionConfigEntry=Kr.R)(re,Ne,Ve),i._OrtReleaseSessionOptions=re=>(i._OrtReleaseSessionOptions=Kr.S)(re),i._OrtCreateSession=(re,Ne,Ve)=>(i._OrtCreateSession=Kr.T)(re,Ne,Ve),i._OrtReleaseSession=re=>(i._OrtReleaseSession=Kr.U)(re),i._OrtGetInputOutputCount=(re,Ne,Ve)=>(i._OrtGetInputOutputCount=Kr.V)(re,Ne,Ve),i._OrtGetInputName=(re,Ne)=>(i._OrtGetInputName=Kr.W)(re,Ne),i._OrtGetOutputName=(re,Ne)=>(i._OrtGetOutputName=Kr.X)(re,Ne),i._OrtFree=re=>(i._OrtFree=Kr.Y)(re),i._OrtCreateTensor=(re,Ne,Ve,wt,In,ir)=>(i._OrtCreateTensor=Kr.Z)(re,Ne,Ve,wt,In,ir),i._OrtGetTensorData=(re,Ne,Ve,wt,In)=>(i._OrtGetTensorData=Kr._)(re,Ne,Ve,wt,In),i._OrtReleaseTensor=re=>(i._OrtReleaseTensor=Kr.$)(re),i._OrtCreateRunOptions=(re,Ne,Ve,wt)=>(i._OrtCreateRunOptions=Kr.aa)(re,Ne,Ve,wt),i._OrtAddRunConfigEntry=(re,Ne,Ve)=>(i._OrtAddRunConfigEntry=Kr.ba)(re,Ne,Ve),i._OrtReleaseRunOptions=re=>(i._OrtReleaseRunOptions=Kr.ca)(re),i._OrtCreateBinding=re=>(i._OrtCreateBinding=Kr.da)(re),i._OrtBindInput=(re,Ne,Ve)=>(i._OrtBindInput=Kr.ea)(re,Ne,Ve),i._OrtBindOutput=(re,Ne,Ve,wt)=>(i._OrtBindOutput=Kr.fa)(re,Ne,Ve,wt),i._OrtClearBoundOutputs=re=>(i._OrtClearBoundOutputs=Kr.ga)(re),i._OrtReleaseBinding=re=>(i._OrtReleaseBinding=Kr.ha)(re),i._OrtRunWithBinding=(re,Ne,Ve,wt,In)=>(i._OrtRunWithBinding=Kr.ia)(re,Ne,Ve,wt,In),i._OrtRun=(re,Ne,Ve,wt,In,ir,qr,zo)=>(i._OrtRun=Kr.ja)(re,Ne,Ve,wt,In,ir,qr,zo),i._OrtEndProfiling=re=>(i._OrtEndProfiling=Kr.ka)(re),i._malloc=re=>(i._malloc=Kr.la)(re),i._free=re=>(i._free=Kr.ma)(re);var t_=re=>(t_=Kr.oa)(re),n_=re=>(n_=Kr.pa)(re),hu=re=>(hu=Kr.qa)(re),rr=()=>(rr=Kr.ra)();function Ma(){var re=Kr;re=Object.assign({},re);var Ne=Ve=>wt=>Ve(wt)>>>0;return re.la=Ne(re.la),re.qa=Ne(re.qa),re.ra=(Ve=>()=>Ve()>>>0)(re.ra),re}i.stackSave=()=>rr(),i.stackRestore=re=>n_(re),i.stackAlloc=re=>hu(re),i.UTF8ToString=tu,i.stringToUTF8=(re,Ne,Ve)=>Ca(re,he,Ne,Ve),i.lengthBytesUTF8=xd;var Us;jt=function re(){Us||Tu(),Us||(jt=re)};function Tu(){if(!(0<An)){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;){var re=i.preRun.shift();Hr.unshift(re)}for(;0<Hr.length;)Hr.shift()(i);if(!(0<An||Us||(Us=!0,i.calledRun=!0,de))){for(;0<or.length;)or.shift()(i);for(l(i);0<ze.length;)ze.shift()(i)}}}return Tu(),m}})();typeof t=="object"&&typeof e=="object"?e.exports=n:typeof define=="function"&&define.amd&&define([],()=>n)}),Ep=me(()=>{}),Dp=me(()=>{}),Lp={};Sr(Lp,{cpus:()=>ig});var ig,Cp=L$2(()=>{ig=void 0}),kp=me((t,e)=>{var n=(()=>{var r=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(r||=__filename),function(a={}){function i(){return ze.buffer!=wn.buffer&&xn(),wn}function l(){return ze.buffer!=wn.buffer&&xn(),Se}function p(){return ze.buffer!=wn.buffer&&xn(),et}function m(){return ze.buffer!=wn.buffer&&xn(),vn}function s(){return ze.buffer!=wn.buffer&&xn(),Tn}var h=a,f,v,I=new Promise((D,ue)=>{f=D,v=ue}),G=Object.assign({},h),W="./this.program",X=(D,ue)=>{throw ue},ge=typeof window=="object",ie=typeof importScripts=="function",Pe=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",je=h.ENVIRONMENT_IS_PTHREAD||!1,rt="";function qt(D){return h.locateFile?h.locateFile(D,rt):rt+D}var de,se,he;if(Pe){var pe=(Qi(),ar(Zi)),Ae=(ta(),ar(ea));rt=ie?Ae.dirname(rt)+"/":__dirname+"/",de=(D,ue)=>(D=xd(D)?new URL(D):Ae.normalize(D),pe.readFileSync(D,ue?void 0:"utf8")),he=D=>(D=de(D,!0),D.buffer||(D=new Uint8Array(D)),D),se=(D,ue,Re,Be=!0)=>{D=xd(D)?new URL(D):Ae.normalize(D),pe.readFile(D,Be?void 0:"utf8",(Gt,$t)=>{Gt?Re(Gt):ue(Be?$t.buffer:$t)})},!h.thisProgram&&1<process.argv.length&&(W=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),X=(D,ue)=>{throw process.exitCode=D,ue},global.Worker=Ep().Worker}else(ge||ie)&&(ie?rt=self.location.href:typeof document<"u"&&document.currentScript&&(rt=document.currentScript.src),typeof r<"u"&&r&&(rt=r),rt.startsWith("blob:")?rt="":rt=rt.substr(0,rt.replace(/[?#].*/,"").lastIndexOf("/")+1),Pe||(de=D=>{var ue=new XMLHttpRequest;return ue.open("GET",D,!1),ue.send(null),ue.responseText},ie&&(he=D=>{var ue=new XMLHttpRequest;return ue.open("GET",D,!1),ue.responseType="arraybuffer",ue.send(null),new Uint8Array(ue.response)}),se=(D,ue,Re)=>{var Be=new XMLHttpRequest;Be.open("GET",D,!0),Be.responseType="arraybuffer",Be.onload=()=>{Be.status==200||Be.status==0&&Be.response?ue(Be.response):Re()},Be.onerror=Re,Be.send(null)}));Pe&&typeof performance>"u"&&(global.performance=Dp().performance);var Ce=console.log.bind(console),Te=console.error.bind(console);Pe&&(Ce=(...D)=>pe.writeSync(1,D.join(" ")+`
`),Te=(...D)=>pe.writeSync(2,D.join(" ")+`
`));var Hr=Ce,or=Te;Object.assign(h,G),G=null;var ze,An,jt=!1,Xr,wn,Se,et,vn,Tn;function xn(){var D=ze.buffer;h.HEAP8=wn=new Int8Array(D),h.HEAP16=new Int16Array(D),h.HEAPU8=Se=new Uint8Array(D),h.HEAPU16=new Uint16Array(D),h.HEAP32=et=new Int32Array(D),h.HEAPU32=vn=new Uint32Array(D),h.HEAPF32=new Float32Array(D),h.HEAPF64=Tn=new Float64Array(D)}var Sn=16777216;if(je)ze=h.wasmMemory;else if(h.wasmMemory)ze=h.wasmMemory;else if(ze=new WebAssembly.Memory({initial:Sn/65536,maximum:65536,shared:!0}),!(ze.buffer instanceof SharedArrayBuffer))throw or("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),Pe&&or("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");xn(),Sn=ze.buffer.byteLength;var Lr=[],ti=[],ei=[],$o=0,Ea=null;function $a(){if($o--,$o==0&&Ea){var D=Ea;Ea=null,D()}}function bu(D){throw D="Aborted("+D+")",or(D),jt=!0,Xr=1,D=new WebAssembly.RuntimeError(D+". Build with -sASSERTIONS for more info."),v(D),D}var tu=D=>D.startsWith("data:application/octet-stream;base64,"),xd=D=>D.startsWith("file://"),Ca;Ca="ort-wasm-threaded.wasm",tu(Ca)||(Ca=qt(Ca));function lu(D){if(he)return he(D);throw"both async and sync fetching of the wasm failed"}function Wd(D){if(ge||ie){if(typeof fetch=="function"&&!xd(D))return fetch(D,{credentials:"same-origin"}).then(ue=>{if(!ue.ok)throw`failed to load wasm binary file at '${D}'`;return ue.arrayBuffer()}).catch(()=>lu(D));if(se)return new Promise((ue,Re)=>{se(D,Be=>ue(new Uint8Array(Be)),Re)})}return Promise.resolve().then(()=>lu(D))}function na(D,ue,Re){return Wd(D).then(Be=>WebAssembly.instantiate(Be,ue)).then(Re,Be=>{or(`failed to asynchronously prepare wasm: ${Be}`),bu(Be)})}function ra(D,ue){var Re=Ca;return typeof WebAssembly.instantiateStreaming!="function"||tu(Re)||xd(Re)||Pe||typeof fetch!="function"?na(Re,D,ue):fetch(Re,{credentials:"same-origin"}).then(Be=>WebAssembly.instantiateStreaming(Be,D).then(ue,function(Gt){return or(`wasm streaming compile failed: ${Gt}`),or("falling back to ArrayBuffer instantiation"),na(Re,D,ue)}))}var Da,Jg={799444:(D,ue,Re,Be)=>{if(typeof h>"u"||!h.bb)return 1;if(D=zo(D>>>0),D.startsWith("./")&&(D=D.substring(2)),D=h.bb.get(D),!D)return 2;if(ue>>>=0,Re>>>=0,Be>>>=0,ue+Re>D.byteLength)return 3;try{return l().set(D.subarray(ue,ue+Re),Be>>>0),0}catch{return 4}}};function Nd(D){this.name="ExitStatus",this.message=`Program terminated with exit(${D})`,this.status=D}var Na=D=>{D.terminate(),D.onmessage=()=>{}},Ap=D=>{rr.Oa.length==0&&(n_(),rr.Xa(rr.Oa[0]));var ue=rr.Oa.pop();if(!ue)return 6;rr.Pa.push(ue),rr.La[D.Na]=ue,ue.Na=D.Na;var Re={cmd:"run",start_routine:D.gb,arg:D.cb,pthread_ptr:D.Na};return Pe&&ue.unref(),ue.postMessage(Re,D.mb),0},uu=0,e_=D=>{var ue=i_();return D=D(),pu(ue),D},ui=(D,ue,...Re)=>e_(()=>{for(var Be=Re.length,Gt=Pa(8*Be),$t=Gt>>>3,nr=0;nr<Re.length;nr++){var qn=Re[nr];s()[$t+nr>>>0]=qn}return qs(D,0,Be,Gt,ue)});function P_(D){if(je)return ui(0,1,D);Xr=D,0<uu||(rr.hb(),h.onExit?.(D),jt=!0),X(D,new Nd(D))}var Kr=D=>{if(Xr=D,je)throw Us(D),"unwind";P_(D)};function t_(){for(var D=h.numThreads;D--;)n_();Lr.unshift(()=>{$o++,hu(()=>$a())})}function n_(){var D=qt("ort-wasm-threaded.worker.js");D=new Worker(D),rr.Oa.push(D)}function hu(D){je?D():Promise.all(rr.Oa.map(rr.Xa)).then(D)}var rr={Oa:[],Pa:[],ab:[],La:{},Va(){je?(rr.receiveObjectTransfer=rr.fb,rr.threadInitTLS=rr.$a,rr.setExitStatus=rr.Za):t_()},Za:D=>Xr=D,pb:["$terminateWorker"],hb:()=>{for(var D of rr.Pa)Na(D);for(D of rr.Oa)Na(D);rr.Oa=[],rr.Pa=[],rr.La=[]},Ya:D=>{var ue=D.Na;delete rr.La[ue],rr.Oa.push(D),rr.Pa.splice(rr.Pa.indexOf(D),1),D.Na=0,r_(ue)},fb(){},$a(){rr.ab.forEach(D=>D())},Xa:D=>new Promise(ue=>{D.onmessage=$t=>{$t=$t.data;var nr=$t.cmd;if($t.targetThread&&$t.targetThread!=du()){var qn=rr.La[$t.targetThread];qn?qn.postMessage($t,$t.transferList):or(`Internal error! Worker sent a message "${nr}" to target pthread ${$t.targetThread}, but that thread no longer exists!`)}else nr==="checkMailbox"?m_():nr==="spawnThread"?Ap($t):nr==="cleanupThread"?rr.Ya(rr.La[$t.thread]):nr==="killThread"?($t=$t.thread,nr=rr.La[$t],delete rr.La[$t],Na(nr),r_($t),rr.Pa.splice(rr.Pa.indexOf(nr),1),nr.Na=0):nr==="cancelThread"?rr.La[$t.thread].postMessage({cmd:"cancel"}):nr==="loaded"?(D.loaded=!0,Pe&&!D.Na&&D.unref(),ue(D)):nr==="alert"?alert(`Thread ${$t.threadId}: ${$t.text}`):$t.target==="setimmediate"?D.postMessage($t):nr==="callHandler"?h[$t.handler](...$t.args):nr&&or(`worker sent an unknown command ${nr}`)},D.onerror=$t=>{throw or(`worker sent an error! ${$t.filename}:${$t.lineno}: ${$t.message}`),$t},Pe&&(D.on("message",$t=>D.onmessage({data:$t})),D.on("error",$t=>D.onerror($t)));var Re=[],Be=["onExit"],Gt;for(Gt of Be)h.hasOwnProperty(Gt)&&Re.push(Gt);D.postMessage({cmd:"load",handlers:Re,urlOrBlob:h.mainScriptUrlOrBlob||r,wasmMemory:ze,wasmModule:An})})};h.PThread=rr;var Ma=D=>{for(;0<D.length;)D.shift()(h)};h.establishStackSpace=()=>{var D=du(),ue=m()[D+52>>>2>>>0];D=m()[D+56>>>2>>>0],rm(ue,ue-D),pu(ue)};function Us(D){if(je)return ui(1,0,D);Kr(D)}var Tu=[],re;h.invokeEntryPoint=(D,ue)=>{uu=0;var Re=Tu[D];Re||(D>=Tu.length&&(Tu.length=D+1),Tu[D]=Re=re.get(D)),D=Re(ue),0<uu?rr.Za(D):Fg(D)};class Ne{constructor(ue){this.Ua=ue-24}Va(ue,Re){m()[this.Ua+16>>>2>>>0]=0,m()[this.Ua+4>>>2>>>0]=ue,m()[this.Ua+8>>>2>>>0]=Re}}var Ve=0;function wt(D,ue,Re,Be){return je?ui(2,1,D,ue,Re,Be):In(D,ue,Re,Be)}function In(D,ue,Re,Be){if(D>>>=0,ue>>>=0,Re>>>=0,Be>>>=0,typeof SharedArrayBuffer>"u")return or("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var Gt=[];return je&&Gt.length===0?wt(D,ue,Re,Be):(D={gb:Re,Na:D,cb:Be,mb:Gt},je?(D.ob="spawnThread",postMessage(D,Gt),0):Ap(D))}var ir=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,qr=(D,ue,Re)=>{ue>>>=0;var Be=ue+Re;for(Re=ue;D[Re]&&!(Re>=Be);)++Re;if(16<Re-ue&&D.buffer&&ir)return ir.decode(D.buffer instanceof SharedArrayBuffer?D.slice(ue,Re):D.subarray(ue,Re));for(Be="";ue<Re;){var Gt=D[ue++];if(Gt&128){var $t=D[ue++]&63;if((Gt&224)==192)Be+=String.fromCharCode((Gt&31)<<6|$t);else{var nr=D[ue++]&63;Gt=(Gt&240)==224?(Gt&15)<<12|$t<<6|nr:(Gt&7)<<18|$t<<12|nr<<6|D[ue++]&63,65536>Gt?Be+=String.fromCharCode(Gt):(Gt-=65536,Be+=String.fromCharCode(55296|Gt>>10,56320|Gt&1023))}}else Be+=String.fromCharCode(Gt)}return Be},zo=(D,ue)=>(D>>>=0)?qr(l(),D,ue):"";function fu(D,ue,Re){return je?ui(3,1,D,ue,Re):0}function xa(D,ue){if(je)return ui(4,1,D,ue)}var Hs=D=>{for(var ue=0,Re=0;Re<D.length;++Re){var Be=D.charCodeAt(Re);127>=Be?ue++:2047>=Be?ue+=2:55296<=Be&&57343>=Be?(ue+=4,++Re):ue+=3}return ue},ah=(D,ue,Re,Be)=>{if(Re>>>=0,!(0<Be))return 0;var Gt=Re;Be=Re+Be-1;for(var $t=0;$t<D.length;++$t){var nr=D.charCodeAt($t);if(55296<=nr&&57343>=nr){var qn=D.charCodeAt(++$t);nr=65536+((nr&1023)<<10)|qn&1023}if(127>=nr){if(Re>=Be)break;ue[Re++>>>0]=nr}else{if(2047>=nr){if(Re+1>=Be)break;ue[Re++>>>0]=192|nr>>6}else{if(65535>=nr){if(Re+2>=Be)break;ue[Re++>>>0]=224|nr>>12}else{if(Re+3>=Be)break;ue[Re++>>>0]=240|nr>>18,ue[Re++>>>0]=128|nr>>12&63}ue[Re++>>>0]=128|nr>>6&63}ue[Re++>>>0]=128|nr&63}}return ue[Re>>>0]=0,Re-Gt},yg=(D,ue,Re)=>ah(D,l(),ue,Re);function st(D,ue){if(je)return ui(5,1,D,ue)}function ci(D,ue,Re){if(je)return ui(6,1,D,ue,Re)}function Qo(D,ue,Re){return je?ui(7,1,D,ue,Re):0}function Ws(D,ue){if(je)return ui(8,1,D,ue)}function Wn(D,ue,Re){if(je)return ui(9,1,D,ue,Re)}function O_(D,ue,Re,Be){if(je)return ui(10,1,D,ue,Re,Be)}function fh(D,ue,Re,Be){if(je)return ui(11,1,D,ue,Re,Be)}function Ih(D,ue,Re,Be){if(je)return ui(12,1,D,ue,Re,Be)}function wa(D){if(je)return ui(13,1,D)}function Ia(D,ue){if(je)return ui(14,1,D,ue)}function Vd(D,ue,Re){if(je)return ui(15,1,D,ue,Re)}function gd(D){D>>>=0,typeof Atomics.nb=="function"&&(Atomics.nb(p(),D>>>2,D).value.then(m_),D+=128,Atomics.store(p(),D>>>2,1))}h.__emscripten_thread_mailbox_await=gd;var m_=()=>{var D=du();if(D&&(gd(D),D=Bd,!jt))try{if(D(),!(0<uu))try{je?Fg(Xr):Kr(Xr)}catch(ue){ue instanceof Nd||ue=="unwind"||X(1,ue)}}catch(ue){ue instanceof Nd||ue=="unwind"||X(1,ue)}};h.checkMailbox=m_;var C_=[],Mg=D=>D%4===0&&(D%100!==0||D%400===0),Sp=[0,31,60,91,121,152,182,213,244,274,305,335],g_=[0,31,59,90,120,151,181,212,243,273,304,334];function Md(D,ue,Re,Be,Gt,$t,nr,qn){return je?ui(16,1,D,ue,Re,Be,Gt,$t,nr,qn):-52}function yd(D,ue,Re,Be,Gt,$t,nr){if(je)return ui(17,1,D,ue,Re,Be,Gt,$t,nr)}var ka=[],Ud={},Sa=()=>{if(!__){var D={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:W||"./this.program"},ue;for(ue in Ud)Ud[ue]===void 0?delete D[ue]:D[ue]=Ud[ue];var Re=[];for(ue in D)Re.push(`${ue}=${D[ue]}`);__=Re}return __},__;function D_(D,ue){if(je)return ui(18,1,D,ue);D>>>=0,ue>>>=0;var Re=0;return Sa().forEach((Be,Gt)=>{var $t=ue+Re;for(Gt=m()[D+4*Gt>>>2>>>0]=$t,$t=0;$t<Be.length;++$t)i()[Gt++>>>0]=Be.charCodeAt($t);i()[Gt>>>0]=0,Re+=Be.length+1}),0}function Fp(D,ue){if(je)return ui(19,1,D,ue);D>>>=0,ue>>>=0;var Re=Sa();m()[D>>>2>>>0]=Re.length;var Be=0;return Re.forEach(Gt=>Be+=Gt.length+1),m()[ue>>>2>>>0]=Be,0}function bd(D){return je?ui(20,1,D):52}function Eg(D,ue,Re,Be){return je?ui(21,1,D,ue,Re,Be):52}function y_(D,ue,Re,Be,Gt){return je?ui(22,1,D,ue,Re,Be,Gt):70}var N_=[null,[],[]];function kg(D,ue,Re,Be){if(je)return ui(23,1,D,ue,Re,Be);ue>>>=0,Re>>>=0,Be>>>=0;for(var Gt=0,$t=0;$t<Re;$t++){var nr=m()[ue>>>2>>>0],qn=m()[ue+4>>>2>>>0];ue+=8;for(var Ys=0;Ys<qn;Ys++){var Yr=l()[nr+Ys>>>0],Aa=N_[D];Yr===0||Yr===10?((D===1?Hr:or)(qr(Aa,0)),Aa.length=0):Aa.push(Yr)}Gt+=qn}return m()[Be>>>2>>>0]=Gt,0}var ni=[31,29,31,30,31,30,31,31,30,31,30,31],ai=[31,28,31,30,31,30,31,31,30,31,30,31];function ya(D){var ue=Array(Hs(D)+1);return ah(D,ue,0,ue.length),ue}var va=(D,ue)=>{i().set(D,ue>>>0)};function wu(D,ue,Re,Be){function Gt(vt,pr,Ro){for(vt=typeof vt=="number"?vt.toString():vt||"";vt.length<pr;)vt=Ro[0]+vt;return vt}function $t(vt,pr){return Gt(vt,pr,"0")}function nr(vt,pr){function Ro(ha){return 0>ha?-1:0<ha?1:0}var gu;return(gu=Ro(vt.getFullYear()-pr.getFullYear()))===0&&(gu=Ro(vt.getMonth()-pr.getMonth()))===0&&(gu=Ro(vt.getDate()-pr.getDate())),gu}function qn(vt){switch(vt.getDay()){case 0:return new Date(vt.getFullYear()-1,11,29);case 1:return vt;case 2:return new Date(vt.getFullYear(),0,3);case 3:return new Date(vt.getFullYear(),0,2);case 4:return new Date(vt.getFullYear(),0,1);case 5:return new Date(vt.getFullYear()-1,11,31);case 6:return new Date(vt.getFullYear()-1,11,30)}}function Ys(vt){var pr=vt.Qa;for(vt=new Date(new Date(vt.Ra+1900,0,1).getTime());0<pr;){var Ro=vt.getMonth(),gu=(Mg(vt.getFullYear())?ni:ai)[Ro];if(pr>gu-vt.getDate())pr-=gu-vt.getDate()+1,vt.setDate(1),11>Ro?vt.setMonth(Ro+1):(vt.setMonth(0),vt.setFullYear(vt.getFullYear()+1));else{vt.setDate(vt.getDate()+pr);break}}return Ro=new Date(vt.getFullYear()+1,0,4),pr=qn(new Date(vt.getFullYear(),0,4)),Ro=qn(Ro),0>=nr(pr,vt)?0>=nr(Ro,vt)?vt.getFullYear()+1:vt.getFullYear():vt.getFullYear()-1}D>>>=0,ue>>>=0,Re>>>=0,Be>>>=0;var Yr=m()[Be+40>>>2>>>0];Be={kb:p()[Be>>>2>>>0],jb:p()[Be+4>>>2>>>0],Sa:p()[Be+8>>>2>>>0],Wa:p()[Be+12>>>2>>>0],Ta:p()[Be+16>>>2>>>0],Ra:p()[Be+20>>>2>>>0],Ma:p()[Be+24>>>2>>>0],Qa:p()[Be+28>>>2>>>0],qb:p()[Be+32>>>2>>>0],ib:p()[Be+36>>>2>>>0],lb:Yr?zo(Yr):""},Re=zo(Re),Yr={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var Aa in Yr)Re=Re.replace(new RegExp(Aa,"g"),Yr[Aa]);var Au="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),mu="January February March April May June July August September October November December".split(" ");Yr={"%a":vt=>Au[vt.Ma].substring(0,3),"%A":vt=>Au[vt.Ma],"%b":vt=>mu[vt.Ta].substring(0,3),"%B":vt=>mu[vt.Ta],"%C":vt=>$t((vt.Ra+1900)/100|0,2),"%d":vt=>$t(vt.Wa,2),"%e":vt=>Gt(vt.Wa,2," "),"%g":vt=>Ys(vt).toString().substring(2),"%G":Ys,"%H":vt=>$t(vt.Sa,2),"%I":vt=>(vt=vt.Sa,vt==0?vt=12:12<vt&&(vt-=12),$t(vt,2)),"%j":vt=>{for(var pr=0,Ro=0;Ro<=vt.Ta-1;pr+=(Mg(vt.Ra+1900)?ni:ai)[Ro++]);return $t(vt.Wa+pr,3)},"%m":vt=>$t(vt.Ta+1,2),"%M":vt=>$t(vt.jb,2),"%n":()=>`
`,"%p":vt=>0<=vt.Sa&&12>vt.Sa?"AM":"PM","%S":vt=>$t(vt.kb,2),"%t":()=>"	","%u":vt=>vt.Ma||7,"%U":vt=>$t(Math.floor((vt.Qa+7-vt.Ma)/7),2),"%V":vt=>{var pr=Math.floor((vt.Qa+7-(vt.Ma+6)%7)/7);if(2>=(vt.Ma+371-vt.Qa-2)%7&&pr++,pr)pr==53&&(Ro=(vt.Ma+371-vt.Qa)%7,Ro==4||Ro==3&&Mg(vt.Ra)||(pr=1));else{pr=52;var Ro=(vt.Ma+7-vt.Qa-1)%7;(Ro==4||Ro==5&&Mg(vt.Ra%400-1))&&pr++}return $t(pr,2)},"%w":vt=>vt.Ma,"%W":vt=>$t(Math.floor((vt.Qa+7-(vt.Ma+6)%7)/7),2),"%y":vt=>(vt.Ra+1900).toString().substring(2),"%Y":vt=>vt.Ra+1900,"%z":vt=>{vt=vt.ib;var pr=0<=vt;return vt=Math.abs(vt)/60,(pr?"+":"-")+("0000"+(vt/60*100+vt%60)).slice(-4)},"%Z":vt=>vt.lb,"%%":()=>"%"},Re=Re.replace(/%%/g,"\0\0");for(Aa in Yr)Re.includes(Aa)&&(Re=Re.replace(new RegExp(Aa,"g"),Yr[Aa](Be)));return Re=Re.replace(/\0\0/g,"%"),Aa=ya(Re),Aa.length>ue?0:(va(Aa,D),Aa.length-1)}rr.Va();var v_=[P_,Us,wt,fu,xa,st,ci,Qo,Ws,Wn,O_,fh,Ih,wa,Ia,Vd,Md,yd,D_,Fp,bd,Eg,y_,kg],tr={b:function(D,ue,Re){throw D>>>=0,new Ne(D).Va(ue>>>0,Re>>>0),Ve=D,Ve},L:function(D){$p(D>>>0,!ie,1,!ge,131072,!1),rr.$a()},j:function(D){D>>>=0,je?postMessage({cmd:"cleanupThread",thread:D}):rr.Ya(rr.La[D])},H:In,h:fu,S:xa,D:st,F:ci,T:Qo,Q:Ws,J:Wn,P:O_,n:fh,E:Ih,B:wa,R:Ia,C:Vd,p:()=>1,z:function(D,ue){D>>>=0,D==ue>>>0?setTimeout(m_):je?postMessage({targetThread:D,cmd:"checkMailbox"}):(D=rr.La[D])&&D.postMessage({cmd:"checkMailbox"})},I:function(D,ue,Re,Be,Gt){ue>>>=0,Re>>>=0,C_.length=Be,Gt=Gt>>>0>>>3;for(var $t=0;$t<Be;$t++)C_[$t]=s()[Gt+$t>>>0];return D=ue?Jg[ue]:v_[D],rr.eb=Re,Re=D(...C_),rr.eb=0,Re},K:gd,o:function(D){Pe&&rr.La[D>>>0].ref()},s:function(D,ue,Re){D=ue+2097152>>>0<4194305-!!D?(D>>>0)+4294967296*ue:NaN,Re>>>=0,D=new Date(1e3*D),p()[Re>>>2>>>0]=D.getUTCSeconds(),p()[Re+4>>>2>>>0]=D.getUTCMinutes(),p()[Re+8>>>2>>>0]=D.getUTCHours(),p()[Re+12>>>2>>>0]=D.getUTCDate(),p()[Re+16>>>2>>>0]=D.getUTCMonth(),p()[Re+20>>>2>>>0]=D.getUTCFullYear()-1900,p()[Re+24>>>2>>>0]=D.getUTCDay(),D=(D.getTime()-Date.UTC(D.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,p()[Re+28>>>2>>>0]=D},t:function(D,ue,Re){D=ue+2097152>>>0<4194305-!!D?(D>>>0)+4294967296*ue:NaN,Re>>>=0,D=new Date(1e3*D),p()[Re>>>2>>>0]=D.getSeconds(),p()[Re+4>>>2>>>0]=D.getMinutes(),p()[Re+8>>>2>>>0]=D.getHours(),p()[Re+12>>>2>>>0]=D.getDate(),p()[Re+16>>>2>>>0]=D.getMonth(),p()[Re+20>>>2>>>0]=D.getFullYear()-1900,p()[Re+24>>>2>>>0]=D.getDay(),ue=(Mg(D.getFullYear())?Sp:g_)[D.getMonth()]+D.getDate()-1|0,p()[Re+28>>>2>>>0]=ue,p()[Re+36>>>2>>>0]=-(60*D.getTimezoneOffset()),ue=new Date(D.getFullYear(),6,1).getTimezoneOffset();var Be=new Date(D.getFullYear(),0,1).getTimezoneOffset();D=(ue!=Be&&D.getTimezoneOffset()==Math.min(Be,ue))|0,p()[Re+32>>>2>>>0]=D},u:function(D){D>>>=0;var ue=new Date(p()[D+20>>>2>>>0]+1900,p()[D+16>>>2>>>0],p()[D+12>>>2>>>0],p()[D+8>>>2>>>0],p()[D+4>>>2>>>0],p()[D>>>2>>>0],0),Re=p()[D+32>>>2>>>0],Be=ue.getTimezoneOffset(),Gt=new Date(ue.getFullYear(),6,1).getTimezoneOffset(),$t=new Date(ue.getFullYear(),0,1).getTimezoneOffset(),nr=Math.min($t,Gt);return 0>Re?p()[D+32>>>2>>>0]=+(Gt!=$t&&nr==Be):0<Re!=(nr==Be)&&(Gt=Math.max($t,Gt),ue.setTime(ue.getTime()+6e4*((0<Re?nr:Gt)-Be))),p()[D+24>>>2>>>0]=ue.getDay(),Re=(Mg(ue.getFullYear())?Sp:g_)[ue.getMonth()]+ue.getDate()-1|0,p()[D+28>>>2>>>0]=Re,p()[D>>>2>>>0]=ue.getSeconds(),p()[D+4>>>2>>>0]=ue.getMinutes(),p()[D+8>>>2>>>0]=ue.getHours(),p()[D+12>>>2>>>0]=ue.getDate(),p()[D+16>>>2>>>0]=ue.getMonth(),p()[D+20>>>2>>>0]=ue.getYear(),D=ue.getTime(),D=isNaN(D)?-1:D/1e3,Rs((Da=D,1<=+Math.abs(Da)?0<Da?+Math.floor(Da/4294967296)>>>0:~~+Math.ceil((Da-+(~~Da>>>0))/4294967296)>>>0:0)),D>>>0},q:Md,r:yd,y:function(D,ue,Re,Be){D>>>=0,ue>>>=0,Re>>>=0,Be>>>=0;var Gt=new Date().getFullYear(),$t=new Date(Gt,0,1),nr=new Date(Gt,6,1);Gt=$t.getTimezoneOffset();var qn=nr.getTimezoneOffset(),Ys=Math.max(Gt,qn);m()[D>>>2>>>0]=60*Ys,p()[ue>>>2>>>0]=+(Gt!=qn),D=Yr=>Yr.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],$t=D($t),nr=D(nr),qn<Gt?(yg($t,Re,17),yg(nr,Be,17)):(yg($t,Be,17),yg(nr,Re,17))},c:()=>{bu("")},O:function(D,ue,Re){D>>>=0,ue>>>=0,Re>>>=0,ka.length=0;for(var Be;Be=l()[ue++>>>0];){var Gt=Be!=105;Gt&=Be!=112,Re+=Gt&&Re%8?4:0,ka.push(Be==112?m()[Re>>>2>>>0]:Be==105?p()[Re>>>2>>>0]:s()[Re>>>3>>>0]),Re+=Gt?8:4}return Jg[D](...ka)},k:()=>{},i:()=>Date.now(),U:()=>{throw uu+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>Pe?(Cp(),ar(Lp)).cpus().length:navigator.hardwareConcurrency,x:function(D){D>>>=0;var ue=l().length;if(D<=ue||4294901760<D)return!1;for(var Re=1;4>=Re;Re*=2){var Be=ue*(1+.2/Re);Be=Math.min(Be,D+100663296);var Gt=Math;Be=Math.max(D,Be);e:{Gt=(Gt.min.call(Gt,4294901760,Be+(65536-Be%65536)%65536)-ze.buffer.byteLength+65535)/65536;try{ze.grow(Gt),xn();var $t=1;break e}catch{}$t=void 0}if($t)return!0}return!1},M:D_,N:Fp,G:Kr,g:bd,m:Eg,v:y_,l:kg,a:ze||h.wasmMemory,w:wu,d:function(D,ue,Re,Be){return wu(D>>>0,ue>>>0,Re>>>0,Be>>>0)}},Hn=(function(){function D(Re,Be){return Hn=Re.exports,Hn=Ug(),rr.ab.push(Hn.ya),re=Hn.za,ti.unshift(Hn.V),An=Be,$a(),Hn}var ue={a:tr};if($o++,h.instantiateWasm)try{return h.instantiateWasm(ue,D)}catch(Re){or(`Module.instantiateWasm callback failed with error: ${Re}`),v(Re)}return ra(ue,function(Re){D(Re.instance,Re.module)}).catch(v),{}})();h._OrtInit=(D,ue)=>(h._OrtInit=Hn.W)(D,ue),h._OrtGetLastError=(D,ue)=>(h._OrtGetLastError=Hn.X)(D,ue),h._OrtCreateSessionOptions=(D,ue,Re,Be,Gt,$t,nr,qn,Ys,Yr)=>(h._OrtCreateSessionOptions=Hn.Y)(D,ue,Re,Be,Gt,$t,nr,qn,Ys,Yr),h._OrtAppendExecutionProvider=(D,ue)=>(h._OrtAppendExecutionProvider=Hn.Z)(D,ue),h._OrtAddFreeDimensionOverride=(D,ue,Re)=>(h._OrtAddFreeDimensionOverride=Hn._)(D,ue,Re),h._OrtAddSessionConfigEntry=(D,ue,Re)=>(h._OrtAddSessionConfigEntry=Hn.$)(D,ue,Re),h._OrtReleaseSessionOptions=D=>(h._OrtReleaseSessionOptions=Hn.aa)(D),h._OrtCreateSession=(D,ue,Re)=>(h._OrtCreateSession=Hn.ba)(D,ue,Re),h._OrtReleaseSession=D=>(h._OrtReleaseSession=Hn.ca)(D),h._OrtGetInputOutputCount=(D,ue,Re)=>(h._OrtGetInputOutputCount=Hn.da)(D,ue,Re),h._OrtGetInputName=(D,ue)=>(h._OrtGetInputName=Hn.ea)(D,ue),h._OrtGetOutputName=(D,ue)=>(h._OrtGetOutputName=Hn.fa)(D,ue),h._OrtFree=D=>(h._OrtFree=Hn.ga)(D),h._OrtCreateTensor=(D,ue,Re,Be,Gt,$t)=>(h._OrtCreateTensor=Hn.ha)(D,ue,Re,Be,Gt,$t),h._OrtGetTensorData=(D,ue,Re,Be,Gt)=>(h._OrtGetTensorData=Hn.ia)(D,ue,Re,Be,Gt),h._OrtReleaseTensor=D=>(h._OrtReleaseTensor=Hn.ja)(D),h._OrtCreateRunOptions=(D,ue,Re,Be)=>(h._OrtCreateRunOptions=Hn.ka)(D,ue,Re,Be),h._OrtAddRunConfigEntry=(D,ue,Re)=>(h._OrtAddRunConfigEntry=Hn.la)(D,ue,Re),h._OrtReleaseRunOptions=D=>(h._OrtReleaseRunOptions=Hn.ma)(D),h._OrtCreateBinding=D=>(h._OrtCreateBinding=Hn.na)(D),h._OrtBindInput=(D,ue,Re)=>(h._OrtBindInput=Hn.oa)(D,ue,Re),h._OrtBindOutput=(D,ue,Re,Be)=>(h._OrtBindOutput=Hn.pa)(D,ue,Re,Be),h._OrtClearBoundOutputs=D=>(h._OrtClearBoundOutputs=Hn.qa)(D),h._OrtReleaseBinding=D=>(h._OrtReleaseBinding=Hn.ra)(D),h._OrtRunWithBinding=(D,ue,Re,Be,Gt)=>(h._OrtRunWithBinding=Hn.sa)(D,ue,Re,Be,Gt),h._OrtRun=(D,ue,Re,Be,Gt,$t,nr,qn)=>(h._OrtRun=Hn.ta)(D,ue,Re,Be,Gt,$t,nr,qn),h._OrtEndProfiling=D=>(h._OrtEndProfiling=Hn.ua)(D);var du=h._pthread_self=()=>(du=h._pthread_self=Hn.va)();h._malloc=D=>(h._malloc=Hn.wa)(D),h._free=D=>(h._free=Hn.xa)(D),h.__emscripten_tls_init=()=>(h.__emscripten_tls_init=Hn.ya)();var $p=h.__emscripten_thread_init=(D,ue,Re,Be,Gt,$t)=>($p=h.__emscripten_thread_init=Hn.Aa)(D,ue,Re,Be,Gt,$t);h.__emscripten_thread_crashed=()=>(h.__emscripten_thread_crashed=Hn.Ba)();var qs=(D,ue,Re,Be,Gt)=>(qs=Hn.Ca)(D,ue,Re,Be,Gt),r_=D=>(r_=Hn.Da)(D),Fg=h.__emscripten_thread_exit=D=>(Fg=h.__emscripten_thread_exit=Hn.Ea)(D),Bd=()=>(Bd=Hn.Fa)(),Rs=D=>(Rs=Hn.Ga)(D),rm=(D,ue)=>(rm=Hn.Ha)(D,ue),pu=D=>(pu=Hn.Ia)(D),Pa=D=>(Pa=Hn.Ja)(D),i_=()=>(i_=Hn.Ka)();function Ug(){var D=Hn;D=Object.assign({},D);var ue=Be=>()=>Be()>>>0,Re=Be=>Gt=>Be(Gt)>>>0;return D.va=ue(D.va),D.wa=Re(D.wa),D.emscripten_main_runtime_thread_id=ue(D.emscripten_main_runtime_thread_id),D.Ja=Re(D.Ja),D.Ka=ue(D.Ka),D}h.wasmMemory=ze,h.stackSave=()=>i_(),h.stackRestore=D=>pu(D),h.stackAlloc=D=>Pa(D),h.keepRuntimeAlive=()=>0<uu,h.UTF8ToString=zo,h.stringToUTF8=yg,h.lengthBytesUTF8=Hs,h.ExitStatus=Nd,h.PThread=rr;var Ag;Ea=function D(){Ag||Bg(),Ag||(Ea=D)};function Bg(){if(!(0<$o))if(je)f(h),je||Ma(ti),startWorker(h);else{if(h.preRun)for(typeof h.preRun=="function"&&(h.preRun=[h.preRun]);h.preRun.length;)Lr.unshift(h.preRun.shift());Ma(Lr),0<$o||Ag||(Ag=!0,h.calledRun=!0,jt||(je||Ma(ti),f(h),je||Ma(ei)))}}return Bg(),I}})();typeof t=="object"&&typeof e=="object"?e.exports=n:typeof define=="function"&&define.amd&&define([],()=>n)}),Bp=me((t,e)=>{e.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\n'}),Rp,sg,oa,ia,So,Np,ug,lg,fg,Mp,De,Ur=L$2(()=>{Rp=Pp(),sg=kp(),ia=!1,So=!1,Np=!1,ug=t=>{if(t===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+t+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+t+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},lg=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},fg=(t,e)=>t?e?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":e?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Mp=async t=>{if(ia)return Promise.resolve();if(So)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(Np)throw new Error("previous call to 'initializeWebAssembly()' failed.");So=!0;let e=t.initTimeout,n=t.numThreads,r=t.simd,a=ug(n),i=r&&lg(),l=t.wasmPaths,p=typeof l=="string"?l:void 0,m=fg(i,a),s=typeof l=="object"?l[m]:void 0,h=!1,f=[];if(e>0&&f.push(new Promise(v=>{setTimeout(()=>{h=!0,v()},e)})),f.push(new Promise((v,I)=>{let G=a?sg:Rp,W={locateFile:(X,ge)=>a&&X.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([Bp()],{type:"text/javascript"})):X.endsWith(".wasm")?s||(p??ge)+m:ge+X};if(a)if(W.numThreads=n,typeof Blob>"u")W.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let X=`var ortWasmThreaded=${G.toString()};`;W.mainScriptUrlOrBlob=new Blob([X],{type:"text/javascript"})}G(W).then(X=>{So=!1,ia=!0,oa=X,v()},X=>{So=!1,Np=!0,I(X)})})),await Promise.race(f),h)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},De=()=>{if(ia&&oa)return oa;throw new Error("WebAssembly is not initialized yet.")}}),ve,bn,_e,Ao=L$2(()=>{Ur(),ve=(t,e)=>{let n=De(),r=n.lengthBytesUTF8(t)+1,a=n._malloc(r);return n.stringToUTF8(t,a,r),e.push(a),a},bn=(t,e,n,r)=>{if(typeof t=="object"&&t!==null){if(n.has(t))throw new Error("Circular reference in options");n.add(t)}Object.entries(t).forEach(([a,i])=>{let l=e?e+a:a;if(typeof i=="object")bn(i,l+".",n,r);else if(typeof i=="string"||typeof i=="number")r(l,i.toString());else if(typeof i=="boolean")r(l,i?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof i}`)})},_e=t=>{let e=De(),n=e.stackSave();try{let r=e.stackAlloc(8);e._OrtGetLastError(r,r+4);let a=e.HEAP32[r/4],i=e.HEAPU32[r/4+1],l=i?e.UTF8ToString(i):"";throw new Error(`${t} ERROR_CODE: ${a}, ERROR_MESSAGE: ${l}`)}finally{e.stackRestore(n)}}}),Gp,Up=L$2(()=>{Ur(),Ao(),Gp=t=>{let e=De(),n=0,r=[],a=t||{};try{if(t?.logSeverityLevel===void 0)a.logSeverityLevel=2;else if(typeof t.logSeverityLevel!="number"||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(t?.logVerbosityLevel===void 0)a.logVerbosityLevel=0;else if(typeof t.logVerbosityLevel!="number"||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);t?.terminate===void 0&&(a.terminate=!1);let i=0;return t?.tag!==void 0&&(i=ve(t.tag,r)),n=e._OrtCreateRunOptions(a.logSeverityLevel,a.logVerbosityLevel,!!a.terminate,i),n===0&&_e("Can't create run options."),t?.extra!==void 0&&bn(t.extra,"",new WeakSet,(l,p)=>{let m=ve(l,r),s=ve(p,r);e._OrtAddRunConfigEntry(n,m,s)!==0&&_e(`Can't set a run config entry: ${l} - ${p}.`)}),[n,r]}catch(i){throw n!==0&&e._OrtReleaseRunOptions(n),r.forEach(l=>e._free(l)),i}}}),cg,pg,dg,hg,zp,Vp=L$2(()=>{Ur(),Ao(),cg=t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}},pg=t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}},dg=t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});let e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1"),t.executionProviders&&t.executionProviders.some(n=>(typeof n=="string"?n:n.name)==="webgpu")&&(t.enableMemPattern=!1)},hg=(t,e,n)=>{for(let r of e){let a=typeof r=="string"?r:r.name;switch(a){case"webnn":if(a="WEBNN",typeof r!="string"){let l=r;if(l?.deviceType){let p=ve("deviceType",n),m=ve(l.deviceType,n);De()._OrtAddSessionConfigEntry(t,p,m)!==0&&_e(`Can't set a session config entry: 'deviceType' - ${l.deviceType}.`)}if(l?.numThreads){let p=l.numThreads;(typeof p!="number"||!Number.isInteger(p)||p<0)&&(p=0);let m=ve("numThreads",n),s=ve(p.toString(),n);De()._OrtAddSessionConfigEntry(t,m,s)!==0&&_e(`Can't set a session config entry: 'numThreads' - ${l.numThreads}.`)}if(l?.powerPreference){let p=ve("powerPreference",n),m=ve(l.powerPreference,n);De()._OrtAddSessionConfigEntry(t,p,m)!==0&&_e(`Can't set a session config entry: 'powerPreference' - ${l.powerPreference}.`)}}break;case"webgpu":if(a="JS",typeof r!="string"){let l=r;if(l?.preferredLayout){if(l.preferredLayout!=="NCHW"&&l.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${l.preferredLayout}`);let p=ve("preferredLayout",n),m=ve(l.preferredLayout,n);De()._OrtAddSessionConfigEntry(t,p,m)!==0&&_e(`Can't set a session config entry: 'preferredLayout' - ${l.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${a}`)}let i=ve(a,n);De()._OrtAppendExecutionProvider(t,i)!==0&&_e(`Can't append execution provider: ${a}.`)}},zp=t=>{let e=De(),n=0,r=[],a=t||{};dg(a);try{let i=cg(a.graphOptimizationLevel??"all"),l=pg(a.executionMode??"sequential"),p=typeof a.logId=="string"?ve(a.logId,r):0,m=a.logSeverityLevel??2;if(!Number.isInteger(m)||m<0||m>4)throw new Error(`log serverity level is not valid: ${m}`);let s=a.logVerbosityLevel??0;if(!Number.isInteger(s)||s<0||s>4)throw new Error(`log verbosity level is not valid: ${s}`);let h=typeof a.optimizedModelFilePath=="string"?ve(a.optimizedModelFilePath,r):0;if(n=e._OrtCreateSessionOptions(i,!!a.enableCpuMemArena,!!a.enableMemPattern,l,!!a.enableProfiling,0,p,m,s,h),n===0&&_e("Can't create session options."),a.executionProviders&&hg(n,a.executionProviders,r),a.enableGraphCapture!==void 0){if(typeof a.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${a.enableGraphCapture}`);let f=ve("enableGraphCapture",r),v=ve(a.enableGraphCapture.toString(),r);e._OrtAddSessionConfigEntry(n,f,v)!==0&&_e(`Can't set a session config entry: 'enableGraphCapture' - ${a.enableGraphCapture}.`)}if(a.freeDimensionOverrides)for(let[f,v]of Object.entries(a.freeDimensionOverrides)){if(typeof f!="string")throw new Error(`free dimension override name must be a string: ${f}`);if(typeof v!="number"||!Number.isInteger(v)||v<0)throw new Error(`free dimension override value must be a non-negative integer: ${v}`);let I=ve(f,r);e._OrtAddFreeDimensionOverride(n,I,v)!==0&&_e(`Can't set a free dimension override: ${f} - ${v}.`)}return a.extra!==void 0&&bn(a.extra,"",new WeakSet,(f,v)=>{let I=ve(f,r),G=ve(v,r);e._OrtAddSessionConfigEntry(n,I,G)!==0&&_e(`Can't set a session config entry: ${f} - ${v}.`)}),[n,r]}catch(i){throw n!==0&&e._OrtReleaseSessionOptions(n),r.forEach(l=>e._free(l)),i}}}),aa,Wp,sa,Hp,qp,Po,jp,ua=L$2(()=>{aa=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},Wp=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},sa=t=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][t],Hp=t=>{switch(t){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}},qp=t=>{switch(t){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${t}`)}},Po=t=>t==="float32"||t==="float16"||t==="int32"||t==="int64"||t==="uint32"||t==="uint8"||t==="bool",jp=t=>{switch(t){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${t}`)}}}),gn,la=L$2(()=>{gn=async t=>{if(typeof t=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(t))}catch(e){if(e.code==="ERR_FS_FILE_TOO_LARGE"){let n=(void 0)(t),r=[];for await(let a of n)r.push(a);return new Uint8Array(Buffer.concat(r))}throw e}else{let e=await fetch(t);if(!e.ok)throw new Error(`failed to load external data file: ${t}`);let n=e.headers.get("Content-Length"),r=n?parseInt(n,10):0;if(r<1073741824)return new Uint8Array(await e.arrayBuffer());{if(!e.body)throw new Error(`failed to load external data file: ${t}, no response body.`);let a=e.body.getReader(),i;try{i=new ArrayBuffer(r)}catch(p){if(p instanceof RangeError){let m=Math.ceil(r/65536);i=new WebAssembly.Memory({initial:m,maximum:m}).buffer}else throw p}let l=0;for(;;){let{done:p,value:m}=await a.read();if(p)break;let s=m.byteLength;new Uint8Array(i,l,s).set(m),l+=s}return new Uint8Array(i,0,r)}}else return t instanceof Blob?new Uint8Array(await t.arrayBuffer()):t instanceof Uint8Array?t:new Uint8Array(t)}}),mg,Xp,Kp,zr,bg,fa,Jp,Zp,Yp,Qp,ed,td,rd=L$2(()=>{Up(),Vp(),ua(),Ur(),Ao(),la(),mg=(t,e)=>{De()._OrtInit(t,e)!==0&&_e("Can't initialize onnxruntime.")},Xp=async t=>{mg(t.wasm.numThreads,qp(t.logLevel))},Kp=async(t,e)=>{},zr=new Map,bg=t=>{let e=De(),n=e.stackSave();try{let r=e.stackAlloc(8);return e._OrtGetInputOutputCount(t,r,r+4)!==0&&_e("Can't get session input/output count."),[e.HEAP32[r/4],e.HEAP32[r/4+1]]}finally{e.stackRestore(n)}},fa=t=>{let e=De(),n=e._malloc(t.byteLength);if(n===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${t.byteLength}.`);return e.HEAPU8.set(t,n),[n,t.byteLength]},Jp=async(t,e)=>{let n,r,a=De();Array.isArray(t)?[n,r]=t:t.buffer===a.HEAPU8.buffer?[n,r]=[t.byteOffset,t.byteLength]:[n,r]=fa(t);let i=0,l=0,p=[],m=[],s=[];try{if([l,p]=zp(e),e?.externalData&&a.mountExternalData){let ge=[];for(let ie of e.externalData){let Pe=typeof ie=="string"?ie:ie.path;ge.push(gn(typeof ie=="string"?ie:ie.data).then(je=>{a.mountExternalData(Pe,je)}))}await Promise.all(ge)}i=await a._OrtCreateSession(n,r,l),i===0&&_e("Can't create a session.");let[h,f]=bg(i),v=!!e?.enableGraphCapture,I=[],G=[],W=[];for(let ge=0;ge<h;ge++){let ie=a._OrtGetInputName(i,ge);ie===0&&_e("Can't get an input name."),m.push(ie),I.push(a.UTF8ToString(ie))}for(let ge=0;ge<f;ge++){let ie=a._OrtGetOutputName(i,ge);ie===0&&_e("Can't get an output name."),s.push(ie);let Pe=a.UTF8ToString(ie);G.push(Pe)}return zr.set(i,[i,m,s,null,v,!1]),[i,I,G]}catch(h){throw m.forEach(f=>a._OrtFree(f)),s.forEach(f=>a._OrtFree(f)),i!==0&&a._OrtReleaseSession(i),h}finally{a._free(n),l!==0&&a._OrtReleaseSessionOptions(l),p.forEach(h=>a._free(h)),a.unmountExternalData?.()}},Zp=t=>{let e=De(),n=zr.get(t);if(!n)throw new Error(`cannot release session. invalid session id: ${t}`);let[r,a,i,l,p]=n;l&&(p&&e._OrtClearBoundOutputs(l.handle),e._OrtReleaseBinding(l.handle)),e.jsepOnReleaseSession?.(t),a.forEach(m=>e._OrtFree(m)),i.forEach(m=>e._OrtFree(m)),e._OrtReleaseSession(r),zr.delete(t)},Yp=(t,e,n,r,a,i=!1)=>{if(!t){e.push(0);return}let l=De(),p=t[0],m=t[1],s=t[3],h,f;if(p==="string"&&s==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(i&&s!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${a} when enableGraphCapture is true.`);if(s==="gpu-buffer"){let G=t[2].gpuBuffer,W=sa(aa(p));f=m.reduce((ge,ie)=>ge*ie,1)*W;let X=l.jsepRegisterBuffer;if(!X)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');h=X(r,a,G,f)}else{let G=t[2];if(Array.isArray(G)){f=4*G.length,h=l._malloc(f),n.push(h);let W=h/4;for(let X=0;X<G.length;X++){if(typeof G[X]!="string")throw new TypeError(`tensor data at index ${X} is not a string`);l.HEAPU32[W++]=ve(G[X],n)}}else f=G.byteLength,h=l._malloc(f),n.push(h),l.HEAPU8.set(new Uint8Array(G.buffer,G.byteOffset,f),h)}let v=l.stackSave(),I=l.stackAlloc(4*m.length);try{let G=I/4;m.forEach(X=>l.HEAP32[G++]=X);let W=l._OrtCreateTensor(aa(p),h,f,I,m.length,jp(s));W===0&&_e(`Can't create tensor for input/output. session=${r}, index=${a}.`),e.push(W)}finally{l.stackRestore(v)}},Qp=async(t,e,n,r,a,i)=>{let l=De(),p=zr.get(t);if(!p)throw new Error(`cannot run inference. invalid session id: ${t}`);let m=p[0],s=p[1],h=p[2],f=p[3],v=p[4];p[5];let I=e.length,G=r.length,W=0,X=[],ge=[],ie=[],Pe=[],je=l.stackSave(),rt=l.stackAlloc(I*4),qt=l.stackAlloc(I*4),de=l.stackAlloc(G*4),se=l.stackAlloc(G*4);try{[W,X]=Gp(i);for(let or=0;or<I;or++)Yp(n[or],ge,Pe,t,e[or],v);for(let or=0;or<G;or++)Yp(a[or],ie,Pe,t,I+r[or],v);let he=rt/4,pe=qt/4,Ae=de/4,Ce=se/4;for(let or=0;or<I;or++)l.HEAPU32[he++]=ge[or],l.HEAPU32[pe++]=s[e[or]];for(let or=0;or<G;or++)l.HEAPU32[Ae++]=ie[or],l.HEAPU32[Ce++]=h[r[or]];l.jsepOnRunStart?.(m);let Te;Te=await l._OrtRun(m,qt,rt,I,se,G,de,W),Te!==0&&_e("failed to call OrtRun().");let Hr=[];for(let or=0;or<G;or++){let ze=l.HEAPU32[de/4+or];if(ze===ie[or]){Hr.push(a[or]);continue}let An=l.stackSave(),jt=l.stackAlloc(16),Xr=!1,wn,Se=0;try{l._OrtGetTensorData(ze,jt,jt+4,jt+8,jt+12)!==0&&_e(`Can't access output tensor data on index ${or}.`);let et=jt/4,vn=l.HEAPU32[et++];Se=l.HEAPU32[et++];let Tn=l.HEAPU32[et++],xn=l.HEAPU32[et++],Sn=[];for(let ei=0;ei<xn;ei++)Sn.push(l.HEAPU32[Tn/4+ei]);l._OrtFree(Tn);let Lr=Sn.reduce((ei,$o)=>ei*$o,1);wn=Wp(vn);let ti=f?.outputPreferredLocations[r[or]];if(wn==="string"){if(ti==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let ei=[],$o=Se/4;for(let Ea=0;Ea<Lr;Ea++){let $a=l.HEAPU32[$o++],bu=Ea===Lr-1?void 0:l.HEAPU32[$o]-$a;ei.push(l.UTF8ToString($a,bu))}Hr.push([wn,Sn,ei,"cpu"])}else if(ti==="gpu-buffer"&&Lr>0){let ei=l.jsepGetBuffer;if(!ei)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let $o=ei(Se),Ea=sa(vn);if(Ea===void 0||!Po(wn))throw new Error(`Unsupported data type: ${wn}`);Xr=!0,Hr.push([wn,Sn,{gpuBuffer:$o,download:l.jsepCreateDownloader($o,Lr*Ea,wn),dispose:()=>{l._OrtReleaseTensor(ze)}},"gpu-buffer"])}else{let ei=Hp(wn),$o=new ei(Lr);new Uint8Array($o.buffer,$o.byteOffset,$o.byteLength).set(l.HEAPU8.subarray(Se,Se+$o.byteLength)),Hr.push([wn,Sn,$o,"cpu"])}}finally{l.stackRestore(An),wn==="string"&&Se&&l._free(Se),Xr||l._OrtReleaseTensor(ze)}}return f&&!v&&(l._OrtClearBoundOutputs(f.handle),zr.set(t,[m,s,h,f,v,!1])),Hr}finally{l.stackRestore(je),ge.forEach(he=>l._OrtReleaseTensor(he)),ie.forEach(he=>l._OrtReleaseTensor(he)),Pe.forEach(he=>l._free(he)),W!==0&&l._OrtReleaseRunOptions(W),X.forEach(he=>l._free(he))}},ed=t=>{let e=De(),n=zr.get(t);if(!n)throw new Error("invalid session id");let r=n[0],a=e._OrtEndProfiling(r);a===0&&_e("Can't get an profile file name."),e._OrtFree(a)},td=t=>{let e=[];for(let n of t){let r=n[2];!Array.isArray(r)&&"buffer"in r&&e.push(r.buffer)}return e}}),nd=me((t,e)=>{e.exports='/*!\n * ONNX Runtime Web v1.18.0\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var vt=Object.defineProperty;var qr=Object.getOwnPropertyDescriptor;var Vr=Object.getOwnPropertyNames;var Jr=Object.prototype.hasOwnProperty;var _t=(i,c)=>()=>(i&&(c=i(i=0)),c);var Ke=(i,c)=>()=>(c||i((c={exports:{}}).exports,c),c.exports),Et=(i,c)=>{for(var a in c)vt(i,a,{get:c[a],enumerable:!0})},Xr=(i,c,a,h)=>{if(c&&typeof c=="object"||typeof c=="function")for(let f of Vr(c))!Jr.call(i,f)&&f!==a&&vt(i,f,{get:()=>c[f],enumerable:!(h=qr(c,f))||h.enumerable});return i};var et=i=>Xr(vt({},"__esModule",{value:!0}),i);var St={};Et(St,{createReadStream:()=>lr,readFile:()=>Qr,readFileSync:()=>Zr});var Qr,Zr,lr,At=_t(()=>{Qr=void 0,Zr=void 0,lr=void 0});var Tt={};Et(Tt,{join:()=>Kr});var Kr,Mt=_t(()=>{Kr=void 0});var pr=Ke((dr,Ct)=>{"use strict";var cr=(()=>{var i=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(i||=__filename),function(c={}){var a=c,h,f,w=new Promise((t,o)=>{h=t,f=o}),g=Object.assign({},a),s="./this.program",S=typeof window=="object",x=typeof importScripts=="function",H=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",A="",I,V,R;if(H){var B=(At(),et(St)),D=(Mt(),et(Tt));A=x?D.dirname(A)+"/":__dirname+"/",I=(t,o)=>(t=ce(t)?new URL(t):D.normalize(t),B.readFileSync(t,o?void 0:"utf8")),R=t=>(t=I(t,!0),t.buffer||(t=new Uint8Array(t)),t),V=(t,o,u,m=!0)=>{t=ce(t)?new URL(t):D.normalize(t),B.readFile(t,m?void 0:"utf8",(O,E)=>{O?u(O):o(m?E.buffer:E)})},!a.thisProgram&&1<process.argv.length&&(s=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2)}else(S||x)&&(x?A=self.location.href:typeof document<"u"&&document.currentScript&&(A=document.currentScript.src),i&&(A=i),A.startsWith("blob:")?A="":A=A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1),I=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.send(null),o.responseText},x&&(R=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),V=(t,o,u)=>{var m=new XMLHttpRequest;m.open("GET",t,!0),m.responseType="arraybuffer",m.onload=()=>{m.status==200||m.status==0&&m.response?o(m.response):u()},m.onerror=u,m.send(null)});var T=console.log.bind(console),L=console.error.bind(console);Object.assign(a,g),g=null;var W,de=!1,pe,Z,_,J,Pe;function le(){var t=W.buffer;a.HEAP8=pe=new Int8Array(t),a.HEAP16=new Int16Array(t),a.HEAPU8=Z=new Uint8Array(t),a.HEAPU16=new Uint16Array(t),a.HEAP32=_=new Int32Array(t),a.HEAPU32=J=new Uint32Array(t),a.HEAPF32=new Float32Array(t),a.HEAPF64=Pe=new Float64Array(t)}var Ie=[],ne=[],X=[],we=0,me=null,F=null;function ie(t){throw t="Aborted("+t+")",L(t),de=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),f(t),t}var xe=t=>t.startsWith("data:application/octet-stream;base64,"),ce=t=>t.startsWith("file://"),be;if(be="ort-wasm.wasm",!xe(be)){var ae=be;be=a.locateFile?a.locateFile(ae,A):A+ae}function K(t){if(R)return R(t);throw"both async and sync fetching of the wasm failed"}function je(t){if(S||x){if(typeof fetch=="function"&&!ce(t))return fetch(t,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw`failed to load wasm binary file at \'${t}\'`;return o.arrayBuffer()}).catch(()=>K(t));if(V)return new Promise((o,u)=>{V(t,m=>o(new Uint8Array(m)),u)})}return Promise.resolve().then(()=>K(t))}function Oe(t,o,u){return je(t).then(m=>WebAssembly.instantiate(m,o)).then(u,m=>{L(`failed to asynchronously prepare wasm: ${m}`),ie(m)})}function Ue(t,o){var u=be;return typeof WebAssembly.instantiateStreaming!="function"||xe(u)||ce(u)||H||typeof fetch!="function"?Oe(u,t,o):fetch(u,{credentials:"same-origin"}).then(m=>WebAssembly.instantiateStreaming(m,t).then(o,function(O){return L(`wasm streaming compile failed: ${O}`),L("falling back to ArrayBuffer instantiation"),Oe(u,t,o)}))}var ve,Ae={798088:(t,o,u,m)=>{if(typeof a>"u"||!a.ya)return 1;if(t=ue(t>>>0),t.startsWith("./")&&(t=t.substring(2)),t=a.ya.get(t),!t)return 2;if(o>>>=0,u>>>=0,o+u>t.byteLength)return 3;try{return Z.set(t.subarray(o,o+u),m>>>0>>>0),0}catch{return 4}}};class _e{constructor(o){this.wa=o-24}}var ge=0,Be=0,te=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,re=(t,o,u)=>{o>>>=0;var m=o+u;for(u=o;t[u]&&!(u>=m);)++u;if(16<u-o&&t.buffer&&te)return te.decode(t.subarray(o,u));for(m="";o<u;){var O=t[o++];if(O&128){var E=t[o++]&63;if((O&224)==192)m+=String.fromCharCode((O&31)<<6|E);else{var U=t[o++]&63;O=(O&240)==224?(O&15)<<12|E<<6|U:(O&7)<<18|E<<12|U<<6|t[o++]&63,65536>O?m+=String.fromCharCode(O):(O-=65536,m+=String.fromCharCode(55296|O>>10,56320|O&1023))}}else m+=String.fromCharCode(O)}return m},ue=(t,o)=>(t>>>=0)?re(Z,t,o):"",Ee=t=>{for(var o=0,u=0;u<t.length;++u){var m=t.charCodeAt(u);127>=m?o++:2047>=m?o+=2:55296<=m&&57343>=m?(o+=4,++u):o+=3}return o},Se=(t,o,u,m)=>{if(u>>>=0,!(0<m))return 0;var O=u;m=u+m-1;for(var E=0;E<t.length;++E){var U=t.charCodeAt(E);if(55296<=U&&57343>=U){var ee=t.charCodeAt(++E);U=65536+((U&1023)<<10)|ee&1023}if(127>=U){if(u>=m)break;o[u++>>>0]=U}else{if(2047>=U){if(u+1>=m)break;o[u++>>>0]=192|U>>6}else{if(65535>=U){if(u+2>=m)break;o[u++>>>0]=224|U>>12}else{if(u+3>=m)break;o[u++>>>0]=240|U>>18,o[u++>>>0]=128|U>>12&63}o[u++>>>0]=128|U>>6&63}o[u++>>>0]=128|U&63}}return o[u>>>0]=0,u-O},Le=t=>t%4===0&&(t%100!==0||t%400===0),ze=[0,31,60,91,121,152,182,213,244,274,305,335],rt=[0,31,59,90,120,151,181,212,243,273,304,334],Te=[],Ge={},ke=()=>{if(!We){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:s||"./this.program"},o;for(o in Ge)Ge[o]===void 0?delete t[o]:t[o]=Ge[o];var u=[];for(o in t)u.push(`${o}=${t[o]}`);We=u}return We},We,nt=[null,[],[]],De=[31,29,31,30,31,30,31,31,30,31,30,31],at=[31,28,31,30,31,30,31,31,30,31,30,31];function G(t){var o=Array(Ee(t)+1);return Se(t,o,0,o.length),o}function qe(t,o,u,m){function O(d,k,$){for(d=typeof d=="number"?d.toString():d||"";d.length<k;)d=$[0]+d;return d}function E(d,k){return O(d,k,"0")}function U(d,k){function $(Ze){return 0>Ze?-1:0<Ze?1:0}var Me;return(Me=$(d.getFullYear()-k.getFullYear()))===0&&(Me=$(d.getMonth()-k.getMonth()))===0&&(Me=$(d.getDate()-k.getDate())),Me}function ee(d){switch(d.getDay()){case 0:return new Date(d.getFullYear()-1,11,29);case 1:return d;case 2:return new Date(d.getFullYear(),0,3);case 3:return new Date(d.getFullYear(),0,2);case 4:return new Date(d.getFullYear(),0,1);case 5:return new Date(d.getFullYear()-1,11,31);case 6:return new Date(d.getFullYear()-1,11,30)}}function ye(d){var k=d.sa;for(d=new Date(new Date(d.ta+1900,0,1).getTime());0<k;){var $=d.getMonth(),Me=(Le(d.getFullYear())?De:at)[$];if(k>Me-d.getDate())k-=Me-d.getDate()+1,d.setDate(1),11>$?d.setMonth($+1):(d.setMonth(0),d.setFullYear(d.getFullYear()+1));else{d.setDate(d.getDate()+k);break}}return $=new Date(d.getFullYear()+1,0,4),k=ee(new Date(d.getFullYear(),0,4)),$=ee($),0>=U(k,d)?0>=U($,d)?d.getFullYear()+1:d.getFullYear():d.getFullYear()-1}t>>>=0,o>>>=0,u>>>=0,m>>>=0;var oe=J[m+40>>>2>>>0];m={Ba:_[m>>>2>>>0],Aa:_[m+4>>>2>>>0],ua:_[m+8>>>2>>>0],xa:_[m+12>>>2>>>0],va:_[m+16>>>2>>>0],ta:_[m+20>>>2>>>0],na:_[m+24>>>2>>>0],sa:_[m+28>>>2>>>0],Da:_[m+32>>>2>>>0],za:_[m+36>>>2>>>0],Ca:oe?ue(oe):""},u=ue(u),oe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var se in oe)u=u.replace(new RegExp(se,"g"),oe[se]);var Qe="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Re="January February March April May June July August September October November December".split(" ");oe={"%a":d=>Qe[d.na].substring(0,3),"%A":d=>Qe[d.na],"%b":d=>Re[d.va].substring(0,3),"%B":d=>Re[d.va],"%C":d=>E((d.ta+1900)/100|0,2),"%d":d=>E(d.xa,2),"%e":d=>O(d.xa,2," "),"%g":d=>ye(d).toString().substring(2),"%G":ye,"%H":d=>E(d.ua,2),"%I":d=>(d=d.ua,d==0?d=12:12<d&&(d-=12),E(d,2)),"%j":d=>{for(var k=0,$=0;$<=d.va-1;k+=(Le(d.ta+1900)?De:at)[$++]);return E(d.xa+k,3)},"%m":d=>E(d.va+1,2),"%M":d=>E(d.Aa,2),"%n":()=>`\n`,"%p":d=>0<=d.ua&&12>d.ua?"AM":"PM","%S":d=>E(d.Ba,2),"%t":()=>"	","%u":d=>d.na||7,"%U":d=>E(Math.floor((d.sa+7-d.na)/7),2),"%V":d=>{var k=Math.floor((d.sa+7-(d.na+6)%7)/7);if(2>=(d.na+371-d.sa-2)%7&&k++,k)k==53&&($=(d.na+371-d.sa)%7,$==4||$==3&&Le(d.ta)||(k=1));else{k=52;var $=(d.na+7-d.sa-1)%7;($==4||$==5&&Le(d.ta%400-1))&&k++}return E(k,2)},"%w":d=>d.na,"%W":d=>E(Math.floor((d.sa+7-(d.na+6)%7)/7),2),"%y":d=>(d.ta+1900).toString().substring(2),"%Y":d=>d.ta+1900,"%z":d=>{d=d.za;var k=0<=d;return d=Math.abs(d)/60,(k?"+":"-")+("0000"+(d/60*100+d%60)).slice(-4)},"%Z":d=>d.Ca,"%%":()=>"%"},u=u.replace(/%%/g,"\\0\\0");for(se in oe)u.includes(se)&&(u=u.replace(new RegExp(se,"g"),oe[se](m)));return u=u.replace(/\\0\\0/g,"%"),se=G(u),se.length>o?0:(pe.set(se,t>>>0),se.length-1)}var Ve={a:function(t,o,u){t>>>=0;var m=new _e(t);throw J[m.wa+16>>>2>>>0]=0,J[m.wa+4>>>2>>>0]=o>>>0,J[m.wa+8>>>2>>>0]=u>>>0,ge=t,Be++,ge},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,I:function(t,o,u){return o>>>=0,Z.copyWithin(t>>>0>>>0,o>>>0,o+(u>>>0)>>>0)},n:function(t,o,u){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,u>>>=0,t=new Date(1e3*t),_[u>>>2>>>0]=t.getUTCSeconds(),_[u+4>>>2>>>0]=t.getUTCMinutes(),_[u+8>>>2>>>0]=t.getUTCHours(),_[u+12>>>2>>>0]=t.getUTCDate(),_[u+16>>>2>>>0]=t.getUTCMonth(),_[u+20>>>2>>>0]=t.getUTCFullYear()-1900,_[u+24>>>2>>>0]=t.getUTCDay(),_[u+28>>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(t,o,u){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,u>>>=0,t=new Date(1e3*t),_[u>>>2>>>0]=t.getSeconds(),_[u+4>>>2>>>0]=t.getMinutes(),_[u+8>>>2>>>0]=t.getHours(),_[u+12>>>2>>>0]=t.getDate(),_[u+16>>>2>>>0]=t.getMonth(),_[u+20>>>2>>>0]=t.getFullYear()-1900,_[u+24>>>2>>>0]=t.getDay(),_[u+28>>>2>>>0]=(Le(t.getFullYear())?ze:rt)[t.getMonth()]+t.getDate()-1|0,_[u+36>>>2>>>0]=-(60*t.getTimezoneOffset()),o=new Date(t.getFullYear(),6,1).getTimezoneOffset();var m=new Date(t.getFullYear(),0,1).getTimezoneOffset();_[u+32>>>2>>>0]=(o!=m&&t.getTimezoneOffset()==Math.min(m,o))|0},p:function(t){t>>>=0;var o=new Date(_[t+20>>>2>>>0]+1900,_[t+16>>>2>>>0],_[t+12>>>2>>>0],_[t+8>>>2>>>0],_[t+4>>>2>>>0],_[t>>>2>>>0],0),u=_[t+32>>>2>>>0],m=o.getTimezoneOffset(),O=new Date(o.getFullYear(),6,1).getTimezoneOffset(),E=new Date(o.getFullYear(),0,1).getTimezoneOffset(),U=Math.min(E,O);return 0>u?_[t+32>>>2>>>0]=+(O!=E&&U==m):0<u!=(U==m)&&(O=Math.max(E,O),o.setTime(o.getTime()+6e4*((0<u?U:O)-m))),_[t+24>>>2>>>0]=o.getDay(),_[t+28>>>2>>>0]=(Le(o.getFullYear())?ze:rt)[o.getMonth()]+o.getDate()-1|0,_[t>>>2>>>0]=o.getSeconds(),_[t+4>>>2>>>0]=o.getMinutes(),_[t+8>>>2>>>0]=o.getHours(),_[t+12>>>2>>>0]=o.getDate(),_[t+16>>>2>>>0]=o.getMonth(),_[t+20>>>2>>>0]=o.getYear(),t=o.getTime(),t=isNaN(t)?-1:t/1e3,Je((ve=t,1<=+Math.abs(ve)?0<ve?+Math.floor(ve/4294967296)>>>0:~~+Math.ceil((ve-+(~~ve>>>0))/4294967296)>>>0:0)),t>>>0},l:function(){return-52},m:function(){},t:function(t,o,u,m){u>>>=0,m>>>=0;var O=new Date().getFullYear(),E=new Date(O,0,1),U=new Date(O,6,1);O=E.getTimezoneOffset();var ee=U.getTimezoneOffset();J[t>>>0>>>2>>>0]=60*Math.max(O,ee),_[o>>>0>>>2>>>0]=+(O!=ee),t=ye=>ye.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],E=t(E),U=t(U),ee<O?(Se(E,Z,u,17),Se(U,Z,m,17)):(Se(E,Z,m,17),Se(U,Z,u,17))},d:()=>{ie("")},B:function(t,o,u){t>>>=0,o>>>=0,u>>>=0,Te.length=0;for(var m;m=Z[o++>>>0];){var O=m!=105;O&=m!=112,u+=O&&u%8?4:0,Te.push(m==112?J[u>>>2>>>0]:m==105?_[u>>>2>>>0]:Pe[u>>>3>>>0]),u+=O?8:4}return Ae[t](...Te)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),s:function(t){t>>>=0;var o=Z.length;if(4294901760<t)return!1;for(var u=1;4>=u;u*=2){var m=o*(1+.2/u);m=Math.min(m,t+100663296);var O=Math;m=Math.max(t,m);e:{O=(O.min.call(O,4294901760,m+(65536-m%65536)%65536)-W.buffer.byteLength+65535)/65536;try{W.grow(O),le();var E=1;break e}catch{}E=void 0}if(E)return!0}return!1},C:function(t,o){t>>>=0,o>>>=0;var u=0;return ke().forEach((m,O)=>{var E=o+u;for(O=J[t+4*O>>>2>>>0]=E,E=0;E<m.length;++E)pe[O++>>>0]=m.charCodeAt(E);pe[O>>>0]=0,u+=m.length+1}),0},D:function(t,o){t>>>=0,o>>>=0;var u=ke();J[t>>>2>>>0]=u.length;var m=0;return u.forEach(O=>m+=O.length+1),J[o>>>2>>>0]=m,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(t,o,u,m){o>>>=0,u>>>=0,m>>>=0;for(var O=0,E=0;E<u;E++){var U=J[o>>>2>>>0],ee=J[o+4>>>2>>>0];o+=8;for(var ye=0;ye<ee;ye++){var oe=Z[U+ye>>>0],se=nt[t];oe===0||oe===10?((t===1?T:L)(re(se,0)),se.length=0):se.push(oe)}O+=ee}return J[m>>>2>>>0]=O,0},r:qe,c:function(t,o,u,m){return qe(t>>>0,o>>>0,u>>>0,m>>>0)}},P=function(){function t(u){return P=u.exports,P=st(),W=P.K,le(),ne.unshift(P.L),we--,we==0&&(me!==null&&(clearInterval(me),me=null),F&&(u=F,F=null,u())),P}var o={a:Ve};if(we++,a.instantiateWasm)try{return a.instantiateWasm(o,t)}catch(u){L(`Module.instantiateWasm callback failed with error: ${u}`),f(u)}return Ue(o,function(u){t(u.instance)}).catch(f),{}}();a._OrtInit=(t,o)=>(a._OrtInit=P.M)(t,o),a._OrtGetLastError=(t,o)=>(a._OrtGetLastError=P.N)(t,o),a._OrtCreateSessionOptions=(t,o,u,m,O,E,U,ee,ye,oe)=>(a._OrtCreateSessionOptions=P.O)(t,o,u,m,O,E,U,ee,ye,oe),a._OrtAppendExecutionProvider=(t,o)=>(a._OrtAppendExecutionProvider=P.P)(t,o),a._OrtAddFreeDimensionOverride=(t,o,u)=>(a._OrtAddFreeDimensionOverride=P.Q)(t,o,u),a._OrtAddSessionConfigEntry=(t,o,u)=>(a._OrtAddSessionConfigEntry=P.R)(t,o,u),a._OrtReleaseSessionOptions=t=>(a._OrtReleaseSessionOptions=P.S)(t),a._OrtCreateSession=(t,o,u)=>(a._OrtCreateSession=P.T)(t,o,u),a._OrtReleaseSession=t=>(a._OrtReleaseSession=P.U)(t),a._OrtGetInputOutputCount=(t,o,u)=>(a._OrtGetInputOutputCount=P.V)(t,o,u),a._OrtGetInputName=(t,o)=>(a._OrtGetInputName=P.W)(t,o),a._OrtGetOutputName=(t,o)=>(a._OrtGetOutputName=P.X)(t,o),a._OrtFree=t=>(a._OrtFree=P.Y)(t),a._OrtCreateTensor=(t,o,u,m,O,E)=>(a._OrtCreateTensor=P.Z)(t,o,u,m,O,E),a._OrtGetTensorData=(t,o,u,m,O)=>(a._OrtGetTensorData=P._)(t,o,u,m,O),a._OrtReleaseTensor=t=>(a._OrtReleaseTensor=P.$)(t),a._OrtCreateRunOptions=(t,o,u,m)=>(a._OrtCreateRunOptions=P.aa)(t,o,u,m),a._OrtAddRunConfigEntry=(t,o,u)=>(a._OrtAddRunConfigEntry=P.ba)(t,o,u),a._OrtReleaseRunOptions=t=>(a._OrtReleaseRunOptions=P.ca)(t),a._OrtCreateBinding=t=>(a._OrtCreateBinding=P.da)(t),a._OrtBindInput=(t,o,u)=>(a._OrtBindInput=P.ea)(t,o,u),a._OrtBindOutput=(t,o,u,m)=>(a._OrtBindOutput=P.fa)(t,o,u,m),a._OrtClearBoundOutputs=t=>(a._OrtClearBoundOutputs=P.ga)(t),a._OrtReleaseBinding=t=>(a._OrtReleaseBinding=P.ha)(t),a._OrtRunWithBinding=(t,o,u,m,O)=>(a._OrtRunWithBinding=P.ia)(t,o,u,m,O),a._OrtRun=(t,o,u,m,O,E,U,ee)=>(a._OrtRun=P.ja)(t,o,u,m,O,E,U,ee),a._OrtEndProfiling=t=>(a._OrtEndProfiling=P.ka)(t),a._malloc=t=>(a._malloc=P.la)(t),a._free=t=>(a._free=P.ma)(t);var Je=t=>(Je=P.oa)(t),ot=t=>(ot=P.pa)(t),M=t=>(M=P.qa)(t),Ne=()=>(Ne=P.ra)();function st(){var t=P;t=Object.assign({},t);var o=u=>m=>u(m)>>>0;return t.la=o(t.la),t.qa=o(t.qa),t.ra=(u=>()=>u()>>>0)(t.ra),t}a.stackSave=()=>Ne(),a.stackRestore=t=>ot(t),a.stackAlloc=t=>M(t),a.UTF8ToString=ue,a.stringToUTF8=(t,o,u)=>Se(t,Z,o,u),a.lengthBytesUTF8=Ee;var Fe;F=function t(){Fe||Xe(),Fe||(F=t)};function Xe(){if(!(0<we)){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;){var t=a.preRun.shift();Ie.unshift(t)}for(;0<Ie.length;)Ie.shift()(a);if(!(0<we||Fe||(Fe=!0,a.calledRun=!0,de))){for(;0<ne.length;)ne.shift()(a);for(h(a);0<X.length;)X.shift()(a)}}}return Xe(),w}})();typeof dr=="object"&&typeof Ct=="object"?Ct.exports=cr:typeof define=="function"&&define.amd&&define([],()=>cr)});var mr=Ke(()=>{});var gr=Ke(()=>{});var hr={};Et(hr,{cpus:()=>en});var en,br=_t(()=>{en=void 0});var Or=Ke((wr,Dt)=>{"use strict";var yr=(()=>{var i=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(i||=__filename),function(c={}){function a(){return X.buffer!=ie.buffer&&K(),ie}function h(){return X.buffer!=ie.buffer&&K(),xe}function f(){return X.buffer!=ie.buffer&&K(),ce}function w(){return X.buffer!=ie.buffer&&K(),be}function g(){return X.buffer!=ie.buffer&&K(),ae}var s=c,S,x,H=new Promise((e,r)=>{S=e,x=r}),A=Object.assign({},s),I="./this.program",V=(e,r)=>{throw r},R=typeof window=="object",B=typeof importScripts=="function",D=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",T=s.ENVIRONMENT_IS_PTHREAD||!1,L="";function W(e){return s.locateFile?s.locateFile(e,L):L+e}var de,pe,Z;if(D){var _=(At(),et(St)),J=(Mt(),et(Tt));L=B?J.dirname(L)+"/":__dirname+"/",de=(e,r)=>(e=ue(e)?new URL(e):J.normalize(e),_.readFileSync(e,r?void 0:"utf8")),Z=e=>(e=de(e,!0),e.buffer||(e=new Uint8Array(e)),e),pe=(e,r,n,l=!0)=>{e=ue(e)?new URL(e):J.normalize(e),_.readFile(e,l?void 0:"utf8",(y,b)=>{y?n(y):r(l?b.buffer:b)})},!s.thisProgram&&1<process.argv.length&&(I=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),V=(e,r)=>{throw process.exitCode=e,r},global.Worker=mr().Worker}else(R||B)&&(B?L=self.location.href:typeof document<"u"&&document.currentScript&&(L=document.currentScript.src),typeof i<"u"&&i&&(L=i),L.startsWith("blob:")?L="":L=L.substr(0,L.replace(/[?#].*/,"").lastIndexOf("/")+1),D||(de=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},B&&(Z=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),pe=(e,r,n)=>{var l=new XMLHttpRequest;l.open("GET",e,!0),l.responseType="arraybuffer",l.onload=()=>{l.status==200||l.status==0&&l.response?r(l.response):n()},l.onerror=n,l.send(null)}));D&&typeof performance>"u"&&(global.performance=gr().performance);var Pe=console.log.bind(console),le=console.error.bind(console);D&&(Pe=(...e)=>_.writeSync(1,e.join(" ")+`\n`),le=(...e)=>_.writeSync(2,e.join(" ")+`\n`));var Ie=Pe,ne=le;Object.assign(s,A),A=null;var X,we,me=!1,F,ie,xe,ce,be,ae;function K(){var e=X.buffer;s.HEAP8=ie=new Int8Array(e),s.HEAP16=new Int16Array(e),s.HEAPU8=xe=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAP32=ce=new Int32Array(e),s.HEAPU32=be=new Uint32Array(e),s.HEAPF32=new Float32Array(e),s.HEAPF64=ae=new Float64Array(e)}var je=16777216;if(T)X=s.wasmMemory;else if(s.wasmMemory)X=s.wasmMemory;else if(X=new WebAssembly.Memory({initial:je/65536,maximum:65536,shared:!0}),!(X.buffer instanceof SharedArrayBuffer))throw ne("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),D&&ne("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");K(),je=X.buffer.byteLength;var Oe=[],Ue=[],ve=[],Ae=0,_e=null,ge=null;function Be(){if(Ae--,Ae==0&&(_e!==null&&(clearInterval(_e),_e=null),ge)){var e=ge;ge=null,e()}}function te(e){throw e="Aborted("+e+")",ne(e),me=!0,F=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),x(e),e}var re=e=>e.startsWith("data:application/octet-stream;base64,"),ue=e=>e.startsWith("file://"),Ee;Ee="ort-wasm-threaded.wasm",re(Ee)||(Ee=W(Ee));function Se(e){if(Z)return Z(e);throw"both async and sync fetching of the wasm failed"}function Le(e){if(R||B){if(typeof fetch=="function"&&!ue(e))return fetch(e,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw`failed to load wasm binary file at \'${e}\'`;return r.arrayBuffer()}).catch(()=>Se(e));if(pe)return new Promise((r,n)=>{pe(e,l=>r(new Uint8Array(l)),n)})}return Promise.resolve().then(()=>Se(e))}function ze(e,r,n){return Le(e).then(l=>WebAssembly.instantiate(l,r)).then(n,l=>{ne(`failed to asynchronously prepare wasm: ${l}`),te(l)})}function rt(e,r){var n=Ee;return typeof WebAssembly.instantiateStreaming!="function"||re(n)||ue(n)||D||typeof fetch!="function"?ze(n,e,r):fetch(n,{credentials:"same-origin"}).then(l=>WebAssembly.instantiateStreaming(l,e).then(r,function(y){return ne(`wasm streaming compile failed: ${y}`),ne("falling back to ArrayBuffer instantiation"),ze(n,e,r)}))}var Te,Ge={799444:(e,r,n,l)=>{if(typeof s>"u"||!s.bb)return 1;if(e=ee(e>>>0),e.startsWith("./")&&(e=e.substring(2)),e=s.bb.get(e),!e)return 2;if(r>>>=0,n>>>=0,l>>>=0,r+n>e.byteLength)return 3;try{return h().set(e.subarray(r,r+n),l>>>0),0}catch{return 4}}};function ke(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var We=e=>{e.terminate(),e.onmessage=()=>{}},nt=e=>{M.Oa.length==0&&(Je(),M.Xa(M.Oa[0]));var r=M.Oa.pop();if(!r)return 6;M.Pa.push(r),M.La[e.Na]=r,r.Na=e.Na;var n={cmd:"run",start_routine:e.gb,arg:e.cb,pthread_ptr:e.Na};return D&&r.unref(),r.postMessage(n,e.mb),0},De=0,at=e=>{var r=Ot();return e=e(),ft(r),e},G=(e,r,...n)=>at(()=>{for(var l=n.length,y=wt(8*l),b=y>>>3,v=0;v<n.length;v++){var z=n[v];g()[b+v>>>0]=z}return rr(e,0,l,y,r)});function qe(e){if(T)return G(0,1,e);F=e,0<De||(M.hb(),s.onExit?.(e),me=!0),V(e,new ke(e))}var Ve=e=>{if(F=e,T)throw st(e),"unwind";qe(e)};function P(){for(var e=s.numThreads;e--;)Je();Oe.unshift(()=>{Ae++,ot(()=>Be())})}function Je(){var e=W("ort-wasm-threaded.worker.js");e=new Worker(e),M.Oa.push(e)}function ot(e){T?e():Promise.all(M.Oa.map(M.Xa)).then(e)}var M={Oa:[],Pa:[],ab:[],La:{},Va(){T?(M.receiveObjectTransfer=M.fb,M.threadInitTLS=M.$a,M.setExitStatus=M.Za):P()},Za:e=>F=e,pb:["$terminateWorker"],hb:()=>{for(var e of M.Pa)We(e);for(e of M.Oa)We(e);M.Oa=[],M.Pa=[],M.La=[]},Ya:e=>{var r=e.Na;delete M.La[r],M.Oa.push(e),M.Pa.splice(M.Pa.indexOf(e),1),e.Na=0,bt(r)},fb(){},$a(){M.ab.forEach(e=>e())},Xa:e=>new Promise(r=>{e.onmessage=b=>{b=b.data;var v=b.cmd;if(b.targetThread&&b.targetThread!=ut()){var z=M.La[b.targetThread];z?z.postMessage(b,b.transferList):ne(`Internal error! Worker sent a message "${v}" to target pthread ${b.targetThread}, but that thread no longer exists!`)}else v==="checkMailbox"?it():v==="spawnThread"?nt(b):v==="cleanupThread"?M.Ya(M.La[b.thread]):v==="killThread"?(b=b.thread,v=M.La[b],delete M.La[b],We(v),bt(b),M.Pa.splice(M.Pa.indexOf(v),1),v.Na=0):v==="cancelThread"?M.La[b.thread].postMessage({cmd:"cancel"}):v==="loaded"?(e.loaded=!0,D&&!e.Na&&e.unref(),r(e)):v==="alert"?alert(`Thread ${b.threadId}: ${b.text}`):b.target==="setimmediate"?e.postMessage(b):v==="callHandler"?s[b.handler](...b.args):v&&ne(`worker sent an unknown command ${v}`)},e.onerror=b=>{throw ne(`worker sent an error! ${b.filename}:${b.lineno}: ${b.message}`),b},D&&(e.on("message",b=>e.onmessage({data:b})),e.on("error",b=>e.onerror(b)));var n=[],l=["onExit"],y;for(y of l)s.hasOwnProperty(y)&&n.push(y);e.postMessage({cmd:"load",handlers:n,urlOrBlob:s.mainScriptUrlOrBlob||i,wasmMemory:X,wasmModule:we})})};s.PThread=M;var Ne=e=>{for(;0<e.length;)e.shift()(s)};s.establishStackSpace=()=>{var e=ut(),r=w()[e+52>>>2>>>0];e=w()[e+56>>>2>>>0],or(r,r-e),ft(r)};function st(e){if(T)return G(1,0,e);Ve(e)}var Fe=[],Xe;s.invokeEntryPoint=(e,r)=>{De=0;var n=Fe[e];n||(e>=Fe.length&&(Fe.length=e+1),Fe[e]=n=Xe.get(e)),e=n(r),0<De?M.Za(e):yt(e)};class t{constructor(r){this.Ua=r-24}Va(r,n){w()[this.Ua+16>>>2>>>0]=0,w()[this.Ua+4>>>2>>>0]=r,w()[this.Ua+8>>>2>>>0]=n}}var o=0,u=0;function m(e,r,n,l){return T?G(2,1,e,r,n,l):O(e,r,n,l)}function O(e,r,n,l){if(e>>>=0,r>>>=0,n>>>=0,l>>>=0,typeof SharedArrayBuffer>"u")return ne("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var y=[];return T&&y.length===0?m(e,r,n,l):(e={gb:n,Na:e,cb:l,mb:y},T?(e.ob="spawnThread",postMessage(e,y),0):nt(e))}var E=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,U=(e,r,n)=>{r>>>=0;var l=r+n;for(n=r;e[n]&&!(n>=l);)++n;if(16<n-r&&e.buffer&&E)return E.decode(e.buffer instanceof SharedArrayBuffer?e.slice(r,n):e.subarray(r,n));for(l="";r<n;){var y=e[r++];if(y&128){var b=e[r++]&63;if((y&224)==192)l+=String.fromCharCode((y&31)<<6|b);else{var v=e[r++]&63;y=(y&240)==224?(y&15)<<12|b<<6|v:(y&7)<<18|b<<12|v<<6|e[r++]&63,65536>y?l+=String.fromCharCode(y):(y-=65536,l+=String.fromCharCode(55296|y>>10,56320|y&1023))}}else l+=String.fromCharCode(y)}return l},ee=(e,r)=>(e>>>=0)?U(h(),e,r):"";function ye(e,r,n){return T?G(3,1,e,r,n):0}function oe(e,r){if(T)return G(4,1,e,r)}var se=e=>{for(var r=0,n=0;n<e.length;++n){var l=e.charCodeAt(n);127>=l?r++:2047>=l?r+=2:55296<=l&&57343>=l?(r+=4,++n):r+=3}return r},Qe=(e,r,n,l)=>{if(n>>>=0,!(0<l))return 0;var y=n;l=n+l-1;for(var b=0;b<e.length;++b){var v=e.charCodeAt(b);if(55296<=v&&57343>=v){var z=e.charCodeAt(++b);v=65536+((v&1023)<<10)|z&1023}if(127>=v){if(n>=l)break;r[n++>>>0]=v}else{if(2047>=v){if(n+1>=l)break;r[n++>>>0]=192|v>>6}else{if(65535>=v){if(n+2>=l)break;r[n++>>>0]=224|v>>12}else{if(n+3>=l)break;r[n++>>>0]=240|v>>18,r[n++>>>0]=128|v>>12&63}r[n++>>>0]=128|v>>6&63}r[n++>>>0]=128|v&63}}return r[n>>>0]=0,n-y},Re=(e,r,n)=>Qe(e,h(),r,n);function d(e,r){if(T)return G(5,1,e,r)}function k(e,r,n){if(T)return G(6,1,e,r,n)}function $(e,r,n){return T?G(7,1,e,r,n):0}function Me(e,r){if(T)return G(8,1,e,r)}function Ze(e,r,n){if(T)return G(9,1,e,r,n)}function Rt(e,r,n,l){if(T)return G(10,1,e,r,n,l)}function It(e,r,n,l){if(T)return G(11,1,e,r,n,l)}function Bt(e,r,n,l){if(T)return G(12,1,e,r,n,l)}function kt(e){if(T)return G(13,1,e)}function Wt(e,r){if(T)return G(14,1,e,r)}function Nt(e,r,n){if(T)return G(15,1,e,r,n)}function dt(e){e>>>=0,typeof Atomics.nb=="function"&&(Atomics.nb(f(),e>>>2,e).value.then(it),e+=128,Atomics.store(f(),e>>>2,1))}s.__emscripten_thread_mailbox_await=dt;var it=()=>{var e=ut();if(e&&(dt(e),e=nr,!me))try{if(e(),!(0<De))try{T?yt(F):Ve(F)}catch(r){r instanceof ke||r=="unwind"||V(1,r)}}catch(r){r instanceof ke||r=="unwind"||V(1,r)}};s.checkMailbox=it;var pt=[],$e=e=>e%4===0&&(e%100!==0||e%400===0),Ht=[0,31,60,91,121,152,182,213,244,274,305,335],Gt=[0,31,59,90,120,151,181,212,243,273,304,334];function $t(e,r,n,l,y,b,v,z){return T?G(16,1,e,r,n,l,y,b,v,z):-52}function Yt(e,r,n,l,y,b,v){if(T)return G(17,1,e,r,n,l,y,b,v)}var mt=[],gt={},jt=()=>{if(!ht){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:I||"./this.program"},r;for(r in gt)gt[r]===void 0?delete e[r]:e[r]=gt[r];var n=[];for(r in e)n.push(`${r}=${e[r]}`);ht=n}return ht},ht;function zt(e,r){if(T)return G(18,1,e,r);e>>>=0,r>>>=0;var n=0;return jt().forEach((l,y)=>{var b=r+n;for(y=w()[e+4*y>>>2>>>0]=b,b=0;b<l.length;++b)a()[y++>>>0]=l.charCodeAt(b);a()[y>>>0]=0,n+=l.length+1}),0}function qt(e,r){if(T)return G(19,1,e,r);e>>>=0,r>>>=0;var n=jt();w()[e>>>2>>>0]=n.length;var l=0;return n.forEach(y=>l+=y.length+1),w()[r>>>2>>>0]=l,0}function Vt(e){return T?G(20,1,e):52}function Jt(e,r,n,l){return T?G(21,1,e,r,n,l):52}function Xt(e,r,n,l,y){return T?G(22,1,e,r,n,l,y):70}var Hr=[null,[],[]];function Qt(e,r,n,l){if(T)return G(23,1,e,r,n,l);r>>>=0,n>>>=0,l>>>=0;for(var y=0,b=0;b<n;b++){var v=w()[r>>>2>>>0],z=w()[r+4>>>2>>>0];r+=8;for(var Ce=0;Ce<z;Ce++){var fe=h()[v+Ce>>>0],he=Hr[e];fe===0||fe===10?((e===1?Ie:ne)(U(he,0)),he.length=0):he.push(fe)}y+=z}return w()[l>>>2>>>0]=y,0}var Zt=[31,29,31,30,31,30,31,31,30,31,30,31],Kt=[31,28,31,30,31,30,31,31,30,31,30,31];function Gr(e){var r=Array(se(e)+1);return Qe(e,r,0,r.length),r}var $r=(e,r)=>{a().set(e,r>>>0)};function er(e,r,n,l){function y(p,N,q){for(p=typeof p=="number"?p.toString():p||"";p.length<N;)p=q[0]+p;return p}function b(p,N){return y(p,N,"0")}function v(p,N){function q(fr){return 0>fr?-1:0<fr?1:0}var He;return(He=q(p.getFullYear()-N.getFullYear()))===0&&(He=q(p.getMonth()-N.getMonth()))===0&&(He=q(p.getDate()-N.getDate())),He}function z(p){switch(p.getDay()){case 0:return new Date(p.getFullYear()-1,11,29);case 1:return p;case 2:return new Date(p.getFullYear(),0,3);case 3:return new Date(p.getFullYear(),0,2);case 4:return new Date(p.getFullYear(),0,1);case 5:return new Date(p.getFullYear()-1,11,31);case 6:return new Date(p.getFullYear()-1,11,30)}}function Ce(p){var N=p.Qa;for(p=new Date(new Date(p.Ra+1900,0,1).getTime());0<N;){var q=p.getMonth(),He=($e(p.getFullYear())?Zt:Kt)[q];if(N>He-p.getDate())N-=He-p.getDate()+1,p.setDate(1),11>q?p.setMonth(q+1):(p.setMonth(0),p.setFullYear(p.getFullYear()+1));else{p.setDate(p.getDate()+N);break}}return q=new Date(p.getFullYear()+1,0,4),N=z(new Date(p.getFullYear(),0,4)),q=z(q),0>=v(N,p)?0>=v(q,p)?p.getFullYear()+1:p.getFullYear():p.getFullYear()-1}e>>>=0,r>>>=0,n>>>=0,l>>>=0;var fe=w()[l+40>>>2>>>0];l={kb:f()[l>>>2>>>0],jb:f()[l+4>>>2>>>0],Sa:f()[l+8>>>2>>>0],Wa:f()[l+12>>>2>>>0],Ta:f()[l+16>>>2>>>0],Ra:f()[l+20>>>2>>>0],Ma:f()[l+24>>>2>>>0],Qa:f()[l+28>>>2>>>0],qb:f()[l+32>>>2>>>0],ib:f()[l+36>>>2>>>0],lb:fe?ee(fe):""},n=ee(n),fe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var he in fe)n=n.replace(new RegExp(he,"g"),fe[he]);var ir="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ur="January February March April May June July August September October November December".split(" ");fe={"%a":p=>ir[p.Ma].substring(0,3),"%A":p=>ir[p.Ma],"%b":p=>ur[p.Ta].substring(0,3),"%B":p=>ur[p.Ta],"%C":p=>b((p.Ra+1900)/100|0,2),"%d":p=>b(p.Wa,2),"%e":p=>y(p.Wa,2," "),"%g":p=>Ce(p).toString().substring(2),"%G":Ce,"%H":p=>b(p.Sa,2),"%I":p=>(p=p.Sa,p==0?p=12:12<p&&(p-=12),b(p,2)),"%j":p=>{for(var N=0,q=0;q<=p.Ta-1;N+=($e(p.Ra+1900)?Zt:Kt)[q++]);return b(p.Wa+N,3)},"%m":p=>b(p.Ta+1,2),"%M":p=>b(p.jb,2),"%n":()=>`\n`,"%p":p=>0<=p.Sa&&12>p.Sa?"AM":"PM","%S":p=>b(p.kb,2),"%t":()=>"	","%u":p=>p.Ma||7,"%U":p=>b(Math.floor((p.Qa+7-p.Ma)/7),2),"%V":p=>{var N=Math.floor((p.Qa+7-(p.Ma+6)%7)/7);if(2>=(p.Ma+371-p.Qa-2)%7&&N++,N)N==53&&(q=(p.Ma+371-p.Qa)%7,q==4||q==3&&$e(p.Ra)||(N=1));else{N=52;var q=(p.Ma+7-p.Qa-1)%7;(q==4||q==5&&$e(p.Ra%400-1))&&N++}return b(N,2)},"%w":p=>p.Ma,"%W":p=>b(Math.floor((p.Qa+7-(p.Ma+6)%7)/7),2),"%y":p=>(p.Ra+1900).toString().substring(2),"%Y":p=>p.Ra+1900,"%z":p=>{p=p.ib;var N=0<=p;return p=Math.abs(p)/60,(N?"+":"-")+("0000"+(p/60*100+p%60)).slice(-4)},"%Z":p=>p.lb,"%%":()=>"%"},n=n.replace(/%%/g,"\\0\\0");for(he in fe)n.includes(he)&&(n=n.replace(new RegExp(he,"g"),fe[he](l)));return n=n.replace(/\\0\\0/g,"%"),he=Gr(n),he.length>r?0:($r(he,e),he.length-1)}M.Va();var Yr=[qe,st,m,ye,oe,d,k,$,Me,Ze,Rt,It,Bt,kt,Wt,Nt,$t,Yt,zt,qt,Vt,Jt,Xt,Qt],jr={b:function(e,r,n){throw e>>>=0,new t(e).Va(r>>>0,n>>>0),o=e,u++,o},L:function(e){tr(e>>>0,!B,1,!R,131072,!1),M.$a()},j:function(e){e>>>=0,T?postMessage({cmd:"cleanupThread",thread:e}):M.Ya(M.La[e])},H:O,h:ye,S:oe,D:d,F:k,T:$,Q:Me,J:Ze,P:Rt,n:It,E:Bt,B:kt,R:Wt,C:Nt,p:()=>1,z:function(e,r){e>>>=0,e==r>>>0?setTimeout(it):T?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=M.La[e])&&e.postMessage({cmd:"checkMailbox"})},I:function(e,r,n,l,y){r>>>=0,n>>>=0,pt.length=l,y=y>>>0>>>3;for(var b=0;b<l;b++)pt[b]=g()[y+b>>>0];return e=r?Ge[r]:Yr[e],M.eb=n,n=e(...pt),M.eb=0,n},K:dt,o:function(e){D&&M.La[e>>>0].ref()},s:function(e,r,n){e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,n>>>=0,e=new Date(1e3*e),f()[n>>>2>>>0]=e.getUTCSeconds(),f()[n+4>>>2>>>0]=e.getUTCMinutes(),f()[n+8>>>2>>>0]=e.getUTCHours(),f()[n+12>>>2>>>0]=e.getUTCDate(),f()[n+16>>>2>>>0]=e.getUTCMonth(),f()[n+20>>>2>>>0]=e.getUTCFullYear()-1900,f()[n+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,f()[n+28>>>2>>>0]=e},t:function(e,r,n){e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,n>>>=0,e=new Date(1e3*e),f()[n>>>2>>>0]=e.getSeconds(),f()[n+4>>>2>>>0]=e.getMinutes(),f()[n+8>>>2>>>0]=e.getHours(),f()[n+12>>>2>>>0]=e.getDate(),f()[n+16>>>2>>>0]=e.getMonth(),f()[n+20>>>2>>>0]=e.getFullYear()-1900,f()[n+24>>>2>>>0]=e.getDay(),r=($e(e.getFullYear())?Ht:Gt)[e.getMonth()]+e.getDate()-1|0,f()[n+28>>>2>>>0]=r,f()[n+36>>>2>>>0]=-(60*e.getTimezoneOffset()),r=new Date(e.getFullYear(),6,1).getTimezoneOffset();var l=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=(r!=l&&e.getTimezoneOffset()==Math.min(l,r))|0,f()[n+32>>>2>>>0]=e},u:function(e){e>>>=0;var r=new Date(f()[e+20>>>2>>>0]+1900,f()[e+16>>>2>>>0],f()[e+12>>>2>>>0],f()[e+8>>>2>>>0],f()[e+4>>>2>>>0],f()[e>>>2>>>0],0),n=f()[e+32>>>2>>>0],l=r.getTimezoneOffset(),y=new Date(r.getFullYear(),6,1).getTimezoneOffset(),b=new Date(r.getFullYear(),0,1).getTimezoneOffset(),v=Math.min(b,y);return 0>n?f()[e+32>>>2>>>0]=+(y!=b&&v==l):0<n!=(v==l)&&(y=Math.max(b,y),r.setTime(r.getTime()+6e4*((0<n?v:y)-l))),f()[e+24>>>2>>>0]=r.getDay(),n=($e(r.getFullYear())?Ht:Gt)[r.getMonth()]+r.getDate()-1|0,f()[e+28>>>2>>>0]=n,f()[e>>>2>>>0]=r.getSeconds(),f()[e+4>>>2>>>0]=r.getMinutes(),f()[e+8>>>2>>>0]=r.getHours(),f()[e+12>>>2>>>0]=r.getDate(),f()[e+16>>>2>>>0]=r.getMonth(),f()[e+20>>>2>>>0]=r.getYear(),e=r.getTime(),e=isNaN(e)?-1:e/1e3,ar((Te=e,1<=+Math.abs(Te)?0<Te?+Math.floor(Te/4294967296)>>>0:~~+Math.ceil((Te-+(~~Te>>>0))/4294967296)>>>0:0)),e>>>0},q:$t,r:Yt,y:function(e,r,n,l){e>>>=0,r>>>=0,n>>>=0,l>>>=0;var y=new Date().getFullYear(),b=new Date(y,0,1),v=new Date(y,6,1);y=b.getTimezoneOffset();var z=v.getTimezoneOffset(),Ce=Math.max(y,z);w()[e>>>2>>>0]=60*Ce,f()[r>>>2>>>0]=+(y!=z),e=fe=>fe.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],b=e(b),v=e(v),z<y?(Re(b,n,17),Re(v,l,17)):(Re(b,l,17),Re(v,n,17))},c:()=>{te("")},O:function(e,r,n){e>>>=0,r>>>=0,n>>>=0,mt.length=0;for(var l;l=h()[r++>>>0];){var y=l!=105;y&=l!=112,n+=y&&n%8?4:0,mt.push(l==112?w()[n>>>2>>>0]:l==105?f()[n>>>2>>>0]:g()[n>>>3>>>0]),n+=y?8:4}return Ge[e](...mt)},k:()=>{},i:()=>Date.now(),U:()=>{throw De+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>D?(br(),et(hr)).cpus().length:navigator.hardwareConcurrency,x:function(e){e>>>=0;var r=h().length;if(e<=r||4294901760<e)return!1;for(var n=1;4>=n;n*=2){var l=r*(1+.2/n);l=Math.min(l,e+100663296);var y=Math;l=Math.max(e,l);e:{y=(y.min.call(y,4294901760,l+(65536-l%65536)%65536)-X.buffer.byteLength+65535)/65536;try{X.grow(y),K();var b=1;break e}catch{}b=void 0}if(b)return!0}return!1},M:zt,N:qt,G:Ve,g:Vt,m:Jt,v:Xt,l:Qt,a:X||s.wasmMemory,w:er,d:function(e,r,n,l){return er(e>>>0,r>>>0,n>>>0,l>>>0)}},C=function(){function e(n,l){return C=n.exports,C=zr(),M.ab.push(C.ya),Xe=C.za,Ue.unshift(C.V),we=l,Be(),C}var r={a:jr};if(Ae++,s.instantiateWasm)try{return s.instantiateWasm(r,e)}catch(n){ne(`Module.instantiateWasm callback failed with error: ${n}`),x(n)}return rt(r,function(n){e(n.instance,n.module)}).catch(x),{}}();s._OrtInit=(e,r)=>(s._OrtInit=C.W)(e,r),s._OrtGetLastError=(e,r)=>(s._OrtGetLastError=C.X)(e,r),s._OrtCreateSessionOptions=(e,r,n,l,y,b,v,z,Ce,fe)=>(s._OrtCreateSessionOptions=C.Y)(e,r,n,l,y,b,v,z,Ce,fe),s._OrtAppendExecutionProvider=(e,r)=>(s._OrtAppendExecutionProvider=C.Z)(e,r),s._OrtAddFreeDimensionOverride=(e,r,n)=>(s._OrtAddFreeDimensionOverride=C._)(e,r,n),s._OrtAddSessionConfigEntry=(e,r,n)=>(s._OrtAddSessionConfigEntry=C.$)(e,r,n),s._OrtReleaseSessionOptions=e=>(s._OrtReleaseSessionOptions=C.aa)(e),s._OrtCreateSession=(e,r,n)=>(s._OrtCreateSession=C.ba)(e,r,n),s._OrtReleaseSession=e=>(s._OrtReleaseSession=C.ca)(e),s._OrtGetInputOutputCount=(e,r,n)=>(s._OrtGetInputOutputCount=C.da)(e,r,n),s._OrtGetInputName=(e,r)=>(s._OrtGetInputName=C.ea)(e,r),s._OrtGetOutputName=(e,r)=>(s._OrtGetOutputName=C.fa)(e,r),s._OrtFree=e=>(s._OrtFree=C.ga)(e),s._OrtCreateTensor=(e,r,n,l,y,b)=>(s._OrtCreateTensor=C.ha)(e,r,n,l,y,b),s._OrtGetTensorData=(e,r,n,l,y)=>(s._OrtGetTensorData=C.ia)(e,r,n,l,y),s._OrtReleaseTensor=e=>(s._OrtReleaseTensor=C.ja)(e),s._OrtCreateRunOptions=(e,r,n,l)=>(s._OrtCreateRunOptions=C.ka)(e,r,n,l),s._OrtAddRunConfigEntry=(e,r,n)=>(s._OrtAddRunConfigEntry=C.la)(e,r,n),s._OrtReleaseRunOptions=e=>(s._OrtReleaseRunOptions=C.ma)(e),s._OrtCreateBinding=e=>(s._OrtCreateBinding=C.na)(e),s._OrtBindInput=(e,r,n)=>(s._OrtBindInput=C.oa)(e,r,n),s._OrtBindOutput=(e,r,n,l)=>(s._OrtBindOutput=C.pa)(e,r,n,l),s._OrtClearBoundOutputs=e=>(s._OrtClearBoundOutputs=C.qa)(e),s._OrtReleaseBinding=e=>(s._OrtReleaseBinding=C.ra)(e),s._OrtRunWithBinding=(e,r,n,l,y)=>(s._OrtRunWithBinding=C.sa)(e,r,n,l,y),s._OrtRun=(e,r,n,l,y,b,v,z)=>(s._OrtRun=C.ta)(e,r,n,l,y,b,v,z),s._OrtEndProfiling=e=>(s._OrtEndProfiling=C.ua)(e);var ut=s._pthread_self=()=>(ut=s._pthread_self=C.va)();s._malloc=e=>(s._malloc=C.wa)(e),s._free=e=>(s._free=C.xa)(e),s.__emscripten_tls_init=()=>(s.__emscripten_tls_init=C.ya)();var tr=s.__emscripten_thread_init=(e,r,n,l,y,b)=>(tr=s.__emscripten_thread_init=C.Aa)(e,r,n,l,y,b);s.__emscripten_thread_crashed=()=>(s.__emscripten_thread_crashed=C.Ba)();var rr=(e,r,n,l,y)=>(rr=C.Ca)(e,r,n,l,y),bt=e=>(bt=C.Da)(e),yt=s.__emscripten_thread_exit=e=>(yt=s.__emscripten_thread_exit=C.Ea)(e),nr=()=>(nr=C.Fa)(),ar=e=>(ar=C.Ga)(e),or=(e,r)=>(or=C.Ha)(e,r),ft=e=>(ft=C.Ia)(e),wt=e=>(wt=C.Ja)(e),Ot=()=>(Ot=C.Ka)();function zr(){var e=C;e=Object.assign({},e);var r=l=>()=>l()>>>0,n=l=>y=>l(y)>>>0;return e.va=r(e.va),e.wa=n(e.wa),e.emscripten_main_runtime_thread_id=r(e.emscripten_main_runtime_thread_id),e.Ja=n(e.Ja),e.Ka=r(e.Ka),e}s.wasmMemory=X,s.stackSave=()=>Ot(),s.stackRestore=e=>ft(e),s.stackAlloc=e=>wt(e),s.keepRuntimeAlive=()=>0<De,s.UTF8ToString=ee,s.stringToUTF8=Re,s.lengthBytesUTF8=se,s.ExitStatus=ke,s.PThread=M;var lt;ge=function e(){lt||sr(),lt||(ge=e)};function sr(){if(!(0<Ae))if(T)S(s),T||Ne(Ue),startWorker(s);else{if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)Oe.unshift(s.preRun.shift());Ne(Oe),0<Ae||lt||(lt=!0,s.calledRun=!0,me||(T||Ne(Ue),S(s),T||Ne(ve)))}}return sr(),H}})();typeof wr=="object"&&typeof Dt=="object"?Dt.exports=yr:typeof define=="function"&&define.amd&&define([],()=>yr)});var vr=Ke((yn,tn)=>{tn.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\\n\'});var Er;Er=pr();var rn=Or(),Ft,Pt=!1,ct=!1,_r=!1,nn=i=>{if(i===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+i+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+i+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},an=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},on=(i,c)=>i?c?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":c?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Sr=async i=>{if(Pt)return Promise.resolve();if(ct)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(_r)throw new Error("previous call to \'initializeWebAssembly()\' failed.");ct=!0;let c=i.initTimeout,a=i.numThreads,h=i.simd,f=nn(a),w=h&&an(),g=i.wasmPaths,s=typeof g=="string"?g:void 0,S=on(w,f),x=typeof g=="object"?g[S]:void 0,H=!1,A=[];if(c>0&&A.push(new Promise(I=>{setTimeout(()=>{H=!0,I()},c)})),A.push(new Promise((I,V)=>{let R=f?rn:Er,B={locateFile:(D,T)=>f&&D.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([vr()],{type:"text/javascript"})):D.endsWith(".wasm")?x||(s??T)+S:T+D};if(f)if(B.numThreads=a,typeof Blob>"u")B.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let D=`var ortWasmThreaded=${R.toString()};`;B.mainScriptUrlOrBlob=new Blob([D],{type:"text/javascript"})}R(B).then(D=>{ct=!1,Pt=!0,Ft=D,I()},D=>{ct=!1,_r=!0,V(D)})})),await Promise.race(A),H)throw new Error(`WebAssembly backend initializing failed due to timeout: ${c}ms`)},Q=()=>{if(Pt&&Ft)return Ft;throw new Error("WebAssembly is not initialized yet.")};var Y=(i,c)=>{let a=Q(),h=a.lengthBytesUTF8(i)+1,f=a._malloc(h);return a.stringToUTF8(i,f,h),c.push(f),f},tt=(i,c,a,h)=>{if(typeof i=="object"&&i!==null){if(a.has(i))throw new Error("Circular reference in options");a.add(i)}Object.entries(i).forEach(([f,w])=>{let g=c?c+f:f;if(typeof w=="object")tt(w,g+".",a,h);else if(typeof w=="string"||typeof w=="number")h(g,w.toString());else if(typeof w=="boolean")h(g,w?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof w}`)})},j=i=>{let c=Q(),a=c.stackSave();try{let h=c.stackAlloc(8);c._OrtGetLastError(h,h+4);let f=c.HEAP32[h/4],w=c.HEAPU32[h/4+1],g=w?c.UTF8ToString(w):"";throw new Error(`${i} ERROR_CODE: ${f}, ERROR_MESSAGE: ${g}`)}finally{c.stackRestore(a)}};var Ar=i=>{let c=Q(),a=0,h=[],f=i||{};try{if(i?.logSeverityLevel===void 0)f.logSeverityLevel=2;else if(typeof i.logSeverityLevel!="number"||!Number.isInteger(i.logSeverityLevel)||i.logSeverityLevel<0||i.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${i.logSeverityLevel}`);if(i?.logVerbosityLevel===void 0)f.logVerbosityLevel=0;else if(typeof i.logVerbosityLevel!="number"||!Number.isInteger(i.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${i.logVerbosityLevel}`);i?.terminate===void 0&&(f.terminate=!1);let w=0;return i?.tag!==void 0&&(w=Y(i.tag,h)),a=c._OrtCreateRunOptions(f.logSeverityLevel,f.logVerbosityLevel,!!f.terminate,w),a===0&&j("Can\'t create run options."),i?.extra!==void 0&&tt(i.extra,"",new WeakSet,(g,s)=>{let S=Y(g,h),x=Y(s,h);c._OrtAddRunConfigEntry(a,S,x)!==0&&j(`Can\'t set a run config entry: ${g} - ${s}.`)}),[a,h]}catch(w){throw a!==0&&c._OrtReleaseRunOptions(a),h.forEach(g=>c._free(g)),w}};var sn=i=>{switch(i){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${i}`)}},un=i=>{switch(i){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${i}`)}},fn=i=>{i.extra||(i.extra={}),i.extra.session||(i.extra.session={});let c=i.extra.session;c.use_ort_model_bytes_directly||(c.use_ort_model_bytes_directly="1"),i.executionProviders&&i.executionProviders.some(a=>(typeof a=="string"?a:a.name)==="webgpu")&&(i.enableMemPattern=!1)},ln=(i,c,a)=>{for(let h of c){let f=typeof h=="string"?h:h.name;switch(f){case"webnn":if(f="WEBNN",typeof h!="string"){let g=h;if(g?.deviceType){let s=Y("deviceType",a),S=Y(g.deviceType,a);Q()._OrtAddSessionConfigEntry(i,s,S)!==0&&j(`Can\'t set a session config entry: \'deviceType\' - ${g.deviceType}.`)}if(g?.numThreads){let s=g.numThreads;(typeof s!="number"||!Number.isInteger(s)||s<0)&&(s=0);let S=Y("numThreads",a),x=Y(s.toString(),a);Q()._OrtAddSessionConfigEntry(i,S,x)!==0&&j(`Can\'t set a session config entry: \'numThreads\' - ${g.numThreads}.`)}if(g?.powerPreference){let s=Y("powerPreference",a),S=Y(g.powerPreference,a);Q()._OrtAddSessionConfigEntry(i,s,S)!==0&&j(`Can\'t set a session config entry: \'powerPreference\' - ${g.powerPreference}.`)}}break;case"webgpu":if(f="JS",typeof h!="string"){let g=h;if(g?.preferredLayout){if(g.preferredLayout!=="NCHW"&&g.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${g.preferredLayout}`);let s=Y("preferredLayout",a),S=Y(g.preferredLayout,a);Q()._OrtAddSessionConfigEntry(i,s,S)!==0&&j(`Can\'t set a session config entry: \'preferredLayout\' - ${g.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${f}`)}let w=Y(f,a);Q()._OrtAppendExecutionProvider(i,w)!==0&&j(`Can\'t append execution provider: ${f}.`)}},Tr=i=>{let c=Q(),a=0,h=[],f=i||{};fn(f);try{let w=sn(f.graphOptimizationLevel??"all"),g=un(f.executionMode??"sequential"),s=typeof f.logId=="string"?Y(f.logId,h):0,S=f.logSeverityLevel??2;if(!Number.isInteger(S)||S<0||S>4)throw new Error(`log serverity level is not valid: ${S}`);let x=f.logVerbosityLevel??0;if(!Number.isInteger(x)||x<0||x>4)throw new Error(`log verbosity level is not valid: ${x}`);let H=typeof f.optimizedModelFilePath=="string"?Y(f.optimizedModelFilePath,h):0;if(a=c._OrtCreateSessionOptions(w,!!f.enableCpuMemArena,!!f.enableMemPattern,g,!!f.enableProfiling,0,s,S,x,H),a===0&&j("Can\'t create session options."),f.executionProviders&&ln(a,f.executionProviders,h),f.enableGraphCapture!==void 0){if(typeof f.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${f.enableGraphCapture}`);let A=Y("enableGraphCapture",h),I=Y(f.enableGraphCapture.toString(),h);c._OrtAddSessionConfigEntry(a,A,I)!==0&&j(`Can\'t set a session config entry: \'enableGraphCapture\' - ${f.enableGraphCapture}.`)}if(f.freeDimensionOverrides)for(let[A,I]of Object.entries(f.freeDimensionOverrides)){if(typeof A!="string")throw new Error(`free dimension override name must be a string: ${A}`);if(typeof I!="number"||!Number.isInteger(I)||I<0)throw new Error(`free dimension override value must be a non-negative integer: ${I}`);let V=Y(A,h);c._OrtAddFreeDimensionOverride(a,V,I)!==0&&j(`Can\'t set a free dimension override: ${A} - ${I}.`)}return f.extra!==void 0&&tt(f.extra,"",new WeakSet,(A,I)=>{let V=Y(A,h),R=Y(I,h);c._OrtAddSessionConfigEntry(a,V,R)!==0&&j(`Can\'t set a session config entry: ${A} - ${I}.`)}),[a,h]}catch(w){throw a!==0&&c._OrtReleaseSessionOptions(a),h.forEach(g=>c._free(g)),w}};var xt=i=>{switch(i){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${i}`)}},Mr=i=>{switch(i){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${i}`)}},Ut=i=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][i],Cr=i=>{switch(i){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${i}`)}},Dr=i=>{switch(i){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${i}`)}},Fr=i=>i==="float32"||i==="float16"||i==="int32"||i==="int64"||i==="uint32"||i==="uint8"||i==="bool",Pr=i=>{switch(i){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${i}`)}};var xr=async i=>{if(typeof i=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(i))}catch(c){if(c.code==="ERR_FS_FILE_TOO_LARGE"){let a=(void 0)(i),h=[];for await(let f of a)h.push(f);return new Uint8Array(Buffer.concat(h))}throw c}else{let c=await fetch(i);if(!c.ok)throw new Error(`failed to load external data file: ${i}`);let a=c.headers.get("Content-Length"),h=a?parseInt(a,10):0;if(h<1073741824)return new Uint8Array(await c.arrayBuffer());{if(!c.body)throw new Error(`failed to load external data file: ${i}, no response body.`);let f=c.body.getReader(),w;try{w=new ArrayBuffer(h)}catch(s){if(s instanceof RangeError){let S=Math.ceil(h/65536);w=new WebAssembly.Memory({initial:S,maximum:S}).buffer}else throw s}let g=0;for(;;){let{done:s,value:S}=await f.read();if(s)break;let x=S.byteLength;new Uint8Array(w,g,x).set(S),g+=x}return new Uint8Array(w,0,h)}}else return i instanceof Blob?new Uint8Array(await i.arrayBuffer()):i instanceof Uint8Array?i:new Uint8Array(i)};var cn=(i,c)=>{Q()._OrtInit(i,c)!==0&&j("Can\'t initialize onnxruntime.")},Lr=async i=>{cn(i.wasm.numThreads,Dr(i.logLevel))},Rr=async(i,c)=>{},Ye=new Map,dn=i=>{let c=Q(),a=c.stackSave();try{let h=c.stackAlloc(8);return c._OrtGetInputOutputCount(i,h,h+4)!==0&&j("Can\'t get session input/output count."),[c.HEAP32[h/4],c.HEAP32[h/4+1]]}finally{c.stackRestore(a)}},Lt=i=>{let c=Q(),a=c._malloc(i.byteLength);if(a===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${i.byteLength}.`);return c.HEAPU8.set(i,a),[a,i.byteLength]},Ir=async(i,c)=>{let a,h,f=Q();Array.isArray(i)?[a,h]=i:i.buffer===f.HEAPU8.buffer?[a,h]=[i.byteOffset,i.byteLength]:[a,h]=Lt(i);let w=0,g=0,s=0,S=[],x=[],H=[];try{if([g,S]=Tr(c),c?.externalData&&f.mountExternalData){let L=[];for(let W of c.externalData){let de=typeof W=="string"?W:W.path;L.push(xr(typeof W=="string"?W:W.data).then(pe=>{f.mountExternalData(de,pe)}))}await Promise.all(L)}w=await f._OrtCreateSession(a,h,g),w===0&&j("Can\'t create a session.");let[A,I]=dn(w),V=!!c?.enableGraphCapture,R=[],B=[],D=[];for(let L=0;L<A;L++){let W=f._OrtGetInputName(w,L);W===0&&j("Can\'t get an input name."),x.push(W),R.push(f.UTF8ToString(W))}for(let L=0;L<I;L++){let W=f._OrtGetOutputName(w,L);W===0&&j("Can\'t get an output name."),H.push(W);let de=f.UTF8ToString(W);B.push(de)}let T=null;return Ye.set(w,[w,x,H,T,V,!1]),[w,R,B]}catch(A){throw x.forEach(I=>f._OrtFree(I)),H.forEach(I=>f._OrtFree(I)),s!==0&&f._OrtReleaseBinding(s),w!==0&&f._OrtReleaseSession(w),A}finally{f._free(a),g!==0&&f._OrtReleaseSessionOptions(g),S.forEach(A=>f._free(A)),f.unmountExternalData?.()}},Br=i=>{let c=Q(),a=Ye.get(i);if(!a)throw new Error(`cannot release session. invalid session id: ${i}`);let[h,f,w,g,s]=a;g&&(s&&c._OrtClearBoundOutputs(g.handle),c._OrtReleaseBinding(g.handle)),c.jsepOnReleaseSession?.(i),f.forEach(S=>c._OrtFree(S)),w.forEach(S=>c._OrtFree(S)),c._OrtReleaseSession(h),Ye.delete(i)},Ur=(i,c,a,h,f,w=!1)=>{if(!i){c.push(0);return}let g=Q(),s=i[0],S=i[1],x=i[3],H,A;if(s==="string"&&x==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(w&&x!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${f} when enableGraphCapture is true.`);if(x==="gpu-buffer"){let R=i[2].gpuBuffer,B=Ut(xt(s));A=S.reduce((T,L)=>T*L,1)*B;let D=g.jsepRegisterBuffer;if(!D)throw new Error(\'Tensor location "gpu-buffer" is not supported without using WebGPU.\');H=D(h,f,R,A)}else{let R=i[2];if(Array.isArray(R)){A=4*R.length,H=g._malloc(A),a.push(H);let B=H/4;for(let D=0;D<R.length;D++){if(typeof R[D]!="string")throw new TypeError(`tensor data at index ${D} is not a string`);g.HEAPU32[B++]=Y(R[D],a)}}else A=R.byteLength,H=g._malloc(A),a.push(H),g.HEAPU8.set(new Uint8Array(R.buffer,R.byteOffset,A),H)}let I=g.stackSave(),V=g.stackAlloc(4*S.length);try{let R=V/4;S.forEach(D=>g.HEAP32[R++]=D);let B=g._OrtCreateTensor(xt(s),H,A,V,S.length,Pr(x));B===0&&j(`Can\'t create tensor for input/output. session=${h}, index=${f}.`),c.push(B)}finally{g.stackRestore(I)}},kr=async(i,c,a,h,f,w)=>{let g=Q(),s=Ye.get(i);if(!s)throw new Error(`cannot run inference. invalid session id: ${i}`);let S=s[0],x=s[1],H=s[2],A=s[3],I=s[4],V=s[5],R=c.length,B=h.length,D=0,T=[],L=[],W=[],de=[],pe=g.stackSave(),Z=g.stackAlloc(R*4),_=g.stackAlloc(R*4),J=g.stackAlloc(B*4),Pe=g.stackAlloc(B*4);try{[D,T]=Ar(w);for(let F=0;F<R;F++)Ur(a[F],L,de,i,c[F],I);for(let F=0;F<B;F++)Ur(f[F],W,de,i,R+h[F],I);let le=Z/4,Ie=_/4,ne=J/4,X=Pe/4;for(let F=0;F<R;F++)g.HEAPU32[le++]=L[F],g.HEAPU32[Ie++]=x[c[F]];for(let F=0;F<B;F++)g.HEAPU32[ne++]=W[F],g.HEAPU32[X++]=H[h[F]];g.jsepOnRunStart?.(S);let we;we=await g._OrtRun(S,_,Z,R,Pe,B,J,D),we!==0&&j("failed to call OrtRun().");let me=[];for(let F=0;F<B;F++){let ie=g.HEAPU32[J/4+F];if(ie===W[F]){me.push(f[F]);continue}let xe=g.stackSave(),ce=g.stackAlloc(4*4),be=!1,ae,K=0;try{g._OrtGetTensorData(ie,ce,ce+4,ce+8,ce+12)!==0&&j(`Can\'t access output tensor data on index ${F}.`);let Oe=ce/4,Ue=g.HEAPU32[Oe++];K=g.HEAPU32[Oe++];let ve=g.HEAPU32[Oe++],Ae=g.HEAPU32[Oe++],_e=[];for(let te=0;te<Ae;te++)_e.push(g.HEAPU32[ve/4+te]);g._OrtFree(ve);let ge=_e.reduce((te,re)=>te*re,1);ae=Mr(Ue);let Be=A?.outputPreferredLocations[h[F]];if(ae==="string"){if(Be==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let te=[],re=K/4;for(let ue=0;ue<ge;ue++){let Ee=g.HEAPU32[re++],Se=ue===ge-1?void 0:g.HEAPU32[re]-Ee;te.push(g.UTF8ToString(Ee,Se))}me.push([ae,_e,te,"cpu"])}else if(Be==="gpu-buffer"&&ge>0){let te=g.jsepGetBuffer;if(!te)throw new Error(\'preferredLocation "gpu-buffer" is not supported without using WebGPU.\');let re=te(K),ue=Ut(Ue);if(ue===void 0||!Fr(ae))throw new Error(`Unsupported data type: ${ae}`);be=!0,me.push([ae,_e,{gpuBuffer:re,download:g.jsepCreateDownloader(re,ge*ue,ae),dispose:()=>{g._OrtReleaseTensor(ie)}},"gpu-buffer"])}else{let te=Cr(ae),re=new te(ge);new Uint8Array(re.buffer,re.byteOffset,re.byteLength).set(g.HEAPU8.subarray(K,K+re.byteLength)),me.push([ae,_e,re,"cpu"])}}finally{g.stackRestore(xe),ae==="string"&&K&&g._free(K),be||g._OrtReleaseTensor(ie)}}return A&&!I&&(g._OrtClearBoundOutputs(A.handle),Ye.set(i,[S,x,H,A,I,!1])),me}finally{g.stackRestore(pe),L.forEach(le=>g._OrtReleaseTensor(le)),W.forEach(le=>g._OrtReleaseTensor(le)),de.forEach(le=>g._free(le)),D!==0&&g._OrtReleaseRunOptions(D),T.forEach(le=>g._free(le))}},Wr=i=>{let c=Q(),a=Ye.get(i);if(!a)throw new Error("invalid session id");let h=a[0],f=c._OrtEndProfiling(h);f===0&&j("Can\'t get an profile file name."),c._OrtFree(f)},Nr=i=>{let c=[];for(let a of i){let h=a[2];!Array.isArray(h)&&"buffer"in h&&c.push(h.buffer)}return c};self.onmessage=i=>{let{type:c,in:a}=i.data;try{switch(c){case"init-wasm":Sr(a.wasm).then(()=>{Lr(a).then(()=>{postMessage({type:c})},h=>{postMessage({type:c,err:h})})},h=>{postMessage({type:c,err:h})});break;case"init-ep":{let{epName:h,env:f}=a;Rr(f,h).then(()=>{postMessage({type:c})},w=>{postMessage({type:c,err:w})});break}case"copy-from":{let{buffer:h}=a,f=Lt(h);postMessage({type:c,out:f});break}case"create":{let{model:h,options:f}=a;Ir(h,f).then(w=>{postMessage({type:c,out:w})},w=>{postMessage({type:c,err:w})});break}case"release":Br(a),postMessage({type:c});break;case"run":{let{sessionId:h,inputIndices:f,inputs:w,outputIndices:g,options:s}=a;kr(h,f,w,g,new Array(g.length).fill(null),s).then(S=>{S.some(x=>x[3]!=="cpu")?postMessage({type:c,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:c,out:S},Nr([...w,...S]))},S=>{postMessage({type:c,err:S})});break}case"end-profiling":Wr(a),postMessage({type:c});break;default:}}catch(h){postMessage({type:c,err:h})}};})();\n'}),_r,gt,yn,Do,Lo,ca,pa,Vr,Wr,Tg,Eo,od,id,ad,sd,ud,ld,fd,da=L$2(()=>{Ot(),rd(),Ur(),_r=()=>!!Z.wasm.proxy&&typeof document<"u",yn=!1,Do=!1,Lo=!1,pa=new Map,Vr=(t,e)=>{let n=pa.get(t);n?n.push(e):pa.set(t,[e])},Wr=()=>{if(yn||!Do||Lo||!gt)throw new Error("worker not ready")},Tg=t=>{switch(t.data.type){case"init-wasm":yn=!1,t.data.err?(Lo=!0,ca[1](t.data.err)):(Do=!0,ca[0]());break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let e=pa.get(t.data.type);t.data.err?e.shift()[1](t.data.err):e.shift()[0](t.data.out);break}}},Eo=typeof document<"u"?document?.currentScript?.src:void 0,od=async()=>{if(!Do){if(yn)throw new Error("multiple calls to 'initWasm()' detected.");if(Lo)throw new Error("previous call to 'initWasm()' failed.");if(yn=!0,_r())return Z.wasm.wasmPaths===void 0&&Eo&&Eo.indexOf("blob:")!==0&&(Z.wasm.wasmPaths=Eo.substr(0,+Eo.lastIndexOf("/")+1)),new Promise((t,e)=>{gt?.terminate();let n=URL.createObjectURL(new Blob([nd()],{type:"text/javascript"}));gt=new Worker(n,{name:"ort-wasm-proxy-worker"}),gt.onerror=a=>e(a),gt.onmessage=Tg,URL.revokeObjectURL(n),ca=[t,e];let r={type:"init-wasm",in:Z};gt.postMessage(r)});try{await Mp(Z.wasm),await Xp(Z),Do=!0}catch(t){throw Lo=!0,t}finally{yn=!1}}},id=async t=>{if(_r())return Wr(),new Promise((e,n)=>{Vr("init-ep",[e,n]);let r={type:"init-ep",in:{epName:t,env:Z}};gt.postMessage(r)});await Kp(Z,t)},ad=async t=>_r()?(Wr(),new Promise((e,n)=>{Vr("copy-from",[e,n]);let r={type:"copy-from",in:{buffer:t}};gt.postMessage(r,[t.buffer])})):fa(t),sd=async(t,e)=>{if(_r()){if(e?.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return Wr(),new Promise((n,r)=>{Vr("create",[n,r]);let a={type:"create",in:{model:t,options:{...e}}},i=[];t instanceof Uint8Array&&i.push(t.buffer),gt.postMessage(a,i)})}else return Jp(t,e)},ud=async t=>{if(_r())return Wr(),new Promise((e,n)=>{Vr("release",[e,n]);let r={type:"release",in:t};gt.postMessage(r)});Zp(t)},ld=async(t,e,n,r,a,i)=>{if(_r()){if(n.some(l=>l[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(a.some(l=>l))throw new Error("pre-allocated output tensor is not supported for proxy.");return Wr(),new Promise((l,p)=>{Vr("run",[l,p]);let m=n,s={type:"run",in:{sessionId:t,inputIndices:e,inputs:m,outputIndices:r,options:i}};gt.postMessage(s,td(m))})}else return Qp(t,e,n,r,a,i)},fd=async t=>{if(_r())return Wr(),new Promise((e,n)=>{Vr("end-profiling",[e,n]);let r={type:"end-profiling",in:t};gt.postMessage(r)});ed(t)}}),cd,xg,Co,pd=L$2(()=>{Ot(),da(),ua(),la(),cd=(t,e)=>{switch(t.location){case"cpu":return[t.type,t.dims,t.data,"cpu"];case"gpu-buffer":return[t.type,t.dims,{gpuBuffer:t.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${t.location} for ${e()}`)}},xg=t=>{switch(t[3]){case"cpu":return new Me(t[0],t[2],t[1]);case"gpu-buffer":{let e=t[0];if(!Po(e))throw new Error(`not supported data type: ${e} for deserializing GPU tensor`);let{gpuBuffer:n,download:r,dispose:a}=t[2];return Me.fromGpuBuffer(n,{dataType:e,dims:t[1],download:r,dispose:a})}default:throw new Error(`invalid data location: ${t[3]}`)}},Co=class{async fetchModelAndCopyToWasmMemory(t){return ad(await gn(t))}async loadModel(t,e){lr();let n;typeof t=="string"?typeof process<"u"&&process.versions&&process.versions.node?n=await gn(t):n=await this.fetchModelAndCopyToWasmMemory(t):n=t,[this.sessionId,this.inputNames,this.outputNames]=await sd(n,e),fr()}async dispose(){return ud(this.sessionId)}async run(t,e,n){lr();let r=[],a=[];Object.entries(t).forEach(f=>{let v=f[0],I=f[1],G=this.inputNames.indexOf(v);if(G===-1)throw new Error(`invalid input '${v}'`);r.push(I),a.push(G)});let i=[],l=[];Object.entries(e).forEach(f=>{let v=f[0],I=f[1],G=this.outputNames.indexOf(v);if(G===-1)throw new Error(`invalid output '${v}'`);i.push(I),l.push(G)});let p=r.map((f,v)=>cd(f,()=>`input "${this.inputNames[a[v]]}"`)),m=i.map((f,v)=>f?cd(f,()=>`output "${this.outputNames[l[v]]}"`):null),s=await ld(this.sessionId,a,p,l,m,n),h={};for(let f=0;f<s.length;f++)h[this.outputNames[l[f]]]=i[f]??xg(s[f]);return fr(),h}startProfiling(){}endProfiling(){fd(this.sessionId)}}}),wg,Fo,dd=L$2(()=>{Ot(),da(),pd(),wg=()=>{if((typeof Z.wasm.initTimeout!="number"||Z.wasm.initTimeout<0)&&(Z.wasm.initTimeout=0),typeof Z.wasm.simd!="boolean"&&(Z.wasm.simd=!0),typeof Z.wasm.proxy!="boolean"&&(Z.wasm.proxy=!1),typeof Z.wasm.trace!="boolean"&&(Z.wasm.trace=!1),typeof Z.wasm.numThreads!="number"||!Number.isInteger(Z.wasm.numThreads)||Z.wasm.numThreads<=0){(typeof self<"u"&&!self.crossOriginIsolated||typeof process<"u"&&process.versions&&process.versions.node)&&(Z.wasm.numThreads=1);let t=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;Z.wasm.numThreads=Math.min(4,Math.ceil((t||1)/2))}},Fo=class{async init(t){wg(),await od(),await id(t)}async createInferenceSessionHandler(t,e){let n=new Co;return await n.loadModel(t,e),Promise.resolve(n)}}}),hd={};Sr(hd,{wasmBackend:()=>vg});var vg,md=L$2(()=>{dd(),vg=new Fo});Ot();Ot();Ot();var Ts="1.18.0";{let t=(Op(),ar(_p)).onnxjsBackend;Pr("webgl",t,-10)}{let t=(md(),ar(hd)).wasmBackend;Pr("cpu",t,10),Pr("wasm",t,10)}Object.defineProperty(Z.versions,"web",{value:Ts,enumerable:!0});const BASE_PATH="/Lifeline/".replace(/\/$/,"");Z.wasm.wasmPaths=`${BASE_PATH}/onnx/`;Z.wasm.simd=!0;Z.wasm.numThreads=1;Z.wasm.proxy=!1;const CATEGORY_MODEL_URL=`${BASE_PATH}/models/category_model.onnx`,VECTORIZER_URL=`${BASE_PATH}/models/vectorizer.json`,CATEGORY_LABELS_URL=`${BASE_PATH}/models/category_labels.json`,URGENCY_MODEL_URL=`${BASE_PATH}/models/urgency_nb.json`,URGENCY_LABELS_URL=`${BASE_PATH}/models/urgency_labels.json`;let ortSession=null,vocab=null,vocabSize=null,categoryLabels=null,urgencyModel=null,urgencyLabels=null,featureIdf=null,categoryInputName="input";function cleanAndTokens(t){if(!t)return[];const e=String(t).toLowerCase().replace(/https?:\/\/\S+|www\.\S+/g,"").replace(/[^a-z\s]/g," ").replace(/\s+/g," ").trim();return e?e.split(" "):[]}function buildCategoryVector(t){const e=new Float32Array(vocabSize);for(const a of t){const i=vocab[a];i!==void 0&&i<vocabSize&&(e[i]+=1)}if(featureIdf&&featureIdf.length===vocabSize)for(let a=0;a<vocabSize;a++)e[a]*=featureIdf[a];else{const a=t.length||1;for(let i=0;i<vocabSize;i++)e[i]/=a}let n=0;for(let a of e)n+=a*a;const r=Math.sqrt(n)||1;for(let a=0;a<vocabSize;a++)e[a]/=r;return e}async function loadVectorizer(){if(vocab)return;const t=await fetch(VECTORIZER_URL);if(!t.ok)throw new Error("Missing vectorizer.json");const e=await t.json();vocab=e.vocabulary_||e,featureIdf=Array.isArray(e.idf_)?e.idf_.map(Number):Array.isArray(e.idf)?e.idf.map(Number):null;const n=Object.values(vocab).filter(a=>typeof a=="number"),r=Math.max(...n);vocabSize=Math.max(r+1,Object.keys(vocab).length)}async function loadCategoryModel(){if(ortSession)return ortSession;const t={executionProviders:["wasm"],graphOptimizationLevel:"all"};return ortSession=await Pd.create(CATEGORY_MODEL_URL,t),ortSession.inputNames?.length>0&&(categoryInputName=ortSession.inputNames[0]),ortSession}async function loadLabels(){categoryLabels||(categoryLabels=await(await fetch(CATEGORY_LABELS_URL)).json()),urgencyLabels||(urgencyLabels=await(await fetch(URGENCY_LABELS_URL)).json())}async function loadUrgencyModel(){if(urgencyModel)return;const t=await(await fetch(URGENCY_MODEL_URL)).json(),e=urgencyLabels,n=t.feature_log_prob_,r=n[0].length,a=e.length,i=Array.from({length:r},()=>new Array(a));for(let l=0;l<a;l++)for(let p=0;p<r;p++)i[p][l]=Number(n[l][p]);urgencyModel={classes:e,logProbs:{prior:t.class_log_prior_.map(Number),words:i}}}async function predictCategory(t){await Promise.all([loadVectorizer(),loadCategoryModel(),loadLabels()]);let e=buildCategoryVector(cleanAndTokens(t));if(e.length!==vocabSize){console.warn("Vector size mismatch. Fixing");const p=new Float32Array(vocabSize);p.set(e.slice(0,vocabSize)),e=p}for(let p=0;p<e.length;p++)Number.isFinite(e[p])||(e[p]=0);const n=new Me("float32",e,[1,vocabSize]),r=await ortSession.run({[categoryInputName]:n}),a=Object.keys(r)[0],i=Array.from(r[a].data);let l=0;for(let p=1;p<i.length;p++)i[p]>i[l]&&(l=p);return{label:categoryLabels[l],scores:i}}async function predictUrgency(t){await Promise.all([loadVectorizer(),loadUrgencyModel(),loadLabels()]);const e=cleanAndTokens(t),n=new Set;for(const i of e){const l=vocab[i];l!==void 0&&n.add(l)}const r=[...urgencyModel.logProbs.prior];for(const i of n){const l=urgencyModel.logProbs.words[i];if(l)for(let p=0;p<l.length;p++)r[p]+=l[p]}let a=0;for(let i=1;i<r.length;i++)r[i]>r[a]&&(a=i);return{label:urgencyModel.classes[a],scores:r}}async function prioritizeAlert(t){const e=t?.trim()||"HELP",[n,r]=await Promise.all([predictCategory(e).catch(()=>({label:"Unknown",scores:[]})),predictUrgency(e).catch(()=>({label:"Unknown",scores:[]}))]);return{category:n.label,category_scores:n.scores,urgency_level:r.label,urgency_scores:r.scores}}async function prewarmModels(){try{await Promise.all([loadVectorizer(),loadCategoryModel(),loadUrgencyModel(),loadLabels()]),console.log("ML assets pre-warmed.")}catch(t){console.warn("Prewarm failed",t)}}prewarmModels();const db=getFirestore(app);function Home(){const[t,e]=reactExports.useState(null),[n,r]=reactExports.useState(null),[a,i]=reactExports.useState(navigator.onLine?"Online":"Offline"),[l,p]=reactExports.useState(""),[m,s]=reactExports.useState(!0),[h,f]=reactExports.useState(!1),[v,I]=reactExports.useState(null),G=useNavigate(),W=getAuth(app),X=()=>navigator.onLine,ge=qt=>{const de={user:t?t.isAnonymous?`Guest (${t.uid})`:t.email:"Unknown User",coords:qt.coords,message:l.trim()||"HELP",time:new Date().toISOString()};localStorage.setItem("lastLocation",JSON.stringify(de))},ie=()=>{if(s(!0),!navigator.geolocation){r({error:"Geolocation not supported."}),s(!1);return}navigator.geolocation.getCurrentPosition(qt=>{const de={latitude:qt.coords.latitude,longitude:qt.coords.longitude};r(de),ge({coords:de}),s(!1)},qt=>{console.error("UI Location Error:",qt.message),s(!1)})},Pe=async qt=>{const de=localStorage.getItem("pendingAlert");if(de&&X())try{const se=JSON.parse(de);se.user=qt?qt.isAnonymous?`Guest (${qt.uid})`:qt.email:"Unknown User",await addDoc(collection(db,"Alerts"),se),localStorage.removeItem("pendingAlert"),alert("Queued alert was sent successfully!")}catch(se){console.error("Failed sending queued alert:",se)}};reactExports.useEffect(()=>{if(!W.currentUser||W.currentUser.isAnonymous){I(null);return}const qt=query(collection(db,"Alerts"),where("userId","==",W.currentUser.uid),where("alertCompleted","==",!1),orderBy("time","desc"),limit(1)),de=onSnapshot(qt,se=>{se.empty?I(null):I({id:se.docs[0].id,...se.docs[0].data()})});return()=>de()},[W.currentUser]);const je=async()=>{try{const qt=W.currentUser;if(!qt)return alert("Not signed in.");if(!v)return;if(v.userId!==qt.uid)return alert("You are not allowed to complete this alert.");await deleteDoc(doc(db,"Alerts",v.id)),alert("Task completed.")}catch(qt){console.error("Complete task error:",qt),alert("Error completing task.")}};reactExports.useEffect(()=>{const qt=onAuthStateChanged(W,he=>{e(he),he&&Pe(he)});ie();const de=()=>{i("Online"),t&&Pe(t)},se=()=>i("Offline");return window.addEventListener("online",de),window.addEventListener("offline",se),()=>{qt(),window.removeEventListener("online",de),window.removeEventListener("offline",se)}},[t]);const rt=async()=>{const qt=Date.now(),de=3600*1e3;let se=JSON.parse(localStorage.getItem("alertHistory"))||[];if(se=se.filter(Hr=>qt-Hr<de),se.length>=5)return alert("Slow down: max 5 alerts per hour.");se.push(qt),localStorage.setItem("alertHistory",JSON.stringify(se));const he=Number(localStorage.getItem("lastSendTimestamp"));if(he&&qt-he<1e4){const Hr=Math.ceil((1e4-(qt-he))/1e3);return alert(`Wait ${Hr}s before sending again.`)}localStorage.setItem("lastSendTimestamp",qt.toString());let pe="Not Available",Ae="Not Available";const Ce=l.trim()||"HELP";try{const Hr=await prioritizeAlert(Ce);pe=Hr.category,Ae=Hr.urgency_level}catch{}const Te={userId:W.currentUser?.uid||null,user:t?t.isAnonymous?`Guest (${t.uid})`:t.email:"Unknown User",coords:n,message:Ce,time:new Date().toISOString(),category:pe,urgency_level:Ae,alertCompleted:!1};if(f(!0),!X()){localStorage.setItem("pendingAlert",JSON.stringify(Te)),alert("Offline  Alert saved locally. Will send when online."),f(!1);return}try{await addDoc(collection(db,"Alerts"),Te),alert("Help request sent!"),p("")}catch{localStorage.setItem("pendingAlert",JSON.stringify(Te)),alert("Network issue  Alert queued locally.")}f(!1)};return jsxRuntimeExports.jsxs("div",{className:"home-page-wrapper",children:[jsxRuntimeExports.jsxs("div",{className:"logo home-logo",children:[jsxRuntimeExports.jsxs("h1",{children:[jsxRuntimeExports.jsx("span",{className:"life",children:"Life"}),jsxRuntimeExports.jsx("span",{className:"line",children:"Line"})]}),jsxRuntimeExports.jsx("p",{children:"Emergency Alert System"})]}),jsxRuntimeExports.jsxs("div",{className:"Home",children:[jsxRuntimeExports.jsxs("div",{className:"logo home-logo-mobile",children:[jsxRuntimeExports.jsxs("h1",{children:[jsxRuntimeExports.jsx("span",{className:"life",children:"Life"}),jsxRuntimeExports.jsx("span",{className:"line",children:"Line"})]}),jsxRuntimeExports.jsx("p",{children:"Emergency Alert System"})]}),jsxRuntimeExports.jsxs("div",{className:"home-header",children:[jsxRuntimeExports.jsx("h1",{children:"Welcome to Lifeline!"}),t?jsxRuntimeExports.jsxs("p",{children:["Welcome"," ",t.isAnonymous?`Guest (Temporary ID: ${t.uid})`:t.email]}):jsxRuntimeExports.jsx("p",{children:"Loading user..."}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"status-text",children:"Status:"}),jsxRuntimeExports.jsx("span",{className:`status-indicator ${a==="Online"?"status-online":"status-offline"}`,children:a})]})]}),jsxRuntimeExports.jsxs("div",{className:"message-group",children:[jsxRuntimeExports.jsx("label",{children:jsxRuntimeExports.jsx("b",{children:"Message:"})}),jsxRuntimeExports.jsx("input",{className:"message-input",type:"text",placeholder:"Enter your message (default: HELP)",value:l,onChange:qt=>p(qt.target.value)})]}),jsxRuntimeExports.jsx("button",{className:"btn btn-help",onClick:rt,disabled:h,children:h?"Sending...":"Send Help"}),jsxRuntimeExports.jsx("button",{className:"btn btn-store",onClick:()=>ie(),disabled:m,children:m?"Getting Location...":"Store Information"}),jsxRuntimeExports.jsxs("div",{className:"location-display",children:[m&&jsxRuntimeExports.jsx("p",{children:"Fetching current location..."}),!m&&n&&!n.error&&jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("b",{children:"Last known Coordinates"}),jsxRuntimeExports.jsx("br",{}),"Latitude: ",n.latitude,", Longitude: ",n.longitude]}),!m&&n?.error&&jsxRuntimeExports.jsxs("p",{children:["Location Error: ",n.error]})]}),!W.currentUser?.isAnonymous&&v&&jsxRuntimeExports.jsxs("div",{className:"active-alert",children:[jsxRuntimeExports.jsx("h3",{children:"Active Alert"}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("b",{children:"Message:"})," ",v.message]}),v.coords&&jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("b",{children:"Coords:"})," ",v.coords.latitude,","," ",v.coords.longitude]}),jsxRuntimeExports.jsx("button",{className:"btn btn-complete",onClick:je,children:" Mark as Completed"})]}),jsxRuntimeExports.jsx("button",{className:"btn btn-map",onClick:()=>G("/reports"),children:"View Alert"}),jsxRuntimeExports.jsx("a",{className:"btn btn-logout",onClick:()=>G("/"),children:"Log out"})]})]})}function useAttribution(t,e){const n=reactExports.useRef(e);reactExports.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const CONTEXT_VERSION=1;function createLeafletContext(t){return Object.freeze({__version:CONTEXT_VERSION,map:t})}function extendContext(t,e){return Object.freeze({...t,...e})}const LeafletContext=reactExports.createContext(null);function useLeafletContext(){const t=reactExports.use(LeafletContext);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function createContainerComponent(t){function e(n,r){const{instance:a,context:i}=t(n).current;reactExports.useImperativeHandle(r,()=>a);const{children:l}=n;return l==null?null:React.createElement(LeafletContext,{value:i},l)}return reactExports.forwardRef(e)}function createDivOverlayComponent(t){function e(n,r){const[a,i]=reactExports.useState(!1),{instance:l}=t(n,i).current;reactExports.useImperativeHandle(r,()=>l),reactExports.useEffect(function(){a&&l.update()},[l,a,n.children]);const p=l._contentNode;return p?reactDomExports.createPortal(n.children,p):null}return reactExports.forwardRef(e)}function createLeafComponent(t){function e(n,r){const{instance:a}=t(n).current;return reactExports.useImperativeHandle(r,()=>a),null}return reactExports.forwardRef(e)}function useEventHandlers(t,e){const n=reactExports.useRef(void 0);reactExports.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function withPane(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function createDivOverlayHook(t,e){return function(r,a){const i=useLeafletContext(),l=t(withPane(r,i),i);return useAttribution(i.map,r.attribution),useEventHandlers(l.current,r.eventHandlers),e(l.current,i,r,a),l}}var leafletSrc$1={exports:{}};var leafletSrc=leafletSrc$1.exports,hasRequiredLeafletSrc;function requireLeafletSrc(){return hasRequiredLeafletSrc||(hasRequiredLeafletSrc=1,(function(t,e){(function(n,r){r(e)})(leafletSrc,(function(n){var r="1.9.4";function a(c){var g,T,A,P;for(T=1,A=arguments.length;T<A;T++){P=arguments[T];for(g in P)c[g]=P[g]}return c}var i=Object.create||(function(){function c(){}return function(g){return c.prototype=g,new c}})();function l(c,g){var T=Array.prototype.slice;if(c.bind)return c.bind.apply(c,T.call(arguments,1));var A=T.call(arguments,2);return function(){return c.apply(g,A.length?A.concat(T.call(arguments)):arguments)}}var p=0;function m(c){return"_leaflet_id"in c||(c._leaflet_id=++p),c._leaflet_id}function s(c,g,T){var A,P,Y,Ie;return Ie=function(){A=!1,P&&(Y.apply(T,P),P=!1)},Y=function(){A?P=arguments:(c.apply(T,arguments),setTimeout(Ie,g),A=!0)},Y}function h(c,g,T){var A=g[1],P=g[0],Y=A-P;return c===A&&T?c:((c-P)%Y+Y)%Y+P}function f(){return!1}function v(c,g){if(g===!1)return c;var T=Math.pow(10,g===void 0?6:g);return Math.round(c*T)/T}function I(c){return c.trim?c.trim():c.replace(/^\s+|\s+$/g,"")}function G(c){return I(c).split(/\s+/)}function W(c,g){Object.prototype.hasOwnProperty.call(c,"options")||(c.options=c.options?i(c.options):{});for(var T in g)c.options[T]=g[T];return c.options}function X(c,g,T){var A=[];for(var P in c)A.push(encodeURIComponent(T?P.toUpperCase():P)+"="+encodeURIComponent(c[P]));return(!g||g.indexOf("?")===-1?"?":"&")+A.join("&")}var ge=/\{ *([\w_ -]+) *\}/g;function ie(c,g){return c.replace(ge,function(T,A){var P=g[A];if(P===void 0)throw new Error("No value provided for variable "+T);return typeof P=="function"&&(P=P(g)),P})}var Pe=Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"};function je(c,g){for(var T=0;T<c.length;T++)if(c[T]===g)return T;return-1}var rt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function qt(c){return window["webkit"+c]||window["moz"+c]||window["ms"+c]}var de=0;function se(c){var g=+new Date,T=Math.max(0,16-(g-de));return de=g+T,window.setTimeout(c,T)}var he=window.requestAnimationFrame||qt("RequestAnimationFrame")||se,pe=window.cancelAnimationFrame||qt("CancelAnimationFrame")||qt("CancelRequestAnimationFrame")||function(c){window.clearTimeout(c)};function Ae(c,g,T){if(T&&he===se)c.call(g);else return he.call(window,l(c,g))}function Ce(c){c&&pe.call(window,c)}var Te={__proto__:null,extend:a,create:i,bind:l,get lastId(){return p},stamp:m,throttle:s,wrapNum:h,falseFn:f,formatNum:v,trim:I,splitWords:G,setOptions:W,getParamString:X,template:ie,isArray:Pe,indexOf:je,emptyImageUrl:rt,requestFn:he,cancelFn:pe,requestAnimFrame:Ae,cancelAnimFrame:Ce};function Hr(){}Hr.extend=function(c){var g=function(){W(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},T=g.__super__=this.prototype,A=i(T);A.constructor=g,g.prototype=A;for(var P in this)Object.prototype.hasOwnProperty.call(this,P)&&P!=="prototype"&&P!=="__super__"&&(g[P]=this[P]);return c.statics&&a(g,c.statics),c.includes&&(or(c.includes),a.apply(null,[A].concat(c.includes))),a(A,c),delete A.statics,delete A.includes,A.options&&(A.options=T.options?i(T.options):{},a(A.options,c.options)),A._initHooks=[],A.callInitHooks=function(){if(!this._initHooksCalled){T.callInitHooks&&T.callInitHooks.call(this),this._initHooksCalled=!0;for(var Y=0,Ie=A._initHooks.length;Y<Ie;Y++)A._initHooks[Y].call(this)}},g},Hr.include=function(c){var g=this.prototype.options;return a(this.prototype,c),c.options&&(this.prototype.options=g,this.mergeOptions(c.options)),this},Hr.mergeOptions=function(c){return a(this.prototype.options,c),this},Hr.addInitHook=function(c){var g=Array.prototype.slice.call(arguments,1),T=typeof c=="function"?c:function(){this[c].apply(this,g)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(T),this};function or(c){if(!(typeof L>"u"||!L||!L.Mixin)){c=Pe(c)?c:[c];for(var g=0;g<c.length;g++)c[g]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ze={on:function(c,g,T){if(typeof c=="object")for(var A in c)this._on(A,c[A],g);else{c=G(c);for(var P=0,Y=c.length;P<Y;P++)this._on(c[P],g,T)}return this},off:function(c,g,T){if(!arguments.length)delete this._events;else if(typeof c=="object")for(var A in c)this._off(A,c[A],g);else{c=G(c);for(var P=arguments.length===1,Y=0,Ie=c.length;Y<Ie;Y++)P?this._off(c[Y]):this._off(c[Y],g,T)}return this},_on:function(c,g,T,A){if(typeof g!="function"){console.warn("wrong listener type: "+typeof g);return}if(this._listens(c,g,T)===!1){T===this&&(T=void 0);var P={fn:g,ctx:T};A&&(P.once=!0),this._events=this._events||{},this._events[c]=this._events[c]||[],this._events[c].push(P)}},_off:function(c,g,T){var A,P,Y;if(this._events&&(A=this._events[c],!!A)){if(arguments.length===1){if(this._firingCount)for(P=0,Y=A.length;P<Y;P++)A[P].fn=f;delete this._events[c];return}if(typeof g!="function"){console.warn("wrong listener type: "+typeof g);return}var Ie=this._listens(c,g,T);if(Ie!==!1){var ke=A[Ie];this._firingCount&&(ke.fn=f,this._events[c]=A=A.slice()),A.splice(Ie,1)}}},fire:function(c,g,T){if(!this.listens(c,T))return this;var A=a({},g,{type:c,target:this,sourceTarget:g&&g.sourceTarget||this});if(this._events){var P=this._events[c];if(P){this._firingCount=this._firingCount+1||1;for(var Y=0,Ie=P.length;Y<Ie;Y++){var ke=P[Y],Ge=ke.fn;ke.once&&this.off(c,Ge,ke.ctx),Ge.call(ke.ctx||this,A)}this._firingCount--}}return T&&this._propagateEvent(A),this},listens:function(c,g,T,A){typeof c!="string"&&console.warn('"string" type argument expected');var P=g;typeof g!="function"&&(A=!!g,P=void 0,T=void 0);var Y=this._events&&this._events[c];if(Y&&Y.length&&this._listens(c,P,T)!==!1)return!0;if(A){for(var Ie in this._eventParents)if(this._eventParents[Ie].listens(c,g,T,A))return!0}return!1},_listens:function(c,g,T){if(!this._events)return!1;var A=this._events[c]||[];if(!g)return!!A.length;T===this&&(T=void 0);for(var P=0,Y=A.length;P<Y;P++)if(A[P].fn===g&&A[P].ctx===T)return P;return!1},once:function(c,g,T){if(typeof c=="object")for(var A in c)this._on(A,c[A],g,!0);else{c=G(c);for(var P=0,Y=c.length;P<Y;P++)this._on(c[P],g,T,!0)}return this},addEventParent:function(c){return this._eventParents=this._eventParents||{},this._eventParents[m(c)]=c,this},removeEventParent:function(c){return this._eventParents&&delete this._eventParents[m(c)],this},_propagateEvent:function(c){for(var g in this._eventParents)this._eventParents[g].fire(c.type,a({layer:c.target,propagatedFrom:c.target},c),!0)}};ze.addEventListener=ze.on,ze.removeEventListener=ze.clearAllEventListeners=ze.off,ze.addOneTimeEventListener=ze.once,ze.fireEvent=ze.fire,ze.hasEventListeners=ze.listens;var An=Hr.extend(ze);function jt(c,g,T){this.x=T?Math.round(c):c,this.y=T?Math.round(g):g}var Xr=Math.trunc||function(c){return c>0?Math.floor(c):Math.ceil(c)};jt.prototype={clone:function(){return new jt(this.x,this.y)},add:function(c){return this.clone()._add(wn(c))},_add:function(c){return this.x+=c.x,this.y+=c.y,this},subtract:function(c){return this.clone()._subtract(wn(c))},_subtract:function(c){return this.x-=c.x,this.y-=c.y,this},divideBy:function(c){return this.clone()._divideBy(c)},_divideBy:function(c){return this.x/=c,this.y/=c,this},multiplyBy:function(c){return this.clone()._multiplyBy(c)},_multiplyBy:function(c){return this.x*=c,this.y*=c,this},scaleBy:function(c){return new jt(this.x*c.x,this.y*c.y)},unscaleBy:function(c){return new jt(this.x/c.x,this.y/c.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Xr(this.x),this.y=Xr(this.y),this},distanceTo:function(c){c=wn(c);var g=c.x-this.x,T=c.y-this.y;return Math.sqrt(g*g+T*T)},equals:function(c){return c=wn(c),c.x===this.x&&c.y===this.y},contains:function(c){return c=wn(c),Math.abs(c.x)<=Math.abs(this.x)&&Math.abs(c.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function wn(c,g,T){return c instanceof jt?c:Pe(c)?new jt(c[0],c[1]):c==null?c:typeof c=="object"&&"x"in c&&"y"in c?new jt(c.x,c.y):new jt(c,g,T)}function Se(c,g){if(c)for(var T=g?[c,g]:c,A=0,P=T.length;A<P;A++)this.extend(T[A])}Se.prototype={extend:function(c){var g,T;if(!c)return this;if(c instanceof jt||typeof c[0]=="number"||"x"in c)g=T=wn(c);else if(c=et(c),g=c.min,T=c.max,!g||!T)return this;return!this.min&&!this.max?(this.min=g.clone(),this.max=T.clone()):(this.min.x=Math.min(g.x,this.min.x),this.max.x=Math.max(T.x,this.max.x),this.min.y=Math.min(g.y,this.min.y),this.max.y=Math.max(T.y,this.max.y)),this},getCenter:function(c){return wn((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,c)},getBottomLeft:function(){return wn(this.min.x,this.max.y)},getTopRight:function(){return wn(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(c){var g,T;return typeof c[0]=="number"||c instanceof jt?c=wn(c):c=et(c),c instanceof Se?(g=c.min,T=c.max):g=T=c,g.x>=this.min.x&&T.x<=this.max.x&&g.y>=this.min.y&&T.y<=this.max.y},intersects:function(c){c=et(c);var g=this.min,T=this.max,A=c.min,P=c.max,Y=P.x>=g.x&&A.x<=T.x,Ie=P.y>=g.y&&A.y<=T.y;return Y&&Ie},overlaps:function(c){c=et(c);var g=this.min,T=this.max,A=c.min,P=c.max,Y=P.x>g.x&&A.x<T.x,Ie=P.y>g.y&&A.y<T.y;return Y&&Ie},isValid:function(){return!!(this.min&&this.max)},pad:function(c){var g=this.min,T=this.max,A=Math.abs(g.x-T.x)*c,P=Math.abs(g.y-T.y)*c;return et(wn(g.x-A,g.y-P),wn(T.x+A,T.y+P))},equals:function(c){return c?(c=et(c),this.min.equals(c.getTopLeft())&&this.max.equals(c.getBottomRight())):!1}};function et(c,g){return!c||c instanceof Se?c:new Se(c,g)}function vn(c,g){if(c)for(var T=g?[c,g]:c,A=0,P=T.length;A<P;A++)this.extend(T[A])}vn.prototype={extend:function(c){var g=this._southWest,T=this._northEast,A,P;if(c instanceof xn)A=c,P=c;else if(c instanceof vn){if(A=c._southWest,P=c._northEast,!A||!P)return this}else return c?this.extend(Sn(c)||Tn(c)):this;return!g&&!T?(this._southWest=new xn(A.lat,A.lng),this._northEast=new xn(P.lat,P.lng)):(g.lat=Math.min(A.lat,g.lat),g.lng=Math.min(A.lng,g.lng),T.lat=Math.max(P.lat,T.lat),T.lng=Math.max(P.lng,T.lng)),this},pad:function(c){var g=this._southWest,T=this._northEast,A=Math.abs(g.lat-T.lat)*c,P=Math.abs(g.lng-T.lng)*c;return new vn(new xn(g.lat-A,g.lng-P),new xn(T.lat+A,T.lng+P))},getCenter:function(){return new xn((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new xn(this.getNorth(),this.getWest())},getSouthEast:function(){return new xn(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(c){typeof c[0]=="number"||c instanceof xn||"lat"in c?c=Sn(c):c=Tn(c);var g=this._southWest,T=this._northEast,A,P;return c instanceof vn?(A=c.getSouthWest(),P=c.getNorthEast()):A=P=c,A.lat>=g.lat&&P.lat<=T.lat&&A.lng>=g.lng&&P.lng<=T.lng},intersects:function(c){c=Tn(c);var g=this._southWest,T=this._northEast,A=c.getSouthWest(),P=c.getNorthEast(),Y=P.lat>=g.lat&&A.lat<=T.lat,Ie=P.lng>=g.lng&&A.lng<=T.lng;return Y&&Ie},overlaps:function(c){c=Tn(c);var g=this._southWest,T=this._northEast,A=c.getSouthWest(),P=c.getNorthEast(),Y=P.lat>g.lat&&A.lat<T.lat,Ie=P.lng>g.lng&&A.lng<T.lng;return Y&&Ie},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(c,g){return c?(c=Tn(c),this._southWest.equals(c.getSouthWest(),g)&&this._northEast.equals(c.getNorthEast(),g)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Tn(c,g){return c instanceof vn?c:new vn(c,g)}function xn(c,g,T){if(isNaN(c)||isNaN(g))throw new Error("Invalid LatLng object: ("+c+", "+g+")");this.lat=+c,this.lng=+g,T!==void 0&&(this.alt=+T)}xn.prototype={equals:function(c,g){if(!c)return!1;c=Sn(c);var T=Math.max(Math.abs(this.lat-c.lat),Math.abs(this.lng-c.lng));return T<=(g===void 0?1e-9:g)},toString:function(c){return"LatLng("+v(this.lat,c)+", "+v(this.lng,c)+")"},distanceTo:function(c){return ti.distance(this,Sn(c))},wrap:function(){return ti.wrapLatLng(this)},toBounds:function(c){var g=180*c/40075017,T=g/Math.cos(Math.PI/180*this.lat);return Tn([this.lat-g,this.lng-T],[this.lat+g,this.lng+T])},clone:function(){return new xn(this.lat,this.lng,this.alt)}};function Sn(c,g,T){return c instanceof xn?c:Pe(c)&&typeof c[0]!="object"?c.length===3?new xn(c[0],c[1],c[2]):c.length===2?new xn(c[0],c[1]):null:c==null?c:typeof c=="object"&&"lat"in c?new xn(c.lat,"lng"in c?c.lng:c.lon,c.alt):g===void 0?null:new xn(c,g,T)}var Lr={latLngToPoint:function(c,g){var T=this.projection.project(c),A=this.scale(g);return this.transformation._transform(T,A)},pointToLatLng:function(c,g){var T=this.scale(g),A=this.transformation.untransform(c,T);return this.projection.unproject(A)},project:function(c){return this.projection.project(c)},unproject:function(c){return this.projection.unproject(c)},scale:function(c){return 256*Math.pow(2,c)},zoom:function(c){return Math.log(c/256)/Math.LN2},getProjectedBounds:function(c){if(this.infinite)return null;var g=this.projection.bounds,T=this.scale(c),A=this.transformation.transform(g.min,T),P=this.transformation.transform(g.max,T);return new Se(A,P)},infinite:!1,wrapLatLng:function(c){var g=this.wrapLng?h(c.lng,this.wrapLng,!0):c.lng,T=this.wrapLat?h(c.lat,this.wrapLat,!0):c.lat,A=c.alt;return new xn(T,g,A)},wrapLatLngBounds:function(c){var g=c.getCenter(),T=this.wrapLatLng(g),A=g.lat-T.lat,P=g.lng-T.lng;if(A===0&&P===0)return c;var Y=c.getSouthWest(),Ie=c.getNorthEast(),ke=new xn(Y.lat-A,Y.lng-P),Ge=new xn(Ie.lat-A,Ie.lng-P);return new vn(ke,Ge)}},ti=a({},Lr,{wrapLng:[-180,180],R:6371e3,distance:function(c,g){var T=Math.PI/180,A=c.lat*T,P=g.lat*T,Y=Math.sin((g.lat-c.lat)*T/2),Ie=Math.sin((g.lng-c.lng)*T/2),ke=Y*Y+Math.cos(A)*Math.cos(P)*Ie*Ie,Ge=2*Math.atan2(Math.sqrt(ke),Math.sqrt(1-ke));return this.R*Ge}}),ei=6378137,$o={R:ei,MAX_LATITUDE:85.0511287798,project:function(c){var g=Math.PI/180,T=this.MAX_LATITUDE,A=Math.max(Math.min(T,c.lat),-T),P=Math.sin(A*g);return new jt(this.R*c.lng*g,this.R*Math.log((1+P)/(1-P))/2)},unproject:function(c){var g=180/Math.PI;return new xn((2*Math.atan(Math.exp(c.y/this.R))-Math.PI/2)*g,c.x*g/this.R)},bounds:(function(){var c=ei*Math.PI;return new Se([-c,-c],[c,c])})()};function Ea(c,g,T,A){if(Pe(c)){this._a=c[0],this._b=c[1],this._c=c[2],this._d=c[3];return}this._a=c,this._b=g,this._c=T,this._d=A}Ea.prototype={transform:function(c,g){return this._transform(c.clone(),g)},_transform:function(c,g){return g=g||1,c.x=g*(this._a*c.x+this._b),c.y=g*(this._c*c.y+this._d),c},untransform:function(c,g){return g=g||1,new jt((c.x/g-this._b)/this._a,(c.y/g-this._d)/this._c)}};function $a(c,g,T,A){return new Ea(c,g,T,A)}var bu=a({},ti,{code:"EPSG:3857",projection:$o,transformation:(function(){var c=.5/(Math.PI*$o.R);return $a(c,.5,-c,.5)})()}),tu=a({},bu,{code:"EPSG:900913"});function xd(c){return document.createElementNS("http://www.w3.org/2000/svg",c)}function Ca(c,g){var T="",A,P,Y,Ie,ke,Ge;for(A=0,Y=c.length;A<Y;A++){for(ke=c[A],P=0,Ie=ke.length;P<Ie;P++)Ge=ke[P],T+=(P?"L":"M")+Ge.x+" "+Ge.y;T+=g?Wn.svg?"z":"x":""}return T||"M0 0"}var lu=document.documentElement.style,Wd="ActiveXObject"in window,na=Wd&&!document.addEventListener,ra="msLaunchUri"in navigator&&!("documentMode"in document),Da=Ws("webkit"),Jg=Ws("android"),Nd=Ws("android 2")||Ws("android 3"),Na=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ap=Jg&&Ws("Google")&&Na<537&&!("AudioNode"in window),uu=!!window.opera,e_=!ra&&Ws("chrome"),ui=Ws("gecko")&&!Da&&!uu&&!Wd,P_=!e_&&Ws("safari"),Kr=Ws("phantom"),t_="OTransition"in lu,n_=navigator.platform.indexOf("Win")===0,hu=Wd&&"transition"in lu,rr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Nd,Ma="MozPerspective"in lu,Us=!window.L_DISABLE_3D&&(hu||rr||Ma)&&!t_&&!Kr,Tu=typeof orientation<"u"||Ws("mobile"),re=Tu&&Da,Ne=Tu&&rr,Ve=!window.PointerEvent&&window.MSPointerEvent,wt=!!(window.PointerEvent||Ve),In="ontouchstart"in window||!!window.TouchEvent,ir=!window.L_NO_TOUCH&&(In||wt),qr=Tu&&uu,zo=Tu&&ui,fu=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,xa=(function(){var c=!1;try{var g=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("testPassiveEventSupport",f,g),window.removeEventListener("testPassiveEventSupport",f,g)}catch{}return c})(),Hs=(function(){return!!document.createElement("canvas").getContext})(),ah=!!(document.createElementNS&&xd("svg").createSVGRect),yg=!!ah&&(function(){var c=document.createElement("div");return c.innerHTML="<svg/>",(c.firstChild&&c.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),st=!ah&&(function(){try{var c=document.createElement("div");c.innerHTML='<v:shape adj="1"/>';var g=c.firstChild;return g.style.behavior="url(#default#VML)",g&&typeof g.adj=="object"}catch{return!1}})(),ci=navigator.platform.indexOf("Mac")===0,Qo=navigator.platform.indexOf("Linux")===0;function Ws(c){return navigator.userAgent.toLowerCase().indexOf(c)>=0}var Wn={ie:Wd,ielt9:na,edge:ra,webkit:Da,android:Jg,android23:Nd,androidStock:Ap,opera:uu,chrome:e_,gecko:ui,safari:P_,phantom:Kr,opera12:t_,win:n_,ie3d:hu,webkit3d:rr,gecko3d:Ma,any3d:Us,mobile:Tu,mobileWebkit:re,mobileWebkit3d:Ne,msPointer:Ve,pointer:wt,touch:ir,touchNative:In,mobileOpera:qr,mobileGecko:zo,retina:fu,passiveEvents:xa,canvas:Hs,svg:ah,vml:st,inlineSvg:yg,mac:ci,linux:Qo},O_=Wn.msPointer?"MSPointerDown":"pointerdown",fh=Wn.msPointer?"MSPointerMove":"pointermove",Ih=Wn.msPointer?"MSPointerUp":"pointerup",wa=Wn.msPointer?"MSPointerCancel":"pointercancel",Ia={touchstart:O_,touchmove:fh,touchend:Ih,touchcancel:wa},Vd={touchstart:Ud,touchmove:ka,touchend:ka,touchcancel:ka},gd={},m_=!1;function C_(c,g,T){return g==="touchstart"&&yd(),Vd[g]?(T=Vd[g].bind(this,T),c.addEventListener(Ia[g],T,!1),T):(console.warn("wrong event specified:",g),f)}function Mg(c,g,T){if(!Ia[g]){console.warn("wrong event specified:",g);return}c.removeEventListener(Ia[g],T,!1)}function Sp(c){gd[c.pointerId]=c}function g_(c){gd[c.pointerId]&&(gd[c.pointerId]=c)}function Md(c){delete gd[c.pointerId]}function yd(){m_||(document.addEventListener(O_,Sp,!0),document.addEventListener(fh,g_,!0),document.addEventListener(Ih,Md,!0),document.addEventListener(wa,Md,!0),m_=!0)}function ka(c,g){if(g.pointerType!==(g.MSPOINTER_TYPE_MOUSE||"mouse")){g.touches=[];for(var T in gd)g.touches.push(gd[T]);g.changedTouches=[g],c(g)}}function Ud(c,g){g.MSPOINTER_TYPE_TOUCH&&g.pointerType===g.MSPOINTER_TYPE_TOUCH&&ha(g),ka(c,g)}function Sa(c){var g={},T,A;for(A in c)T=c[A],g[A]=T&&T.bind?T.bind(c):T;return c=g,g.type="dblclick",g.detail=2,g.isTrusted=!1,g._simulated=!0,g}var __=200;function D_(c,g){c.addEventListener("dblclick",g);var T=0,A;function P(Y){if(Y.detail!==1){A=Y.detail;return}if(!(Y.pointerType==="mouse"||Y.sourceCapabilities&&!Y.sourceCapabilities.firesTouchEvents)){var Ie=V_(Y);if(!(Ie.some(function(Ge){return Ge instanceof HTMLLabelElement&&Ge.attributes.for})&&!Ie.some(function(Ge){return Ge instanceof HTMLInputElement||Ge instanceof HTMLSelectElement}))){var ke=Date.now();ke-T<=__?(A++,A===2&&g(Sa(Y))):A=1,T=ke}}}return c.addEventListener("click",P),{dblclick:g,simDblclick:P}}function Fp(c,g){c.removeEventListener("dblclick",g.dblclick),c.removeEventListener("click",g.simDblclick)}var bd=Fg(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Eg=Fg(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),y_=Eg==="webkitTransition"||Eg==="OTransition"?Eg+"End":"transitionend";function N_(c){return typeof c=="string"?document.getElementById(c):c}function kg(c,g){var T=c.style[g]||c.currentStyle&&c.currentStyle[g];if((!T||T==="auto")&&document.defaultView){var A=document.defaultView.getComputedStyle(c,null);T=A?A[g]:null}return T==="auto"?null:T}function ni(c,g,T){var A=document.createElement(c);return A.className=g||"",T&&T.appendChild(A),A}function ai(c){var g=c.parentNode;g&&g.removeChild(c)}function ya(c){for(;c.firstChild;)c.removeChild(c.firstChild)}function va(c){var g=c.parentNode;g&&g.lastChild!==c&&g.appendChild(c)}function wu(c){var g=c.parentNode;g&&g.firstChild!==c&&g.insertBefore(c,g.firstChild)}function v_(c,g){if(c.classList!==void 0)return c.classList.contains(g);var T=$p(c);return T.length>0&&new RegExp("(^|\\s)"+g+"(\\s|$)").test(T)}function tr(c,g){if(c.classList!==void 0)for(var T=G(g),A=0,P=T.length;A<P;A++)c.classList.add(T[A]);else if(!v_(c,g)){var Y=$p(c);du(c,(Y?Y+" ":"")+g)}}function Hn(c,g){c.classList!==void 0?c.classList.remove(g):du(c,I((" "+$p(c)+" ").replace(" "+g+" "," ")))}function du(c,g){c.className.baseVal===void 0?c.className=g:c.className.baseVal=g}function $p(c){return c.correspondingElement&&(c=c.correspondingElement),c.className.baseVal===void 0?c.className:c.className.baseVal}function qs(c,g){"opacity"in c.style?c.style.opacity=g:"filter"in c.style&&r_(c,g)}function r_(c,g){var T=!1,A="DXImageTransform.Microsoft.Alpha";try{T=c.filters.item(A)}catch{if(g===1)return}g=Math.round(g*100),T?(T.Enabled=g!==100,T.Opacity=g):c.style.filter+=" progid:"+A+"(opacity="+g+")"}function Fg(c){for(var g=document.documentElement.style,T=0;T<c.length;T++)if(c[T]in g)return c[T];return!1}function Bd(c,g,T){var A=g||new jt(0,0);c.style[bd]=(Wn.ie3d?"translate("+A.x+"px,"+A.y+"px)":"translate3d("+A.x+"px,"+A.y+"px,0)")+(T?" scale("+T+")":"")}function Rs(c,g){c._leaflet_pos=g,Wn.any3d?Bd(c,g):(c.style.left=g.x+"px",c.style.top=g.y+"px")}function rm(c){return c._leaflet_pos||new jt(0,0)}var pu,Pa,i_;if("onselectstart"in document)pu=function(){qn(window,"selectstart",ha)},Pa=function(){Yr(window,"selectstart",ha)};else{var Ug=Fg(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);pu=function(){if(Ug){var c=document.documentElement.style;i_=c[Ug],c[Ug]="none"}},Pa=function(){Ug&&(document.documentElement.style[Ug]=i_,i_=void 0)}}function Ag(){qn(window,"dragstart",ha)}function Bg(){Yr(window,"dragstart",ha)}var D,ue;function Re(c){for(;c.tabIndex===-1;)c=c.parentNode;c.style&&(Be(),D=c,ue=c.style.outlineStyle,c.style.outlineStyle="none",qn(window,"keydown",Be))}function Be(){D&&(D.style.outlineStyle=ue,D=void 0,ue=void 0,Yr(window,"keydown",Be))}function Gt(c){do c=c.parentNode;while((!c.offsetWidth||!c.offsetHeight)&&c!==document.body);return c}function $t(c){var g=c.getBoundingClientRect();return{x:g.width/c.offsetWidth||1,y:g.height/c.offsetHeight||1,boundingClientRect:g}}var nr={__proto__:null,TRANSFORM:bd,TRANSITION:Eg,TRANSITION_END:y_,get:N_,getStyle:kg,create:ni,remove:ai,empty:ya,toFront:va,toBack:wu,hasClass:v_,addClass:tr,removeClass:Hn,setClass:du,getClass:$p,setOpacity:qs,testProp:Fg,setTransform:Bd,setPosition:Rs,getPosition:rm,get disableTextSelection(){return pu},get enableTextSelection(){return Pa},disableImageDrag:Ag,enableImageDrag:Bg,preventOutline:Re,restoreOutline:Be,getSizedParentNode:Gt,getScale:$t};function qn(c,g,T,A){if(g&&typeof g=="object")for(var P in g)mu(c,P,g[P],T);else{g=G(g);for(var Y=0,Ie=g.length;Y<Ie;Y++)mu(c,g[Y],T,A)}return this}var Ys="_leaflet_events";function Yr(c,g,T,A){if(arguments.length===1)Aa(c),delete c[Ys];else if(g&&typeof g=="object")for(var P in g)vt(c,P,g[P],T);else if(g=G(g),arguments.length===2)Aa(c,function(ke){return je(g,ke)!==-1});else for(var Y=0,Ie=g.length;Y<Ie;Y++)vt(c,g[Y],T,A);return this}function Aa(c,g){for(var T in c[Ys]){var A=T.split(/\d/)[0];(!g||g(A))&&vt(c,A,null,null,T)}}var Au={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function mu(c,g,T,A){var P=g+m(T)+(A?"_"+m(A):"");if(c[Ys]&&c[Ys][P])return this;var Y=function(ke){return T.call(A||c,ke||window.event)},Ie=Y;!Wn.touchNative&&Wn.pointer&&g.indexOf("touch")===0?Y=C_(c,g,Y):Wn.touch&&g==="dblclick"?Y=D_(c,Y):"addEventListener"in c?g==="touchstart"||g==="touchmove"||g==="wheel"||g==="mousewheel"?c.addEventListener(Au[g]||g,Y,Wn.passiveEvents?{passive:!1}:!1):g==="mouseenter"||g==="mouseleave"?(Y=function(ke){ke=ke||window.event,jg(c,ke)&&Ie(ke)},c.addEventListener(Au[g],Y,!1)):c.addEventListener(g,Ie,!1):c.attachEvent("on"+g,Y),c[Ys]=c[Ys]||{},c[Ys][P]=Y}function vt(c,g,T,A,P){P=P||g+m(T)+(A?"_"+m(A):"");var Y=c[Ys]&&c[Ys][P];if(!Y)return this;!Wn.touchNative&&Wn.pointer&&g.indexOf("touch")===0?Mg(c,g,Y):Wn.touch&&g==="dblclick"?Fp(c,Y):"removeEventListener"in c?c.removeEventListener(Au[g]||g,Y,!1):c.detachEvent("on"+g,Y),c[Ys][P]=null}function pr(c){return c.stopPropagation?c.stopPropagation():c.originalEvent?c.originalEvent._stopped=!0:c.cancelBubble=!0,this}function Ro(c){return mu(c,"wheel",pr),this}function gu(c){return qn(c,"mousedown touchstart dblclick contextmenu",pr),c._leaflet_disable_click=!0,this}function ha(c){return c.preventDefault?c.preventDefault():c.returnValue=!1,this}function $g(c){return ha(c),pr(c),this}function V_(c){if(c.composedPath)return c.composedPath();for(var g=[],T=c.target;T;)g.push(T),T=T.parentNode;return g}function o_(c,g){if(!g)return new jt(c.clientX,c.clientY);var T=$t(g),A=T.boundingClientRect;return new jt((c.clientX-A.left)/T.x-g.clientLeft,(c.clientY-A.top)/T.y-g.clientTop)}var zg=Wn.linux&&Wn.chrome?window.devicePixelRatio:Wn.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function nu(c){return Wn.edge?c.wheelDeltaY/2:c.deltaY&&c.deltaMode===0?-c.deltaY/zg:c.deltaY&&c.deltaMode===1?-c.deltaY*20:c.deltaY&&c.deltaMode===2?-c.deltaY*60:c.deltaX||c.deltaZ?0:c.wheelDelta?(c.wheelDeltaY||c.wheelDelta)/2:c.detail&&Math.abs(c.detail)<32765?-c.detail*20:c.detail?c.detail/-32765*60:0}function jg(c,g){var T=g.relatedTarget;if(!T)return!0;try{for(;T&&T!==c;)T=T.parentNode}catch{return!1}return T!==c}var s_={__proto__:null,on:qn,off:Yr,stopPropagation:pr,disableScrollPropagation:Ro,disableClickPropagation:gu,preventDefault:ha,stop:$g,getPropagationPath:V_,getMousePosition:o_,getWheelDelta:nu,isExternalTarget:jg,addListener:qn,removeListener:Yr},b_=An.extend({run:function(c,g,T,A){this.stop(),this._el=c,this._inProgress=!0,this._duration=T||.25,this._easeOutPower=1/Math.max(A||.5,.2),this._startPos=rm(c),this._offset=g.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Ae(this._animate,this),this._step()},_step:function(c){var g=+new Date-this._startTime,T=this._duration*1e3;g<T?this._runFrame(this._easeOut(g/T),c):(this._runFrame(1),this._complete())},_runFrame:function(c,g){var T=this._startPos.add(this._offset.multiplyBy(c));g&&T._round(),Rs(this._el,T),this.fire("step")},_complete:function(){Ce(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(c){return 1-Math.pow(1-c,this._easeOutPower)}}),li=An.extend({options:{crs:bu,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(c,g){g=W(this,g),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(c),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),g.maxBounds&&this.setMaxBounds(g.maxBounds),g.zoom!==void 0&&(this._zoom=this._limitZoom(g.zoom)),g.center&&g.zoom!==void 0&&this.setView(Sn(g.center),g.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Eg&&Wn.any3d&&!Wn.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),qn(this._proxy,y_,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(c,g,T){if(g=g===void 0?this._zoom:this._limitZoom(g),c=this._limitCenter(Sn(c),g,this.options.maxBounds),T=T||{},this._stop(),this._loaded&&!T.reset&&T!==!0){T.animate!==void 0&&(T.zoom=a({animate:T.animate},T.zoom),T.pan=a({animate:T.animate,duration:T.duration},T.pan));var A=this._zoom!==g?this._tryAnimatedZoom&&this._tryAnimatedZoom(c,g,T.zoom):this._tryAnimatedPan(c,T.pan);if(A)return clearTimeout(this._sizeTimer),this}return this._resetView(c,g,T.pan&&T.pan.noMoveStart),this},setZoom:function(c,g){return this._loaded?this.setView(this.getCenter(),c,{zoom:g}):(this._zoom=c,this)},zoomIn:function(c,g){return c=c||(Wn.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+c,g)},zoomOut:function(c,g){return c=c||(Wn.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-c,g)},setZoomAround:function(c,g,T){var A=this.getZoomScale(g),P=this.getSize().divideBy(2),Y=c instanceof jt?c:this.latLngToContainerPoint(c),Ie=Y.subtract(P).multiplyBy(1-1/A),ke=this.containerPointToLatLng(P.add(Ie));return this.setView(ke,g,{zoom:T})},_getBoundsCenterZoom:function(c,g){g=g||{},c=c.getBounds?c.getBounds():Tn(c);var T=wn(g.paddingTopLeft||g.padding||[0,0]),A=wn(g.paddingBottomRight||g.padding||[0,0]),P=this.getBoundsZoom(c,!1,T.add(A));if(P=typeof g.maxZoom=="number"?Math.min(g.maxZoom,P):P,P===1/0)return{center:c.getCenter(),zoom:P};var Y=A.subtract(T).divideBy(2),Ie=this.project(c.getSouthWest(),P),ke=this.project(c.getNorthEast(),P),Ge=this.unproject(Ie.add(ke).divideBy(2).add(Y),P);return{center:Ge,zoom:P}},fitBounds:function(c,g){if(c=Tn(c),!c.isValid())throw new Error("Bounds are not valid.");var T=this._getBoundsCenterZoom(c,g);return this.setView(T.center,T.zoom,g)},fitWorld:function(c){return this.fitBounds([[-90,-180],[90,180]],c)},panTo:function(c,g){return this.setView(c,this._zoom,{pan:g})},panBy:function(c,g){if(c=wn(c).round(),g=g||{},!c.x&&!c.y)return this.fire("moveend");if(g.animate!==!0&&!this.getSize().contains(c))return this._resetView(this.unproject(this.project(this.getCenter()).add(c)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new b_,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),g.noMoveStart||this.fire("movestart"),g.animate!==!1){tr(this._mapPane,"leaflet-pan-anim");var T=this._getMapPanePos().subtract(c).round();this._panAnim.run(this._mapPane,T,g.duration||.25,g.easeLinearity)}else this._rawPanBy(c),this.fire("move").fire("moveend");return this},flyTo:function(c,g,T){if(T=T||{},T.animate===!1||!Wn.any3d)return this.setView(c,g,T);this._stop();var A=this.project(this.getCenter()),P=this.project(c),Y=this.getSize(),Ie=this._zoom;c=Sn(c),g=g===void 0?Ie:g;var ke=Math.max(Y.x,Y.y),Ge=ke*this.getZoomScale(Ie,g),kt=P.distanceTo(A)||1,Vn=1.42,Or=Vn*Vn;function ii(La){var I_=La?-1:1,J_=La?Ge:ke,rT=Ge*Ge-ke*ke+I_*Or*Or*kt*kt,uv=2*J_*Or*kt,cv=rT/uv,H_=Math.sqrt(cv*cv+1)-cv,S_=H_<1e-9?-18:Math.log(H_);return S_}function _u(La){return(Math.exp(La)-Math.exp(-La))/2}function Fa(La){return(Math.exp(La)+Math.exp(-La))/2}function gg(La){return _u(La)/Fa(La)}var Ns=ii(0);function Vs(La){return ke*(Fa(Ns)/Fa(Ns+Vn*La))}function No(La){return ke*(Fa(Ns)*gg(Ns+Vn*La)-_u(Ns))/Or}function z_(La){return 1-Math.pow(1-La,1.5)}var Og=Date.now(),Dv=(ii(1)-Ns)/Vn,j_=T.duration?1e3*T.duration:1e3*Dv*.8;function nT(){var La=(Date.now()-Og)/j_,I_=z_(La)*Dv;La<=1?(this._flyToFrame=Ae(nT,this),this._move(this.unproject(A.add(P.subtract(A).multiplyBy(No(I_)/kt)),Ie),this.getScaleZoom(ke/Vs(I_),Ie),{flyTo:!0})):this._move(c,g)._moveEnd(!0)}return this._moveStart(!0,T.noMoveStart),nT.call(this),this},flyToBounds:function(c,g){var T=this._getBoundsCenterZoom(c,g);return this.flyTo(T.center,T.zoom,g)},setMaxBounds:function(c){return c=Tn(c),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),c.isValid()?(this.options.maxBounds=c,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(c){var g=this.options.minZoom;return this.options.minZoom=c,this._loaded&&g!==c&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(c):this},setMaxZoom:function(c){var g=this.options.maxZoom;return this.options.maxZoom=c,this._loaded&&g!==c&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(c):this},panInsideBounds:function(c,g){this._enforcingBounds=!0;var T=this.getCenter(),A=this._limitCenter(T,this._zoom,Tn(c));return T.equals(A)||this.panTo(A,g),this._enforcingBounds=!1,this},panInside:function(c,g){g=g||{};var T=wn(g.paddingTopLeft||g.padding||[0,0]),A=wn(g.paddingBottomRight||g.padding||[0,0]),P=this.project(this.getCenter()),Y=this.project(c),Ie=this.getPixelBounds(),ke=et([Ie.min.add(T),Ie.max.subtract(A)]),Ge=ke.getSize();if(!ke.contains(Y)){this._enforcingBounds=!0;var kt=Y.subtract(ke.getCenter()),Vn=ke.extend(Y).getSize().subtract(Ge);P.x+=kt.x<0?-Vn.x:Vn.x,P.y+=kt.y<0?-Vn.y:Vn.y,this.panTo(this.unproject(P),g),this._enforcingBounds=!1}return this},invalidateSize:function(c){if(!this._loaded)return this;c=a({animate:!1,pan:!0},c===!0?{animate:!0}:c);var g=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var T=this.getSize(),A=g.divideBy(2).round(),P=T.divideBy(2).round(),Y=A.subtract(P);return!Y.x&&!Y.y?this:(c.animate&&c.pan?this.panBy(Y):(c.pan&&this._rawPanBy(Y),this.fire("move"),c.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:g,newSize:T}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(c){if(c=this._locateOptions=a({timeout:1e4,watch:!1},c),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var g=l(this._handleGeolocationResponse,this),T=l(this._handleGeolocationError,this);return c.watch?this._locationWatchId=navigator.geolocation.watchPosition(g,T,c):navigator.geolocation.getCurrentPosition(g,T,c),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(c){if(this._container._leaflet_id){var g=c.code,T=c.message||(g===1?"permission denied":g===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:g,message:"Geolocation error: "+T+"."})}},_handleGeolocationResponse:function(c){if(this._container._leaflet_id){var g=c.coords.latitude,T=c.coords.longitude,A=new xn(g,T),P=A.toBounds(c.coords.accuracy*2),Y=this._locateOptions;if(Y.setView){var Ie=this.getBoundsZoom(P);this.setView(A,Y.maxZoom?Math.min(Ie,Y.maxZoom):Ie)}var ke={latlng:A,bounds:P,timestamp:c.timestamp};for(var Ge in c.coords)typeof c.coords[Ge]=="number"&&(ke[Ge]=c.coords[Ge]);this.fire("locationfound",ke)}},addHandler:function(c,g){if(!g)return this;var T=this[c]=new g(this);return this._handlers.push(T),this.options[c]&&T.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ai(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Ce(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var c;for(c in this._layers)this._layers[c].remove();for(c in this._panes)ai(this._panes[c]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(c,g){var T="leaflet-pane"+(c?" leaflet-"+c.replace("Pane","")+"-pane":""),A=ni("div",T,g||this._mapPane);return c&&(this._panes[c]=A),A},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var c=this.getPixelBounds(),g=this.unproject(c.getBottomLeft()),T=this.unproject(c.getTopRight());return new vn(g,T)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(c,g,T){c=Tn(c),T=wn(T||[0,0]);var A=this.getZoom()||0,P=this.getMinZoom(),Y=this.getMaxZoom(),Ie=c.getNorthWest(),ke=c.getSouthEast(),Ge=this.getSize().subtract(T),kt=et(this.project(ke,A),this.project(Ie,A)).getSize(),Vn=Wn.any3d?this.options.zoomSnap:1,Or=Ge.x/kt.x,ii=Ge.y/kt.y,_u=g?Math.max(Or,ii):Math.min(Or,ii);return A=this.getScaleZoom(_u,A),Vn&&(A=Math.round(A/(Vn/100))*(Vn/100),A=g?Math.ceil(A/Vn)*Vn:Math.floor(A/Vn)*Vn),Math.max(P,Math.min(Y,A))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new jt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(c,g){var T=this._getTopLeftPoint(c,g);return new Se(T,T.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(c){return this.options.crs.getProjectedBounds(c===void 0?this.getZoom():c)},getPane:function(c){return typeof c=="string"?this._panes[c]:c},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(c,g){var T=this.options.crs;return g=g===void 0?this._zoom:g,T.scale(c)/T.scale(g)},getScaleZoom:function(c,g){var T=this.options.crs;g=g===void 0?this._zoom:g;var A=T.zoom(c*T.scale(g));return isNaN(A)?1/0:A},project:function(c,g){return g=g===void 0?this._zoom:g,this.options.crs.latLngToPoint(Sn(c),g)},unproject:function(c,g){return g=g===void 0?this._zoom:g,this.options.crs.pointToLatLng(wn(c),g)},layerPointToLatLng:function(c){var g=wn(c).add(this.getPixelOrigin());return this.unproject(g)},latLngToLayerPoint:function(c){var g=this.project(Sn(c))._round();return g._subtract(this.getPixelOrigin())},wrapLatLng:function(c){return this.options.crs.wrapLatLng(Sn(c))},wrapLatLngBounds:function(c){return this.options.crs.wrapLatLngBounds(Tn(c))},distance:function(c,g){return this.options.crs.distance(Sn(c),Sn(g))},containerPointToLayerPoint:function(c){return wn(c).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(c){return wn(c).add(this._getMapPanePos())},containerPointToLatLng:function(c){var g=this.containerPointToLayerPoint(wn(c));return this.layerPointToLatLng(g)},latLngToContainerPoint:function(c){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Sn(c)))},mouseEventToContainerPoint:function(c){return o_(c,this._container)},mouseEventToLayerPoint:function(c){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(c))},mouseEventToLatLng:function(c){return this.layerPointToLatLng(this.mouseEventToLayerPoint(c))},_initContainer:function(c){var g=this._container=N_(c);if(g){if(g._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");qn(g,"scroll",this._onScroll,this),this._containerId=m(g)},_initLayout:function(){var c=this._container;this._fadeAnimated=this.options.fadeAnimation&&Wn.any3d,tr(c,"leaflet-container"+(Wn.touch?" leaflet-touch":"")+(Wn.retina?" leaflet-retina":"")+(Wn.ielt9?" leaflet-oldie":"")+(Wn.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var g=kg(c,"position");g!=="absolute"&&g!=="relative"&&g!=="fixed"&&g!=="sticky"&&(c.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var c=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Rs(this._mapPane,new jt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(tr(c.markerPane,"leaflet-zoom-hide"),tr(c.shadowPane,"leaflet-zoom-hide"))},_resetView:function(c,g,T){Rs(this._mapPane,new jt(0,0));var A=!this._loaded;this._loaded=!0,g=this._limitZoom(g),this.fire("viewprereset");var P=this._zoom!==g;this._moveStart(P,T)._move(c,g)._moveEnd(P),this.fire("viewreset"),A&&this.fire("load")},_moveStart:function(c,g){return c&&this.fire("zoomstart"),g||this.fire("movestart"),this},_move:function(c,g,T,A){g===void 0&&(g=this._zoom);var P=this._zoom!==g;return this._zoom=g,this._lastCenter=c,this._pixelOrigin=this._getNewPixelOrigin(c),A?T&&T.pinch&&this.fire("zoom",T):((P||T&&T.pinch)&&this.fire("zoom",T),this.fire("move",T)),this},_moveEnd:function(c){return c&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Ce(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(c){Rs(this._mapPane,this._getMapPanePos().subtract(c))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(c){this._targets={},this._targets[m(this._container)]=this;var g=c?Yr:qn;g(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&g(window,"resize",this._onResize,this),Wn.any3d&&this.options.transform3DLimit&&(c?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Ce(this._resizeRequest),this._resizeRequest=Ae(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var c=this._getMapPanePos();Math.max(Math.abs(c.x),Math.abs(c.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(c,g){for(var T=[],A,P=g==="mouseout"||g==="mouseover",Y=c.target||c.srcElement,Ie=!1;Y;){if(A=this._targets[m(Y)],A&&(g==="click"||g==="preclick")&&this._draggableMoved(A)){Ie=!0;break}if(A&&A.listens(g,!0)&&(P&&!jg(Y,c)||(T.push(A),P))||Y===this._container)break;Y=Y.parentNode}return!T.length&&!Ie&&!P&&this.listens(g,!0)&&(T=[this]),T},_isClickDisabled:function(c){for(;c&&c!==this._container;){if(c._leaflet_disable_click)return!0;c=c.parentNode}},_handleDOMEvent:function(c){var g=c.target||c.srcElement;if(!(!this._loaded||g._leaflet_disable_events||c.type==="click"&&this._isClickDisabled(g))){var T=c.type;T==="mousedown"&&Re(g),this._fireDOMEvent(c,T)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(c,g,T){if(c.type==="click"){var A=a({},c);A.type="preclick",this._fireDOMEvent(A,A.type,T)}var P=this._findEventTargets(c,g);if(T){for(var Y=[],Ie=0;Ie<T.length;Ie++)T[Ie].listens(g,!0)&&Y.push(T[Ie]);P=Y.concat(P)}if(P.length){g==="contextmenu"&&ha(c);var ke=P[0],Ge={originalEvent:c};if(c.type!=="keypress"&&c.type!=="keydown"&&c.type!=="keyup"){var kt=ke.getLatLng&&(!ke._radius||ke._radius<=10);Ge.containerPoint=kt?this.latLngToContainerPoint(ke.getLatLng()):this.mouseEventToContainerPoint(c),Ge.layerPoint=this.containerPointToLayerPoint(Ge.containerPoint),Ge.latlng=kt?ke.getLatLng():this.layerPointToLatLng(Ge.layerPoint)}for(Ie=0;Ie<P.length;Ie++)if(P[Ie].fire(g,Ge,!0),Ge.originalEvent._stopped||P[Ie].options.bubblingMouseEvents===!1&&je(this._mouseEvents,g)!==-1)return}},_draggableMoved:function(c){return c=c.dragging&&c.dragging.enabled()?c:this,c.dragging&&c.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var c=0,g=this._handlers.length;c<g;c++)this._handlers[c].disable()},whenReady:function(c,g){return this._loaded?c.call(g||this,{target:this}):this.on("load",c,g),this},_getMapPanePos:function(){return rm(this._mapPane)||new jt(0,0)},_moved:function(){var c=this._getMapPanePos();return c&&!c.equals([0,0])},_getTopLeftPoint:function(c,g){var T=c&&g!==void 0?this._getNewPixelOrigin(c,g):this.getPixelOrigin();return T.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(c,g){var T=this.getSize()._divideBy(2);return this.project(c,g)._subtract(T)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(c,g,T){var A=this._getNewPixelOrigin(T,g);return this.project(c,g)._subtract(A)},_latLngBoundsToNewLayerBounds:function(c,g,T){var A=this._getNewPixelOrigin(T,g);return et([this.project(c.getSouthWest(),g)._subtract(A),this.project(c.getNorthWest(),g)._subtract(A),this.project(c.getSouthEast(),g)._subtract(A),this.project(c.getNorthEast(),g)._subtract(A)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(c){return this.latLngToLayerPoint(c).subtract(this._getCenterLayerPoint())},_limitCenter:function(c,g,T){if(!T)return c;var A=this.project(c,g),P=this.getSize().divideBy(2),Y=new Se(A.subtract(P),A.add(P)),Ie=this._getBoundsOffset(Y,T,g);return Math.abs(Ie.x)<=1&&Math.abs(Ie.y)<=1?c:this.unproject(A.add(Ie),g)},_limitOffset:function(c,g){if(!g)return c;var T=this.getPixelBounds(),A=new Se(T.min.add(c),T.max.add(c));return c.add(this._getBoundsOffset(A,g))},_getBoundsOffset:function(c,g,T){var A=et(this.project(g.getNorthEast(),T),this.project(g.getSouthWest(),T)),P=A.min.subtract(c.min),Y=A.max.subtract(c.max),Ie=this._rebound(P.x,-Y.x),ke=this._rebound(P.y,-Y.y);return new jt(Ie,ke)},_rebound:function(c,g){return c+g>0?Math.round(c-g)/2:Math.max(0,Math.ceil(c))-Math.max(0,Math.floor(g))},_limitZoom:function(c){var g=this.getMinZoom(),T=this.getMaxZoom(),A=Wn.any3d?this.options.zoomSnap:1;return A&&(c=Math.round(c/A)*A),Math.max(g,Math.min(T,c))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Hn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(c,g){var T=this._getCenterOffset(c)._trunc();return(g&&g.animate)!==!0&&!this.getSize().contains(T)?!1:(this.panBy(T,g),!0)},_createAnimProxy:function(){var c=this._proxy=ni("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(c),this.on("zoomanim",function(g){var T=bd,A=this._proxy.style[T];Bd(this._proxy,this.project(g.center,g.zoom),this.getZoomScale(g.zoom,1)),A===this._proxy.style[T]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ai(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var c=this.getCenter(),g=this.getZoom();Bd(this._proxy,this.project(c,g),this.getZoomScale(g,1))},_catchTransitionEnd:function(c){this._animatingZoom&&c.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(c,g,T){if(this._animatingZoom)return!0;if(T=T||{},!this._zoomAnimated||T.animate===!1||this._nothingToAnimate()||Math.abs(g-this._zoom)>this.options.zoomAnimationThreshold)return!1;var A=this.getZoomScale(g),P=this._getCenterOffset(c)._divideBy(1-1/A);return T.animate!==!0&&!this.getSize().contains(P)?!1:(Ae(function(){this._moveStart(!0,T.noMoveStart||!1)._animateZoom(c,g,!0)},this),!0)},_animateZoom:function(c,g,T,A){this._mapPane&&(T&&(this._animatingZoom=!0,this._animateToCenter=c,this._animateToZoom=g,tr(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:c,zoom:g,noUpdate:A}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Hn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function L_(c,g){return new li(c,g)}var Iu=Hr.extend({options:{position:"topright"},initialize:function(c){W(this,c)},getPosition:function(){return this.options.position},setPosition:function(c){var g=this._map;return g&&g.removeControl(this),this.options.position=c,g&&g.addControl(this),this},getContainer:function(){return this._container},addTo:function(c){this.remove(),this._map=c;var g=this._container=this.onAdd(c),T=this.getPosition(),A=c._controlCorners[T];return tr(g,"leaflet-control"),T.indexOf("bottom")!==-1?A.insertBefore(g,A.firstChild):A.appendChild(g),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ai(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(c){this._map&&c&&c.screenX>0&&c.screenY>0&&this._map.getContainer().focus()}}),$d=function(c){return new Iu(c)};li.include({addControl:function(c){return c.addTo(this),this},removeControl:function(c){return c.remove(),this},_initControlPos:function(){var c=this._controlCorners={},g="leaflet-",T=this._controlContainer=ni("div",g+"control-container",this._container);function A(P,Y){var Ie=g+P+" "+g+Y;c[P+Y]=ni("div",Ie,T)}A("top","left"),A("top","right"),A("bottom","left"),A("bottom","right")},_clearControlPos:function(){for(var c in this._controlCorners)ai(this._controlCorners[c]);ai(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var W_=Iu.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(c,g,T,A){return T<A?-1:A<T?1:0}},initialize:function(c,g,T){W(this,T),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var A in c)this._addLayer(c[A],A);for(A in g)this._addLayer(g[A],A,!0)},onAdd:function(c){this._initLayout(),this._update(),this._map=c,c.on("zoomend",this._checkDisabledLayers,this);for(var g=0;g<this._layers.length;g++)this._layers[g].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(c){return Iu.prototype.addTo.call(this,c),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(c,g){return this._addLayer(c,g),this._map?this._update():this},addOverlay:function(c,g){return this._addLayer(c,g,!0),this._map?this._update():this},removeLayer:function(c){c.off("add remove",this._onLayerChange,this);var g=this._getLayer(m(c));return g&&this._layers.splice(this._layers.indexOf(g),1),this._map?this._update():this},expand:function(){tr(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var c=this._map.getSize().y-(this._container.offsetTop+50);return c<this._section.clientHeight?(tr(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=c+"px"):Hn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Hn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var c="leaflet-control-layers",g=this._container=ni("div",c),T=this.options.collapsed;g.setAttribute("aria-haspopup",!0),gu(g),Ro(g);var A=this._section=ni("section",c+"-list");T&&(this._map.on("click",this.collapse,this),qn(g,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var P=this._layersLink=ni("a",c+"-toggle",g);P.href="#",P.title="Layers",P.setAttribute("role","button"),qn(P,{keydown:function(Y){Y.keyCode===13&&this._expandSafely()},click:function(Y){ha(Y),this._expandSafely()}},this),T||this.expand(),this._baseLayersList=ni("div",c+"-base",A),this._separator=ni("div",c+"-separator",A),this._overlaysList=ni("div",c+"-overlays",A),g.appendChild(A)},_getLayer:function(c){for(var g=0;g<this._layers.length;g++)if(this._layers[g]&&m(this._layers[g].layer)===c)return this._layers[g]},_addLayer:function(c,g,T){this._map&&c.on("add remove",this._onLayerChange,this),this._layers.push({layer:c,name:g,overlay:T}),this.options.sortLayers&&this._layers.sort(l(function(A,P){return this.options.sortFunction(A.layer,P.layer,A.name,P.name)},this)),this.options.autoZIndex&&c.setZIndex&&(this._lastZIndex++,c.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ya(this._baseLayersList),ya(this._overlaysList),this._layerControlInputs=[];var c,g,T,A,P=0;for(T=0;T<this._layers.length;T++)A=this._layers[T],this._addItem(A),g=g||A.overlay,c=c||!A.overlay,P+=A.overlay?0:1;return this.options.hideSingleBase&&(c=c&&P>1,this._baseLayersList.style.display=c?"":"none"),this._separator.style.display=g&&c?"":"none",this},_onLayerChange:function(c){this._handlingClick||this._update();var g=this._getLayer(m(c.target)),T=g.overlay?c.type==="add"?"overlayadd":"overlayremove":c.type==="add"?"baselayerchange":null;T&&this._map.fire(T,g)},_createRadioElement:function(c,g){var T='<input type="radio" class="leaflet-control-layers-selector" name="'+c+'"'+(g?' checked="checked"':"")+"/>",A=document.createElement("div");return A.innerHTML=T,A.firstChild},_addItem:function(c){var g=document.createElement("label"),T=this._map.hasLayer(c.layer),A;c.overlay?(A=document.createElement("input"),A.type="checkbox",A.className="leaflet-control-layers-selector",A.defaultChecked=T):A=this._createRadioElement("leaflet-base-layers_"+m(this),T),this._layerControlInputs.push(A),A.layerId=m(c.layer),qn(A,"click",this._onInputClick,this);var P=document.createElement("span");P.innerHTML=" "+c.name;var Y=document.createElement("span");g.appendChild(Y),Y.appendChild(A),Y.appendChild(P);var Ie=c.overlay?this._overlaysList:this._baseLayersList;return Ie.appendChild(g),this._checkDisabledLayers(),g},_onInputClick:function(){if(!this._preventClick){var c=this._layerControlInputs,g,T,A=[],P=[];this._handlingClick=!0;for(var Y=c.length-1;Y>=0;Y--)g=c[Y],T=this._getLayer(g.layerId).layer,g.checked?A.push(T):g.checked||P.push(T);for(Y=0;Y<P.length;Y++)this._map.hasLayer(P[Y])&&this._map.removeLayer(P[Y]);for(Y=0;Y<A.length;Y++)this._map.hasLayer(A[Y])||this._map.addLayer(A[Y]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var c=this._layerControlInputs,g,T,A=this._map.getZoom(),P=c.length-1;P>=0;P--)g=c[P],T=this._getLayer(g.layerId).layer,g.disabled=T.options.minZoom!==void 0&&A<T.options.minZoom||T.options.maxZoom!==void 0&&A>T.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var c=this._section;this._preventClick=!0,qn(c,"click",ha),this.expand();var g=this;setTimeout(function(){Yr(c,"click",ha),g._preventClick=!1})}}),Hy=function(c,g,T){return new W_(c,g,T)},T_=Iu.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(c){var g="leaflet-control-zoom",T=ni("div",g+" leaflet-bar"),A=this.options;return this._zoomInButton=this._createButton(A.zoomInText,A.zoomInTitle,g+"-in",T,this._zoomIn),this._zoomOutButton=this._createButton(A.zoomOutText,A.zoomOutTitle,g+"-out",T,this._zoomOut),this._updateDisabled(),c.on("zoomend zoomlevelschange",this._updateDisabled,this),T},onRemove:function(c){c.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(c){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(c.shiftKey?3:1))},_zoomOut:function(c){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(c.shiftKey?3:1))},_createButton:function(c,g,T,A,P){var Y=ni("a",T,A);return Y.innerHTML=c,Y.href="#",Y.title=g,Y.setAttribute("role","button"),Y.setAttribute("aria-label",g),gu(Y),qn(Y,"click",$g),qn(Y,"click",P,this),qn(Y,"click",this._refocusOnMap,this),Y},_updateDisabled:function(){var c=this._map,g="leaflet-disabled";Hn(this._zoomInButton,g),Hn(this._zoomOutButton,g),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||c._zoom===c.getMinZoom())&&(tr(this._zoomOutButton,g),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||c._zoom===c.getMaxZoom())&&(tr(this._zoomInButton,g),this._zoomInButton.setAttribute("aria-disabled","true"))}});li.mergeOptions({zoomControl:!0}),li.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new T_,this.addControl(this.zoomControl))});var bv=function(c){return new T_(c)},qy=Iu.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(c){var g="leaflet-control-scale",T=ni("div",g),A=this.options;return this._addScales(A,g+"-line",T),c.on(A.updateWhenIdle?"moveend":"move",this._update,this),c.whenReady(this._update,this),T},onRemove:function(c){c.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(c,g,T){c.metric&&(this._mScale=ni("div",g,T)),c.imperial&&(this._iScale=ni("div",g,T))},_update:function(){var c=this._map,g=c.getSize().y/2,T=c.distance(c.containerPointToLatLng([0,g]),c.containerPointToLatLng([this.options.maxWidth,g]));this._updateScales(T)},_updateScales:function(c){this.options.metric&&c&&this._updateMetric(c),this.options.imperial&&c&&this._updateImperial(c)},_updateMetric:function(c){var g=this._getRoundNum(c),T=g<1e3?g+" m":g/1e3+" km";this._updateScale(this._mScale,T,g/c)},_updateImperial:function(c){var g=c*3.2808399,T,A,P;g>5280?(T=g/5280,A=this._getRoundNum(T),this._updateScale(this._iScale,A+" mi",A/T)):(P=this._getRoundNum(g),this._updateScale(this._iScale,P+" ft",P/g))},_updateScale:function(c,g,T){c.style.width=Math.round(this.options.maxWidth*T)+"px",c.innerHTML=g},_getRoundNum:function(c){var g=Math.pow(10,(Math.floor(c)+"").length-1),T=c/g;return T=T>=10?10:T>=5?5:T>=3?3:T>=2?2:1,g*T}}),K_=function(c){return new qy(c)},Gy='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',fy=Iu.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Wn.inlineSvg?Gy+" ":"")+"Leaflet</a>"},initialize:function(c){W(this,c),this._attributions={}},onAdd:function(c){c.attributionControl=this,this._container=ni("div","leaflet-control-attribution"),gu(this._container);for(var g in c._layers)c._layers[g].getAttribution&&this.addAttribution(c._layers[g].getAttribution());return this._update(),c.on("layeradd",this._addAttribution,this),this._container},onRemove:function(c){c.off("layeradd",this._addAttribution,this)},_addAttribution:function(c){c.layer.getAttribution&&(this.addAttribution(c.layer.getAttribution()),c.layer.once("remove",function(){this.removeAttribution(c.layer.getAttribution())},this))},setPrefix:function(c){return this.options.prefix=c,this._update(),this},addAttribution:function(c){return c?(this._attributions[c]||(this._attributions[c]=0),this._attributions[c]++,this._update(),this):this},removeAttribution:function(c){return c?(this._attributions[c]&&(this._attributions[c]--,this._update()),this):this},_update:function(){if(this._map){var c=[];for(var g in this._attributions)this._attributions[g]&&c.push(g);var T=[];this.options.prefix&&T.push(this.options.prefix),c.length&&T.push(c.join(", ")),this._container.innerHTML=T.join(' <span aria-hidden="true">|</span> ')}}});li.mergeOptions({attributionControl:!0}),li.addInitHook(function(){this.options.attributionControl&&new fy().addTo(this)});var dy=function(c){return new fy(c)};Iu.Layers=W_,Iu.Zoom=T_,Iu.Scale=qy,Iu.Attribution=fy,$d.layers=Hy,$d.zoom=bv,$d.scale=K_,$d.attribution=dy;var eg=Hr.extend({initialize:function(c){this._map=c},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});eg.addTo=function(c,g){return c.addHandler(g,this),this};var Tv={Events:ze},Hg=Wn.touch?"touchstart mousedown":"mousedown",qg=An.extend({options:{clickTolerance:3},initialize:function(c,g,T,A){W(this,A),this._element=c,this._dragStartTarget=g||c,this._preventOutline=T},enable:function(){this._enabled||(qn(this._dragStartTarget,Hg,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(qg._dragging===this&&this.finishDrag(!0),Yr(this._dragStartTarget,Hg,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(c){if(this._enabled&&(this._moved=!1,!v_(this._element,"leaflet-zoom-anim"))){if(c.touches&&c.touches.length!==1){qg._dragging===this&&this.finishDrag();return}if(!(qg._dragging||c.shiftKey||c.which!==1&&c.button!==1&&!c.touches)&&(qg._dragging=this,this._preventOutline&&Re(this._element),Ag(),pu(),!this._moving)){this.fire("down");var g=c.touches?c.touches[0]:c,T=Gt(this._element);this._startPoint=new jt(g.clientX,g.clientY),this._startPos=rm(this._element),this._parentScale=$t(T);var A=c.type==="mousedown";qn(document,A?"mousemove":"touchmove",this._onMove,this),qn(document,A?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(c){if(this._enabled){if(c.touches&&c.touches.length>1){this._moved=!0;return}var g=c.touches&&c.touches.length===1?c.touches[0]:c,T=new jt(g.clientX,g.clientY)._subtract(this._startPoint);!T.x&&!T.y||Math.abs(T.x)+Math.abs(T.y)<this.options.clickTolerance||(T.x/=this._parentScale.x,T.y/=this._parentScale.y,ha(c),this._moved||(this.fire("dragstart"),this._moved=!0,tr(document.body,"leaflet-dragging"),this._lastTarget=c.target||c.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),tr(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(T),this._moving=!0,this._lastEvent=c,this._updatePosition())}},_updatePosition:function(){var c={originalEvent:this._lastEvent};this.fire("predrag",c),Rs(this._element,this._newPos),this.fire("drag",c)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(c){Hn(document.body,"leaflet-dragging"),this._lastTarget&&(Hn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Yr(document,"mousemove touchmove",this._onMove,this),Yr(document,"mouseup touchend touchcancel",this._onUp,this),Bg(),Pa();var g=this._moved&&this._moving;this._moving=!1,qg._dragging=!1,g&&this.fire("dragend",{noInertia:c,distance:this._newPos.distanceTo(this._startPos)})}});function Wy(c,g,T){var A,P=[1,4,2,8],Y,Ie,ke,Ge,kt,Vn,Or,ii;for(Y=0,Vn=c.length;Y<Vn;Y++)c[Y]._code=Ye(c[Y],g);for(ke=0;ke<4;ke++){for(Or=P[ke],A=[],Y=0,Vn=c.length,Ie=Vn-1;Y<Vn;Ie=Y++)Ge=c[Y],kt=c[Ie],Ge._code&Or?kt._code&Or||(ii=Fe(kt,Ge,Or,g,T),ii._code=Ye(ii,g),A.push(ii)):(kt._code&Or&&(ii=Fe(kt,Ge,Or,g,T),ii._code=Ye(ii,g),A.push(ii)),A.push(Ge));c=A}return c}function Ky(c,g){var T,A,P,Y,Ie,ke,Ge,kt,Vn;if(!c||c.length===0)throw new Error("latlngs not passed");Go(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var Or=Sn([0,0]),ii=Tn(c),_u=ii.getNorthWest().distanceTo(ii.getSouthWest())*ii.getNorthEast().distanceTo(ii.getNorthWest());_u<1700&&(Or=py(c));var Fa=c.length,gg=[];for(T=0;T<Fa;T++){var Ns=Sn(c[T]);gg.push(g.project(Sn([Ns.lat-Or.lat,Ns.lng-Or.lng])))}for(ke=Ge=kt=0,T=0,A=Fa-1;T<Fa;A=T++)P=gg[T],Y=gg[A],Ie=P.y*Y.x-Y.y*P.x,Ge+=(P.x+Y.x)*Ie,kt+=(P.y+Y.y)*Ie,ke+=Ie*3;ke===0?Vn=gg[0]:Vn=[Ge/ke,kt/ke];var Vs=g.unproject(wn(Vn));return Sn([Vs.lat+Or.lat,Vs.lng+Or.lng])}function py(c){for(var g=0,T=0,A=0,P=0;P<c.length;P++){var Y=Sn(c[P]);g+=Y.lat,T+=Y.lng,A++}return Sn([g/A,T/A])}var M_={__proto__:null,clipPolygon:Wy,polygonCenter:Ky,centroid:py};function Pu(c,g){if(!g||!c.length)return c.slice();var T=g*g;return c=S(c,T),c=E_(c,T),c}function Zy(c,g,T){return Math.sqrt(Jr(c,g,T,!0))}function Ev(c,g,T){return Jr(c,g,T)}function E_(c,g){var T=c.length,A=typeof Uint8Array<"u"?Uint8Array:Array,P=new A(T);P[0]=P[T-1]=1,b(c,P,g,0,T-1);var Y,Ie=[];for(Y=0;Y<T;Y++)P[Y]&&Ie.push(c[Y]);return Ie}function b(c,g,T,A,P){var Y=0,Ie,ke,Ge;for(ke=A+1;ke<=P-1;ke++)Ge=Jr(c[ke],c[A],c[P],!0),Ge>Y&&(Ie=ke,Y=Ge);Y>T&&(g[Ie]=1,b(c,g,T,A,Ie),b(c,g,T,Ie,P))}function S(c,g){for(var T=[c[0]],A=1,P=0,Y=c.length;A<Y;A++)On(c[A],c[P])>g&&(T.push(c[A]),P=A);return P<Y-1&&T.push(c[Y-1]),T}var z;function te(c,g,T,A,P){var Y=A?z:Ye(c,T),Ie=Ye(g,T),ke,Ge,kt;for(z=Ie;;){if(!(Y|Ie))return[c,g];if(Y&Ie)return!1;ke=Y||Ie,Ge=Fe(c,g,ke,T,P),kt=Ye(Ge,T),ke===Y?(c=Ge,Y=kt):(g=Ge,Ie=kt)}}function Fe(c,g,T,A,P){var Y=g.x-c.x,Ie=g.y-c.y,ke=A.min,Ge=A.max,kt,Vn;return T&8?(kt=c.x+Y*(Ge.y-c.y)/Ie,Vn=Ge.y):T&4?(kt=c.x+Y*(ke.y-c.y)/Ie,Vn=ke.y):T&2?(kt=Ge.x,Vn=c.y+Ie*(Ge.x-c.x)/Y):T&1&&(kt=ke.x,Vn=c.y+Ie*(ke.x-c.x)/Y),new jt(kt,Vn,P)}function Ye(c,g){var T=0;return c.x<g.min.x?T|=1:c.x>g.max.x&&(T|=2),c.y<g.min.y?T|=4:c.y>g.max.y&&(T|=8),T}function On(c,g){var T=g.x-c.x,A=g.y-c.y;return T*T+A*A}function Jr(c,g,T,A){var P=g.x,Y=g.y,Ie=T.x-P,ke=T.y-Y,Ge=Ie*Ie+ke*ke,kt;return Ge>0&&(kt=((c.x-P)*Ie+(c.y-Y)*ke)/Ge,kt>1?(P=T.x,Y=T.y):kt>0&&(P+=Ie*kt,Y+=ke*kt)),Ie=c.x-P,ke=c.y-Y,A?Ie*Ie+ke*ke:new jt(P,Y)}function Go(c){return!Pe(c[0])||typeof c[0][0]!="object"&&typeof c[0][0]<"u"}function Xo(c){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Go(c)}function ba(c,g){var T,A,P,Y,Ie,ke,Ge,kt;if(!c||c.length===0)throw new Error("latlngs not passed");Go(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var Vn=Sn([0,0]),Or=Tn(c),ii=Or.getNorthWest().distanceTo(Or.getSouthWest())*Or.getNorthEast().distanceTo(Or.getNorthWest());ii<1700&&(Vn=py(c));var _u=c.length,Fa=[];for(T=0;T<_u;T++){var gg=Sn(c[T]);Fa.push(g.project(Sn([gg.lat-Vn.lat,gg.lng-Vn.lng])))}for(T=0,A=0;T<_u-1;T++)A+=Fa[T].distanceTo(Fa[T+1])/2;if(A===0)kt=Fa[0];else for(T=0,Y=0;T<_u-1;T++)if(Ie=Fa[T],ke=Fa[T+1],P=Ie.distanceTo(ke),Y+=P,Y>A){Ge=(Y-A)/P,kt=[ke.x-Ge*(ke.x-Ie.x),ke.y-Ge*(ke.y-Ie.y)];break}var Ns=g.unproject(wn(kt));return Sn([Ns.lat+Vn.lat,Ns.lng+Vn.lng])}var Ig={__proto__:null,simplify:Pu,pointToSegmentDistance:Zy,closestPointOnSegment:Ev,clipSegment:te,_getEdgeIntersection:Fe,_getBitCode:Ye,_sqClosestPointOnSegment:Jr,isFlat:Go,_flat:Xo,polylineCenter:ba},Sg={project:function(c){return new jt(c.lng,c.lat)},unproject:function(c){return new xn(c.y,c.x)},bounds:new Se([-180,-90],[180,90])},ag={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Se([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(c){var g=Math.PI/180,T=this.R,A=c.lat*g,P=this.R_MINOR/T,Y=Math.sqrt(1-P*P),Ie=Y*Math.sin(A),ke=Math.tan(Math.PI/4-A/2)/Math.pow((1-Ie)/(1+Ie),Y/2);return A=-T*Math.log(Math.max(ke,1e-10)),new jt(c.lng*g*T,A)},unproject:function(c){for(var g=180/Math.PI,T=this.R,A=this.R_MINOR/T,P=Math.sqrt(1-A*A),Y=Math.exp(-c.y/T),Ie=Math.PI/2-2*Math.atan(Y),ke=0,Ge=.1,kt;ke<15&&Math.abs(Ge)>1e-7;ke++)kt=P*Math.sin(Ie),kt=Math.pow((1-kt)/(1+kt),P/2),Ge=Math.PI/2-2*Math.atan(Y*kt)-Ie,Ie+=Ge;return new xn(Ie*g,c.x*g/T)}},Gg={__proto__:null,LonLat:Sg,Mercator:ag,SphericalMercator:$o},Z_=a({},ti,{code:"EPSG:3395",projection:ag,transformation:(function(){var c=.5/(Math.PI*ag.R);return $a(c,.5,-c,.5)})()}),Y_=a({},ti,{code:"EPSG:4326",projection:Sg,transformation:$a(1/180,1,-1/180,.5)}),my=a({},Lr,{projection:Sg,transformation:$a(1,0,-1,0),scale:function(c){return Math.pow(2,c)},zoom:function(c){return Math.log(c)/Math.LN2},distance:function(c,g){var T=g.lng-c.lng,A=g.lat-c.lat;return Math.sqrt(T*T+A*A)},infinite:!0});Lr.Earth=ti,Lr.EPSG3395=Z_,Lr.EPSG3857=bu,Lr.EPSG900913=tu,Lr.EPSG4326=Y_,Lr.Simple=my;var Wg=An.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(c){return c.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(c){return c&&c.removeLayer(this),this},getPane:function(c){return this._map.getPane(c?this.options[c]||c:this.options.pane)},addInteractiveTarget:function(c){return this._map._targets[m(c)]=this,this},removeInteractiveTarget:function(c){return delete this._map._targets[m(c)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(c){var g=c.target;if(g.hasLayer(this)){if(this._map=g,this._zoomAnimated=g._zoomAnimated,this.getEvents){var T=this.getEvents();g.on(T,this),this.once("remove",function(){g.off(T,this)},this)}this.onAdd(g),this.fire("add"),g.fire("layeradd",{layer:this})}}});li.include({addLayer:function(c){if(!c._layerAdd)throw new Error("The provided object is not a Layer.");var g=m(c);return this._layers[g]?this:(this._layers[g]=c,c._mapToAdd=this,c.beforeAdd&&c.beforeAdd(this),this.whenReady(c._layerAdd,c),this)},removeLayer:function(c){var g=m(c);return this._layers[g]?(this._loaded&&c.onRemove(this),delete this._layers[g],this._loaded&&(this.fire("layerremove",{layer:c}),c.fire("remove")),c._map=c._mapToAdd=null,this):this},hasLayer:function(c){return m(c)in this._layers},eachLayer:function(c,g){for(var T in this._layers)c.call(g,this._layers[T]);return this},_addLayers:function(c){c=c?Pe(c)?c:[c]:[];for(var g=0,T=c.length;g<T;g++)this.addLayer(c[g])},_addZoomLimit:function(c){(!isNaN(c.options.maxZoom)||!isNaN(c.options.minZoom))&&(this._zoomBoundLayers[m(c)]=c,this._updateZoomLevels())},_removeZoomLimit:function(c){var g=m(c);this._zoomBoundLayers[g]&&(delete this._zoomBoundLayers[g],this._updateZoomLevels())},_updateZoomLevels:function(){var c=1/0,g=-1/0,T=this._getZoomSpan();for(var A in this._zoomBoundLayers){var P=this._zoomBoundLayers[A].options;c=P.minZoom===void 0?c:Math.min(c,P.minZoom),g=P.maxZoom===void 0?g:Math.max(g,P.maxZoom)}this._layersMaxZoom=g===-1/0?void 0:g,this._layersMinZoom=c===1/0?void 0:c,T!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var gy=Wg.extend({initialize:function(c,g){W(this,g),this._layers={};var T,A;if(c)for(T=0,A=c.length;T<A;T++)this.addLayer(c[T])},addLayer:function(c){var g=this.getLayerId(c);return this._layers[g]=c,this._map&&this._map.addLayer(c),this},removeLayer:function(c){var g=c in this._layers?c:this.getLayerId(c);return this._map&&this._layers[g]&&this._map.removeLayer(this._layers[g]),delete this._layers[g],this},hasLayer:function(c){var g=typeof c=="number"?c:this.getLayerId(c);return g in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(c){var g=Array.prototype.slice.call(arguments,1),T,A;for(T in this._layers)A=this._layers[T],A[c]&&A[c].apply(A,g);return this},onAdd:function(c){this.eachLayer(c.addLayer,c)},onRemove:function(c){this.eachLayer(c.removeLayer,c)},eachLayer:function(c,g){for(var T in this._layers)c.call(g,this._layers[T]);return this},getLayer:function(c){return this._layers[c]},getLayers:function(){var c=[];return this.eachLayer(c.push,c),c},setZIndex:function(c){return this.invoke("setZIndex",c)},getLayerId:function(c){return m(c)}}),H0=function(c,g){return new gy(c,g)},a_=gy.extend({addLayer:function(c){return this.hasLayer(c)?this:(c.addEventParent(this),gy.prototype.addLayer.call(this,c),this.fire("layeradd",{layer:c}))},removeLayer:function(c){return this.hasLayer(c)?(c in this._layers&&(c=this._layers[c]),c.removeEventParent(this),gy.prototype.removeLayer.call(this,c),this.fire("layerremove",{layer:c})):this},setStyle:function(c){return this.invoke("setStyle",c)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var c=new vn;for(var g in this._layers){var T=this._layers[g];c.extend(T.getBounds?T.getBounds():T.getLatLng())}return c}}),FT=function(c,g){return new a_(c,g)},l_=Hr.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(c){W(this,c)},createIcon:function(c){return this._createIcon("icon",c)},createShadow:function(c){return this._createIcon("shadow",c)},_createIcon:function(c,g){var T=this._getIconUrl(c);if(!T){if(c==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var A=this._createImg(T,g&&g.tagName==="IMG"?g:null);return this._setIconStyles(A,c),(this.options.crossOrigin||this.options.crossOrigin==="")&&(A.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),A},_setIconStyles:function(c,g){var T=this.options,A=T[g+"Size"];typeof A=="number"&&(A=[A,A]);var P=wn(A),Y=wn(g==="shadow"&&T.shadowAnchor||T.iconAnchor||P&&P.divideBy(2,!0));c.className="leaflet-marker-"+g+" "+(T.className||""),Y&&(c.style.marginLeft=-Y.x+"px",c.style.marginTop=-Y.y+"px"),P&&(c.style.width=P.x+"px",c.style.height=P.y+"px")},_createImg:function(c,g){return g=g||document.createElement("img"),g.src=c,g},_getIconUrl:function(c){return Wn.retina&&this.options[c+"RetinaUrl"]||this.options[c+"Url"]}});function Yy(c){return new l_(c)}var Xy=l_.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(c){return typeof Xy.imagePath!="string"&&(Xy.imagePath=this._detectIconPath()),(this.options.imagePath||Xy.imagePath)+l_.prototype._getIconUrl.call(this,c)},_stripUrl:function(c){var g=function(T,A,P){var Y=A.exec(T);return Y&&Y[P]};return c=g(c,/^url\((['"])?(.+)\1\)$/,2),c&&g(c,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var c=ni("div","leaflet-default-icon-path",document.body),g=kg(c,"background-image")||kg(c,"backgroundImage");if(document.body.removeChild(c),g=this._stripUrl(g),g)return g;var T=document.querySelector('link[href$="leaflet.css"]');return T?T.href.substring(0,T.href.length-11-1):""}}),Qy=eg.extend({initialize:function(c){this._marker=c},addHooks:function(){var c=this._marker._icon;this._draggable||(this._draggable=new qg(c,c,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),tr(c,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Hn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(c){var g=this._marker,T=g._map,A=this._marker.options.autoPanSpeed,P=this._marker.options.autoPanPadding,Y=rm(g._icon),Ie=T.getPixelBounds(),ke=T.getPixelOrigin(),Ge=et(Ie.min._subtract(ke).add(P),Ie.max._subtract(ke).subtract(P));if(!Ge.contains(Y)){var kt=wn((Math.max(Ge.max.x,Y.x)-Ge.max.x)/(Ie.max.x-Ge.max.x)-(Math.min(Ge.min.x,Y.x)-Ge.min.x)/(Ie.min.x-Ge.min.x),(Math.max(Ge.max.y,Y.y)-Ge.max.y)/(Ie.max.y-Ge.max.y)-(Math.min(Ge.min.y,Y.y)-Ge.min.y)/(Ie.min.y-Ge.min.y)).multiplyBy(A);T.panBy(kt,{animate:!1}),this._draggable._newPos._add(kt),this._draggable._startPos._add(kt),Rs(g._icon,this._draggable._newPos),this._onDrag(c),this._panRequest=Ae(this._adjustPan.bind(this,c))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(c){this._marker.options.autoPan&&(Ce(this._panRequest),this._panRequest=Ae(this._adjustPan.bind(this,c)))},_onDrag:function(c){var g=this._marker,T=g._shadow,A=rm(g._icon),P=g._map.layerPointToLatLng(A);T&&Rs(T,A),g._latlng=P,c.latlng=P,c.oldLatLng=this._oldLatLng,g.fire("move",c).fire("drag",c)},_onDragEnd:function(c){Ce(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",c)}}),Jy=Wg.extend({options:{icon:new Xy,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(c,g){W(this,g),this._latlng=Sn(c)},onAdd:function(c){this._zoomAnimated=this._zoomAnimated&&c.options.markerZoomAnimation,this._zoomAnimated&&c.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(c){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&c.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(c){var g=this._latlng;return this._latlng=Sn(c),this.update(),this.fire("move",{oldLatLng:g,latlng:this._latlng})},setZIndexOffset:function(c){return this.options.zIndexOffset=c,this.update()},getIcon:function(){return this.options.icon},setIcon:function(c){return this.options.icon=c,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var c=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(c)}return this},_initIcon:function(){var c=this.options,g="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),T=c.icon.createIcon(this._icon),A=!1;T!==this._icon&&(this._icon&&this._removeIcon(),A=!0,c.title&&(T.title=c.title),T.tagName==="IMG"&&(T.alt=c.alt||"")),tr(T,g),c.keyboard&&(T.tabIndex="0",T.setAttribute("role","button")),this._icon=T,c.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&qn(T,"focus",this._panOnFocus,this);var P=c.icon.createShadow(this._shadow),Y=!1;P!==this._shadow&&(this._removeShadow(),Y=!0),P&&(tr(P,g),P.alt=""),this._shadow=P,c.opacity<1&&this._updateOpacity(),A&&this.getPane().appendChild(this._icon),this._initInteraction(),P&&Y&&this.getPane(c.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Yr(this._icon,"focus",this._panOnFocus,this),ai(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ai(this._shadow),this._shadow=null},_setPos:function(c){this._icon&&Rs(this._icon,c),this._shadow&&Rs(this._shadow,c),this._zIndex=c.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(c){this._icon&&(this._icon.style.zIndex=this._zIndex+c)},_animateZoom:function(c){var g=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center).round();this._setPos(g)},_initInteraction:function(){if(this.options.interactive&&(tr(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Qy)){var c=this.options.draggable;this.dragging&&(c=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Qy(this),c&&this.dragging.enable()}},setOpacity:function(c){return this.options.opacity=c,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var c=this.options.opacity;this._icon&&qs(this._icon,c),this._shadow&&qs(this._shadow,c)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var c=this._map;if(c){var g=this.options.icon.options,T=g.iconSize?wn(g.iconSize):wn(0,0),A=g.iconAnchor?wn(g.iconAnchor):wn(0,0);c.panInside(this._latlng,{paddingTopLeft:A,paddingBottomRight:T.subtract(A)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function UT(c,g){return new Jy(c,g)}var u_=Wg.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(c){this._renderer=c.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(c){return W(this,c),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&c&&Object.prototype.hasOwnProperty.call(c,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),_y=u_.extend({options:{fill:!0,radius:10},initialize:function(c,g){W(this,g),this._latlng=Sn(c),this._radius=this.options.radius},setLatLng:function(c){var g=this._latlng;return this._latlng=Sn(c),this.redraw(),this.fire("move",{oldLatLng:g,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(c){return this.options.radius=this._radius=c,this.redraw()},getRadius:function(){return this._radius},setStyle:function(c){var g=c&&c.radius||this._radius;return u_.prototype.setStyle.call(this,c),this.setRadius(g),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var c=this._radius,g=this._radiusY||c,T=this._clickTolerance(),A=[c+T,g+T];this._pxBounds=new Se(this._point.subtract(A),this._point.add(A))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(c){return c.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function BT(c,g){return new _y(c,g)}var wv=_y.extend({initialize:function(c,g,T){if(typeof g=="number"&&(g=a({},T,{radius:g})),W(this,g),this._latlng=Sn(c),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(c){return this._mRadius=c,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var c=[this._radius,this._radiusY||this._radius];return new vn(this._map.layerPointToLatLng(this._point.subtract(c)),this._map.layerPointToLatLng(this._point.add(c)))},setStyle:u_.prototype.setStyle,_project:function(){var c=this._latlng.lng,g=this._latlng.lat,T=this._map,A=T.options.crs;if(A.distance===ti.distance){var P=Math.PI/180,Y=this._mRadius/ti.R/P,Ie=T.project([g+Y,c]),ke=T.project([g-Y,c]),Ge=Ie.add(ke).divideBy(2),kt=T.unproject(Ge).lat,Vn=Math.acos((Math.cos(Y*P)-Math.sin(g*P)*Math.sin(kt*P))/(Math.cos(g*P)*Math.cos(kt*P)))/P;(isNaN(Vn)||Vn===0)&&(Vn=Y/Math.cos(Math.PI/180*g)),this._point=Ge.subtract(T.getPixelOrigin()),this._radius=isNaN(Vn)?0:Ge.x-T.project([kt,c-Vn]).x,this._radiusY=Ge.y-Ie.y}else{var Or=A.unproject(A.project(this._latlng).subtract([this._mRadius,0]));this._point=T.latLngToLayerPoint(this._latlng),this._radius=this._point.x-T.latLngToLayerPoint(Or).x}this._updateBounds()}});function $T(c,g,T){return new wv(c,g,T)}var w_=u_.extend({options:{smoothFactor:1,noClip:!1},initialize:function(c,g){W(this,g),this._setLatLngs(c)},getLatLngs:function(){return this._latlngs},setLatLngs:function(c){return this._setLatLngs(c),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(c){for(var g=1/0,T=null,A=Jr,P,Y,Ie=0,ke=this._parts.length;Ie<ke;Ie++)for(var Ge=this._parts[Ie],kt=1,Vn=Ge.length;kt<Vn;kt++){P=Ge[kt-1],Y=Ge[kt];var Or=A(c,P,Y,!0);Or<g&&(g=Or,T=A(c,P,Y))}return T&&(T.distance=Math.sqrt(g)),T},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ba(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(c,g){return g=g||this._defaultShape(),c=Sn(c),g.push(c),this._bounds.extend(c),this.redraw()},_setLatLngs:function(c){this._bounds=new vn,this._latlngs=this._convertLatLngs(c)},_defaultShape:function(){return Go(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(c){for(var g=[],T=Go(c),A=0,P=c.length;A<P;A++)T?(g[A]=Sn(c[A]),this._bounds.extend(g[A])):g[A]=this._convertLatLngs(c[A]);return g},_project:function(){var c=new Se;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,c),this._bounds.isValid()&&c.isValid()&&(this._rawPxBounds=c,this._updateBounds())},_updateBounds:function(){var c=this._clickTolerance(),g=new jt(c,c);this._rawPxBounds&&(this._pxBounds=new Se([this._rawPxBounds.min.subtract(g),this._rawPxBounds.max.add(g)]))},_projectLatlngs:function(c,g,T){var A=c[0]instanceof xn,P=c.length,Y,Ie;if(A){for(Ie=[],Y=0;Y<P;Y++)Ie[Y]=this._map.latLngToLayerPoint(c[Y]),T.extend(Ie[Y]);g.push(Ie)}else for(Y=0;Y<P;Y++)this._projectLatlngs(c[Y],g,T)},_clipPoints:function(){var c=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}var g=this._parts,T,A,P,Y,Ie,ke,Ge;for(T=0,P=0,Y=this._rings.length;T<Y;T++)for(Ge=this._rings[T],A=0,Ie=Ge.length;A<Ie-1;A++)ke=te(Ge[A],Ge[A+1],c,A,!0),ke&&(g[P]=g[P]||[],g[P].push(ke[0]),(ke[1]!==Ge[A+1]||A===Ie-2)&&(g[P].push(ke[1]),P++))}},_simplifyPoints:function(){for(var c=this._parts,g=this.options.smoothFactor,T=0,A=c.length;T<A;T++)c[T]=Pu(c[T],g)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(c,g){var T,A,P,Y,Ie,ke,Ge=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(T=0,Y=this._parts.length;T<Y;T++)for(ke=this._parts[T],A=0,Ie=ke.length,P=Ie-1;A<Ie;P=A++)if(!(!g&&A===0)&&Zy(c,ke[P],ke[A])<=Ge)return!0;return!1}});function q0(c,g){return new w_(c,g)}w_._flat=Xo;var yy=w_.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ky(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(c){var g=w_.prototype._convertLatLngs.call(this,c),T=g.length;return T>=2&&g[0]instanceof xn&&g[0].equals(g[T-1])&&g.pop(),g},_setLatLngs:function(c){w_.prototype._setLatLngs.call(this,c),Go(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Go(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var c=this._renderer._bounds,g=this.options.weight,T=new jt(g,g);if(c=new Se(c.min.subtract(T),c.max.add(T)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}for(var A=0,P=this._rings.length,Y;A<P;A++)Y=Wy(this._rings[A],c,!0),Y.length&&this._parts.push(Y)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(c){var g=!1,T,A,P,Y,Ie,ke,Ge,kt;if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(Y=0,Ge=this._parts.length;Y<Ge;Y++)for(T=this._parts[Y],Ie=0,kt=T.length,ke=kt-1;Ie<kt;ke=Ie++)A=T[Ie],P=T[ke],A.y>c.y!=P.y>c.y&&c.x<(P.x-A.x)*(c.y-A.y)/(P.y-A.y)+A.x&&(g=!g);return g||w_.prototype._containsPoint.call(this,c,!0)}});function G0(c,g){return new yy(c,g)}var A_=a_.extend({initialize:function(c,g){W(this,g),this._layers={},c&&this.addData(c)},addData:function(c){var g=Pe(c)?c:c.features,T,A,P;if(g){for(T=0,A=g.length;T<A;T++)P=g[T],(P.geometries||P.geometry||P.features||P.coordinates)&&this.addData(P);return this}var Y=this.options;if(Y.filter&&!Y.filter(c))return this;var Ie=Cu(c,Y);return Ie?(Ie.feature=Sv(c),Ie.defaultOptions=Ie.options,this.resetStyle(Ie),Y.onEachFeature&&Y.onEachFeature(c,Ie),this.addLayer(Ie)):this},resetStyle:function(c){return c===void 0?this.eachLayer(this.resetStyle,this):(c.options=a({},c.defaultOptions),this._setLayerStyle(c,this.options.style),this)},setStyle:function(c){return this.eachLayer(function(g){this._setLayerStyle(g,c)},this)},_setLayerStyle:function(c,g){c.setStyle&&(typeof g=="function"&&(g=g(c.feature)),c.setStyle(g))}});function Cu(c,g){var T=c.type==="Feature"?c.geometry:c,A=T?T.coordinates:null,P=[],Y=g&&g.pointToLayer,Ie=g&&g.coordsToLatLng||Av,ke,Ge,kt,Vn;if(!A&&!T)return null;switch(T.type){case"Point":return ke=Ie(A),vy(Y,c,ke,g);case"MultiPoint":for(kt=0,Vn=A.length;kt<Vn;kt++)ke=Ie(A[kt]),P.push(vy(Y,c,ke,g));return new a_(P);case"LineString":case"MultiLineString":return Ge=ev(A,T.type==="LineString"?0:1,Ie),new w_(Ge,g);case"Polygon":case"MultiPolygon":return Ge=ev(A,T.type==="Polygon"?1:2,Ie),new yy(Ge,g);case"GeometryCollection":for(kt=0,Vn=T.geometries.length;kt<Vn;kt++){var Or=Cu({geometry:T.geometries[kt],type:"Feature",properties:c.properties},g);Or&&P.push(Or)}return new a_(P);case"FeatureCollection":for(kt=0,Vn=T.features.length;kt<Vn;kt++){var ii=Cu(T.features[kt],g);ii&&P.push(ii)}return new a_(P);default:throw new Error("Invalid GeoJSON object.")}}function vy(c,g,T,A){return c?c(g,T):new Jy(T,A&&A.markersInheritOptions&&A)}function Av(c){return new xn(c[1],c[0],c[2])}function ev(c,g,T){for(var A=[],P=0,Y=c.length,Ie;P<Y;P++)Ie=g?ev(c[P],g-1,T):(T||Av)(c[P]),A.push(Ie);return A}function Iv(c,g){return c=Sn(c),c.alt!==void 0?[v(c.lng,g),v(c.lat,g),v(c.alt,g)]:[v(c.lng,g),v(c.lat,g)]}function tv(c,g,T,A){for(var P=[],Y=0,Ie=c.length;Y<Ie;Y++)P.push(g?tv(c[Y],Go(c[Y])?0:g-1,T,A):Iv(c[Y],A));return!g&&T&&P.length>0&&P.push(P[0].slice()),P}function k_(c,g){return c.feature?a({},c.feature,{geometry:g}):Sv(g)}function Sv(c){return c.type==="Feature"||c.type==="FeatureCollection"?c:{type:"Feature",properties:{},geometry:c}}var F_={toGeoJSON:function(c){return k_(this,{type:"Point",coordinates:Iv(this.getLatLng(),c)})}};Jy.include(F_),wv.include(F_),_y.include(F_),w_.include({toGeoJSON:function(c){var g=!Go(this._latlngs),T=tv(this._latlngs,g?1:0,!1,c);return k_(this,{type:(g?"Multi":"")+"LineString",coordinates:T})}}),yy.include({toGeoJSON:function(c){var g=!Go(this._latlngs),T=g&&!Go(this._latlngs[0]),A=tv(this._latlngs,T?2:g?1:0,!0,c);return g||(A=[A]),k_(this,{type:(T?"Multi":"")+"Polygon",coordinates:A})}}),gy.include({toMultiPoint:function(c){var g=[];return this.eachLayer(function(T){g.push(T.toGeoJSON(c).geometry.coordinates)}),k_(this,{type:"MultiPoint",coordinates:g})},toGeoJSON:function(c){var g=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(g==="MultiPoint")return this.toMultiPoint(c);var T=g==="GeometryCollection",A=[];return this.eachLayer(function(P){if(P.toGeoJSON){var Y=P.toGeoJSON(c);if(T)A.push(Y.geometry);else{var Ie=Sv(Y);Ie.type==="FeatureCollection"?A.push.apply(A,Ie.features):A.push(Ie)}}}),T?k_(this,{geometries:A,type:"GeometryCollection"}):{type:"FeatureCollection",features:A}}});function Rv(c,g){return new A_(c,g)}var nv=Rv,by=Wg.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(c,g,T){this._url=c,this._bounds=Tn(g),W(this,T)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(tr(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ai(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(c){return this.options.opacity=c,this._image&&this._updateOpacity(),this},setStyle:function(c){return c.opacity&&this.setOpacity(c.opacity),this},bringToFront:function(){return this._map&&va(this._image),this},bringToBack:function(){return this._map&&wu(this._image),this},setUrl:function(c){return this._url=c,this._image&&(this._image.src=c),this},setBounds:function(c){return this._bounds=Tn(c),this._map&&this._reset(),this},getEvents:function(){var c={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var c=this._url.tagName==="IMG",g=this._image=c?this._url:ni("img");if(tr(g,"leaflet-image-layer"),this._zoomAnimated&&tr(g,"leaflet-zoom-animated"),this.options.className&&tr(g,this.options.className),g.onselectstart=f,g.onmousemove=f,g.onload=l(this.fire,this,"load"),g.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),c){this._url=g.src;return}g.src=this._url,g.alt=this.options.alt},_animateZoom:function(c){var g=this._map.getZoomScale(c.zoom),T=this._map._latLngBoundsToNewLayerBounds(this._bounds,c.zoom,c.center).min;Bd(this._image,T,g)},_reset:function(){var c=this._image,g=new Se(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),T=g.getSize();Rs(c,g.min),c.style.width=T.x+"px",c.style.height=T.y+"px"},_updateOpacity:function(){qs(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var c=this.options.errorOverlayUrl;c&&this._url!==c&&(this._url=c,this._image.src=c)},getCenter:function(){return this._bounds.getCenter()}}),zT=function(c,g,T){return new by(c,g,T)},U_=by.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var c=this._url.tagName==="VIDEO",g=this._image=c?this._url:ni("video");if(tr(g,"leaflet-image-layer"),this._zoomAnimated&&tr(g,"leaflet-zoom-animated"),this.options.className&&tr(g,this.options.className),g.onselectstart=f,g.onmousemove=f,g.onloadeddata=l(this.fire,this,"load"),c){for(var T=g.getElementsByTagName("source"),A=[],P=0;P<T.length;P++)A.push(T[P].src);this._url=T.length>0?A:[g.src];return}Pe(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(g.style,"objectFit")&&(g.style.objectFit="fill"),g.autoplay=!!this.options.autoplay,g.loop=!!this.options.loop,g.muted=!!this.options.muted,g.playsInline=!!this.options.playsInline;for(var Y=0;Y<this._url.length;Y++){var Ie=ni("source");Ie.src=this._url[Y],g.appendChild(Ie)}}});function Ty(c,g,T){return new U_(c,g,T)}var xv=by.extend({_initImage:function(){var c=this._image=this._url;tr(c,"leaflet-image-layer"),this._zoomAnimated&&tr(c,"leaflet-zoom-animated"),this.options.className&&tr(c,this.options.className),c.onselectstart=f,c.onmousemove=f}});function jT(c,g,T){return new xv(c,g,T)}var Du=Wg.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(c,g){c&&(c instanceof xn||Pe(c))?(this._latlng=Sn(c),W(this,g)):(W(this,c),this._source=g),this.options.content&&(this._content=this.options.content)},openOn:function(c){return c=arguments.length?c:this._source._map,c.hasLayer(this)||c.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(c){return this._map?this.close():(arguments.length?this._source=c:c=this._source,this._prepareOpen(),this.openOn(c._map)),this},onAdd:function(c){this._zoomAnimated=c._zoomAnimated,this._container||this._initLayout(),c._fadeAnimated&&qs(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),c._fadeAnimated&&qs(this._container,1),this.bringToFront(),this.options.interactive&&(tr(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(c){c._fadeAnimated?(qs(this._container,0),this._removeTimeout=setTimeout(l(ai,void 0,this._container),200)):ai(this._container),this.options.interactive&&(Hn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(c){return this._latlng=Sn(c),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(c){return this._content=c,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var c={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&va(this._container),this},bringToBack:function(){return this._map&&wu(this._container),this},_prepareOpen:function(c){var g=this._source;if(!g._map)return!1;if(g instanceof a_){g=null;var T=this._source._layers;for(var A in T)if(T[A]._map){g=T[A];break}if(!g)return!1;this._source=g}if(!c)if(g.getCenter)c=g.getCenter();else if(g.getLatLng)c=g.getLatLng();else if(g.getBounds)c=g.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(c),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var c=this._contentNode,g=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof g=="string")c.innerHTML=g;else{for(;c.hasChildNodes();)c.removeChild(c.firstChild);c.appendChild(g)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var c=this._map.latLngToLayerPoint(this._latlng),g=wn(this.options.offset),T=this._getAnchor();this._zoomAnimated?Rs(this._container,c.add(T)):g=g.add(c).add(T);var A=this._containerBottom=-g.y,P=this._containerLeft=-Math.round(this._containerWidth/2)+g.x;this._container.style.bottom=A+"px",this._container.style.left=P+"px"}},_getAnchor:function(){return[0,0]}});li.include({_initOverlay:function(c,g,T,A){var P=g;return P instanceof c||(P=new c(A).setContent(g)),T&&P.setLatLng(T),P}}),Wg.include({_initOverlay:function(c,g,T,A){var P=T;return P instanceof c?(W(P,A),P._source=this):(P=g&&!A?g:new c(A,this),P.setContent(T)),P}});var rv=Du.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(c){return c=arguments.length?c:this._source._map,!c.hasLayer(this)&&c._popup&&c._popup.options.autoClose&&c.removeLayer(c._popup),c._popup=this,Du.prototype.openOn.call(this,c)},onAdd:function(c){Du.prototype.onAdd.call(this,c),c.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof u_||this._source.on("preclick",pr))},onRemove:function(c){Du.prototype.onRemove.call(this,c),c.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof u_||this._source.off("preclick",pr))},getEvents:function(){var c=Du.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(c.preclick=this.close),this.options.keepInView&&(c.moveend=this._adjustPan),c},_initLayout:function(){var c="leaflet-popup",g=this._container=ni("div",c+" "+(this.options.className||"")+" leaflet-zoom-animated"),T=this._wrapper=ni("div",c+"-content-wrapper",g);if(this._contentNode=ni("div",c+"-content",T),gu(g),Ro(this._contentNode),qn(g,"contextmenu",pr),this._tipContainer=ni("div",c+"-tip-container",g),this._tip=ni("div",c+"-tip",this._tipContainer),this.options.closeButton){var A=this._closeButton=ni("a",c+"-close-button",g);A.setAttribute("role","button"),A.setAttribute("aria-label","Close popup"),A.href="#close",A.innerHTML='<span aria-hidden="true">&#215;</span>',qn(A,"click",function(P){ha(P),this.close()},this)}},_updateLayout:function(){var c=this._contentNode,g=c.style;g.width="",g.whiteSpace="nowrap";var T=c.offsetWidth;T=Math.min(T,this.options.maxWidth),T=Math.max(T,this.options.minWidth),g.width=T+1+"px",g.whiteSpace="",g.height="";var A=c.offsetHeight,P=this.options.maxHeight,Y="leaflet-popup-scrolled";P&&A>P?(g.height=P+"px",tr(c,Y)):Hn(c,Y),this._containerWidth=this._container.offsetWidth},_animateZoom:function(c){var g=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center),T=this._getAnchor();Rs(this._container,g.add(T))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var c=this._map,g=parseInt(kg(this._container,"marginBottom"),10)||0,T=this._container.offsetHeight+g,A=this._containerWidth,P=new jt(this._containerLeft,-T-this._containerBottom);P._add(rm(this._container));var Y=c.layerPointToContainerPoint(P),Ie=wn(this.options.autoPanPadding),ke=wn(this.options.autoPanPaddingTopLeft||Ie),Ge=wn(this.options.autoPanPaddingBottomRight||Ie),kt=c.getSize(),Vn=0,Or=0;Y.x+A+Ge.x>kt.x&&(Vn=Y.x+A-kt.x+Ge.x),Y.x-Vn-ke.x<0&&(Vn=Y.x-ke.x),Y.y+T+Ge.y>kt.y&&(Or=Y.y+T-kt.y+Ge.y),Y.y-Or-ke.y<0&&(Or=Y.y-ke.y),(Vn||Or)&&(this.options.keepInView&&(this._autopanning=!0),c.fire("autopanstart").panBy([Vn,Or]))}},_getAnchor:function(){return wn(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),HT=function(c,g){return new rv(c,g)};li.mergeOptions({closePopupOnClick:!0}),li.include({openPopup:function(c,g,T){return this._initOverlay(rv,c,g,T).openOn(this),this},closePopup:function(c){return c=arguments.length?c:this._popup,c&&c.close(),this}}),Wg.include({bindPopup:function(c,g){return this._popup=this._initOverlay(rv,this._popup,c,g),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(c){return this._popup&&(this instanceof a_||(this._popup._source=this),this._popup._prepareOpen(c||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(c){return this._popup&&this._popup.setContent(c),this},getPopup:function(){return this._popup},_openPopup:function(c){if(!(!this._popup||!this._map)){$g(c);var g=c.layer||c.target;if(this._popup._source===g&&!(g instanceof u_)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(c.latlng);return}this._popup._source=g,this.openPopup(c.latlng)}},_movePopup:function(c){this._popup.setLatLng(c.latlng)},_onKeyPress:function(c){c.originalEvent.keyCode===13&&this._openPopup(c)}});var iv=Du.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(c){Du.prototype.onAdd.call(this,c),this.setOpacity(this.options.opacity),c.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(c){Du.prototype.onRemove.call(this,c),c.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var c=Du.prototype.getEvents.call(this);return this.options.permanent||(c.preclick=this.close),c},_initLayout:function(){var c="leaflet-tooltip",g=c+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ni("div",g),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+m(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(c){var g,T,A=this._map,P=this._container,Y=A.latLngToContainerPoint(A.getCenter()),Ie=A.layerPointToContainerPoint(c),ke=this.options.direction,Ge=P.offsetWidth,kt=P.offsetHeight,Vn=wn(this.options.offset),Or=this._getAnchor();ke==="top"?(g=Ge/2,T=kt):ke==="bottom"?(g=Ge/2,T=0):ke==="center"?(g=Ge/2,T=kt/2):ke==="right"?(g=0,T=kt/2):ke==="left"?(g=Ge,T=kt/2):Ie.x<Y.x?(ke="right",g=0,T=kt/2):(ke="left",g=Ge+(Vn.x+Or.x)*2,T=kt/2),c=c.subtract(wn(g,T,!0)).add(Vn).add(Or),Hn(P,"leaflet-tooltip-right"),Hn(P,"leaflet-tooltip-left"),Hn(P,"leaflet-tooltip-top"),Hn(P,"leaflet-tooltip-bottom"),tr(P,"leaflet-tooltip-"+ke),Rs(P,c)},_updatePosition:function(){var c=this._map.latLngToLayerPoint(this._latlng);this._setPosition(c)},setOpacity:function(c){this.options.opacity=c,this._container&&qs(this._container,c)},_animateZoom:function(c){var g=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center);this._setPosition(g)},_getAnchor:function(){return wn(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),W0=function(c,g){return new iv(c,g)};li.include({openTooltip:function(c,g,T){return this._initOverlay(iv,c,g,T).openOn(this),this},closeTooltip:function(c){return c.close(),this}}),Wg.include({bindTooltip:function(c,g){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(iv,this._tooltip,c,g),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(c){if(!(!c&&this._tooltipHandlersAdded)){var g=c?"off":"on",T={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?T.add=this._openTooltip:(T.mouseover=this._openTooltip,T.mouseout=this.closeTooltip,T.click=this._openTooltip,this._map?this._addFocusListeners():T.add=this._addFocusListeners),this._tooltip.options.sticky&&(T.mousemove=this._moveTooltip),this[g](T),this._tooltipHandlersAdded=!c}},openTooltip:function(c){return this._tooltip&&(this instanceof a_||(this._tooltip._source=this),this._tooltip._prepareOpen(c)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(c){return this._tooltip&&this._tooltip.setContent(c),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(c){var g=typeof c.getElement=="function"&&c.getElement();g&&(qn(g,"focus",function(){this._tooltip._source=c,this.openTooltip()},this),qn(g,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(c){var g=typeof c.getElement=="function"&&c.getElement();g&&g.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(c){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var g=this;this._map.once("moveend",function(){g._openOnceFlag=!1,g._openTooltip(c)});return}this._tooltip._source=c.layer||c.target,this.openTooltip(this._tooltip.options.sticky?c.latlng:void 0)}},_moveTooltip:function(c){var g=c.latlng,T,A;this._tooltip.options.sticky&&c.originalEvent&&(T=this._map.mouseEventToContainerPoint(c.originalEvent),A=this._map.containerPointToLayerPoint(T),g=this._map.layerPointToLatLng(A)),this._tooltip.setLatLng(g)}});var qT=l_.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(c){var g=c&&c.tagName==="DIV"?c:document.createElement("div"),T=this.options;if(T.html instanceof Element?(ya(g),g.appendChild(T.html)):g.innerHTML=T.html!==!1?T.html:"",T.bgPos){var A=wn(T.bgPos);g.style.backgroundPosition=-A.x+"px "+-A.y+"px"}return this._setIconStyles(g,"icon"),g},createShadow:function(){return null}});function K0(c){return new qT(c)}l_.Default=Xy;var Ey=Wg.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Wn.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(c){W(this,c)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(c){c._addZoomLimit(this)},onRemove:function(c){this._removeAllTiles(),ai(this._container),c._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(va(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(wu(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(c){return this.options.opacity=c,this._updateOpacity(),this},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var c=this._clampZoom(this._map.getZoom());c!==this._tileZoom&&(this._tileZoom=c,this._updateLevels()),this._update()}return this},getEvents:function(){var c={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),c.move=this._onMove),this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},createTile:function(){return document.createElement("div")},getTileSize:function(){var c=this.options.tileSize;return c instanceof jt?c:new jt(c,c)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(c){for(var g=this.getPane().children,T=-c(-1/0,1/0),A=0,P=g.length,Y;A<P;A++)Y=g[A].style.zIndex,g[A]!==this._container&&Y&&(T=c(T,+Y));isFinite(T)&&(this.options.zIndex=T+c(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Wn.ielt9){qs(this._container,this.options.opacity);var c=+new Date,g=!1,T=!1;for(var A in this._tiles){var P=this._tiles[A];if(!(!P.current||!P.loaded)){var Y=Math.min(1,(c-P.loaded)/200);qs(P.el,Y),Y<1?g=!0:(P.active?T=!0:this._onOpaqueTile(P),P.active=!0)}}T&&!this._noPrune&&this._pruneTiles(),g&&(Ce(this._fadeFrame),this._fadeFrame=Ae(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=ni("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var c=this._tileZoom,g=this.options.maxZoom;if(c!==void 0){for(var T in this._levels)T=Number(T),this._levels[T].el.children.length||T===c?(this._levels[T].el.style.zIndex=g-Math.abs(c-T),this._onUpdateLevel(T)):(ai(this._levels[T].el),this._removeTilesAtZoom(T),this._onRemoveLevel(T),delete this._levels[T]);var A=this._levels[c],P=this._map;return A||(A=this._levels[c]={},A.el=ni("div","leaflet-tile-container leaflet-zoom-animated",this._container),A.el.style.zIndex=g,A.origin=P.project(P.unproject(P.getPixelOrigin()),c).round(),A.zoom=c,this._setZoomTransform(A,P.getCenter(),P.getZoom()),f(A.el.offsetWidth),this._onCreateLevel(A)),this._level=A,A}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var c,g,T=this._map.getZoom();if(T>this.options.maxZoom||T<this.options.minZoom){this._removeAllTiles();return}for(c in this._tiles)g=this._tiles[c],g.retain=g.current;for(c in this._tiles)if(g=this._tiles[c],g.current&&!g.active){var A=g.coords;this._retainParent(A.x,A.y,A.z,A.z-5)||this._retainChildren(A.x,A.y,A.z,A.z+2)}for(c in this._tiles)this._tiles[c].retain||this._removeTile(c)}},_removeTilesAtZoom:function(c){for(var g in this._tiles)this._tiles[g].coords.z===c&&this._removeTile(g)},_removeAllTiles:function(){for(var c in this._tiles)this._removeTile(c)},_invalidateAll:function(){for(var c in this._levels)ai(this._levels[c].el),this._onRemoveLevel(Number(c)),delete this._levels[c];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(c,g,T,A){var P=Math.floor(c/2),Y=Math.floor(g/2),Ie=T-1,ke=new jt(+P,+Y);ke.z=+Ie;var Ge=this._tileCoordsToKey(ke),kt=this._tiles[Ge];return kt&&kt.active?(kt.retain=!0,!0):(kt&&kt.loaded&&(kt.retain=!0),Ie>A?this._retainParent(P,Y,Ie,A):!1)},_retainChildren:function(c,g,T,A){for(var P=2*c;P<2*c+2;P++)for(var Y=2*g;Y<2*g+2;Y++){var Ie=new jt(P,Y);Ie.z=T+1;var ke=this._tileCoordsToKey(Ie),Ge=this._tiles[ke];if(Ge&&Ge.active){Ge.retain=!0;continue}else Ge&&Ge.loaded&&(Ge.retain=!0);T+1<A&&this._retainChildren(P,Y,T+1,A)}},_resetView:function(c){var g=c&&(c.pinch||c.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),g,g)},_animateZoom:function(c){this._setView(c.center,c.zoom,!0,c.noUpdate)},_clampZoom:function(c){var g=this.options;return g.minNativeZoom!==void 0&&c<g.minNativeZoom?g.minNativeZoom:g.maxNativeZoom!==void 0&&g.maxNativeZoom<c?g.maxNativeZoom:c},_setView:function(c,g,T,A){var P=Math.round(g);this.options.maxZoom!==void 0&&P>this.options.maxZoom||this.options.minZoom!==void 0&&P<this.options.minZoom?P=void 0:P=this._clampZoom(P);var Y=this.options.updateWhenZooming&&P!==this._tileZoom;(!A||Y)&&(this._tileZoom=P,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),P!==void 0&&this._update(c),T||this._pruneTiles(),this._noPrune=!!T),this._setZoomTransforms(c,g)},_setZoomTransforms:function(c,g){for(var T in this._levels)this._setZoomTransform(this._levels[T],c,g)},_setZoomTransform:function(c,g,T){var A=this._map.getZoomScale(T,c.zoom),P=c.origin.multiplyBy(A).subtract(this._map._getNewPixelOrigin(g,T)).round();Wn.any3d?Bd(c.el,P,A):Rs(c.el,P)},_resetGrid:function(){var c=this._map,g=c.options.crs,T=this._tileSize=this.getTileSize(),A=this._tileZoom,P=this._map.getPixelWorldBounds(this._tileZoom);P&&(this._globalTileRange=this._pxBoundsToTileRange(P)),this._wrapX=g.wrapLng&&!this.options.noWrap&&[Math.floor(c.project([0,g.wrapLng[0]],A).x/T.x),Math.ceil(c.project([0,g.wrapLng[1]],A).x/T.y)],this._wrapY=g.wrapLat&&!this.options.noWrap&&[Math.floor(c.project([g.wrapLat[0],0],A).y/T.x),Math.ceil(c.project([g.wrapLat[1],0],A).y/T.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(c){var g=this._map,T=g._animatingZoom?Math.max(g._animateToZoom,g.getZoom()):g.getZoom(),A=g.getZoomScale(T,this._tileZoom),P=g.project(c,this._tileZoom).floor(),Y=g.getSize().divideBy(A*2);return new Se(P.subtract(Y),P.add(Y))},_update:function(c){var g=this._map;if(g){var T=this._clampZoom(g.getZoom());if(c===void 0&&(c=g.getCenter()),this._tileZoom!==void 0){var A=this._getTiledPixelBounds(c),P=this._pxBoundsToTileRange(A),Y=P.getCenter(),Ie=[],ke=this.options.keepBuffer,Ge=new Se(P.getBottomLeft().subtract([ke,-ke]),P.getTopRight().add([ke,-ke]));if(!(isFinite(P.min.x)&&isFinite(P.min.y)&&isFinite(P.max.x)&&isFinite(P.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var kt in this._tiles){var Vn=this._tiles[kt].coords;(Vn.z!==this._tileZoom||!Ge.contains(new jt(Vn.x,Vn.y)))&&(this._tiles[kt].current=!1)}if(Math.abs(T-this._tileZoom)>1){this._setView(c,T);return}for(var Or=P.min.y;Or<=P.max.y;Or++)for(var ii=P.min.x;ii<=P.max.x;ii++){var _u=new jt(ii,Or);if(_u.z=this._tileZoom,!!this._isValidTile(_u)){var Fa=this._tiles[this._tileCoordsToKey(_u)];Fa?Fa.current=!0:Ie.push(_u)}}if(Ie.sort(function(Ns,Vs){return Ns.distanceTo(Y)-Vs.distanceTo(Y)}),Ie.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var gg=document.createDocumentFragment();for(ii=0;ii<Ie.length;ii++)this._addTile(Ie[ii],gg);this._level.el.appendChild(gg)}}}},_isValidTile:function(c){var g=this._map.options.crs;if(!g.infinite){var T=this._globalTileRange;if(!g.wrapLng&&(c.x<T.min.x||c.x>T.max.x)||!g.wrapLat&&(c.y<T.min.y||c.y>T.max.y))return!1}if(!this.options.bounds)return!0;var A=this._tileCoordsToBounds(c);return Tn(this.options.bounds).overlaps(A)},_keyToBounds:function(c){return this._tileCoordsToBounds(this._keyToTileCoords(c))},_tileCoordsToNwSe:function(c){var g=this._map,T=this.getTileSize(),A=c.scaleBy(T),P=A.add(T),Y=g.unproject(A,c.z),Ie=g.unproject(P,c.z);return[Y,Ie]},_tileCoordsToBounds:function(c){var g=this._tileCoordsToNwSe(c),T=new vn(g[0],g[1]);return this.options.noWrap||(T=this._map.wrapLatLngBounds(T)),T},_tileCoordsToKey:function(c){return c.x+":"+c.y+":"+c.z},_keyToTileCoords:function(c){var g=c.split(":"),T=new jt(+g[0],+g[1]);return T.z=+g[2],T},_removeTile:function(c){var g=this._tiles[c];g&&(ai(g.el),delete this._tiles[c],this.fire("tileunload",{tile:g.el,coords:this._keyToTileCoords(c)}))},_initTile:function(c){tr(c,"leaflet-tile");var g=this.getTileSize();c.style.width=g.x+"px",c.style.height=g.y+"px",c.onselectstart=f,c.onmousemove=f,Wn.ielt9&&this.options.opacity<1&&qs(c,this.options.opacity)},_addTile:function(c,g){var T=this._getTilePos(c),A=this._tileCoordsToKey(c),P=this.createTile(this._wrapCoords(c),l(this._tileReady,this,c));this._initTile(P),this.createTile.length<2&&Ae(l(this._tileReady,this,c,null,P)),Rs(P,T),this._tiles[A]={el:P,coords:c,current:!0},g.appendChild(P),this.fire("tileloadstart",{tile:P,coords:c})},_tileReady:function(c,g,T){g&&this.fire("tileerror",{error:g,tile:T,coords:c});var A=this._tileCoordsToKey(c);T=this._tiles[A],T&&(T.loaded=+new Date,this._map._fadeAnimated?(qs(T.el,0),Ce(this._fadeFrame),this._fadeFrame=Ae(this._updateOpacity,this)):(T.active=!0,this._pruneTiles()),g||(tr(T.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:T.el,coords:c})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Wn.ielt9||!this._map._fadeAnimated?Ae(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(c){return c.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(c){var g=new jt(this._wrapX?h(c.x,this._wrapX):c.x,this._wrapY?h(c.y,this._wrapY):c.y);return g.z=c.z,g},_pxBoundsToTileRange:function(c){var g=this.getTileSize();return new Se(c.min.unscaleBy(g).floor(),c.max.unscaleBy(g).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var c in this._tiles)if(!this._tiles[c].loaded)return!1;return!0}});function GT(c){return new Ey(c)}var B_=Ey.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(c,g){this._url=c,g=W(this,g),g.detectRetina&&Wn.retina&&g.maxZoom>0?(g.tileSize=Math.floor(g.tileSize/2),g.zoomReverse?(g.zoomOffset--,g.minZoom=Math.min(g.maxZoom,g.minZoom+1)):(g.zoomOffset++,g.maxZoom=Math.max(g.minZoom,g.maxZoom-1)),g.minZoom=Math.max(0,g.minZoom)):g.zoomReverse?g.minZoom=Math.min(g.maxZoom,g.minZoom):g.maxZoom=Math.max(g.minZoom,g.maxZoom),typeof g.subdomains=="string"&&(g.subdomains=g.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(c,g){return this._url===c&&g===void 0&&(g=!0),this._url=c,g||this.redraw(),this},createTile:function(c,g){var T=document.createElement("img");return qn(T,"load",l(this._tileOnLoad,this,g,T)),qn(T,"error",l(this._tileOnError,this,g,T)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(T.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(T.referrerPolicy=this.options.referrerPolicy),T.alt="",T.src=this.getTileUrl(c),T},getTileUrl:function(c){var g={r:Wn.retina?"@2x":"",s:this._getSubdomain(c),x:c.x,y:c.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var T=this._globalTileRange.max.y-c.y;this.options.tms&&(g.y=T),g["-y"]=T}return ie(this._url,a(g,this.options))},_tileOnLoad:function(c,g){Wn.ielt9?setTimeout(l(c,this,null,g),0):c(null,g)},_tileOnError:function(c,g,T){var A=this.options.errorTileUrl;A&&g.getAttribute("src")!==A&&(g.src=A),c(T,g)},_onTileRemove:function(c){c.tile.onload=null},_getZoomForUrl:function(){var c=this._tileZoom,g=this.options.maxZoom,T=this.options.zoomReverse,A=this.options.zoomOffset;return T&&(c=g-c),c+A},_getSubdomain:function(c){var g=Math.abs(c.x+c.y)%this.options.subdomains.length;return this.options.subdomains[g]},_abortLoading:function(){var c,g;for(c in this._tiles)if(this._tiles[c].coords.z!==this._tileZoom&&(g=this._tiles[c].el,g.onload=f,g.onerror=f,!g.complete)){g.src=rt;var T=this._tiles[c].coords;ai(g),delete this._tiles[c],this.fire("tileabort",{tile:g,coords:T})}},_removeTile:function(c){var g=this._tiles[c];if(g)return g.el.setAttribute("src",rt),Ey.prototype._removeTile.call(this,c)},_tileReady:function(c,g,T){if(!(!this._map||T&&T.getAttribute("src")===rt))return Ey.prototype._tileReady.call(this,c,g,T)}});function Rg(c,g){return new B_(c,g)}var ov=B_.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(c,g){this._url=c;var T=a({},this.defaultWmsParams);for(var A in g)A in this.options||(T[A]=g[A]);g=W(this,g);var P=g.detectRetina&&Wn.retina?2:1,Y=this.getTileSize();T.width=Y.x*P,T.height=Y.y*P,this.wmsParams=T},onAdd:function(c){this._crs=this.options.crs||c.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var g=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[g]=this._crs.code,B_.prototype.onAdd.call(this,c)},getTileUrl:function(c){var g=this._tileCoordsToNwSe(c),T=this._crs,A=et(T.project(g[0]),T.project(g[1])),P=A.min,Y=A.max,Ie=(this._wmsVersion>=1.3&&this._crs===Y_?[P.y,P.x,Y.y,Y.x]:[P.x,P.y,Y.x,Y.y]).join(","),ke=B_.prototype.getTileUrl.call(this,c);return ke+X(this.wmsParams,ke,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Ie},setParams:function(c,g){return a(this.wmsParams,c),g||this.redraw(),this}});function Pg(c,g){return new ov(c,g)}B_.WMS=ov,Rg.wms=Pg;var zd=Wg.extend({options:{padding:.1},initialize:function(c){W(this,c),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),tr(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var c={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(c.zoomanim=this._onAnimZoom),c},_onAnimZoom:function(c){this._updateTransform(c.center,c.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(c,g){var T=this._map.getZoomScale(g,this._zoom),A=this._map.getSize().multiplyBy(.5+this.options.padding),P=this._map.project(this._center,g),Y=A.multiplyBy(-T).add(P).subtract(this._map._getNewPixelOrigin(c,g));Wn.any3d?Bd(this._container,Y,T):Rs(this._container,Y)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var c in this._layers)this._layers[c]._reset()},_onZoomEnd:function(){for(var c in this._layers)this._layers[c]._project()},_updatePaths:function(){for(var c in this._layers)this._layers[c]._update()},_update:function(){var c=this.options.padding,g=this._map.getSize(),T=this._map.containerPointToLayerPoint(g.multiplyBy(-c)).round();this._bounds=new Se(T,T.add(g.multiplyBy(1+c*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Pv=zd.extend({options:{tolerance:0},getEvents:function(){var c=zd.prototype.getEvents.call(this);return c.viewprereset=this._onViewPreReset,c},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){zd.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var c=this._container=document.createElement("canvas");qn(c,"mousemove",this._onMouseMove,this),qn(c,"click dblclick mousedown mouseup contextmenu",this._onClick,this),qn(c,"mouseout",this._handleMouseOut,this),c._leaflet_disable_events=!0,this._ctx=c.getContext("2d")},_destroyContainer:function(){Ce(this._redrawRequest),delete this._ctx,ai(this._container),Yr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var c;this._redrawBounds=null;for(var g in this._layers)c=this._layers[g],c._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){zd.prototype._update.call(this);var c=this._bounds,g=this._container,T=c.getSize(),A=Wn.retina?2:1;Rs(g,c.min),g.width=A*T.x,g.height=A*T.y,g.style.width=T.x+"px",g.style.height=T.y+"px",Wn.retina&&this._ctx.scale(2,2),this._ctx.translate(-c.min.x,-c.min.y),this.fire("update")}},_reset:function(){zd.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(c){this._updateDashArray(c),this._layers[m(c)]=c;var g=c._order={layer:c,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=g),this._drawLast=g,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(c){this._requestRedraw(c)},_removePath:function(c){var g=c._order,T=g.next,A=g.prev;T?T.prev=A:this._drawLast=A,A?A.next=T:this._drawFirst=T,delete c._order,delete this._layers[m(c)],this._requestRedraw(c)},_updatePath:function(c){this._extendRedrawBounds(c),c._project(),c._update(),this._requestRedraw(c)},_updateStyle:function(c){this._updateDashArray(c),this._requestRedraw(c)},_updateDashArray:function(c){if(typeof c.options.dashArray=="string"){var g=c.options.dashArray.split(/[, ]+/),T=[],A,P;for(P=0;P<g.length;P++){if(A=Number(g[P]),isNaN(A))return;T.push(A)}c.options._dashArray=T}else c.options._dashArray=c.options.dashArray},_requestRedraw:function(c){this._map&&(this._extendRedrawBounds(c),this._redrawRequest=this._redrawRequest||Ae(this._redraw,this))},_extendRedrawBounds:function(c){if(c._pxBounds){var g=(c.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Se,this._redrawBounds.extend(c._pxBounds.min.subtract([g,g])),this._redrawBounds.extend(c._pxBounds.max.add([g,g]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var c=this._redrawBounds;if(c){var g=c.getSize();this._ctx.clearRect(c.min.x,c.min.y,g.x,g.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var c,g=this._redrawBounds;if(this._ctx.save(),g){var T=g.getSize();this._ctx.beginPath(),this._ctx.rect(g.min.x,g.min.y,T.x,T.y),this._ctx.clip()}this._drawing=!0;for(var A=this._drawFirst;A;A=A.next)c=A.layer,(!g||c._pxBounds&&c._pxBounds.intersects(g))&&c._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(c,g){if(this._drawing){var T,A,P,Y,Ie=c._parts,ke=Ie.length,Ge=this._ctx;if(ke){for(Ge.beginPath(),T=0;T<ke;T++){for(A=0,P=Ie[T].length;A<P;A++)Y=Ie[T][A],Ge[A?"lineTo":"moveTo"](Y.x,Y.y);g&&Ge.closePath()}this._fillStroke(Ge,c)}}},_updateCircle:function(c){if(!(!this._drawing||c._empty())){var g=c._point,T=this._ctx,A=Math.max(Math.round(c._radius),1),P=(Math.max(Math.round(c._radiusY),1)||A)/A;P!==1&&(T.save(),T.scale(1,P)),T.beginPath(),T.arc(g.x,g.y/P,A,0,Math.PI*2,!1),P!==1&&T.restore(),this._fillStroke(T,c)}},_fillStroke:function(c,g){var T=g.options;T.fill&&(c.globalAlpha=T.fillOpacity,c.fillStyle=T.fillColor||T.color,c.fill(T.fillRule||"evenodd")),T.stroke&&T.weight!==0&&(c.setLineDash&&c.setLineDash(g.options&&g.options._dashArray||[]),c.globalAlpha=T.opacity,c.lineWidth=T.weight,c.strokeStyle=T.color,c.lineCap=T.lineCap,c.lineJoin=T.lineJoin,c.stroke())},_onClick:function(c){for(var g=this._map.mouseEventToLayerPoint(c),T,A,P=this._drawFirst;P;P=P.next)T=P.layer,T.options.interactive&&T._containsPoint(g)&&(!(c.type==="click"||c.type==="preclick")||!this._map._draggableMoved(T))&&(A=T);this._fireEvent(A?[A]:!1,c)},_onMouseMove:function(c){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var g=this._map.mouseEventToLayerPoint(c);this._handleMouseHover(c,g)}},_handleMouseOut:function(c){var g=this._hoveredLayer;g&&(Hn(this._container,"leaflet-interactive"),this._fireEvent([g],c,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(c,g){if(!this._mouseHoverThrottled){for(var T,A,P=this._drawFirst;P;P=P.next)T=P.layer,T.options.interactive&&T._containsPoint(g)&&(A=T);A!==this._hoveredLayer&&(this._handleMouseOut(c),A&&(tr(this._container,"leaflet-interactive"),this._fireEvent([A],c,"mouseover"),this._hoveredLayer=A)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,c),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(c,g,T){this._map._fireDOMEvent(g,T||g.type,c)},_bringToFront:function(c){var g=c._order;if(g){var T=g.next,A=g.prev;if(T)T.prev=A;else return;A?A.next=T:T&&(this._drawFirst=T),g.prev=this._drawLast,this._drawLast.next=g,g.next=null,this._drawLast=g,this._requestRedraw(c)}},_bringToBack:function(c){var g=c._order;if(g){var T=g.next,A=g.prev;if(A)A.next=T;else return;T?T.prev=A:A&&(this._drawLast=A),g.prev=null,g.next=this._drawFirst,this._drawFirst.prev=g,this._drawFirst=g,this._requestRedraw(c)}}});function sv(c){return Wn.canvas?new Pv(c):null}var $_=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(c){return document.createElement("<lvml:"+c+' class="lvml">')}}catch{}return function(c){return document.createElement("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Hb={_initContainer:function(){this._container=ni("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(zd.prototype._update.call(this),this.fire("update"))},_initPath:function(c){var g=c._container=$_("shape");tr(g,"leaflet-vml-shape "+(this.options.className||"")),g.coordsize="1 1",c._path=$_("path"),g.appendChild(c._path),this._updateStyle(c),this._layers[m(c)]=c},_addPath:function(c){var g=c._container;this._container.appendChild(g),c.options.interactive&&c.addInteractiveTarget(g)},_removePath:function(c){var g=c._container;ai(g),c.removeInteractiveTarget(g),delete this._layers[m(c)]},_updateStyle:function(c){var g=c._stroke,T=c._fill,A=c.options,P=c._container;P.stroked=!!A.stroke,P.filled=!!A.fill,A.stroke?(g||(g=c._stroke=$_("stroke")),P.appendChild(g),g.weight=A.weight+"px",g.color=A.color,g.opacity=A.opacity,A.dashArray?g.dashStyle=Pe(A.dashArray)?A.dashArray.join(" "):A.dashArray.replace(/( *, *)/g," "):g.dashStyle="",g.endcap=A.lineCap.replace("butt","flat"),g.joinstyle=A.lineJoin):g&&(P.removeChild(g),c._stroke=null),A.fill?(T||(T=c._fill=$_("fill")),P.appendChild(T),T.color=A.fillColor||A.color,T.opacity=A.fillOpacity):T&&(P.removeChild(T),c._fill=null)},_updateCircle:function(c){var g=c._point.round(),T=Math.round(c._radius),A=Math.round(c._radiusY||T);this._setPath(c,c._empty()?"M0 0":"AL "+g.x+","+g.y+" "+T+","+A+" 0,"+65535*360)},_setPath:function(c,g){c._path.v=g},_bringToFront:function(c){va(c._container)},_bringToBack:function(c){wu(c._container)}},c_=Wn.vml?$_:xd,wy=zd.extend({_initContainer:function(){this._container=c_("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=c_("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ai(this._container),Yr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){zd.prototype._update.call(this);var c=this._bounds,g=c.getSize(),T=this._container;(!this._svgSize||!this._svgSize.equals(g))&&(this._svgSize=g,T.setAttribute("width",g.x),T.setAttribute("height",g.y)),Rs(T,c.min),T.setAttribute("viewBox",[c.min.x,c.min.y,g.x,g.y].join(" ")),this.fire("update")}},_initPath:function(c){var g=c._path=c_("path");c.options.className&&tr(g,c.options.className),c.options.interactive&&tr(g,"leaflet-interactive"),this._updateStyle(c),this._layers[m(c)]=c},_addPath:function(c){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(c._path),c.addInteractiveTarget(c._path)},_removePath:function(c){ai(c._path),c.removeInteractiveTarget(c._path),delete this._layers[m(c)]},_updatePath:function(c){c._project(),c._update()},_updateStyle:function(c){var g=c._path,T=c.options;g&&(T.stroke?(g.setAttribute("stroke",T.color),g.setAttribute("stroke-opacity",T.opacity),g.setAttribute("stroke-width",T.weight),g.setAttribute("stroke-linecap",T.lineCap),g.setAttribute("stroke-linejoin",T.lineJoin),T.dashArray?g.setAttribute("stroke-dasharray",T.dashArray):g.removeAttribute("stroke-dasharray"),T.dashOffset?g.setAttribute("stroke-dashoffset",T.dashOffset):g.removeAttribute("stroke-dashoffset")):g.setAttribute("stroke","none"),T.fill?(g.setAttribute("fill",T.fillColor||T.color),g.setAttribute("fill-opacity",T.fillOpacity),g.setAttribute("fill-rule",T.fillRule||"evenodd")):g.setAttribute("fill","none"))},_updatePoly:function(c,g){this._setPath(c,Ca(c._parts,g))},_updateCircle:function(c){var g=c._point,T=Math.max(Math.round(c._radius),1),A=Math.max(Math.round(c._radiusY),1)||T,P="a"+T+","+A+" 0 1,0 ",Y=c._empty()?"M0 0":"M"+(g.x-T)+","+g.y+P+T*2+",0 "+P+-T*2+",0 ";this._setPath(c,Y)},_setPath:function(c,g){c._path.setAttribute("d",g)},_bringToFront:function(c){va(c._path)},_bringToBack:function(c){wu(c._path)}});Wn.vml&&wy.include(Hb);function av(c){return Wn.svg||Wn.vml?new wy(c):null}li.include({getRenderer:function(c){var g=c.options.renderer||this._getPaneRenderer(c.options.pane)||this.options.renderer||this._renderer;return g||(g=this._renderer=this._createRenderer()),this.hasLayer(g)||this.addLayer(g),g},_getPaneRenderer:function(c){if(c==="overlayPane"||c===void 0)return!1;var g=this._paneRenderers[c];return g===void 0&&(g=this._createRenderer({pane:c}),this._paneRenderers[c]=g),g},_createRenderer:function(c){return this.options.preferCanvas&&sv(c)||av(c)}});var X_=yy.extend({initialize:function(c,g){yy.prototype.initialize.call(this,this._boundsToLatLngs(c),g)},setBounds:function(c){return this.setLatLngs(this._boundsToLatLngs(c))},_boundsToLatLngs:function(c){return c=Tn(c),[c.getSouthWest(),c.getNorthWest(),c.getNorthEast(),c.getSouthEast()]}});function Z0(c,g){return new X_(c,g)}wy.create=c_,wy.pointsToPath=Ca,A_.geometryToLayer=Cu,A_.coordsToLatLng=Av,A_.coordsToLatLngs=ev,A_.latLngToCoords=Iv,A_.latLngsToCoords=tv,A_.getFeature=k_,A_.asFeature=Sv,li.mergeOptions({boxZoom:!0});var Gd=eg.extend({initialize:function(c){this._map=c,this._container=c._container,this._pane=c._panes.overlayPane,this._resetStateTimeout=0,c.on("unload",this._destroy,this)},addHooks:function(){qn(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Yr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ai(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(c){if(!c.shiftKey||c.which!==1&&c.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),pu(),Ag(),this._startPoint=this._map.mouseEventToContainerPoint(c),qn(document,{contextmenu:$g,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(c){this._moved||(this._moved=!0,this._box=ni("div","leaflet-zoom-box",this._container),tr(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(c);var g=new Se(this._point,this._startPoint),T=g.getSize();Rs(this._box,g.min),this._box.style.width=T.x+"px",this._box.style.height=T.y+"px"},_finish:function(){this._moved&&(ai(this._box),Hn(this._container,"leaflet-crosshair")),Pa(),Bg(),Yr(document,{contextmenu:$g,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(c){if(!(c.which!==1&&c.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var g=new vn(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(g).fire("boxzoomend",{boxZoomBounds:g})}},_onKeyDown:function(c){c.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});li.addInitHook("addHandler","boxZoom",Gd),li.mergeOptions({doubleClickZoom:!0});var Ov=eg.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(c){var g=this._map,T=g.getZoom(),A=g.options.zoomDelta,P=c.originalEvent.shiftKey?T-A:T+A;g.options.doubleClickZoom==="center"?g.setZoom(P):g.setZoomAround(c.containerPoint,P)}});li.addInitHook("addHandler","doubleClickZoom",Ov),li.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var h_=eg.extend({addHooks:function(){if(!this._draggable){var c=this._map;this._draggable=new qg(c._mapPane,c._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),c.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),c.on("zoomend",this._onZoomEnd,this),c.whenReady(this._onZoomEnd,this))}tr(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Hn(this._map._container,"leaflet-grab"),Hn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var c=this._map;if(c._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var g=Tn(this._map.options.maxBounds);this._offsetLimit=et(this._map.latLngToContainerPoint(g.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(g.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;c.fire("movestart").fire("dragstart"),c.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(c){if(this._map.options.inertia){var g=this._lastTime=+new Date,T=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(T),this._times.push(g),this._prunePositions(g)}this._map.fire("move",c).fire("drag",c)},_prunePositions:function(c){for(;this._positions.length>1&&c-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var c=this._map.getSize().divideBy(2),g=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=g.subtract(c).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(c,g){return c-(c-g)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var c=this._draggable._newPos.subtract(this._draggable._startPos),g=this._offsetLimit;c.x<g.min.x&&(c.x=this._viscousLimit(c.x,g.min.x)),c.y<g.min.y&&(c.y=this._viscousLimit(c.y,g.min.y)),c.x>g.max.x&&(c.x=this._viscousLimit(c.x,g.max.x)),c.y>g.max.y&&(c.y=this._viscousLimit(c.y,g.max.y)),this._draggable._newPos=this._draggable._startPos.add(c)}},_onPreDragWrap:function(){var c=this._worldWidth,g=Math.round(c/2),T=this._initialWorldOffset,A=this._draggable._newPos.x,P=(A-g+T)%c+g-T,Y=(A+g+T)%c-g-T,Ie=Math.abs(P+T)<Math.abs(Y+T)?P:Y;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Ie},_onDragEnd:function(c){var g=this._map,T=g.options,A=!T.inertia||c.noInertia||this._times.length<2;if(g.fire("dragend",c),A)g.fire("moveend");else{this._prunePositions(+new Date);var P=this._lastPos.subtract(this._positions[0]),Y=(this._lastTime-this._times[0])/1e3,Ie=T.easeLinearity,ke=P.multiplyBy(Ie/Y),Ge=ke.distanceTo([0,0]),kt=Math.min(T.inertiaMaxSpeed,Ge),Vn=ke.multiplyBy(kt/Ge),Or=kt/(T.inertiaDeceleration*Ie),ii=Vn.multiplyBy(-Or/2).round();!ii.x&&!ii.y?g.fire("moveend"):(ii=g._limitOffset(ii,g.options.maxBounds),Ae(function(){g.panBy(ii,{duration:Or,easeLinearity:Ie,noMoveStart:!0,animate:!0})}))}}});li.addInitHook("addHandler","dragging",h_),li.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Wb=eg.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(c){this._map=c,this._setPanDelta(c.options.keyboardPanDelta),this._setZoomDelta(c.options.zoomDelta)},addHooks:function(){var c=this._map._container;c.tabIndex<=0&&(c.tabIndex="0"),qn(c,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Yr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var c=document.body,g=document.documentElement,T=c.scrollTop||g.scrollTop,A=c.scrollLeft||g.scrollLeft;this._map._container.focus(),window.scrollTo(A,T)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(c){var g=this._panKeys={},T=this.keyCodes,A,P;for(A=0,P=T.left.length;A<P;A++)g[T.left[A]]=[-1*c,0];for(A=0,P=T.right.length;A<P;A++)g[T.right[A]]=[c,0];for(A=0,P=T.down.length;A<P;A++)g[T.down[A]]=[0,c];for(A=0,P=T.up.length;A<P;A++)g[T.up[A]]=[0,-1*c]},_setZoomDelta:function(c){var g=this._zoomKeys={},T=this.keyCodes,A,P;for(A=0,P=T.zoomIn.length;A<P;A++)g[T.zoomIn[A]]=c;for(A=0,P=T.zoomOut.length;A<P;A++)g[T.zoomOut[A]]=-c},_addHooks:function(){qn(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Yr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(c){if(!(c.altKey||c.ctrlKey||c.metaKey)){var g=c.keyCode,T=this._map,A;if(g in this._panKeys){if(!T._panAnim||!T._panAnim._inProgress)if(A=this._panKeys[g],c.shiftKey&&(A=wn(A).multiplyBy(3)),T.options.maxBounds&&(A=T._limitOffset(wn(A),T.options.maxBounds)),T.options.worldCopyJump){var P=T.wrapLatLng(T.unproject(T.project(T.getCenter()).add(A)));T.panTo(P)}else T.panBy(A)}else if(g in this._zoomKeys)T.setZoom(T.getZoom()+(c.shiftKey?3:1)*this._zoomKeys[g]);else if(g===27&&T._popup&&T._popup.options.closeOnEscapeKey)T.closePopup();else return;$g(c)}}});li.addInitHook("addHandler","keyboard",Wb),li.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var lv=eg.extend({addHooks:function(){qn(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Yr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(c){var g=nu(c),T=this._map.options.wheelDebounceTime;this._delta+=g,this._lastMousePos=this._map.mouseEventToContainerPoint(c),this._startTime||(this._startTime=+new Date);var A=Math.max(T-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),A),$g(c)},_performZoom:function(){var c=this._map,g=c.getZoom(),T=this._map.options.zoomSnap||0;c._stop();var A=this._delta/(this._map.options.wheelPxPerZoomLevel*4),P=4*Math.log(2/(1+Math.exp(-Math.abs(A))))/Math.LN2,Y=T?Math.ceil(P/T)*T:P,Ie=c._limitZoom(g+(this._delta>0?Y:-Y))-g;this._delta=0,this._startTime=null,Ie&&(c.options.scrollWheelZoom==="center"?c.setZoom(g+Ie):c.setZoomAround(this._lastMousePos,g+Ie))}});li.addInitHook("addHandler","scrollWheelZoom",lv);var Q_=600;li.mergeOptions({tapHold:Wn.touchNative&&Wn.safari&&Wn.mobile,tapTolerance:15});var Cv=eg.extend({addHooks:function(){qn(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Yr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(c){if(clearTimeout(this._holdTimeout),c.touches.length===1){var g=c.touches[0];this._startPos=this._newPos=new jt(g.clientX,g.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(qn(document,"touchend",ha),qn(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",g))},this),Q_),qn(document,"touchend touchcancel contextmenu",this._cancel,this),qn(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function c(){Yr(document,"touchend",ha),Yr(document,"touchend touchcancel",c)},_cancel:function(){clearTimeout(this._holdTimeout),Yr(document,"touchend touchcancel contextmenu",this._cancel,this),Yr(document,"touchmove",this._onMove,this)},_onMove:function(c){var g=c.touches[0];this._newPos=new jt(g.clientX,g.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(c,g){var T=new MouseEvent(c,{bubbles:!0,cancelable:!0,view:window,screenX:g.screenX,screenY:g.screenY,clientX:g.clientX,clientY:g.clientY});T._simulated=!0,g.target.dispatchEvent(T)}});li.addInitHook("addHandler","tapHold",Cv),li.mergeOptions({touchZoom:Wn.touch,bounceAtZoomLimits:!0});var eT=eg.extend({addHooks:function(){tr(this._map._container,"leaflet-touch-zoom"),qn(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Hn(this._map._container,"leaflet-touch-zoom"),Yr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(c){var g=this._map;if(!(!c.touches||c.touches.length!==2||g._animatingZoom||this._zooming)){var T=g.mouseEventToContainerPoint(c.touches[0]),A=g.mouseEventToContainerPoint(c.touches[1]);this._centerPoint=g.getSize()._divideBy(2),this._startLatLng=g.containerPointToLatLng(this._centerPoint),g.options.touchZoom!=="center"&&(this._pinchStartLatLng=g.containerPointToLatLng(T.add(A)._divideBy(2))),this._startDist=T.distanceTo(A),this._startZoom=g.getZoom(),this._moved=!1,this._zooming=!0,g._stop(),qn(document,"touchmove",this._onTouchMove,this),qn(document,"touchend touchcancel",this._onTouchEnd,this),ha(c)}},_onTouchMove:function(c){if(!(!c.touches||c.touches.length!==2||!this._zooming)){var g=this._map,T=g.mouseEventToContainerPoint(c.touches[0]),A=g.mouseEventToContainerPoint(c.touches[1]),P=T.distanceTo(A)/this._startDist;if(this._zoom=g.getScaleZoom(P,this._startZoom),!g.options.bounceAtZoomLimits&&(this._zoom<g.getMinZoom()&&P<1||this._zoom>g.getMaxZoom()&&P>1)&&(this._zoom=g._limitZoom(this._zoom)),g.options.touchZoom==="center"){if(this._center=this._startLatLng,P===1)return}else{var Y=T._add(A)._divideBy(2)._subtract(this._centerPoint);if(P===1&&Y.x===0&&Y.y===0)return;this._center=g.unproject(g.project(this._pinchStartLatLng,this._zoom).subtract(Y),this._zoom)}this._moved||(g._moveStart(!0,!1),this._moved=!0),Ce(this._animRequest);var Ie=l(g._move,g,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Ae(Ie,this,!0),ha(c)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Ce(this._animRequest),Yr(document,"touchmove",this._onTouchMove,this),Yr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});li.addInitHook("addHandler","touchZoom",eT),li.BoxZoom=Gd,li.DoubleClickZoom=Ov,li.Drag=h_,li.Keyboard=Wb,li.ScrollWheelZoom=lv,li.TapHold=Cv,li.TouchZoom=eT,n.Bounds=Se,n.Browser=Wn,n.CRS=Lr,n.Canvas=Pv,n.Circle=wv,n.CircleMarker=_y,n.Class=Hr,n.Control=Iu,n.DivIcon=qT,n.DivOverlay=Du,n.DomEvent=s_,n.DomUtil=nr,n.Draggable=qg,n.Evented=An,n.FeatureGroup=a_,n.GeoJSON=A_,n.GridLayer=Ey,n.Handler=eg,n.Icon=l_,n.ImageOverlay=by,n.LatLng=xn,n.LatLngBounds=vn,n.Layer=Wg,n.LayerGroup=gy,n.LineUtil=Ig,n.Map=li,n.Marker=Jy,n.Mixin=Tv,n.Path=u_,n.Point=jt,n.PolyUtil=M_,n.Polygon=yy,n.Polyline=w_,n.Popup=rv,n.PosAnimation=b_,n.Projection=Gg,n.Rectangle=X_,n.Renderer=zd,n.SVG=wy,n.SVGOverlay=xv,n.TileLayer=B_,n.Tooltip=iv,n.Transformation=Ea,n.Util=Te,n.VideoOverlay=U_,n.bind=l,n.bounds=et,n.canvas=sv,n.circle=$T,n.circleMarker=BT,n.control=$d,n.divIcon=K0,n.extend=a,n.featureGroup=FT,n.geoJSON=Rv,n.geoJson=nv,n.gridLayer=GT,n.icon=Yy,n.imageOverlay=zT,n.latLng=Sn,n.latLngBounds=Tn,n.layerGroup=H0,n.map=L_,n.marker=UT,n.point=wn,n.polygon=G0,n.polyline=q0,n.popup=HT,n.rectangle=Z0,n.setOptions=W,n.stamp=m,n.svg=av,n.svgOverlay=jT,n.tileLayer=Rg,n.tooltip=W0,n.transformation=$a,n.version=r,n.videoOverlay=Ty;var tT=window.L;n.noConflict=function(){return window.L=tT,this},window.L=n}))})(leafletSrc$1,leafletSrc$1.exports)),leafletSrc$1.exports}var leafletSrcExports=requireLeafletSrc();const L$1=getDefaultExportFromCjs(leafletSrcExports);function createElementObject(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function createElementHook(t,e){return e==null?function(r,a){const i=reactExports.useRef(void 0);return i.current||(i.current=t(r,a)),i}:function(r,a){const i=reactExports.useRef(void 0);i.current||(i.current=t(r,a));const l=reactExports.useRef(r),{instance:p}=i.current;return reactExports.useEffect(function(){l.current!==r&&(e(p,r,l.current),l.current=r)},[p,r,e]),i}}function useLayerLifecycle(t,e){reactExports.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){e.layerContainer?.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function createLayerHook(t){return function(n){const r=useLeafletContext(),a=t(withPane(n,r),r);return useAttribution(r.map,n.attribution),useEventHandlers(a.current,n.eventHandlers),useLayerLifecycle(a.current,r),a}}function createLayerComponent(t,e){const n=createElementHook(t,e),r=createLayerHook(n);return createContainerComponent(r)}function createOverlayComponent(t,e){const n=createElementHook(t),r=createDivOverlayHook(n,e);return createDivOverlayComponent(r)}function createTileLayerComponent(t,e){const n=createElementHook(t,e),r=createLayerHook(n);return createLeafComponent(r)}function updateGridLayer(t,e,n){const{opacity:r,zIndex:a}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),a!=null&&a!==n.zIndex&&t.setZIndex(a)}function useMap(){return useLeafletContext().map}function MapContainerComponent({bounds:t,boundsOptions:e,center:n,children:r,className:a,id:i,placeholder:l,style:p,whenReady:m,zoom:s,...h},f){const[v]=reactExports.useState({className:a,id:i,style:p}),[I,G]=reactExports.useState(null),W=reactExports.useRef(void 0);reactExports.useImperativeHandle(f,()=>I?.map??null,[I]);const X=reactExports.useCallback(ie=>{if(ie!==null&&!W.current){const Pe=new leafletSrcExports.Map(ie,h);W.current=Pe,n!=null&&s!=null?Pe.setView(n,s):t!=null&&Pe.fitBounds(t,e),m!=null&&Pe.whenReady(m),G(createLeafletContext(Pe))}},[]);reactExports.useEffect(()=>()=>{I?.map.remove()},[I]);const ge=I?React.createElement(LeafletContext,{value:I},r):l??null;return React.createElement("div",{...v,ref:X},ge)}const MapContainer=reactExports.forwardRef(MapContainerComponent),Marker=createLayerComponent(function t({position:e,...n},r){const a=new leafletSrcExports.Marker(e,n);return createElementObject(a,extendContext(r,{overlayContainer:a}))},function t(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),Popup=createOverlayComponent(function t(e,n){const r=new leafletSrcExports.Popup(e,n.overlayContainer);return createElementObject(r,n)},function t(e,n,{position:r},a){reactExports.useEffect(function(){const{instance:l}=e;function p(s){s.popup===l&&(l.update(),a(!0))}function m(s){s.popup===l&&a(!1)}return n.map.on({popupopen:p,popupclose:m}),n.overlayContainer==null?(r!=null&&l.setLatLng(r),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){n.map.off({popupopen:p,popupclose:m}),n.overlayContainer?.unbindPopup(),n.map.removeLayer(l)}},[e,n,a,r])}),TileLayer=createTileLayerComponent(function t({url:e,...n},r){const a=new leafletSrcExports.TileLayer(e,withPane(n,r));return createElementObject(a,r)},function t(e,n,r){updateGridLayer(e,n,r);const{url:a}=n;a!=null&&a!==r.url&&e.setUrl(a)}),formatTime=t=>{if(!t)return"No time";if(t.toDate)return t.toDate().toLocaleString();if(t instanceof Date)return t.toLocaleString();try{return new Date(t).toLocaleString()}catch{return"Invalid time"}},redIcon=new L$1.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png",iconSize:[30,48],iconAnchor:[0,48],popupAnchor:[15,-40],shadowSize:[48,48]}),blueIcon=new L$1.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-blue.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});function RecenterMap({coords:t}){const e=useMap();return reactExports.useEffect(()=>{t&&typeof t.latitude=="number"&&typeof t.longitude=="number"&&e.flyTo([t.latitude,t.longitude],18)},[t,e]),null}function RecenterButton({coords:t}){const e=useMap(),n=r=>{r.stopPropagation(),t&&typeof t.latitude=="number"&&typeof t.longitude=="number"&&e.flyTo([t.latitude,t.longitude],e.getZoom())};return jsxRuntimeExports.jsx("div",{style:{position:"absolute",bottom:"20px",right:"20px",zIndex:1e3},children:jsxRuntimeExports.jsx("button",{className:"btn btn-light",onClick:n,style:{boxShadow:"0 2px 5px rgba(0, 0, 0, 0.3)",borderRadius:"50%",width:"40px",height:"40px",border:"none",background:"#fff"},children:""})})}function MapView({alerts:t,focusCoords:e,focusedAlertId:n}){const r={latitude:14.599512,longitude:120.984222},[a,i]=reactExports.useState(null),l=React.useRef({});reactExports.useEffect(()=>{if(!navigator.geolocation){i(r);return}navigator.geolocation.getCurrentPosition(m=>{const s={latitude:m.coords.latitude,longitude:m.coords.longitude};i(s),localStorage.setItem("lastLocation",JSON.stringify(s))},m=>{if(console.warn("GPS Error:",m.message),m.code===1){i(r);return}const s=localStorage.getItem("lastLocation");if(s)try{const h=JSON.parse(s);if(h.latitude&&h.longitude){i(h);return}}catch{}i(r)},{enableHighAccuracy:!0,timeout:8e3,maximumAge:1e4})},[]),reactExports.useEffect(()=>{n&&l.current[n]&&l.current[n].openPopup()},[n]);const p=a&&typeof a.latitude=="number"&&typeof a.longitude=="number"?[a.latitude,a.longitude]:[r.latitude,r.longitude];return jsxRuntimeExports.jsxs(MapContainer,{center:p,zoom:15,style:{height:"100%",width:"100%"},children:[jsxRuntimeExports.jsx(TileLayer,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap contributors"}),jsxRuntimeExports.jsx(RecenterMap,{coords:e||a}),jsxRuntimeExports.jsx(RecenterButton,{coords:a||r}),a&&typeof a.latitude=="number"&&typeof a.longitude=="number"&&jsxRuntimeExports.jsx(Marker,{position:[a.latitude,a.longitude],icon:redIcon,children:jsxRuntimeExports.jsxs(Popup,{children:[a.latitude===r.latitude&&a.longitude===r.longitude?" Fallback location used (GPS denied)":" You are here",jsxRuntimeExports.jsx("br",{}),"(",a.latitude.toFixed(4),","," ",a.longitude.toFixed(4),")"]})}),t.map(m=>{const s=m?.coords?.latitude??null,h=m?.coords?.longitude??null;return typeof s!="number"||typeof h!="number"?null:jsxRuntimeExports.jsx(Marker,{position:[s,h],icon:blueIcon,ref:f=>l.current[m.id]=f,children:jsxRuntimeExports.jsxs(Popup,{children:[jsxRuntimeExports.jsx("strong",{children:m.message})," ",jsxRuntimeExports.jsx("br",{}),"From: ",m.user," ",jsxRuntimeExports.jsx("br",{}),"Time: ",formatTime(m.time)," ",jsxRuntimeExports.jsx("br",{}),"Urgency: ",m.urgency_level||"N/A"]})},m.id)})]})}function History(){const[t,e]=reactExports.useState([]),[n,r]=reactExports.useState("all"),[a,i]=reactExports.useState(!1),[l,p]=reactExports.useState(null),[m,s]=reactExports.useState(null),h=useNavigate();reactExports.useEffect(()=>{(async()=>{try{const G=(await getDocs(collection(db$2,"Alerts"))).docs.map(W=>{const X=W.data();return{id:W.id,message:X.message||"No message",user:X.user||"Unknown",coords:X.coords||{},time:X.time?new Date(X.time):null,category:X.category||"not available",urgency_level:X.urgency_level||"not available"}});G.sort((W,X)=>{const ge=W.time?W.time.getTime():0;return(X.time?X.time.getTime():0)-ge}),e(G)}catch(I){console.error("Error fetching alerts:",I)}})()},[]);const f=v=>{if(n==="all")return v;const I=new Date;return v.filter(G=>{if(!G.time)return!1;const W=I-G.time;return n==="24h"?W<=1440*60*1e3:n==="7d"?W<=10080*60*1e3:!0})};return jsxRuntimeExports.jsxs("div",{className:"history-page",children:[jsxRuntimeExports.jsx("div",{className:"map-container",children:jsxRuntimeExports.jsx(MapView,{alerts:f(t),focusCoords:l,focusedAlertId:m})}),jsxRuntimeExports.jsx("div",{className:"ui-overlay",children:jsxRuntimeExports.jsxs("div",{className:"top-buttons",children:[jsxRuntimeExports.jsx("button",{className:"viewButton",onClick:()=>h("/home"),children:"Go Back"}),jsxRuntimeExports.jsx("button",{className:"viewButton",onClick:()=>i(!0),children:"Alert History"})]})}),jsxRuntimeExports.jsx("div",{className:`popup-overlay ${a?"active":""}`,onClick:()=>i(!1),children:jsxRuntimeExports.jsxs("div",{className:"popup-content",onClick:v=>v.stopPropagation(),children:[jsxRuntimeExports.jsx("h2",{children:"Alert History"}),jsxRuntimeExports.jsxs("p",{className:"warningText",children:["Classification results may sometimes be incorrect",jsxRuntimeExports.jsx("br",{})," Always rely on the full message for proper interpretation"]}),jsxRuntimeExports.jsxs("div",{className:"filter",children:[jsxRuntimeExports.jsx("button",{className:n==="all"?"active":"",onClick:()=>r("all"),children:"All"}),jsxRuntimeExports.jsx("button",{className:n==="24h"?"active":"",onClick:()=>r("24h"),children:"Last 24 Hours"}),jsxRuntimeExports.jsx("button",{className:n==="7d"?"active":"",onClick:()=>r("7d"),children:"Last 7 Days"})]}),jsxRuntimeExports.jsx("div",{className:"alertBox",children:f(t).length===0?jsxRuntimeExports.jsx("p",{children:"No alerts found"}):jsxRuntimeExports.jsx("ol",{children:f(t).map(v=>jsxRuntimeExports.jsxs("li",{onClick:()=>{v.coords&&v.coords.latitude&&(p(v.coords),s(v.id),i(!1))},style:{cursor:"pointer"},children:[jsxRuntimeExports.jsx("strong",{children:v.message}),jsxRuntimeExports.jsxs("div",{className:"details",children:["Category: ",v.category," ",jsxRuntimeExports.jsx("br",{}),"Urgency Level: ",v.urgency_level,jsxRuntimeExports.jsx("br",{}),"From: ",v.user," ",jsxRuntimeExports.jsx("br",{}),"Location: ",v.coords.latitude,","," ",v.coords.longitude," ",jsxRuntimeExports.jsx("br",{}),"Time:"," ",v.time?v.time.toLocaleString():"No time provided"]})]},v.id))})}),jsxRuntimeExports.jsx("button",{className:"closeButton",onClick:()=>i(!1),children:"Close"})]})})]})}function App(){return jsxRuntimeExports.jsx(HashRouter,{children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Entry,{})}),jsxRuntimeExports.jsx(Route,{path:"/home",element:jsxRuntimeExports.jsx(Home,{})}),jsxRuntimeExports.jsx(Route,{path:"/reports",element:jsxRuntimeExports.jsx(History,{})})]})})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
